var a1=Object.defineProperty;var u1=(r,e,t)=>e in r?a1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var wm=(r,e,t)=>u1(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();var th={exports:{}},Mo={},nh={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function c1(){if(Cm)return Se;Cm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=_&&T[_]||T["@@iterator"],typeof T=="function"?T:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function C(T,N,re){this.props=T,this.context=N,this.refs=w,this.updater=re||x}C.prototype.isReactComponent={},C.prototype.setState=function(T,N){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,N,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function I(){}I.prototype=C.prototype;function R(T,N,re){this.props=T,this.context=N,this.refs=w,this.updater=re||x}var k=R.prototype=new I;k.constructor=R,E(k,C.prototype),k.isPureReactComponent=!0;var M=Array.isArray,P=Object.prototype.hasOwnProperty,U={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function b(T,N,re){var z,ue={},he=null,pe=null;if(N!=null)for(z in N.ref!==void 0&&(pe=N.ref),N.key!==void 0&&(he=""+N.key),N)P.call(N,z)&&!Y.hasOwnProperty(z)&&(ue[z]=N[z]);var xe=arguments.length-2;if(xe===1)ue.children=re;else if(1<xe){for(var Re=Array(xe),ze=0;ze<xe;ze++)Re[ze]=arguments[ze+2];ue.children=Re}if(T&&T.defaultProps)for(z in xe=T.defaultProps,xe)ue[z]===void 0&&(ue[z]=xe[z]);return{$$typeof:r,type:T,key:he,ref:pe,props:ue,_owner:U.current}}function W(T,N){return{$$typeof:r,type:T.type,key:N,ref:T.ref,props:T.props,_owner:T._owner}}function j(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function ie(T){var N={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(re){return N[re]})}var Z=/\/+/g;function te(T,N){return typeof T=="object"&&T!==null&&T.key!=null?ie(""+T.key):N.toString(36)}function J(T,N,re,z,ue){var he=typeof T;(he==="undefined"||he==="boolean")&&(T=null);var pe=!1;if(T===null)pe=!0;else switch(he){case"string":case"number":pe=!0;break;case"object":switch(T.$$typeof){case r:case e:pe=!0}}if(pe)return pe=T,ue=ue(pe),T=z===""?"."+te(pe,0):z,M(ue)?(re="",T!=null&&(re=T.replace(Z,"$&/")+"/"),J(ue,N,re,"",function(ze){return ze})):ue!=null&&(j(ue)&&(ue=W(ue,re+(!ue.key||pe&&pe.key===ue.key?"":(""+ue.key).replace(Z,"$&/")+"/")+T)),N.push(ue)),1;if(pe=0,z=z===""?".":z+":",M(T))for(var xe=0;xe<T.length;xe++){he=T[xe];var Re=z+te(he,xe);pe+=J(he,N,re,Re,ue)}else if(Re=y(T),typeof Re=="function")for(T=Re.call(T),xe=0;!(he=T.next()).done;)he=he.value,Re=z+te(he,xe++),pe+=J(he,N,re,Re,ue);else if(he==="object")throw N=String(T),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return pe}function ne(T,N,re){if(T==null)return T;var z=[],ue=0;return J(T,z,"","",function(he){return N.call(re,he,ue++)}),z}function ee(T){if(T._status===-1){var N=T._result;N=N(),N.then(function(re){(T._status===0||T._status===-1)&&(T._status=1,T._result=re)},function(re){(T._status===0||T._status===-1)&&(T._status=2,T._result=re)}),T._status===-1&&(T._status=0,T._result=N)}if(T._status===1)return T._result.default;throw T._result}var H={current:null},X={transition:null},q={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:X,ReactCurrentOwner:U};function G(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:ne,forEach:function(T,N,re){ne(T,function(){N.apply(this,arguments)},re)},count:function(T){var N=0;return ne(T,function(){N++}),N},toArray:function(T){return ne(T,function(N){return N})||[]},only:function(T){if(!j(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Se.Component=C,Se.Fragment=t,Se.Profiler=s,Se.PureComponent=R,Se.StrictMode=n,Se.Suspense=d,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Se.act=G,Se.cloneElement=function(T,N,re){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var z=E({},T.props),ue=T.key,he=T.ref,pe=T._owner;if(N!=null){if(N.ref!==void 0&&(he=N.ref,pe=U.current),N.key!==void 0&&(ue=""+N.key),T.type&&T.type.defaultProps)var xe=T.type.defaultProps;for(Re in N)P.call(N,Re)&&!Y.hasOwnProperty(Re)&&(z[Re]=N[Re]===void 0&&xe!==void 0?xe[Re]:N[Re])}var Re=arguments.length-2;if(Re===1)z.children=re;else if(1<Re){xe=Array(Re);for(var ze=0;ze<Re;ze++)xe[ze]=arguments[ze+2];z.children=xe}return{$$typeof:r,type:T.type,key:ue,ref:he,props:z,_owner:pe}},Se.createContext=function(T){return T={$$typeof:u,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:l,_context:T},T.Consumer=T},Se.createElement=b,Se.createFactory=function(T){var N=b.bind(null,T);return N.type=T,N},Se.createRef=function(){return{current:null}},Se.forwardRef=function(T){return{$$typeof:c,render:T}},Se.isValidElement=j,Se.lazy=function(T){return{$$typeof:m,_payload:{_status:-1,_result:T},_init:ee}},Se.memo=function(T,N){return{$$typeof:g,type:T,compare:N===void 0?null:N}},Se.startTransition=function(T){var N=X.transition;X.transition={};try{T()}finally{X.transition=N}},Se.unstable_act=G,Se.useCallback=function(T,N){return H.current.useCallback(T,N)},Se.useContext=function(T){return H.current.useContext(T)},Se.useDebugValue=function(){},Se.useDeferredValue=function(T){return H.current.useDeferredValue(T)},Se.useEffect=function(T,N){return H.current.useEffect(T,N)},Se.useId=function(){return H.current.useId()},Se.useImperativeHandle=function(T,N,re){return H.current.useImperativeHandle(T,N,re)},Se.useInsertionEffect=function(T,N){return H.current.useInsertionEffect(T,N)},Se.useLayoutEffect=function(T,N){return H.current.useLayoutEffect(T,N)},Se.useMemo=function(T,N){return H.current.useMemo(T,N)},Se.useReducer=function(T,N,re){return H.current.useReducer(T,N,re)},Se.useRef=function(T){return H.current.useRef(T)},Se.useState=function(T){return H.current.useState(T)},Se.useSyncExternalStore=function(T,N,re){return H.current.useSyncExternalStore(T,N,re)},Se.useTransition=function(){return H.current.useTransition()},Se.version="18.3.1",Se}var Sm;function $h(){return Sm||(Sm=1,nh.exports=c1()),nh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm;function h1(){if(Rm)return Mo;Rm=1;var r=$h(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,g){var m,_={},y=null,x=null;g!==void 0&&(y=""+g),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(m in d)n.call(d,m)&&!l.hasOwnProperty(m)&&(_[m]=d[m]);if(c&&c.defaultProps)for(m in d=c.defaultProps,d)_[m]===void 0&&(_[m]=d[m]);return{$$typeof:e,type:c,key:y,ref:x,props:_,_owner:s.current}}return Mo.Fragment=t,Mo.jsx=u,Mo.jsxs=u,Mo}var Tm;function d1(){return Tm||(Tm=1,th.exports=h1()),th.exports}var De=d1(),ya={},ih={exports:{}},bt={},rh={exports:{}},sh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Im;function f1(){return Im||(Im=1,function(r){function e(X,q){var G=X.length;X.push(q);e:for(;0<G;){var T=G-1>>>1,N=X[T];if(0<s(N,q))X[T]=q,X[G]=N,G=T;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var q=X[0],G=X.pop();if(G!==q){X[0]=G;e:for(var T=0,N=X.length,re=N>>>1;T<re;){var z=2*(T+1)-1,ue=X[z],he=z+1,pe=X[he];if(0>s(ue,G))he<N&&0>s(pe,ue)?(X[T]=pe,X[he]=G,T=he):(X[T]=ue,X[z]=G,T=z);else if(he<N&&0>s(pe,G))X[T]=pe,X[he]=G,T=he;else break e}}return q}function s(X,q){var G=X.sortIndex-q.sortIndex;return G!==0?G:X.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],g=[],m=1,_=null,y=3,x=!1,E=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(X){for(var q=t(g);q!==null;){if(q.callback===null)n(g);else if(q.startTime<=X)n(g),q.sortIndex=q.expirationTime,e(d,q);else break;q=t(g)}}function M(X){if(w=!1,k(X),!E)if(t(d)!==null)E=!0,ee(P);else{var q=t(g);q!==null&&H(M,q.startTime-X)}}function P(X,q){E=!1,w&&(w=!1,I(b),b=-1),x=!0;var G=y;try{for(k(q),_=t(d);_!==null&&(!(_.expirationTime>q)||X&&!ie());){var T=_.callback;if(typeof T=="function"){_.callback=null,y=_.priorityLevel;var N=T(_.expirationTime<=q);q=r.unstable_now(),typeof N=="function"?_.callback=N:_===t(d)&&n(d),k(q)}else n(d);_=t(d)}if(_!==null)var re=!0;else{var z=t(g);z!==null&&H(M,z.startTime-q),re=!1}return re}finally{_=null,y=G,x=!1}}var U=!1,Y=null,b=-1,W=5,j=-1;function ie(){return!(r.unstable_now()-j<W)}function Z(){if(Y!==null){var X=r.unstable_now();j=X;var q=!0;try{q=Y(!0,X)}finally{q?te():(U=!1,Y=null)}}else U=!1}var te;if(typeof R=="function")te=function(){R(Z)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ne=J.port2;J.port1.onmessage=Z,te=function(){ne.postMessage(null)}}else te=function(){C(Z,0)};function ee(X){Y=X,U||(U=!0,te())}function H(X,q){b=C(function(){X(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){E||x||(E=!0,ee(P))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(X){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var G=y;y=q;try{return X()}finally{y=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,q){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var G=y;y=X;try{return q()}finally{y=G}},r.unstable_scheduleCallback=function(X,q,G){var T=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?T+G:T):G=T,X){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=G+N,X={id:m++,callback:q,priorityLevel:X,startTime:G,expirationTime:N,sortIndex:-1},G>T?(X.sortIndex=G,e(g,X),t(d)===null&&X===t(g)&&(w?(I(b),b=-1):w=!0,H(M,G-T))):(X.sortIndex=N,e(d,X),E||x||(E=!0,ee(P))),X},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(X){var q=y;return function(){var G=y;y=q;try{return X.apply(this,arguments)}finally{y=G}}}}(sh)),sh}var Lm;function g1(){return Lm||(Lm=1,rh.exports=f1()),rh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function m1(){if(Mm)return bt;Mm=1;var r=$h(),e=g1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,a=1;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function l(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},_={};function y(i){return d.call(_,i)?!0:d.call(m,i)?!1:g.test(i)?_[i]=!0:(m[i]=!0,!1)}function x(i,o,a,h){if(a!==null&&a.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,o,a,h){if(o===null||typeof o>"u"||x(i,o,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function w(i,o,a,h,f,p,v){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=i,this.type=o,this.sanitizeURL=p,this.removeEmptyString=v}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new w(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new w(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new w(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new w(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new w(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new w(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new w(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new w(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new w(i,5,!1,i.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function R(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(I,R);C[o]=new w(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new w(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new w(i,1,!1,i.toLowerCase(),null,!0,!0)});function k(i,o,a,h){var f=C.hasOwnProperty(o)?C[o]:null;(f!==null?f.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(E(o,a,f,h)&&(a=null),h||f===null?y(o)&&(a===null?i.removeAttribute(o):i.setAttribute(o,""+a)):f.mustUseProperty?i[f.propertyName]=a===null?f.type===3?!1:"":a:(o=f.attributeName,h=f.attributeNamespace,a===null?i.removeAttribute(o):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?i.setAttributeNS(h,o,a):i.setAttribute(o,a))))}var M=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),U=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),ie=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),X=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,T;function N(i){if(T===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);T=o&&o[1]||""}return`
`+T+i}var re=!1;function z(i,o){if(!i||re)return"";re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(O){var h=O}Reflect.construct(i,[],o)}else{try{o.call()}catch(O){h=O}i.call(o.prototype)}else{try{throw Error()}catch(O){h=O}i()}}catch(O){if(O&&h&&typeof O.stack=="string"){for(var f=O.stack.split(`
`),p=h.stack.split(`
`),v=f.length-1,S=p.length-1;1<=v&&0<=S&&f[v]!==p[S];)S--;for(;1<=v&&0<=S;v--,S--)if(f[v]!==p[S]){if(v!==1||S!==1)do if(v--,S--,0>S||f[v]!==p[S]){var L=`
`+f[v].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=v&&0<=S);break}}}finally{re=!1,Error.prepareStackTrace=a}return(i=i?i.displayName||i.name:"")?N(i):""}function ue(i){switch(i.tag){case 5:return N(i.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return i=z(i.type,!1),i;case 11:return i=z(i.type.render,!1),i;case 1:return i=z(i.type,!0),i;default:return""}}function he(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Y:return"Fragment";case U:return"Portal";case W:return"Profiler";case b:return"StrictMode";case te:return"Suspense";case J:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ie:return(i.displayName||"Context")+".Consumer";case j:return(i._context.displayName||"Context")+".Provider";case Z:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ne:return o=i.displayName||null,o!==null?o:he(i.type)||"Memo";case ee:o=i._payload,i=i._init;try{return he(i(o))}catch{}}return null}function pe(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function xe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Re(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ze(i){var o=Re(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,p.call(this,v)}}),Object.defineProperty(i,o,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Rt(i){i._valueTracker||(i._valueTracker=ze(i))}function kn(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),h="";return i&&(h=Re(i)?i.checked?"true":"false":i.value),i=h,i!==a?(o.setValue(i),!0):!1}function mn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Kn(i,o){var a=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??i._wrapperState.initialChecked})}function Fn(i,o){var a=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;a=xe(o.value!=null?o.value:a),i._wrapperState={initialChecked:h,initialValue:a,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Jt(i,o){o=o.checked,o!=null&&k(i,"checked",o,!1)}function _t(i,o){Jt(i,o);var a=xe(o.value),h=o.type;if(a!=null)h==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+a):i.value!==""+a&&(i.value=""+a);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Dn(i,o.type,a):o.hasOwnProperty("defaultValue")&&Dn(i,o.type,xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Vt(i,o,a){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,a||o===i.value||(i.value=o),i.defaultValue=o}a=i.name,a!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,a!==""&&(i.name=a)}function Dn(i,o,a){(o!=="number"||mn(i.ownerDocument)!==i)&&(a==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+a&&(i.defaultValue=""+a))}var en=Array.isArray;function tn(i,o,a,h){if(i=i.options,o){o={};for(var f=0;f<a.length;f++)o["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=o.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&h&&(i[a].defaultSelected=!0)}else{for(a=""+xe(a),o=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,h&&(i[f].defaultSelected=!0);return}o!==null||i[f].disabled||(o=i[f])}o!==null&&(o.selected=!0)}}function pn(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Zn(i,o){var a=o.value;if(a==null){if(a=o.children,o=o.defaultValue,a!=null){if(o!=null)throw Error(t(92));if(en(a)){if(1<a.length)throw Error(t(93));a=a[0]}o=a}o==null&&(o=""),a=o}i._wrapperState={initialValue:xe(a)}}function Hn(i,o){var a=xe(o.value),h=xe(o.defaultValue);a!=null&&(a=""+a,a!==i.value&&(i.value=a),o.defaultValue==null&&i.defaultValue!==a&&(i.defaultValue=a)),h!=null&&(i.defaultValue=""+h)}function $e(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function zr(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rr(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?zr(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var $n,sr=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,a,h,f){MSApp.execUnsafeLocalFunction(function(){return i(o,a,h,f)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for($n=$n||document.createElement("div"),$n.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=$n.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function or(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hl=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(i){hl.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),_i[o]=_i[i]})});function Gr(i,o,a){return o==null||typeof o=="boolean"||o===""?"":a||typeof o!="number"||o===0||_i.hasOwnProperty(i)&&_i[i]?(""+o).trim():o+"px"}function dl(i,o){i=i.style;for(var a in o)if(o.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=Gr(a,o[a],h);a==="float"&&(a="cssFloat"),h?i.setProperty(a,f):i[a]=f}}var Eu=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(i,o){if(o){if(Eu[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ur(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lr=null;function jr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ys=null,On=null,nn=null;function yi(i){if(i=go(i)){if(typeof Ys!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Fl(o),Ys(i.stateNode,i.type,o))}}function vi(i){On?nn?nn.push(i):nn=[i]:On=i}function Vs(){if(On){var i=On,o=nn;if(nn=On=null,yi(i),o)for(i=0;i<o.length;i++)yi(o[i])}}function Ks(i,o){return i(o)}function Tt(){}var _n=!1;function It(i,o,a){if(_n)return i(o,a);_n=!0;try{return Ks(i,o,a)}finally{_n=!1,(On!==null||nn!==null)&&(Tt(),Vs())}}function yt(i,o){var a=i.stateNode;if(a===null)return null;var h=Fl(a);if(h===null)return null;a=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(t(231,o,typeof a));return a}var vt=!1;if(c)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){vt=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{vt=!1}function yn(i,o,a,h,f,p,v,S,L){var O=Array.prototype.slice.call(arguments,3);try{o.apply(a,O)}catch(K){this.onError(K)}}var Ge=!1,Je=null,Ft=!1,Zs=null,m0={onError:function(i){Ge=!0,Je=i}};function p0(i,o,a,h,f,p,v,S,L){Ge=!1,Je=null,yn.apply(m0,arguments)}function _0(i,o,a,h,f,p,v,S,L){if(p0.apply(this,arguments),Ge){if(Ge){var O=Je;Ge=!1,Je=null}else throw Error(t(198));Ft||(Ft=!0,Zs=O)}}function ar(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function Bd(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Yd(i){if(ar(i)!==i)throw Error(t(188))}function y0(i){var o=i.alternate;if(!o){if(o=ar(i),o===null)throw Error(t(188));return o!==i?null:i}for(var a=i,h=o;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return Yd(f),i;if(p===h)return Yd(f),o;p=p.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=p;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,h=p;break}if(S===h){v=!0,h=f,a=p;break}S=S.sibling}if(!v){for(S=p.child;S;){if(S===a){v=!0,a=p,h=f;break}if(S===h){v=!0,h=p,a=f;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?i:o}function Vd(i){return i=y0(i),i!==null?Kd(i):null}function Kd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Kd(i);if(o!==null)return o;i=i.sibling}return null}var Zd=e.unstable_scheduleCallback,Hd=e.unstable_cancelCallback,v0=e.unstable_shouldYield,E0=e.unstable_requestPaint,qe=e.unstable_now,x0=e.unstable_getCurrentPriorityLevel,xu=e.unstable_ImmediatePriority,$d=e.unstable_UserBlockingPriority,fl=e.unstable_NormalPriority,w0=e.unstable_LowPriority,qd=e.unstable_IdlePriority,gl=null,Nn=null;function C0(i){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(gl,i,void 0,(i.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:T0,S0=Math.log,R0=Math.LN2;function T0(i){return i>>>=0,i===0?32:31-(S0(i)/R0|0)|0}var ml=64,pl=4194304;function Hs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function _l(i,o){var a=i.pendingLanes;if(a===0)return 0;var h=0,f=i.suspendedLanes,p=i.pingedLanes,v=a&268435455;if(v!==0){var S=v&~f;S!==0?h=Hs(S):(p&=v,p!==0&&(h=Hs(p)))}else v=a&~f,v!==0?h=Hs(v):p!==0&&(h=Hs(p));if(h===0)return 0;if(o!==0&&o!==h&&!(o&f)&&(f=h&-h,p=o&-o,f>=p||f===16&&(p&4194240)!==0))return o;if(h&4&&(h|=a&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)a=31-vn(o),f=1<<a,h|=i[a],o&=~f;return h}function I0(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L0(i,o){for(var a=i.suspendedLanes,h=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes;0<p;){var v=31-vn(p),S=1<<v,L=f[v];L===-1?(!(S&a)||S&h)&&(f[v]=I0(S,o)):L<=o&&(i.expiredLanes|=S),p&=~S}}function wu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Qd(){var i=ml;return ml<<=1,!(ml&4194240)&&(ml=64),i}function Cu(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function $s(i,o,a){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-vn(o),i[o]=a}function M0(i,o){var a=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<a;){var f=31-vn(a),p=1<<f;o[f]=0,h[f]=-1,i[f]=-1,a&=~p}}function Su(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var h=31-vn(a),f=1<<h;f&o|i[h]&o&&(i[h]|=o),a&=~f}}var Oe=0;function Jd(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var ef,Ru,tf,nf,rf,Tu=!1,yl=[],Ei=null,xi=null,wi=null,qs=new Map,Qs=new Map,Ci=[],A0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sf(i,o){switch(i){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":qs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qs.delete(o.pointerId)}}function Js(i,o,a,h,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:o,domEventName:a,eventSystemFlags:h,nativeEvent:p,targetContainers:[f]},o!==null&&(o=go(o),o!==null&&Ru(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,f!==null&&o.indexOf(f)===-1&&o.push(f),i)}function P0(i,o,a,h,f){switch(o){case"focusin":return Ei=Js(Ei,i,o,a,h,f),!0;case"dragenter":return xi=Js(xi,i,o,a,h,f),!0;case"mouseover":return wi=Js(wi,i,o,a,h,f),!0;case"pointerover":var p=f.pointerId;return qs.set(p,Js(qs.get(p)||null,i,o,a,h,f)),!0;case"gotpointercapture":return p=f.pointerId,Qs.set(p,Js(Qs.get(p)||null,i,o,a,h,f)),!0}return!1}function of(i){var o=ur(i.target);if(o!==null){var a=ar(o);if(a!==null){if(o=a.tag,o===13){if(o=Bd(a),o!==null){i.blockedOn=o,rf(i.priority,function(){tf(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function vl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=Lu(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(a===null){a=i.nativeEvent;var h=new a.constructor(a.type,a);lr=h,a.target.dispatchEvent(h),lr=null}else return o=go(a),o!==null&&Ru(o),i.blockedOn=a,!1;o.shift()}return!0}function lf(i,o,a){vl(i)&&a.delete(o)}function k0(){Tu=!1,Ei!==null&&vl(Ei)&&(Ei=null),xi!==null&&vl(xi)&&(xi=null),wi!==null&&vl(wi)&&(wi=null),qs.forEach(lf),Qs.forEach(lf)}function eo(i,o){i.blockedOn===o&&(i.blockedOn=null,Tu||(Tu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,k0)))}function to(i){function o(f){return eo(f,i)}if(0<yl.length){eo(yl[0],i);for(var a=1;a<yl.length;a++){var h=yl[a];h.blockedOn===i&&(h.blockedOn=null)}}for(Ei!==null&&eo(Ei,i),xi!==null&&eo(xi,i),wi!==null&&eo(wi,i),qs.forEach(o),Qs.forEach(o),a=0;a<Ci.length;a++)h=Ci[a],h.blockedOn===i&&(h.blockedOn=null);for(;0<Ci.length&&(a=Ci[0],a.blockedOn===null);)of(a),a.blockedOn===null&&Ci.shift()}var Wr=M.ReactCurrentBatchConfig,El=!0;function F0(i,o,a,h){var f=Oe,p=Wr.transition;Wr.transition=null;try{Oe=1,Iu(i,o,a,h)}finally{Oe=f,Wr.transition=p}}function D0(i,o,a,h){var f=Oe,p=Wr.transition;Wr.transition=null;try{Oe=4,Iu(i,o,a,h)}finally{Oe=f,Wr.transition=p}}function Iu(i,o,a,h){if(El){var f=Lu(i,o,a,h);if(f===null)Yu(i,o,h,xl,a),sf(i,h);else if(P0(f,i,o,a,h))h.stopPropagation();else if(sf(i,h),o&4&&-1<A0.indexOf(i)){for(;f!==null;){var p=go(f);if(p!==null&&ef(p),p=Lu(i,o,a,h),p===null&&Yu(i,o,h,xl,a),p===f)break;f=p}f!==null&&h.stopPropagation()}else Yu(i,o,h,null,a)}}var xl=null;function Lu(i,o,a,h){if(xl=null,i=jr(h),i=ur(i),i!==null)if(o=ar(i),o===null)i=null;else if(a=o.tag,a===13){if(i=Bd(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return xl=i,null}function af(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(x0()){case xu:return 1;case $d:return 4;case fl:case w0:return 16;case qd:return 536870912;default:return 16}default:return 16}}var Si=null,Mu=null,wl=null;function uf(){if(wl)return wl;var i,o=Mu,a=o.length,h,f="value"in Si?Si.value:Si.textContent,p=f.length;for(i=0;i<a&&o[i]===f[i];i++);var v=a-i;for(h=1;h<=v&&o[a-h]===f[p-h];h++);return wl=f.slice(i,1<h?1-h:void 0)}function Cl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Sl(){return!0}function cf(){return!1}function Kt(i){function o(a,h,f,p,v){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=p,this.target=v,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(a=i[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Sl:cf,this.isPropagationStopped=cf,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),o}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Au=Kt(Xr),no=G({},Xr,{view:0,detail:0}),O0=Kt(no),Pu,ku,io,Rl=G({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Du,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==io&&(io&&i.type==="mousemove"?(Pu=i.screenX-io.screenX,ku=i.screenY-io.screenY):ku=Pu=0,io=i),Pu)},movementY:function(i){return"movementY"in i?i.movementY:ku}}),hf=Kt(Rl),N0=G({},Rl,{dataTransfer:0}),z0=Kt(N0),G0=G({},no,{relatedTarget:0}),Fu=Kt(G0),b0=G({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),U0=Kt(b0),j0=G({},Xr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),W0=Kt(j0),X0=G({},Xr,{data:0}),df=Kt(X0),B0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K0(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=V0[i])?!!o[i]:!1}function Du(){return K0}var Z0=G({},no,{key:function(i){if(i.key){var o=B0[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Cl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Y0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Du,charCode:function(i){return i.type==="keypress"?Cl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),H0=Kt(Z0),$0=G({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ff=Kt($0),q0=G({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Du}),Q0=Kt(q0),J0=G({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ey=Kt(J0),ty=G({},Rl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ny=Kt(ty),iy=[9,13,27,32],Ou=c&&"CompositionEvent"in window,ro=null;c&&"documentMode"in document&&(ro=document.documentMode);var ry=c&&"TextEvent"in window&&!ro,gf=c&&(!Ou||ro&&8<ro&&11>=ro),mf=" ",pf=!1;function _f(i,o){switch(i){case"keyup":return iy.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Br=!1;function sy(i,o){switch(i){case"compositionend":return yf(o);case"keypress":return o.which!==32?null:(pf=!0,mf);case"textInput":return i=o.data,i===mf&&pf?null:i;default:return null}}function oy(i,o){if(Br)return i==="compositionend"||!Ou&&_f(i,o)?(i=uf(),wl=Mu=Si=null,Br=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return gf&&o.locale!=="ko"?null:o.data;default:return null}}var ly={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!ly[i.type]:o==="textarea"}function Ef(i,o,a,h){vi(h),o=Al(o,"onChange"),0<o.length&&(a=new Au("onChange","change",null,a,h),i.push({event:a,listeners:o}))}var so=null,oo=null;function ay(i){Gf(i,0)}function Tl(i){var o=Hr(i);if(kn(o))return i}function uy(i,o){if(i==="change")return o}var xf=!1;if(c){var Nu;if(c){var zu="oninput"in document;if(!zu){var wf=document.createElement("div");wf.setAttribute("oninput","return;"),zu=typeof wf.oninput=="function"}Nu=zu}else Nu=!1;xf=Nu&&(!document.documentMode||9<document.documentMode)}function Cf(){so&&(so.detachEvent("onpropertychange",Sf),oo=so=null)}function Sf(i){if(i.propertyName==="value"&&Tl(oo)){var o=[];Ef(o,oo,i,jr(i)),It(ay,o)}}function cy(i,o,a){i==="focusin"?(Cf(),so=o,oo=a,so.attachEvent("onpropertychange",Sf)):i==="focusout"&&Cf()}function hy(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Tl(oo)}function dy(i,o){if(i==="click")return Tl(o)}function fy(i,o){if(i==="input"||i==="change")return Tl(o)}function gy(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var En=typeof Object.is=="function"?Object.is:gy;function lo(i,o){if(En(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),h=Object.keys(o);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!d.call(o,f)||!En(i[f],o[f]))return!1}return!0}function Rf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Tf(i,o){var a=Rf(i);i=0;for(var h;a;){if(a.nodeType===3){if(h=i+a.textContent.length,i<=o&&h>=o)return{node:a,offset:o-i};i=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rf(a)}}function If(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?If(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Lf(){for(var i=window,o=mn();o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=mn(i.document)}return o}function Gu(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function my(i){var o=Lf(),a=i.focusedElem,h=i.selectionRange;if(o!==a&&a&&a.ownerDocument&&If(a.ownerDocument.documentElement,a)){if(h!==null&&Gu(a)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in a)a.selectionStart=o,a.selectionEnd=Math.min(i,a.value.length);else if(i=(o=a.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var f=a.textContent.length,p=Math.min(h.start,f);h=h.end===void 0?p:Math.min(h.end,f),!i.extend&&p>h&&(f=h,h=p,p=f),f=Tf(a,p);var v=Tf(a,h);f&&v&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==v.node||i.focusOffset!==v.offset)&&(o=o.createRange(),o.setStart(f.node,f.offset),i.removeAllRanges(),p>h?(i.addRange(o),i.extend(v.node,v.offset)):(o.setEnd(v.node,v.offset),i.addRange(o)))}}for(o=[],i=a;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<o.length;a++)i=o[a],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var py=c&&"documentMode"in document&&11>=document.documentMode,Yr=null,bu=null,ao=null,Uu=!1;function Mf(i,o,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uu||Yr==null||Yr!==mn(h)||(h=Yr,"selectionStart"in h&&Gu(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ao&&lo(ao,h)||(ao=h,h=Al(bu,"onSelect"),0<h.length&&(o=new Au("onSelect","select",null,o,a),i.push({event:o,listeners:h}),o.target=Yr)))}function Il(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var Vr={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},ju={},Af={};c&&(Af=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function Ll(i){if(ju[i])return ju[i];if(!Vr[i])return i;var o=Vr[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in Af)return ju[i]=o[a];return i}var Pf=Ll("animationend"),kf=Ll("animationiteration"),Ff=Ll("animationstart"),Df=Ll("transitionend"),Of=new Map,Nf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(i,o){Of.set(i,o),l(o,[i])}for(var Wu=0;Wu<Nf.length;Wu++){var Xu=Nf[Wu],_y=Xu.toLowerCase(),yy=Xu[0].toUpperCase()+Xu.slice(1);Ri(_y,"on"+yy)}Ri(Pf,"onAnimationEnd"),Ri(kf,"onAnimationIteration"),Ri(Ff,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Df,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vy=new Set("cancel close invalid load scroll toggle".split(" ").concat(uo));function zf(i,o,a){var h=i.type||"unknown-event";i.currentTarget=a,_0(h,o,void 0,i),i.currentTarget=null}function Gf(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var h=i[a],f=h.event;h=h.listeners;e:{var p=void 0;if(o)for(var v=h.length-1;0<=v;v--){var S=h[v],L=S.instance,O=S.currentTarget;if(S=S.listener,L!==p&&f.isPropagationStopped())break e;zf(f,S,O),p=L}else for(v=0;v<h.length;v++){if(S=h[v],L=S.instance,O=S.currentTarget,S=S.listener,L!==p&&f.isPropagationStopped())break e;zf(f,S,O),p=L}}}if(Ft)throw i=Zs,Ft=!1,Zs=null,i}function je(i,o){var a=o[qu];a===void 0&&(a=o[qu]=new Set);var h=i+"__bubble";a.has(h)||(bf(o,i,2,!1),a.add(h))}function Bu(i,o,a){var h=0;o&&(h|=4),bf(a,i,h,o)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function co(i){if(!i[Ml]){i[Ml]=!0,n.forEach(function(a){a!=="selectionchange"&&(vy.has(a)||Bu(a,!1,i),Bu(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ml]||(o[Ml]=!0,Bu("selectionchange",!1,o))}}function bf(i,o,a,h){switch(af(o)){case 1:var f=F0;break;case 4:f=D0;break;default:f=Iu}a=f.bind(null,o,a,i),f=void 0,!vt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(f=!0),h?f!==void 0?i.addEventListener(o,a,{capture:!0,passive:f}):i.addEventListener(o,a,!0):f!==void 0?i.addEventListener(o,a,{passive:f}):i.addEventListener(o,a,!1)}function Yu(i,o,a,h,f){var p=h;if(!(o&1)&&!(o&2)&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var S=h.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var L=v.tag;if((L===3||L===4)&&(L=v.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;v=v.return}for(;S!==null;){if(v=ur(S),v===null)return;if(L=v.tag,L===5||L===6){h=p=v;continue e}S=S.parentNode}}h=h.return}It(function(){var O=p,K=jr(a),$=[];e:{var V=Of.get(i);if(V!==void 0){var se=Au,ae=i;switch(i){case"keypress":if(Cl(a)===0)break e;case"keydown":case"keyup":se=H0;break;case"focusin":ae="focus",se=Fu;break;case"focusout":ae="blur",se=Fu;break;case"beforeblur":case"afterblur":se=Fu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=hf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=z0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Q0;break;case Pf:case kf:case Ff:se=U0;break;case Df:se=ey;break;case"scroll":se=O0;break;case"wheel":se=ny;break;case"copy":case"cut":case"paste":se=W0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=ff}var ce=(o&4)!==0,Qe=!ce&&i==="scroll",F=ce?V!==null?V+"Capture":null:V;ce=[];for(var A=O,D;A!==null;){D=A;var Q=D.stateNode;if(D.tag===5&&Q!==null&&(D=Q,F!==null&&(Q=yt(A,F),Q!=null&&ce.push(ho(A,Q,D)))),Qe)break;A=A.return}0<ce.length&&(V=new se(V,ae,null,a,K),$.push({event:V,listeners:ce}))}}if(!(o&7)){e:{if(V=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",V&&a!==lr&&(ae=a.relatedTarget||a.fromElement)&&(ur(ae)||ae[qn]))break e;if((se||V)&&(V=K.window===K?K:(V=K.ownerDocument)?V.defaultView||V.parentWindow:window,se?(ae=a.relatedTarget||a.toElement,se=O,ae=ae?ur(ae):null,ae!==null&&(Qe=ar(ae),ae!==Qe||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(se=null,ae=O),se!==ae)){if(ce=hf,Q="onMouseLeave",F="onMouseEnter",A="mouse",(i==="pointerout"||i==="pointerover")&&(ce=ff,Q="onPointerLeave",F="onPointerEnter",A="pointer"),Qe=se==null?V:Hr(se),D=ae==null?V:Hr(ae),V=new ce(Q,A+"leave",se,a,K),V.target=Qe,V.relatedTarget=D,Q=null,ur(K)===O&&(ce=new ce(F,A+"enter",ae,a,K),ce.target=D,ce.relatedTarget=Qe,Q=ce),Qe=Q,se&&ae)t:{for(ce=se,F=ae,A=0,D=ce;D;D=Kr(D))A++;for(D=0,Q=F;Q;Q=Kr(Q))D++;for(;0<A-D;)ce=Kr(ce),A--;for(;0<D-A;)F=Kr(F),D--;for(;A--;){if(ce===F||F!==null&&ce===F.alternate)break t;ce=Kr(ce),F=Kr(F)}ce=null}else ce=null;se!==null&&Uf($,V,se,ce,!1),ae!==null&&Qe!==null&&Uf($,Qe,ae,ce,!0)}}e:{if(V=O?Hr(O):window,se=V.nodeName&&V.nodeName.toLowerCase(),se==="select"||se==="input"&&V.type==="file")var de=uy;else if(vf(V))if(xf)de=fy;else{de=hy;var ge=cy}else(se=V.nodeName)&&se.toLowerCase()==="input"&&(V.type==="checkbox"||V.type==="radio")&&(de=dy);if(de&&(de=de(i,O))){Ef($,de,a,K);break e}ge&&ge(i,V,O),i==="focusout"&&(ge=V._wrapperState)&&ge.controlled&&V.type==="number"&&Dn(V,"number",V.value)}switch(ge=O?Hr(O):window,i){case"focusin":(vf(ge)||ge.contentEditable==="true")&&(Yr=ge,bu=O,ao=null);break;case"focusout":ao=bu=Yr=null;break;case"mousedown":Uu=!0;break;case"contextmenu":case"mouseup":case"dragend":Uu=!1,Mf($,a,K);break;case"selectionchange":if(py)break;case"keydown":case"keyup":Mf($,a,K)}var me;if(Ou)e:{switch(i){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Br?_f(i,a)&&(_e="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(gf&&a.locale!=="ko"&&(Br||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Br&&(me=uf()):(Si=K,Mu="value"in Si?Si.value:Si.textContent,Br=!0)),ge=Al(O,_e),0<ge.length&&(_e=new df(_e,i,null,a,K),$.push({event:_e,listeners:ge}),me?_e.data=me:(me=yf(a),me!==null&&(_e.data=me)))),(me=ry?sy(i,a):oy(i,a))&&(O=Al(O,"onBeforeInput"),0<O.length&&(K=new df("onBeforeInput","beforeinput",null,a,K),$.push({event:K,listeners:O}),K.data=me))}Gf($,o)})}function ho(i,o,a){return{instance:i,listener:o,currentTarget:a}}function Al(i,o){for(var a=o+"Capture",h=[];i!==null;){var f=i,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=yt(i,a),p!=null&&h.unshift(ho(i,p,f)),p=yt(i,o),p!=null&&h.push(ho(i,p,f))),i=i.return}return h}function Kr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Uf(i,o,a,h,f){for(var p=o._reactName,v=[];a!==null&&a!==h;){var S=a,L=S.alternate,O=S.stateNode;if(L!==null&&L===h)break;S.tag===5&&O!==null&&(S=O,f?(L=yt(a,p),L!=null&&v.unshift(ho(a,L,S))):f||(L=yt(a,p),L!=null&&v.push(ho(a,L,S)))),a=a.return}v.length!==0&&i.push({event:o,listeners:v})}var Ey=/\r\n?/g,xy=/\u0000|\uFFFD/g;function jf(i){return(typeof i=="string"?i:""+i).replace(Ey,`
`).replace(xy,"")}function Pl(i,o,a){if(o=jf(o),jf(i)!==o&&a)throw Error(t(425))}function kl(){}var Vu=null,Ku=null;function Zu(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Hu=typeof setTimeout=="function"?setTimeout:void 0,wy=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,Cy=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(i){return Wf.resolve(null).then(i).catch(Sy)}:Hu;function Sy(i){setTimeout(function(){throw i})}function $u(i,o){var a=o,h=0;do{var f=a.nextSibling;if(i.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){i.removeChild(f),to(o);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);to(o)}function Ti(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Xf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(o===0)return i;o--}else a==="/$"&&o++}i=i.previousSibling}return null}var Zr=Math.random().toString(36).slice(2),zn="__reactFiber$"+Zr,fo="__reactProps$"+Zr,qn="__reactContainer$"+Zr,qu="__reactEvents$"+Zr,Ry="__reactListeners$"+Zr,Ty="__reactHandles$"+Zr;function ur(i){var o=i[zn];if(o)return o;for(var a=i.parentNode;a;){if(o=a[qn]||a[zn]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=Xf(i);i!==null;){if(a=i[zn])return a;i=Xf(i)}return o}i=a,a=i.parentNode}return null}function go(i){return i=i[zn]||i[qn],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Hr(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Fl(i){return i[fo]||null}var Qu=[],$r=-1;function Ii(i){return{current:i}}function We(i){0>$r||(i.current=Qu[$r],Qu[$r]=null,$r--)}function Ue(i,o){$r++,Qu[$r]=i.current,i.current=o}var Li={},Et=Ii(Li),Dt=Ii(!1),cr=Li;function qr(i,o){var a=i.type.contextTypes;if(!a)return Li;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in a)f[p]=o[p];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=f),f}function Ot(i){return i=i.childContextTypes,i!=null}function Dl(){We(Dt),We(Et)}function Bf(i,o,a){if(Et.current!==Li)throw Error(t(168));Ue(Et,o),Ue(Dt,a)}function Yf(i,o,a){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in o))throw Error(t(108,pe(i)||"Unknown",f));return G({},a,h)}function Ol(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Li,cr=Et.current,Ue(Et,i),Ue(Dt,Dt.current),!0}function Vf(i,o,a){var h=i.stateNode;if(!h)throw Error(t(169));a?(i=Yf(i,o,cr),h.__reactInternalMemoizedMergedChildContext=i,We(Dt),We(Et),Ue(Et,i)):We(Dt),Ue(Dt,a)}var Qn=null,Nl=!1,Ju=!1;function Kf(i){Qn===null?Qn=[i]:Qn.push(i)}function Iy(i){Nl=!0,Kf(i)}function Mi(){if(!Ju&&Qn!==null){Ju=!0;var i=0,o=Oe;try{var a=Qn;for(Oe=1;i<a.length;i++){var h=a[i];do h=h(!0);while(h!==null)}Qn=null,Nl=!1}catch(f){throw Qn!==null&&(Qn=Qn.slice(i+1)),Zd(xu,Mi),f}finally{Oe=o,Ju=!1}}return null}var Qr=[],Jr=0,zl=null,Gl=0,rn=[],sn=0,hr=null,Jn=1,ei="";function dr(i,o){Qr[Jr++]=Gl,Qr[Jr++]=zl,zl=i,Gl=o}function Zf(i,o,a){rn[sn++]=Jn,rn[sn++]=ei,rn[sn++]=hr,hr=i;var h=Jn;i=ei;var f=32-vn(h)-1;h&=~(1<<f),a+=1;var p=32-vn(o)+f;if(30<p){var v=f-f%5;p=(h&(1<<v)-1).toString(32),h>>=v,f-=v,Jn=1<<32-vn(o)+f|a<<f|h,ei=p+i}else Jn=1<<p|a<<f|h,ei=i}function ec(i){i.return!==null&&(dr(i,1),Zf(i,1,0))}function tc(i){for(;i===zl;)zl=Qr[--Jr],Qr[Jr]=null,Gl=Qr[--Jr],Qr[Jr]=null;for(;i===hr;)hr=rn[--sn],rn[sn]=null,ei=rn[--sn],rn[sn]=null,Jn=rn[--sn],rn[sn]=null}var Zt=null,Ht=null,Xe=!1,xn=null;function Hf(i,o){var a=un(5,null,null,0);a.elementType="DELETED",a.stateNode=o,a.return=i,o=i.deletions,o===null?(i.deletions=[a],i.flags|=16):o.push(a)}function $f(i,o){switch(i.tag){case 5:var a=i.type;return o=o.nodeType!==1||a.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Zt=i,Ht=Ti(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Zt=i,Ht=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(a=hr!==null?{id:Jn,overflow:ei}:null,i.memoizedState={dehydrated:o,treeContext:a,retryLane:1073741824},a=un(18,null,null,0),a.stateNode=o,a.return=i,i.child=a,Zt=i,Ht=null,!0):!1;default:return!1}}function nc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function ic(i){if(Xe){var o=Ht;if(o){var a=o;if(!$f(i,o)){if(nc(i))throw Error(t(418));o=Ti(a.nextSibling);var h=Zt;o&&$f(i,o)?Hf(h,a):(i.flags=i.flags&-4097|2,Xe=!1,Zt=i)}}else{if(nc(i))throw Error(t(418));i.flags=i.flags&-4097|2,Xe=!1,Zt=i}}}function qf(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Zt=i}function bl(i){if(i!==Zt)return!1;if(!Xe)return qf(i),Xe=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Zu(i.type,i.memoizedProps)),o&&(o=Ht)){if(nc(i))throw Qf(),Error(t(418));for(;o;)Hf(i,o),o=Ti(o.nextSibling)}if(qf(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"){if(o===0){Ht=Ti(i.nextSibling);break e}o--}else a!=="$"&&a!=="$!"&&a!=="$?"||o++}i=i.nextSibling}Ht=null}}else Ht=Zt?Ti(i.stateNode.nextSibling):null;return!0}function Qf(){for(var i=Ht;i;)i=Ti(i.nextSibling)}function es(){Ht=Zt=null,Xe=!1}function rc(i){xn===null?xn=[i]:xn.push(i)}var Ly=M.ReactCurrentBatchConfig;function mo(i,o,a){if(i=a.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,i));var f=h,p=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===p?o.ref:(o=function(v){var S=f.refs;v===null?delete S[p]:S[p]=v},o._stringRef=p,o)}if(typeof i!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,i))}return i}function Ul(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Jf(i){var o=i._init;return o(i._payload)}function eg(i){function o(F,A){if(i){var D=F.deletions;D===null?(F.deletions=[A],F.flags|=16):D.push(A)}}function a(F,A){if(!i)return null;for(;A!==null;)o(F,A),A=A.sibling;return null}function h(F,A){for(F=new Map;A!==null;)A.key!==null?F.set(A.key,A):F.set(A.index,A),A=A.sibling;return F}function f(F,A){return F=zi(F,A),F.index=0,F.sibling=null,F}function p(F,A,D){return F.index=D,i?(D=F.alternate,D!==null?(D=D.index,D<A?(F.flags|=2,A):D):(F.flags|=2,A)):(F.flags|=1048576,A)}function v(F){return i&&F.alternate===null&&(F.flags|=2),F}function S(F,A,D,Q){return A===null||A.tag!==6?(A=Hc(D,F.mode,Q),A.return=F,A):(A=f(A,D),A.return=F,A)}function L(F,A,D,Q){var de=D.type;return de===Y?K(F,A,D.props.children,Q,D.key):A!==null&&(A.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ee&&Jf(de)===A.type)?(Q=f(A,D.props),Q.ref=mo(F,A,D),Q.return=F,Q):(Q=ca(D.type,D.key,D.props,null,F.mode,Q),Q.ref=mo(F,A,D),Q.return=F,Q)}function O(F,A,D,Q){return A===null||A.tag!==4||A.stateNode.containerInfo!==D.containerInfo||A.stateNode.implementation!==D.implementation?(A=$c(D,F.mode,Q),A.return=F,A):(A=f(A,D.children||[]),A.return=F,A)}function K(F,A,D,Q,de){return A===null||A.tag!==7?(A=Er(D,F.mode,Q,de),A.return=F,A):(A=f(A,D),A.return=F,A)}function $(F,A,D){if(typeof A=="string"&&A!==""||typeof A=="number")return A=Hc(""+A,F.mode,D),A.return=F,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case P:return D=ca(A.type,A.key,A.props,null,F.mode,D),D.ref=mo(F,null,A),D.return=F,D;case U:return A=$c(A,F.mode,D),A.return=F,A;case ee:var Q=A._init;return $(F,Q(A._payload),D)}if(en(A)||q(A))return A=Er(A,F.mode,D,null),A.return=F,A;Ul(F,A)}return null}function V(F,A,D,Q){var de=A!==null?A.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return de!==null?null:S(F,A,""+D,Q);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case P:return D.key===de?L(F,A,D,Q):null;case U:return D.key===de?O(F,A,D,Q):null;case ee:return de=D._init,V(F,A,de(D._payload),Q)}if(en(D)||q(D))return de!==null?null:K(F,A,D,Q,null);Ul(F,D)}return null}function se(F,A,D,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return F=F.get(D)||null,S(A,F,""+Q,de);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case P:return F=F.get(Q.key===null?D:Q.key)||null,L(A,F,Q,de);case U:return F=F.get(Q.key===null?D:Q.key)||null,O(A,F,Q,de);case ee:var ge=Q._init;return se(F,A,D,ge(Q._payload),de)}if(en(Q)||q(Q))return F=F.get(D)||null,K(A,F,Q,de,null);Ul(A,Q)}return null}function ae(F,A,D,Q){for(var de=null,ge=null,me=A,_e=A=0,at=null;me!==null&&_e<D.length;_e++){me.index>_e?(at=me,me=null):at=me.sibling;var Pe=V(F,me,D[_e],Q);if(Pe===null){me===null&&(me=at);break}i&&me&&Pe.alternate===null&&o(F,me),A=p(Pe,A,_e),ge===null?de=Pe:ge.sibling=Pe,ge=Pe,me=at}if(_e===D.length)return a(F,me),Xe&&dr(F,_e),de;if(me===null){for(;_e<D.length;_e++)me=$(F,D[_e],Q),me!==null&&(A=p(me,A,_e),ge===null?de=me:ge.sibling=me,ge=me);return Xe&&dr(F,_e),de}for(me=h(F,me);_e<D.length;_e++)at=se(me,F,_e,D[_e],Q),at!==null&&(i&&at.alternate!==null&&me.delete(at.key===null?_e:at.key),A=p(at,A,_e),ge===null?de=at:ge.sibling=at,ge=at);return i&&me.forEach(function(Gi){return o(F,Gi)}),Xe&&dr(F,_e),de}function ce(F,A,D,Q){var de=q(D);if(typeof de!="function")throw Error(t(150));if(D=de.call(D),D==null)throw Error(t(151));for(var ge=de=null,me=A,_e=A=0,at=null,Pe=D.next();me!==null&&!Pe.done;_e++,Pe=D.next()){me.index>_e?(at=me,me=null):at=me.sibling;var Gi=V(F,me,Pe.value,Q);if(Gi===null){me===null&&(me=at);break}i&&me&&Gi.alternate===null&&o(F,me),A=p(Gi,A,_e),ge===null?de=Gi:ge.sibling=Gi,ge=Gi,me=at}if(Pe.done)return a(F,me),Xe&&dr(F,_e),de;if(me===null){for(;!Pe.done;_e++,Pe=D.next())Pe=$(F,Pe.value,Q),Pe!==null&&(A=p(Pe,A,_e),ge===null?de=Pe:ge.sibling=Pe,ge=Pe);return Xe&&dr(F,_e),de}for(me=h(F,me);!Pe.done;_e++,Pe=D.next())Pe=se(me,F,_e,Pe.value,Q),Pe!==null&&(i&&Pe.alternate!==null&&me.delete(Pe.key===null?_e:Pe.key),A=p(Pe,A,_e),ge===null?de=Pe:ge.sibling=Pe,ge=Pe);return i&&me.forEach(function(l1){return o(F,l1)}),Xe&&dr(F,_e),de}function Qe(F,A,D,Q){if(typeof D=="object"&&D!==null&&D.type===Y&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case P:e:{for(var de=D.key,ge=A;ge!==null;){if(ge.key===de){if(de=D.type,de===Y){if(ge.tag===7){a(F,ge.sibling),A=f(ge,D.props.children),A.return=F,F=A;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ee&&Jf(de)===ge.type){a(F,ge.sibling),A=f(ge,D.props),A.ref=mo(F,ge,D),A.return=F,F=A;break e}a(F,ge);break}else o(F,ge);ge=ge.sibling}D.type===Y?(A=Er(D.props.children,F.mode,Q,D.key),A.return=F,F=A):(Q=ca(D.type,D.key,D.props,null,F.mode,Q),Q.ref=mo(F,A,D),Q.return=F,F=Q)}return v(F);case U:e:{for(ge=D.key;A!==null;){if(A.key===ge)if(A.tag===4&&A.stateNode.containerInfo===D.containerInfo&&A.stateNode.implementation===D.implementation){a(F,A.sibling),A=f(A,D.children||[]),A.return=F,F=A;break e}else{a(F,A);break}else o(F,A);A=A.sibling}A=$c(D,F.mode,Q),A.return=F,F=A}return v(F);case ee:return ge=D._init,Qe(F,A,ge(D._payload),Q)}if(en(D))return ae(F,A,D,Q);if(q(D))return ce(F,A,D,Q);Ul(F,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,A!==null&&A.tag===6?(a(F,A.sibling),A=f(A,D),A.return=F,F=A):(a(F,A),A=Hc(D,F.mode,Q),A.return=F,F=A),v(F)):a(F,A)}return Qe}var ts=eg(!0),tg=eg(!1),jl=Ii(null),Wl=null,ns=null,sc=null;function oc(){sc=ns=Wl=null}function lc(i){var o=jl.current;We(jl),i._currentValue=o}function ac(i,o,a){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===a)break;i=i.return}}function is(i,o){Wl=i,sc=ns=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Nt=!0),i.firstContext=null)}function on(i){var o=i._currentValue;if(sc!==i)if(i={context:i,memoizedValue:o,next:null},ns===null){if(Wl===null)throw Error(t(308));ns=i,Wl.dependencies={lanes:0,firstContext:i}}else ns=ns.next=i;return o}var fr=null;function uc(i){fr===null?fr=[i]:fr.push(i)}function ng(i,o,a,h){var f=o.interleaved;return f===null?(a.next=a,uc(o)):(a.next=f.next,f.next=a),o.interleaved=a,ti(i,h)}function ti(i,o){i.lanes|=o;var a=i.alternate;for(a!==null&&(a.lanes|=o),a=i,i=i.return;i!==null;)i.childLanes|=o,a=i.alternate,a!==null&&(a.childLanes|=o),a=i,i=i.return;return a.tag===3?a.stateNode:null}var Ai=!1;function cc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ni(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Pi(i,o,a){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,Ae&2){var f=h.pending;return f===null?o.next=o:(o.next=f.next,f.next=o),h.pending=o,ti(i,a)}return f=h.interleaved,f===null?(o.next=o,uc(h)):(o.next=f.next,f.next=o),h.interleaved=o,ti(i,a)}function Xl(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,a|=h,o.lanes=a,Su(i,a)}}function rg(i,o){var a=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?f=p=v:p=p.next=v,a=a.next}while(a!==null);p===null?f=p=o:p=p.next=o}else f=p=o;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:h.shared,effects:h.effects},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}function Bl(i,o,a,h){var f=i.updateQueue;Ai=!1;var p=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var L=S,O=L.next;L.next=null,v===null?p=O:v.next=O,v=L;var K=i.alternate;K!==null&&(K=K.updateQueue,S=K.lastBaseUpdate,S!==v&&(S===null?K.firstBaseUpdate=O:S.next=O,K.lastBaseUpdate=L))}if(p!==null){var $=f.baseState;v=0,K=O=L=null,S=p;do{var V=S.lane,se=S.eventTime;if((h&V)===V){K!==null&&(K=K.next={eventTime:se,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ae=i,ce=S;switch(V=o,se=a,ce.tag){case 1:if(ae=ce.payload,typeof ae=="function"){$=ae.call(se,$,V);break e}$=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ce.payload,V=typeof ae=="function"?ae.call(se,$,V):ae,V==null)break e;$=G({},$,V);break e;case 2:Ai=!0}}S.callback!==null&&S.lane!==0&&(i.flags|=64,V=f.effects,V===null?f.effects=[S]:V.push(S))}else se={eventTime:se,lane:V,tag:S.tag,payload:S.payload,callback:S.callback,next:null},K===null?(O=K=se,L=$):K=K.next=se,v|=V;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;V=S,S=V.next,V.next=null,f.lastBaseUpdate=V,f.shared.pending=null}}while(!0);if(K===null&&(L=$),f.baseState=L,f.firstBaseUpdate=O,f.lastBaseUpdate=K,o=f.shared.interleaved,o!==null){f=o;do v|=f.lane,f=f.next;while(f!==o)}else p===null&&(f.shared.lanes=0);pr|=v,i.lanes=v,i.memoizedState=$}}function sg(i,o,a){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var po={},Gn=Ii(po),_o=Ii(po),yo=Ii(po);function gr(i){if(i===po)throw Error(t(174));return i}function hc(i,o){switch(Ue(yo,o),Ue(_o,i),Ue(Gn,po),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:rr(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=rr(o,i)}We(Gn),Ue(Gn,o)}function rs(){We(Gn),We(_o),We(yo)}function og(i){gr(yo.current);var o=gr(Gn.current),a=rr(o,i.type);o!==a&&(Ue(_o,i),Ue(Gn,a))}function dc(i){_o.current===i&&(We(Gn),We(_o))}var Be=Ii(0);function Yl(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var fc=[];function gc(){for(var i=0;i<fc.length;i++)fc[i]._workInProgressVersionPrimary=null;fc.length=0}var Vl=M.ReactCurrentDispatcher,mc=M.ReactCurrentBatchConfig,mr=0,Ye=null,nt=null,ot=null,Kl=!1,vo=!1,Eo=0,My=0;function xt(){throw Error(t(321))}function pc(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!En(i[a],o[a]))return!1;return!0}function _c(i,o,a,h,f,p){if(mr=p,Ye=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Vl.current=i===null||i.memoizedState===null?Fy:Dy,i=a(h,f),vo){p=0;do{if(vo=!1,Eo=0,25<=p)throw Error(t(301));p+=1,ot=nt=null,o.updateQueue=null,Vl.current=Oy,i=a(h,f)}while(vo)}if(Vl.current=$l,o=nt!==null&&nt.next!==null,mr=0,ot=nt=Ye=null,Kl=!1,o)throw Error(t(300));return i}function yc(){var i=Eo!==0;return Eo=0,i}function bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ye.memoizedState=ot=i:ot=ot.next=i,ot}function ln(){if(nt===null){var i=Ye.alternate;i=i!==null?i.memoizedState:null}else i=nt.next;var o=ot===null?Ye.memoizedState:ot.next;if(o!==null)ot=o,nt=i;else{if(i===null)throw Error(t(310));nt=i,i={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?Ye.memoizedState=ot=i:ot=ot.next=i}return ot}function xo(i,o){return typeof o=="function"?o(i):o}function vc(i){var o=ln(),a=o.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=i;var h=nt,f=h.baseQueue,p=a.pending;if(p!==null){if(f!==null){var v=f.next;f.next=p.next,p.next=v}h.baseQueue=f=p,a.pending=null}if(f!==null){p=f.next,h=h.baseState;var S=v=null,L=null,O=p;do{var K=O.lane;if((mr&K)===K)L!==null&&(L=L.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),h=O.hasEagerState?O.eagerState:i(h,O.action);else{var $={lane:K,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};L===null?(S=L=$,v=h):L=L.next=$,Ye.lanes|=K,pr|=K}O=O.next}while(O!==null&&O!==p);L===null?v=h:L.next=S,En(h,o.memoizedState)||(Nt=!0),o.memoizedState=h,o.baseState=v,o.baseQueue=L,a.lastRenderedState=h}if(i=a.interleaved,i!==null){f=i;do p=f.lane,Ye.lanes|=p,pr|=p,f=f.next;while(f!==i)}else f===null&&(a.lanes=0);return[o.memoizedState,a.dispatch]}function Ec(i){var o=ln(),a=o.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=i;var h=a.dispatch,f=a.pending,p=o.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do p=i(p,v.action),v=v.next;while(v!==f);En(p,o.memoizedState)||(Nt=!0),o.memoizedState=p,o.baseQueue===null&&(o.baseState=p),a.lastRenderedState=p}return[p,h]}function lg(){}function ag(i,o){var a=Ye,h=ln(),f=o(),p=!En(h.memoizedState,f);if(p&&(h.memoizedState=f,Nt=!0),h=h.queue,xc(hg.bind(null,a,h,i),[i]),h.getSnapshot!==o||p||ot!==null&&ot.memoizedState.tag&1){if(a.flags|=2048,wo(9,cg.bind(null,a,h,f,o),void 0,null),lt===null)throw Error(t(349));mr&30||ug(a,o,f)}return f}function ug(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Ye.updateQueue,o===null?(o={lastEffect:null,stores:null},Ye.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function cg(i,o,a,h){o.value=a,o.getSnapshot=h,dg(o)&&fg(i)}function hg(i,o,a){return a(function(){dg(o)&&fg(i)})}function dg(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!En(i,a)}catch{return!0}}function fg(i){var o=ti(i,1);o!==null&&Rn(o,i,1,-1)}function gg(i){var o=bn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:i},o.queue=i,i=i.dispatch=ky.bind(null,Ye,i),[o.memoizedState,i]}function wo(i,o,a,h){return i={tag:i,create:o,destroy:a,deps:h,next:null},o=Ye.updateQueue,o===null?(o={lastEffect:null,stores:null},Ye.updateQueue=o,o.lastEffect=i.next=i):(a=o.lastEffect,a===null?o.lastEffect=i.next=i:(h=a.next,a.next=i,i.next=h,o.lastEffect=i)),i}function mg(){return ln().memoizedState}function Zl(i,o,a,h){var f=bn();Ye.flags|=i,f.memoizedState=wo(1|o,a,void 0,h===void 0?null:h)}function Hl(i,o,a,h){var f=ln();h=h===void 0?null:h;var p=void 0;if(nt!==null){var v=nt.memoizedState;if(p=v.destroy,h!==null&&pc(h,v.deps)){f.memoizedState=wo(o,a,p,h);return}}Ye.flags|=i,f.memoizedState=wo(1|o,a,p,h)}function pg(i,o){return Zl(8390656,8,i,o)}function xc(i,o){return Hl(2048,8,i,o)}function _g(i,o){return Hl(4,2,i,o)}function yg(i,o){return Hl(4,4,i,o)}function vg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Eg(i,o,a){return a=a!=null?a.concat([i]):null,Hl(4,4,vg.bind(null,o,i),a)}function wc(){}function xg(i,o){var a=ln();o=o===void 0?null:o;var h=a.memoizedState;return h!==null&&o!==null&&pc(o,h[1])?h[0]:(a.memoizedState=[i,o],i)}function wg(i,o){var a=ln();o=o===void 0?null:o;var h=a.memoizedState;return h!==null&&o!==null&&pc(o,h[1])?h[0]:(i=i(),a.memoizedState=[i,o],i)}function Cg(i,o,a){return mr&21?(En(a,o)||(a=Qd(),Ye.lanes|=a,pr|=a,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Nt=!0),i.memoizedState=a)}function Ay(i,o){var a=Oe;Oe=a!==0&&4>a?a:4,i(!0);var h=mc.transition;mc.transition={};try{i(!1),o()}finally{Oe=a,mc.transition=h}}function Sg(){return ln().memoizedState}function Py(i,o,a){var h=Oi(i);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Rg(i))Tg(o,a);else if(a=ng(i,o,a,h),a!==null){var f=At();Rn(a,i,h,f),Ig(a,o,h)}}function ky(i,o,a){var h=Oi(i),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rg(i))Tg(o,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=o.lastRenderedReducer,p!==null))try{var v=o.lastRenderedState,S=p(v,a);if(f.hasEagerState=!0,f.eagerState=S,En(S,v)){var L=o.interleaved;L===null?(f.next=f,uc(o)):(f.next=L.next,L.next=f),o.interleaved=f;return}}catch{}finally{}a=ng(i,o,f,h),a!==null&&(f=At(),Rn(a,i,h,f),Ig(a,o,h))}}function Rg(i){var o=i.alternate;return i===Ye||o!==null&&o===Ye}function Tg(i,o){vo=Kl=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function Ig(i,o,a){if(a&4194240){var h=o.lanes;h&=i.pendingLanes,a|=h,o.lanes=a,Su(i,a)}}var $l={readContext:on,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},Fy={readContext:on,useCallback:function(i,o){return bn().memoizedState=[i,o===void 0?null:o],i},useContext:on,useEffect:pg,useImperativeHandle:function(i,o,a){return a=a!=null?a.concat([i]):null,Zl(4194308,4,vg.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Zl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Zl(4,2,i,o)},useMemo:function(i,o){var a=bn();return o=o===void 0?null:o,i=i(),a.memoizedState=[i,o],i},useReducer:function(i,o,a){var h=bn();return o=a!==void 0?a(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=Py.bind(null,Ye,i),[h.memoizedState,i]},useRef:function(i){var o=bn();return i={current:i},o.memoizedState=i},useState:gg,useDebugValue:wc,useDeferredValue:function(i){return bn().memoizedState=i},useTransition:function(){var i=gg(!1),o=i[0];return i=Ay.bind(null,i[1]),bn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,a){var h=Ye,f=bn();if(Xe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=o(),lt===null)throw Error(t(349));mr&30||ug(h,o,a)}f.memoizedState=a;var p={value:a,getSnapshot:o};return f.queue=p,pg(hg.bind(null,h,p,i),[i]),h.flags|=2048,wo(9,cg.bind(null,h,p,a,o),void 0,null),a},useId:function(){var i=bn(),o=lt.identifierPrefix;if(Xe){var a=ei,h=Jn;a=(h&~(1<<32-vn(h)-1)).toString(32)+a,o=":"+o+"R"+a,a=Eo++,0<a&&(o+="H"+a.toString(32)),o+=":"}else a=My++,o=":"+o+"r"+a.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Dy={readContext:on,useCallback:xg,useContext:on,useEffect:xc,useImperativeHandle:Eg,useInsertionEffect:_g,useLayoutEffect:yg,useMemo:wg,useReducer:vc,useRef:mg,useState:function(){return vc(xo)},useDebugValue:wc,useDeferredValue:function(i){var o=ln();return Cg(o,nt.memoizedState,i)},useTransition:function(){var i=vc(xo)[0],o=ln().memoizedState;return[i,o]},useMutableSource:lg,useSyncExternalStore:ag,useId:Sg,unstable_isNewReconciler:!1},Oy={readContext:on,useCallback:xg,useContext:on,useEffect:xc,useImperativeHandle:Eg,useInsertionEffect:_g,useLayoutEffect:yg,useMemo:wg,useReducer:Ec,useRef:mg,useState:function(){return Ec(xo)},useDebugValue:wc,useDeferredValue:function(i){var o=ln();return nt===null?o.memoizedState=i:Cg(o,nt.memoizedState,i)},useTransition:function(){var i=Ec(xo)[0],o=ln().memoizedState;return[i,o]},useMutableSource:lg,useSyncExternalStore:ag,useId:Sg,unstable_isNewReconciler:!1};function wn(i,o){if(i&&i.defaultProps){o=G({},o),i=i.defaultProps;for(var a in i)o[a]===void 0&&(o[a]=i[a]);return o}return o}function Cc(i,o,a,h){o=i.memoizedState,a=a(h,o),a=a==null?o:G({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var ql={isMounted:function(i){return(i=i._reactInternals)?ar(i)===i:!1},enqueueSetState:function(i,o,a){i=i._reactInternals;var h=At(),f=Oi(i),p=ni(h,f);p.payload=o,a!=null&&(p.callback=a),o=Pi(i,p,f),o!==null&&(Rn(o,i,f,h),Xl(o,i,f))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var h=At(),f=Oi(i),p=ni(h,f);p.tag=1,p.payload=o,a!=null&&(p.callback=a),o=Pi(i,p,f),o!==null&&(Rn(o,i,f,h),Xl(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=At(),h=Oi(i),f=ni(a,h);f.tag=2,o!=null&&(f.callback=o),o=Pi(i,f,h),o!==null&&(Rn(o,i,h,a),Xl(o,i,h))}};function Lg(i,o,a,h,f,p,v){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,p,v):o.prototype&&o.prototype.isPureReactComponent?!lo(a,h)||!lo(f,p):!0}function Mg(i,o,a){var h=!1,f=Li,p=o.contextType;return typeof p=="object"&&p!==null?p=on(p):(f=Ot(o)?cr:Et.current,h=o.contextTypes,p=(h=h!=null)?qr(i,f):Li),o=new o(a,p),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=ql,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=f,i.__reactInternalMemoizedMaskedChildContext=p),o}function Ag(i,o,a,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,h),o.state!==i&&ql.enqueueReplaceState(o,o.state,null)}function Sc(i,o,a,h){var f=i.stateNode;f.props=a,f.state=i.memoizedState,f.refs={},cc(i);var p=o.contextType;typeof p=="object"&&p!==null?f.context=on(p):(p=Ot(o)?cr:Et.current,f.context=qr(i,p)),f.state=i.memoizedState,p=o.getDerivedStateFromProps,typeof p=="function"&&(Cc(i,o,p,a),f.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(o=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),o!==f.state&&ql.enqueueReplaceState(f,f.state,null),Bl(i,a,f,h),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308)}function ss(i,o){try{var a="",h=o;do a+=ue(h),h=h.return;while(h);var f=a}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:i,source:o,stack:f,digest:null}}function Rc(i,o,a){return{value:i,source:null,stack:a??null,digest:o??null}}function Tc(i,o){try{console.error(o.value)}catch(a){setTimeout(function(){throw a})}}var Ny=typeof WeakMap=="function"?WeakMap:Map;function Pg(i,o,a){a=ni(-1,a),a.tag=3,a.payload={element:null};var h=o.value;return a.callback=function(){ra||(ra=!0,jc=h),Tc(i,o)},a}function kg(i,o,a){a=ni(-1,a),a.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;a.payload=function(){return h(f)},a.callback=function(){Tc(i,o)}}var p=i.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Tc(i,o),typeof h!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var v=o.stack;this.componentDidCatch(o.value,{componentStack:v!==null?v:""})}),a}function Fg(i,o,a){var h=i.pingCache;if(h===null){h=i.pingCache=new Ny;var f=new Set;h.set(o,f)}else f=h.get(o),f===void 0&&(f=new Set,h.set(o,f));f.has(a)||(f.add(a),i=$y.bind(null,i,o,a),o.then(i,i))}function Dg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Og(i,o,a,h,f){return i.mode&1?(i.flags|=65536,i.lanes=f,i):(i===o?i.flags|=65536:(i.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(o=ni(-1,1),o.tag=2,Pi(a,o,1))),a.lanes|=1),i)}var zy=M.ReactCurrentOwner,Nt=!1;function Mt(i,o,a,h){o.child=i===null?tg(o,null,a,h):ts(o,i.child,a,h)}function Ng(i,o,a,h,f){a=a.render;var p=o.ref;return is(o,f),h=_c(i,o,a,h,p,f),a=yc(),i!==null&&!Nt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f,ii(i,o,f)):(Xe&&a&&ec(o),o.flags|=1,Mt(i,o,h,f),o.child)}function zg(i,o,a,h,f){if(i===null){var p=a.type;return typeof p=="function"&&!Zc(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(o.tag=15,o.type=p,Gg(i,o,p,h,f)):(i=ca(a.type,null,h,o,o.mode,f),i.ref=o.ref,i.return=o,o.child=i)}if(p=i.child,!(i.lanes&f)){var v=p.memoizedProps;if(a=a.compare,a=a!==null?a:lo,a(v,h)&&i.ref===o.ref)return ii(i,o,f)}return o.flags|=1,i=zi(p,h),i.ref=o.ref,i.return=o,o.child=i}function Gg(i,o,a,h,f){if(i!==null){var p=i.memoizedProps;if(lo(p,h)&&i.ref===o.ref)if(Nt=!1,o.pendingProps=h=p,(i.lanes&f)!==0)i.flags&131072&&(Nt=!0);else return o.lanes=i.lanes,ii(i,o,f)}return Ic(i,o,a,h,f)}function bg(i,o,a){var h=o.pendingProps,f=h.children,p=i!==null?i.memoizedState:null;if(h.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(ls,$t),$t|=a;else{if(!(a&1073741824))return i=p!==null?p.baseLanes|a:a,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ue(ls,$t),$t|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=p!==null?p.baseLanes:a,Ue(ls,$t),$t|=h}else p!==null?(h=p.baseLanes|a,o.memoizedState=null):h=a,Ue(ls,$t),$t|=h;return Mt(i,o,f,a),o.child}function Ug(i,o){var a=o.ref;(i===null&&a!==null||i!==null&&i.ref!==a)&&(o.flags|=512,o.flags|=2097152)}function Ic(i,o,a,h,f){var p=Ot(a)?cr:Et.current;return p=qr(o,p),is(o,f),a=_c(i,o,a,h,p,f),h=yc(),i!==null&&!Nt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f,ii(i,o,f)):(Xe&&h&&ec(o),o.flags|=1,Mt(i,o,a,f),o.child)}function jg(i,o,a,h,f){if(Ot(a)){var p=!0;Ol(o)}else p=!1;if(is(o,f),o.stateNode===null)Jl(i,o),Mg(o,a,h),Sc(o,a,h,f),h=!0;else if(i===null){var v=o.stateNode,S=o.memoizedProps;v.props=S;var L=v.context,O=a.contextType;typeof O=="object"&&O!==null?O=on(O):(O=Ot(a)?cr:Et.current,O=qr(o,O));var K=a.getDerivedStateFromProps,$=typeof K=="function"||typeof v.getSnapshotBeforeUpdate=="function";$||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==h||L!==O)&&Ag(o,v,h,O),Ai=!1;var V=o.memoizedState;v.state=V,Bl(o,h,v,f),L=o.memoizedState,S!==h||V!==L||Dt.current||Ai?(typeof K=="function"&&(Cc(o,a,K,h),L=o.memoizedState),(S=Ai||Lg(o,a,S,h,V,L,O))?($||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=L),v.props=h,v.state=L,v.context=O,h=S):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{v=o.stateNode,ig(i,o),S=o.memoizedProps,O=o.type===o.elementType?S:wn(o.type,S),v.props=O,$=o.pendingProps,V=v.context,L=a.contextType,typeof L=="object"&&L!==null?L=on(L):(L=Ot(a)?cr:Et.current,L=qr(o,L));var se=a.getDerivedStateFromProps;(K=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==$||V!==L)&&Ag(o,v,h,L),Ai=!1,V=o.memoizedState,v.state=V,Bl(o,h,v,f);var ae=o.memoizedState;S!==$||V!==ae||Dt.current||Ai?(typeof se=="function"&&(Cc(o,a,se,h),ae=o.memoizedState),(O=Ai||Lg(o,a,O,h,V,ae,L)||!1)?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,ae,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,ae,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&V===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&V===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ae),v.props=h,v.state=ae,v.context=L,h=O):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&V===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&V===i.memoizedState||(o.flags|=1024),h=!1)}return Lc(i,o,a,h,p,f)}function Lc(i,o,a,h,f,p){Ug(i,o);var v=(o.flags&128)!==0;if(!h&&!v)return f&&Vf(o,a,!1),ii(i,o,p);h=o.stateNode,zy.current=o;var S=v&&typeof a.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&v?(o.child=ts(o,i.child,null,p),o.child=ts(o,null,S,p)):Mt(i,o,S,p),o.memoizedState=h.state,f&&Vf(o,a,!0),o.child}function Wg(i){var o=i.stateNode;o.pendingContext?Bf(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Bf(i,o.context,!1),hc(i,o.containerInfo)}function Xg(i,o,a,h,f){return es(),rc(f),o.flags|=256,Mt(i,o,a,h),o.child}var Mc={dehydrated:null,treeContext:null,retryLane:0};function Ac(i){return{baseLanes:i,cachePool:null,transitions:null}}function Bg(i,o,a){var h=o.pendingProps,f=Be.current,p=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=i!==null&&i.memoizedState===null?!1:(f&2)!==0),S?(p=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(f|=1),Ue(Be,f&1),i===null)return ic(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(v=h.children,i=h.fallback,p?(h=o.mode,p=o.child,v={mode:"hidden",children:v},!(h&1)&&p!==null?(p.childLanes=0,p.pendingProps=v):p=ha(v,h,0,null),i=Er(i,h,a,null),p.return=o,i.return=o,p.sibling=i,o.child=p,o.child.memoizedState=Ac(a),o.memoizedState=Mc,i):Pc(o,v));if(f=i.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return Gy(i,o,v,h,S,f,a);if(p){p=h.fallback,v=o.mode,f=i.child,S=f.sibling;var L={mode:"hidden",children:h.children};return!(v&1)&&o.child!==f?(h=o.child,h.childLanes=0,h.pendingProps=L,o.deletions=null):(h=zi(f,L),h.subtreeFlags=f.subtreeFlags&14680064),S!==null?p=zi(S,p):(p=Er(p,v,a,null),p.flags|=2),p.return=o,h.return=o,h.sibling=p,o.child=h,h=p,p=o.child,v=i.child.memoizedState,v=v===null?Ac(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},p.memoizedState=v,p.childLanes=i.childLanes&~a,o.memoizedState=Mc,h}return p=i.child,i=p.sibling,h=zi(p,{mode:"visible",children:h.children}),!(o.mode&1)&&(h.lanes=a),h.return=o,h.sibling=null,i!==null&&(a=o.deletions,a===null?(o.deletions=[i],o.flags|=16):a.push(i)),o.child=h,o.memoizedState=null,h}function Pc(i,o){return o=ha({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Ql(i,o,a,h){return h!==null&&rc(h),ts(o,i.child,null,a),i=Pc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Gy(i,o,a,h,f,p,v){if(a)return o.flags&256?(o.flags&=-257,h=Rc(Error(t(422))),Ql(i,o,v,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(p=h.fallback,f=o.mode,h=ha({mode:"visible",children:h.children},f,0,null),p=Er(p,f,v,null),p.flags|=2,h.return=o,p.return=o,h.sibling=p,o.child=h,o.mode&1&&ts(o,i.child,null,v),o.child.memoizedState=Ac(v),o.memoizedState=Mc,p);if(!(o.mode&1))return Ql(i,o,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var S=h.dgst;return h=S,p=Error(t(419)),h=Rc(p,h,void 0),Ql(i,o,v,h)}if(S=(v&i.childLanes)!==0,Nt||S){if(h=lt,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|v)?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,ti(i,f),Rn(h,i,f,-1))}return Kc(),h=Rc(Error(t(421))),Ql(i,o,v,h)}return f.data==="$?"?(o.flags|=128,o.child=i.child,o=qy.bind(null,i),f._reactRetry=o,null):(i=p.treeContext,Ht=Ti(f.nextSibling),Zt=o,Xe=!0,xn=null,i!==null&&(rn[sn++]=Jn,rn[sn++]=ei,rn[sn++]=hr,Jn=i.id,ei=i.overflow,hr=o),o=Pc(o,h.children),o.flags|=4096,o)}function Yg(i,o,a){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),ac(i.return,o,a)}function kc(i,o,a,h,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(p.isBackwards=o,p.rendering=null,p.renderingStartTime=0,p.last=h,p.tail=a,p.tailMode=f)}function Vg(i,o,a){var h=o.pendingProps,f=h.revealOrder,p=h.tail;if(Mt(i,o,h.children,a),h=Be.current,h&2)h=h&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Yg(i,a,o);else if(i.tag===19)Yg(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(Ue(Be,h),!(o.mode&1))o.memoizedState=null;else switch(f){case"forwards":for(a=o.child,f=null;a!==null;)i=a.alternate,i!==null&&Yl(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=o.child,o.child=null):(f=a.sibling,a.sibling=null),kc(o,!1,f,a,p);break;case"backwards":for(a=null,f=o.child,o.child=null;f!==null;){if(i=f.alternate,i!==null&&Yl(i)===null){o.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}kc(o,!0,a,null,p);break;case"together":kc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Jl(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ii(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),pr|=o.lanes,!(a&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,a=zi(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=zi(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function by(i,o,a){switch(o.tag){case 3:Wg(o),es();break;case 5:og(o);break;case 1:Ot(o.type)&&Ol(o);break;case 4:hc(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,f=o.memoizedProps.value;Ue(jl,h._currentValue),h._currentValue=f;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(Ue(Be,Be.current&1),o.flags|=128,null):a&o.child.childLanes?Bg(i,o,a):(Ue(Be,Be.current&1),i=ii(i,o,a),i!==null?i.sibling:null);Ue(Be,Be.current&1);break;case 19:if(h=(a&o.childLanes)!==0,i.flags&128){if(h)return Vg(i,o,a);o.flags|=128}if(f=o.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ue(Be,Be.current),h)break;return null;case 22:case 23:return o.lanes=0,bg(i,o,a)}return ii(i,o,a)}var Kg,Fc,Zg,Hg;Kg=function(i,o){for(var a=o.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Fc=function(){},Zg=function(i,o,a,h){var f=i.memoizedProps;if(f!==h){i=o.stateNode,gr(Gn.current);var p=null;switch(a){case"input":f=Kn(i,f),h=Kn(i,h),p=[];break;case"select":f=G({},f,{value:void 0}),h=G({},h,{value:void 0}),p=[];break;case"textarea":f=pn(i,f),h=pn(i,h),p=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=kl)}br(a,h);var v;a=null;for(O in f)if(!h.hasOwnProperty(O)&&f.hasOwnProperty(O)&&f[O]!=null)if(O==="style"){var S=f[O];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(s.hasOwnProperty(O)?p||(p=[]):(p=p||[]).push(O,null));for(O in h){var L=h[O];if(S=f!=null?f[O]:void 0,h.hasOwnProperty(O)&&L!==S&&(L!=null||S!=null))if(O==="style")if(S){for(v in S)!S.hasOwnProperty(v)||L&&L.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in L)L.hasOwnProperty(v)&&S[v]!==L[v]&&(a||(a={}),a[v]=L[v])}else a||(p||(p=[]),p.push(O,a)),a=L;else O==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,S=S?S.__html:void 0,L!=null&&S!==L&&(p=p||[]).push(O,L)):O==="children"?typeof L!="string"&&typeof L!="number"||(p=p||[]).push(O,""+L):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(s.hasOwnProperty(O)?(L!=null&&O==="onScroll"&&je("scroll",i),p||S===L||(p=[])):(p=p||[]).push(O,L))}a&&(p=p||[]).push("style",a);var O=p;(o.updateQueue=O)&&(o.flags|=4)}},Hg=function(i,o,a,h){a!==h&&(o.flags|=4)};function Co(i,o){if(!Xe)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function wt(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,h=0;if(o)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=h,i.childLanes=a,o}function Uy(i,o,a){var h=o.pendingProps;switch(tc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(o),null;case 1:return Ot(o.type)&&Dl(),wt(o),null;case 3:return h=o.stateNode,rs(),We(Dt),We(Et),gc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(bl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,xn!==null&&(Bc(xn),xn=null))),Fc(i,o),wt(o),null;case 5:dc(o);var f=gr(yo.current);if(a=o.type,i!==null&&o.stateNode!=null)Zg(i,o,a,h,f),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return wt(o),null}if(i=gr(Gn.current),bl(o)){h=o.stateNode,a=o.type;var p=o.memoizedProps;switch(h[zn]=o,h[fo]=p,i=(o.mode&1)!==0,a){case"dialog":je("cancel",h),je("close",h);break;case"iframe":case"object":case"embed":je("load",h);break;case"video":case"audio":for(f=0;f<uo.length;f++)je(uo[f],h);break;case"source":je("error",h);break;case"img":case"image":case"link":je("error",h),je("load",h);break;case"details":je("toggle",h);break;case"input":Fn(h,p),je("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!p.multiple},je("invalid",h);break;case"textarea":Zn(h,p),je("invalid",h)}br(a,p),f=null;for(var v in p)if(p.hasOwnProperty(v)){var S=p[v];v==="children"?typeof S=="string"?h.textContent!==S&&(p.suppressHydrationWarning!==!0&&Pl(h.textContent,S,i),f=["children",S]):typeof S=="number"&&h.textContent!==""+S&&(p.suppressHydrationWarning!==!0&&Pl(h.textContent,S,i),f=["children",""+S]):s.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&je("scroll",h)}switch(a){case"input":Rt(h),Vt(h,p,!0);break;case"textarea":Rt(h),$e(h);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(h.onclick=kl)}h=f,o.updateQueue=h,h!==null&&(o.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=zr(a)),i==="http://www.w3.org/1999/xhtml"?a==="script"?(i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=v.createElement(a,{is:h.is}):(i=v.createElement(a),a==="select"&&(v=i,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):i=v.createElementNS(i,a),i[zn]=o,i[fo]=h,Kg(i,o,!1,!1),o.stateNode=i;e:{switch(v=Ur(a,h),a){case"dialog":je("cancel",i),je("close",i),f=h;break;case"iframe":case"object":case"embed":je("load",i),f=h;break;case"video":case"audio":for(f=0;f<uo.length;f++)je(uo[f],i);f=h;break;case"source":je("error",i),f=h;break;case"img":case"image":case"link":je("error",i),je("load",i),f=h;break;case"details":je("toggle",i),f=h;break;case"input":Fn(i,h),f=Kn(i,h),je("invalid",i);break;case"option":f=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},f=G({},h,{value:void 0}),je("invalid",i);break;case"textarea":Zn(i,h),f=pn(i,h),je("invalid",i);break;default:f=h}br(a,f),S=f;for(p in S)if(S.hasOwnProperty(p)){var L=S[p];p==="style"?dl(i,L):p==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&sr(i,L)):p==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&or(i,L):typeof L=="number"&&or(i,""+L):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(s.hasOwnProperty(p)?L!=null&&p==="onScroll"&&je("scroll",i):L!=null&&k(i,p,L,v))}switch(a){case"input":Rt(i),Vt(i,h,!1);break;case"textarea":Rt(i),$e(i);break;case"option":h.value!=null&&i.setAttribute("value",""+xe(h.value));break;case"select":i.multiple=!!h.multiple,p=h.value,p!=null?tn(i,!!h.multiple,p,!1):h.defaultValue!=null&&tn(i,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(i.onclick=kl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return wt(o),null;case 6:if(i&&o.stateNode!=null)Hg(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(a=gr(yo.current),gr(Gn.current),bl(o)){if(h=o.stateNode,a=o.memoizedProps,h[zn]=o,(p=h.nodeValue!==a)&&(i=Zt,i!==null))switch(i.tag){case 3:Pl(h.nodeValue,a,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Pl(h.nodeValue,a,(i.mode&1)!==0)}p&&(o.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[zn]=o,o.stateNode=h}return wt(o),null;case 13:if(We(Be),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xe&&Ht!==null&&o.mode&1&&!(o.flags&128))Qf(),es(),o.flags|=98560,p=!1;else if(p=bl(o),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(t(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[zn]=o}else es(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;wt(o),p=!1}else xn!==null&&(Bc(xn),xn=null),p=!0;if(!p)return o.flags&65536?o:null}return o.flags&128?(o.lanes=a,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,o.mode&1&&(i===null||Be.current&1?it===0&&(it=3):Kc())),o.updateQueue!==null&&(o.flags|=4),wt(o),null);case 4:return rs(),Fc(i,o),i===null&&co(o.stateNode.containerInfo),wt(o),null;case 10:return lc(o.type._context),wt(o),null;case 17:return Ot(o.type)&&Dl(),wt(o),null;case 19:if(We(Be),p=o.memoizedState,p===null)return wt(o),null;if(h=(o.flags&128)!==0,v=p.rendering,v===null)if(h)Co(p,!1);else{if(it!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(v=Yl(i),v!==null){for(o.flags|=128,Co(p,!1),h=v.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=a,a=o.child;a!==null;)p=a,i=h,p.flags&=14680066,v=p.alternate,v===null?(p.childLanes=0,p.lanes=i,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=v.childLanes,p.lanes=v.lanes,p.child=v.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=v.memoizedProps,p.memoizedState=v.memoizedState,p.updateQueue=v.updateQueue,p.type=v.type,i=v.dependencies,p.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a=a.sibling;return Ue(Be,Be.current&1|2),o.child}i=i.sibling}p.tail!==null&&qe()>as&&(o.flags|=128,h=!0,Co(p,!1),o.lanes=4194304)}else{if(!h)if(i=Yl(v),i!==null){if(o.flags|=128,h=!0,a=i.updateQueue,a!==null&&(o.updateQueue=a,o.flags|=4),Co(p,!0),p.tail===null&&p.tailMode==="hidden"&&!v.alternate&&!Xe)return wt(o),null}else 2*qe()-p.renderingStartTime>as&&a!==1073741824&&(o.flags|=128,h=!0,Co(p,!1),o.lanes=4194304);p.isBackwards?(v.sibling=o.child,o.child=v):(a=p.last,a!==null?a.sibling=v:o.child=v,p.last=v)}return p.tail!==null?(o=p.tail,p.rendering=o,p.tail=o.sibling,p.renderingStartTime=qe(),o.sibling=null,a=Be.current,Ue(Be,h?a&1|2:a&1),o):(wt(o),null);case 22:case 23:return Vc(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&o.mode&1?$t&1073741824&&(wt(o),o.subtreeFlags&6&&(o.flags|=8192)):wt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function jy(i,o){switch(tc(o),o.tag){case 1:return Ot(o.type)&&Dl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return rs(),We(Dt),We(Et),gc(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return dc(o),null;case 13:if(We(Be),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));es()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return We(Be),null;case 4:return rs(),null;case 10:return lc(o.type._context),null;case 22:case 23:return Vc(),null;case 24:return null;default:return null}}var ea=!1,Ct=!1,Wy=typeof WeakSet=="function"?WeakSet:Set,le=null;function os(i,o){var a=i.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Ke(i,o,h)}else a.current=null}function Dc(i,o,a){try{a()}catch(h){Ke(i,o,h)}}var $g=!1;function Xy(i,o){if(Vu=El,i=Lf(),Gu(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,p=h.focusNode;h=h.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var v=0,S=-1,L=-1,O=0,K=0,$=i,V=null;t:for(;;){for(var se;$!==a||f!==0&&$.nodeType!==3||(S=v+f),$!==p||h!==0&&$.nodeType!==3||(L=v+h),$.nodeType===3&&(v+=$.nodeValue.length),(se=$.firstChild)!==null;)V=$,$=se;for(;;){if($===i)break t;if(V===a&&++O===f&&(S=v),V===p&&++K===h&&(L=v),(se=$.nextSibling)!==null)break;$=V,V=$.parentNode}$=se}a=S===-1||L===-1?null:{start:S,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ku={focusedElem:i,selectionRange:a},El=!1,le=o;le!==null;)if(o=le,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,le=i;else for(;le!==null;){o=le;try{var ae=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ce=ae.memoizedProps,Qe=ae.memoizedState,F=o.stateNode,A=F.getSnapshotBeforeUpdate(o.elementType===o.type?ce:wn(o.type,ce),Qe);F.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var D=o.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Q){Ke(o,o.return,Q)}if(i=o.sibling,i!==null){i.return=o.return,le=i;break}le=o.return}return ae=$g,$g=!1,ae}function So(i,o,a){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&i)===i){var p=f.destroy;f.destroy=void 0,p!==void 0&&Dc(o,a,p)}f=f.next}while(f!==h)}}function ta(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&i)===i){var h=a.create;a.destroy=h()}a=a.next}while(a!==o)}}function Oc(i){var o=i.ref;if(o!==null){var a=i.stateNode;switch(i.tag){case 5:i=a;break;default:i=a}typeof o=="function"?o(i):o.current=i}}function qg(i){var o=i.alternate;o!==null&&(i.alternate=null,qg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[zn],delete o[fo],delete o[qu],delete o[Ry],delete o[Ty])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Qg(i){return i.tag===5||i.tag===3||i.tag===4}function Jg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Qg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Nc(i,o,a){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?a.nodeType===8?a.parentNode.insertBefore(i,o):a.insertBefore(i,o):(a.nodeType===8?(o=a.parentNode,o.insertBefore(i,a)):(o=a,o.appendChild(i)),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=kl));else if(h!==4&&(i=i.child,i!==null))for(Nc(i,o,a),i=i.sibling;i!==null;)Nc(i,o,a),i=i.sibling}function zc(i,o,a){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(zc(i,o,a),i=i.sibling;i!==null;)zc(i,o,a),i=i.sibling}var ft=null,Cn=!1;function ki(i,o,a){for(a=a.child;a!==null;)em(i,o,a),a=a.sibling}function em(i,o,a){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(gl,a)}catch{}switch(a.tag){case 5:Ct||os(a,o);case 6:var h=ft,f=Cn;ft=null,ki(i,o,a),ft=h,Cn=f,ft!==null&&(Cn?(i=ft,a=a.stateNode,i.nodeType===8?i.parentNode.removeChild(a):i.removeChild(a)):ft.removeChild(a.stateNode));break;case 18:ft!==null&&(Cn?(i=ft,a=a.stateNode,i.nodeType===8?$u(i.parentNode,a):i.nodeType===1&&$u(i,a),to(i)):$u(ft,a.stateNode));break;case 4:h=ft,f=Cn,ft=a.stateNode.containerInfo,Cn=!0,ki(i,o,a),ft=h,Cn=f;break;case 0:case 11:case 14:case 15:if(!Ct&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var p=f,v=p.destroy;p=p.tag,v!==void 0&&(p&2||p&4)&&Dc(a,o,v),f=f.next}while(f!==h)}ki(i,o,a);break;case 1:if(!Ct&&(os(a,o),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(S){Ke(a,o,S)}ki(i,o,a);break;case 21:ki(i,o,a);break;case 22:a.mode&1?(Ct=(h=Ct)||a.memoizedState!==null,ki(i,o,a),Ct=h):ki(i,o,a);break;default:ki(i,o,a)}}function tm(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var a=i.stateNode;a===null&&(a=i.stateNode=new Wy),o.forEach(function(h){var f=Qy.bind(null,i,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Sn(i,o){var a=o.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var p=i,v=o,S=v;e:for(;S!==null;){switch(S.tag){case 5:ft=S.stateNode,Cn=!1;break e;case 3:ft=S.stateNode.containerInfo,Cn=!0;break e;case 4:ft=S.stateNode.containerInfo,Cn=!0;break e}S=S.return}if(ft===null)throw Error(t(160));em(p,v,f),ft=null,Cn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(O){Ke(f,o,O)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)nm(o,i),o=o.sibling}function nm(i,o){var a=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Sn(o,i),Un(i),h&4){try{So(3,i,i.return),ta(3,i)}catch(ce){Ke(i,i.return,ce)}try{So(5,i,i.return)}catch(ce){Ke(i,i.return,ce)}}break;case 1:Sn(o,i),Un(i),h&512&&a!==null&&os(a,a.return);break;case 5:if(Sn(o,i),Un(i),h&512&&a!==null&&os(a,a.return),i.flags&32){var f=i.stateNode;try{or(f,"")}catch(ce){Ke(i,i.return,ce)}}if(h&4&&(f=i.stateNode,f!=null)){var p=i.memoizedProps,v=a!==null?a.memoizedProps:p,S=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{S==="input"&&p.type==="radio"&&p.name!=null&&Jt(f,p),Ur(S,v);var O=Ur(S,p);for(v=0;v<L.length;v+=2){var K=L[v],$=L[v+1];K==="style"?dl(f,$):K==="dangerouslySetInnerHTML"?sr(f,$):K==="children"?or(f,$):k(f,K,$,O)}switch(S){case"input":_t(f,p);break;case"textarea":Hn(f,p);break;case"select":var V=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var se=p.value;se!=null?tn(f,!!p.multiple,se,!1):V!==!!p.multiple&&(p.defaultValue!=null?tn(f,!!p.multiple,p.defaultValue,!0):tn(f,!!p.multiple,p.multiple?[]:"",!1))}f[fo]=p}catch(ce){Ke(i,i.return,ce)}}break;case 6:if(Sn(o,i),Un(i),h&4){if(i.stateNode===null)throw Error(t(162));f=i.stateNode,p=i.memoizedProps;try{f.nodeValue=p}catch(ce){Ke(i,i.return,ce)}}break;case 3:if(Sn(o,i),Un(i),h&4&&a!==null&&a.memoizedState.isDehydrated)try{to(o.containerInfo)}catch(ce){Ke(i,i.return,ce)}break;case 4:Sn(o,i),Un(i);break;case 13:Sn(o,i),Un(i),f=i.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(Uc=qe())),h&4&&tm(i);break;case 22:if(K=a!==null&&a.memoizedState!==null,i.mode&1?(Ct=(O=Ct)||K,Sn(o,i),Ct=O):Sn(o,i),Un(i),h&8192){if(O=i.memoizedState!==null,(i.stateNode.isHidden=O)&&!K&&i.mode&1)for(le=i,K=i.child;K!==null;){for($=le=K;le!==null;){switch(V=le,se=V.child,V.tag){case 0:case 11:case 14:case 15:So(4,V,V.return);break;case 1:os(V,V.return);var ae=V.stateNode;if(typeof ae.componentWillUnmount=="function"){h=V,a=V.return;try{o=h,ae.props=o.memoizedProps,ae.state=o.memoizedState,ae.componentWillUnmount()}catch(ce){Ke(h,a,ce)}}break;case 5:os(V,V.return);break;case 22:if(V.memoizedState!==null){sm($);continue}}se!==null?(se.return=V,le=se):sm($)}K=K.sibling}e:for(K=null,$=i;;){if($.tag===5){if(K===null){K=$;try{f=$.stateNode,O?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(S=$.stateNode,L=$.memoizedProps.style,v=L!=null&&L.hasOwnProperty("display")?L.display:null,S.style.display=Gr("display",v))}catch(ce){Ke(i,i.return,ce)}}}else if($.tag===6){if(K===null)try{$.stateNode.nodeValue=O?"":$.memoizedProps}catch(ce){Ke(i,i.return,ce)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===i)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===i)break e;for(;$.sibling===null;){if($.return===null||$.return===i)break e;K===$&&(K=null),$=$.return}K===$&&(K=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:Sn(o,i),Un(i),h&4&&tm(i);break;case 21:break;default:Sn(o,i),Un(i)}}function Un(i){var o=i.flags;if(o&2){try{e:{for(var a=i.return;a!==null;){if(Qg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(or(f,""),h.flags&=-33);var p=Jg(i);zc(i,p,f);break;case 3:case 4:var v=h.stateNode.containerInfo,S=Jg(i);Nc(i,S,v);break;default:throw Error(t(161))}}catch(L){Ke(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function By(i,o,a){le=i,im(i)}function im(i,o,a){for(var h=(i.mode&1)!==0;le!==null;){var f=le,p=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||ea;if(!v){var S=f.alternate,L=S!==null&&S.memoizedState!==null||Ct;S=ea;var O=Ct;if(ea=v,(Ct=L)&&!O)for(le=f;le!==null;)v=le,L=v.child,v.tag===22&&v.memoizedState!==null?om(f):L!==null?(L.return=v,le=L):om(f);for(;p!==null;)le=p,im(p),p=p.sibling;le=f,ea=S,Ct=O}rm(i)}else f.subtreeFlags&8772&&p!==null?(p.return=f,le=p):rm(i)}}function rm(i){for(;le!==null;){var o=le;if(o.flags&8772){var a=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:Ct||ta(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!Ct)if(a===null)h.componentDidMount();else{var f=o.elementType===o.type?a.memoizedProps:wn(o.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var p=o.updateQueue;p!==null&&sg(o,p,h);break;case 3:var v=o.updateQueue;if(v!==null){if(a=null,o.child!==null)switch(o.child.tag){case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}sg(o,v,a)}break;case 5:var S=o.stateNode;if(a===null&&o.flags&4){a=S;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var O=o.alternate;if(O!==null){var K=O.memoizedState;if(K!==null){var $=K.dehydrated;$!==null&&to($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ct||o.flags&512&&Oc(o)}catch(V){Ke(o,o.return,V)}}if(o===i){le=null;break}if(a=o.sibling,a!==null){a.return=o.return,le=a;break}le=o.return}}function sm(i){for(;le!==null;){var o=le;if(o===i){le=null;break}var a=o.sibling;if(a!==null){a.return=o.return,le=a;break}le=o.return}}function om(i){for(;le!==null;){var o=le;try{switch(o.tag){case 0:case 11:case 15:var a=o.return;try{ta(4,o)}catch(L){Ke(o,a,L)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var f=o.return;try{h.componentDidMount()}catch(L){Ke(o,f,L)}}var p=o.return;try{Oc(o)}catch(L){Ke(o,p,L)}break;case 5:var v=o.return;try{Oc(o)}catch(L){Ke(o,v,L)}}}catch(L){Ke(o,o.return,L)}if(o===i){le=null;break}var S=o.sibling;if(S!==null){S.return=o.return,le=S;break}le=o.return}}var Yy=Math.ceil,na=M.ReactCurrentDispatcher,Gc=M.ReactCurrentOwner,an=M.ReactCurrentBatchConfig,Ae=0,lt=null,et=null,gt=0,$t=0,ls=Ii(0),it=0,Ro=null,pr=0,ia=0,bc=0,To=null,zt=null,Uc=0,as=1/0,ri=null,ra=!1,jc=null,Fi=null,sa=!1,Di=null,oa=0,Io=0,Wc=null,la=-1,aa=0;function At(){return Ae&6?qe():la!==-1?la:la=qe()}function Oi(i){return i.mode&1?Ae&2&&gt!==0?gt&-gt:Ly.transition!==null?(aa===0&&(aa=Qd()),aa):(i=Oe,i!==0||(i=window.event,i=i===void 0?16:af(i.type)),i):1}function Rn(i,o,a,h){if(50<Io)throw Io=0,Wc=null,Error(t(185));$s(i,a,h),(!(Ae&2)||i!==lt)&&(i===lt&&(!(Ae&2)&&(ia|=a),it===4&&Ni(i,gt)),Gt(i,h),a===1&&Ae===0&&!(o.mode&1)&&(as=qe()+500,Nl&&Mi()))}function Gt(i,o){var a=i.callbackNode;L0(i,o);var h=_l(i,i===lt?gt:0);if(h===0)a!==null&&Hd(a),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(a!=null&&Hd(a),o===1)i.tag===0?Iy(am.bind(null,i)):Kf(am.bind(null,i)),Cy(function(){!(Ae&6)&&Mi()}),a=null;else{switch(Jd(h)){case 1:a=xu;break;case 4:a=$d;break;case 16:a=fl;break;case 536870912:a=qd;break;default:a=fl}a=pm(a,lm.bind(null,i))}i.callbackPriority=o,i.callbackNode=a}}function lm(i,o){if(la=-1,aa=0,Ae&6)throw Error(t(327));var a=i.callbackNode;if(us()&&i.callbackNode!==a)return null;var h=_l(i,i===lt?gt:0);if(h===0)return null;if(h&30||h&i.expiredLanes||o)o=ua(i,h);else{o=h;var f=Ae;Ae|=2;var p=cm();(lt!==i||gt!==o)&&(ri=null,as=qe()+500,yr(i,o));do try{Zy();break}catch(S){um(i,S)}while(!0);oc(),na.current=p,Ae=f,et!==null?o=0:(lt=null,gt=0,o=it)}if(o!==0){if(o===2&&(f=wu(i),f!==0&&(h=f,o=Xc(i,f))),o===1)throw a=Ro,yr(i,0),Ni(i,h),Gt(i,qe()),a;if(o===6)Ni(i,h);else{if(f=i.current.alternate,!(h&30)&&!Vy(f)&&(o=ua(i,h),o===2&&(p=wu(i),p!==0&&(h=p,o=Xc(i,p))),o===1))throw a=Ro,yr(i,0),Ni(i,h),Gt(i,qe()),a;switch(i.finishedWork=f,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:vr(i,zt,ri);break;case 3:if(Ni(i,h),(h&130023424)===h&&(o=Uc+500-qe(),10<o)){if(_l(i,0)!==0)break;if(f=i.suspendedLanes,(f&h)!==h){At(),i.pingedLanes|=i.suspendedLanes&f;break}i.timeoutHandle=Hu(vr.bind(null,i,zt,ri),o);break}vr(i,zt,ri);break;case 4:if(Ni(i,h),(h&4194240)===h)break;for(o=i.eventTimes,f=-1;0<h;){var v=31-vn(h);p=1<<v,v=o[v],v>f&&(f=v),h&=~p}if(h=f,h=qe()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Yy(h/1960))-h,10<h){i.timeoutHandle=Hu(vr.bind(null,i,zt,ri),h);break}vr(i,zt,ri);break;case 5:vr(i,zt,ri);break;default:throw Error(t(329))}}}return Gt(i,qe()),i.callbackNode===a?lm.bind(null,i):null}function Xc(i,o){var a=To;return i.current.memoizedState.isDehydrated&&(yr(i,o).flags|=256),i=ua(i,o),i!==2&&(o=zt,zt=a,o!==null&&Bc(o)),i}function Bc(i){zt===null?zt=i:zt.push.apply(zt,i)}function Vy(i){for(var o=i;;){if(o.flags&16384){var a=o.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],p=f.getSnapshot;f=f.value;try{if(!En(p(),f))return!1}catch{return!1}}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ni(i,o){for(o&=~bc,o&=~ia,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var a=31-vn(o),h=1<<a;i[a]=-1,o&=~h}}function am(i){if(Ae&6)throw Error(t(327));us();var o=_l(i,0);if(!(o&1))return Gt(i,qe()),null;var a=ua(i,o);if(i.tag!==0&&a===2){var h=wu(i);h!==0&&(o=h,a=Xc(i,h))}if(a===1)throw a=Ro,yr(i,0),Ni(i,o),Gt(i,qe()),a;if(a===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,vr(i,zt,ri),Gt(i,qe()),null}function Yc(i,o){var a=Ae;Ae|=1;try{return i(o)}finally{Ae=a,Ae===0&&(as=qe()+500,Nl&&Mi())}}function _r(i){Di!==null&&Di.tag===0&&!(Ae&6)&&us();var o=Ae;Ae|=1;var a=an.transition,h=Oe;try{if(an.transition=null,Oe=1,i)return i()}finally{Oe=h,an.transition=a,Ae=o,!(Ae&6)&&Mi()}}function Vc(){$t=ls.current,We(ls)}function yr(i,o){i.finishedWork=null,i.finishedLanes=0;var a=i.timeoutHandle;if(a!==-1&&(i.timeoutHandle=-1,wy(a)),et!==null)for(a=et.return;a!==null;){var h=a;switch(tc(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Dl();break;case 3:rs(),We(Dt),We(Et),gc();break;case 5:dc(h);break;case 4:rs();break;case 13:We(Be);break;case 19:We(Be);break;case 10:lc(h.type._context);break;case 22:case 23:Vc()}a=a.return}if(lt=i,et=i=zi(i.current,null),gt=$t=o,it=0,Ro=null,bc=ia=pr=0,zt=To=null,fr!==null){for(o=0;o<fr.length;o++)if(a=fr[o],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,p=a.pending;if(p!==null){var v=p.next;p.next=f,h.next=v}a.pending=h}fr=null}return i}function um(i,o){do{var a=et;try{if(oc(),Vl.current=$l,Kl){for(var h=Ye.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Kl=!1}if(mr=0,ot=nt=Ye=null,vo=!1,Eo=0,Gc.current=null,a===null||a.return===null){it=1,Ro=o,et=null;break}e:{var p=i,v=a.return,S=a,L=o;if(o=gt,S.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var O=L,K=S,$=K.tag;if(!(K.mode&1)&&($===0||$===11||$===15)){var V=K.alternate;V?(K.updateQueue=V.updateQueue,K.memoizedState=V.memoizedState,K.lanes=V.lanes):(K.updateQueue=null,K.memoizedState=null)}var se=Dg(v);if(se!==null){se.flags&=-257,Og(se,v,S,p,o),se.mode&1&&Fg(p,O,o),o=se,L=O;var ae=o.updateQueue;if(ae===null){var ce=new Set;ce.add(L),o.updateQueue=ce}else ae.add(L);break e}else{if(!(o&1)){Fg(p,O,o),Kc();break e}L=Error(t(426))}}else if(Xe&&S.mode&1){var Qe=Dg(v);if(Qe!==null){!(Qe.flags&65536)&&(Qe.flags|=256),Og(Qe,v,S,p,o),rc(ss(L,S));break e}}p=L=ss(L,S),it!==4&&(it=2),To===null?To=[p]:To.push(p),p=v;do{switch(p.tag){case 3:p.flags|=65536,o&=-o,p.lanes|=o;var F=Pg(p,L,o);rg(p,F);break e;case 1:S=L;var A=p.type,D=p.stateNode;if(!(p.flags&128)&&(typeof A.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Fi===null||!Fi.has(D)))){p.flags|=65536,o&=-o,p.lanes|=o;var Q=kg(p,S,o);rg(p,Q);break e}}p=p.return}while(p!==null)}dm(a)}catch(de){o=de,et===a&&a!==null&&(et=a=a.return);continue}break}while(!0)}function cm(){var i=na.current;return na.current=$l,i===null?$l:i}function Kc(){(it===0||it===3||it===2)&&(it=4),lt===null||!(pr&268435455)&&!(ia&268435455)||Ni(lt,gt)}function ua(i,o){var a=Ae;Ae|=2;var h=cm();(lt!==i||gt!==o)&&(ri=null,yr(i,o));do try{Ky();break}catch(f){um(i,f)}while(!0);if(oc(),Ae=a,na.current=h,et!==null)throw Error(t(261));return lt=null,gt=0,it}function Ky(){for(;et!==null;)hm(et)}function Zy(){for(;et!==null&&!v0();)hm(et)}function hm(i){var o=mm(i.alternate,i,$t);i.memoizedProps=i.pendingProps,o===null?dm(i):et=o,Gc.current=null}function dm(i){var o=i;do{var a=o.alternate;if(i=o.return,o.flags&32768){if(a=jy(a,o),a!==null){a.flags&=32767,et=a;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{it=6,et=null;return}}else if(a=Uy(a,o,$t),a!==null){et=a;return}if(o=o.sibling,o!==null){et=o;return}et=o=i}while(o!==null);it===0&&(it=5)}function vr(i,o,a){var h=Oe,f=an.transition;try{an.transition=null,Oe=1,Hy(i,o,a,h)}finally{an.transition=f,Oe=h}return null}function Hy(i,o,a,h){do us();while(Di!==null);if(Ae&6)throw Error(t(327));a=i.finishedWork;var f=i.finishedLanes;if(a===null)return null;if(i.finishedWork=null,i.finishedLanes=0,a===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var p=a.lanes|a.childLanes;if(M0(i,p),i===lt&&(et=lt=null,gt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||sa||(sa=!0,pm(fl,function(){return us(),null})),p=(a.flags&15990)!==0,a.subtreeFlags&15990||p){p=an.transition,an.transition=null;var v=Oe;Oe=1;var S=Ae;Ae|=4,Gc.current=null,Xy(i,a),nm(a,i),my(Ku),El=!!Vu,Ku=Vu=null,i.current=a,By(a),E0(),Ae=S,Oe=v,an.transition=p}else i.current=a;if(sa&&(sa=!1,Di=i,oa=f),p=i.pendingLanes,p===0&&(Fi=null),C0(a.stateNode),Gt(i,qe()),o!==null)for(h=i.onRecoverableError,a=0;a<o.length;a++)f=o[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(ra)throw ra=!1,i=jc,jc=null,i;return oa&1&&i.tag!==0&&us(),p=i.pendingLanes,p&1?i===Wc?Io++:(Io=0,Wc=i):Io=0,Mi(),null}function us(){if(Di!==null){var i=Jd(oa),o=an.transition,a=Oe;try{if(an.transition=null,Oe=16>i?16:i,Di===null)var h=!1;else{if(i=Di,Di=null,oa=0,Ae&6)throw Error(t(331));var f=Ae;for(Ae|=4,le=i.current;le!==null;){var p=le,v=p.child;if(le.flags&16){var S=p.deletions;if(S!==null){for(var L=0;L<S.length;L++){var O=S[L];for(le=O;le!==null;){var K=le;switch(K.tag){case 0:case 11:case 15:So(8,K,p)}var $=K.child;if($!==null)$.return=K,le=$;else for(;le!==null;){K=le;var V=K.sibling,se=K.return;if(qg(K),K===O){le=null;break}if(V!==null){V.return=se,le=V;break}le=se}}}var ae=p.alternate;if(ae!==null){var ce=ae.child;if(ce!==null){ae.child=null;do{var Qe=ce.sibling;ce.sibling=null,ce=Qe}while(ce!==null)}}le=p}}if(p.subtreeFlags&2064&&v!==null)v.return=p,le=v;else e:for(;le!==null;){if(p=le,p.flags&2048)switch(p.tag){case 0:case 11:case 15:So(9,p,p.return)}var F=p.sibling;if(F!==null){F.return=p.return,le=F;break e}le=p.return}}var A=i.current;for(le=A;le!==null;){v=le;var D=v.child;if(v.subtreeFlags&2064&&D!==null)D.return=v,le=D;else e:for(v=A;le!==null;){if(S=le,S.flags&2048)try{switch(S.tag){case 0:case 11:case 15:ta(9,S)}}catch(de){Ke(S,S.return,de)}if(S===v){le=null;break e}var Q=S.sibling;if(Q!==null){Q.return=S.return,le=Q;break e}le=S.return}}if(Ae=f,Mi(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(gl,i)}catch{}h=!0}return h}finally{Oe=a,an.transition=o}}return!1}function fm(i,o,a){o=ss(a,o),o=Pg(i,o,1),i=Pi(i,o,1),o=At(),i!==null&&($s(i,1,o),Gt(i,o))}function Ke(i,o,a){if(i.tag===3)fm(i,i,a);else for(;o!==null;){if(o.tag===3){fm(o,i,a);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Fi===null||!Fi.has(h))){i=ss(a,i),i=kg(o,i,1),o=Pi(o,i,1),i=At(),o!==null&&($s(o,1,i),Gt(o,i));break}}o=o.return}}function $y(i,o,a){var h=i.pingCache;h!==null&&h.delete(o),o=At(),i.pingedLanes|=i.suspendedLanes&a,lt===i&&(gt&a)===a&&(it===4||it===3&&(gt&130023424)===gt&&500>qe()-Uc?yr(i,0):bc|=a),Gt(i,o)}function gm(i,o){o===0&&(i.mode&1?(o=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):o=1);var a=At();i=ti(i,o),i!==null&&($s(i,o,a),Gt(i,a))}function qy(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),gm(i,a)}function Qy(i,o){var a=0;switch(i.tag){case 13:var h=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),gm(i,a)}var mm;mm=function(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps||Dt.current)Nt=!0;else{if(!(i.lanes&a)&&!(o.flags&128))return Nt=!1,by(i,o,a);Nt=!!(i.flags&131072)}else Nt=!1,Xe&&o.flags&1048576&&Zf(o,Gl,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Jl(i,o),i=o.pendingProps;var f=qr(o,Et.current);is(o,a),f=_c(null,o,h,i,f,a);var p=yc();return o.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ot(h)?(p=!0,Ol(o)):p=!1,o.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,cc(o),f.updater=ql,o.stateNode=f,f._reactInternals=o,Sc(o,h,i,a),o=Lc(null,o,h,!0,p,a)):(o.tag=0,Xe&&p&&ec(o),Mt(null,o,f,a),o=o.child),o;case 16:h=o.elementType;e:{switch(Jl(i,o),i=o.pendingProps,f=h._init,h=f(h._payload),o.type=h,f=o.tag=e1(h),i=wn(h,i),f){case 0:o=Ic(null,o,h,i,a);break e;case 1:o=jg(null,o,h,i,a);break e;case 11:o=Ng(null,o,h,i,a);break e;case 14:o=zg(null,o,h,wn(h.type,i),a);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,f=o.pendingProps,f=o.elementType===h?f:wn(h,f),Ic(i,o,h,f,a);case 1:return h=o.type,f=o.pendingProps,f=o.elementType===h?f:wn(h,f),jg(i,o,h,f,a);case 3:e:{if(Wg(o),i===null)throw Error(t(387));h=o.pendingProps,p=o.memoizedState,f=p.element,ig(i,o),Bl(o,h,null,a);var v=o.memoizedState;if(h=v.element,p.isDehydrated)if(p={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},o.updateQueue.baseState=p,o.memoizedState=p,o.flags&256){f=ss(Error(t(423)),o),o=Xg(i,o,h,a,f);break e}else if(h!==f){f=ss(Error(t(424)),o),o=Xg(i,o,h,a,f);break e}else for(Ht=Ti(o.stateNode.containerInfo.firstChild),Zt=o,Xe=!0,xn=null,a=tg(o,null,h,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(es(),h===f){o=ii(i,o,a);break e}Mt(i,o,h,a)}o=o.child}return o;case 5:return og(o),i===null&&ic(o),h=o.type,f=o.pendingProps,p=i!==null?i.memoizedProps:null,v=f.children,Zu(h,f)?v=null:p!==null&&Zu(h,p)&&(o.flags|=32),Ug(i,o),Mt(i,o,v,a),o.child;case 6:return i===null&&ic(o),null;case 13:return Bg(i,o,a);case 4:return hc(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=ts(o,null,h,a):Mt(i,o,h,a),o.child;case 11:return h=o.type,f=o.pendingProps,f=o.elementType===h?f:wn(h,f),Ng(i,o,h,f,a);case 7:return Mt(i,o,o.pendingProps,a),o.child;case 8:return Mt(i,o,o.pendingProps.children,a),o.child;case 12:return Mt(i,o,o.pendingProps.children,a),o.child;case 10:e:{if(h=o.type._context,f=o.pendingProps,p=o.memoizedProps,v=f.value,Ue(jl,h._currentValue),h._currentValue=v,p!==null)if(En(p.value,v)){if(p.children===f.children&&!Dt.current){o=ii(i,o,a);break e}}else for(p=o.child,p!==null&&(p.return=o);p!==null;){var S=p.dependencies;if(S!==null){v=p.child;for(var L=S.firstContext;L!==null;){if(L.context===h){if(p.tag===1){L=ni(-1,a&-a),L.tag=2;var O=p.updateQueue;if(O!==null){O=O.shared;var K=O.pending;K===null?L.next=L:(L.next=K.next,K.next=L),O.pending=L}}p.lanes|=a,L=p.alternate,L!==null&&(L.lanes|=a),ac(p.return,a,o),S.lanes|=a;break}L=L.next}}else if(p.tag===10)v=p.type===o.type?null:p.child;else if(p.tag===18){if(v=p.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),ac(v,a,o),v=p.sibling}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===o){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}Mt(i,o,f.children,a),o=o.child}return o;case 9:return f=o.type,h=o.pendingProps.children,is(o,a),f=on(f),h=h(f),o.flags|=1,Mt(i,o,h,a),o.child;case 14:return h=o.type,f=wn(h,o.pendingProps),f=wn(h.type,f),zg(i,o,h,f,a);case 15:return Gg(i,o,o.type,o.pendingProps,a);case 17:return h=o.type,f=o.pendingProps,f=o.elementType===h?f:wn(h,f),Jl(i,o),o.tag=1,Ot(h)?(i=!0,Ol(o)):i=!1,is(o,a),Mg(o,h,f),Sc(o,h,f,a),Lc(null,o,h,!0,i,a);case 19:return Vg(i,o,a);case 22:return bg(i,o,a)}throw Error(t(156,o.tag))};function pm(i,o){return Zd(i,o)}function Jy(i,o,a,h){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(i,o,a,h){return new Jy(i,o,a,h)}function Zc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function e1(i){if(typeof i=="function")return Zc(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Z)return 11;if(i===ne)return 14}return 2}function zi(i,o){var a=i.alternate;return a===null?(a=un(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&14680064,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a}function ca(i,o,a,h,f,p){var v=2;if(h=i,typeof i=="function")Zc(i)&&(v=1);else if(typeof i=="string")v=5;else e:switch(i){case Y:return Er(a.children,f,p,o);case b:v=8,f|=8;break;case W:return i=un(12,a,o,f|2),i.elementType=W,i.lanes=p,i;case te:return i=un(13,a,o,f),i.elementType=te,i.lanes=p,i;case J:return i=un(19,a,o,f),i.elementType=J,i.lanes=p,i;case H:return ha(a,f,p,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:v=10;break e;case ie:v=9;break e;case Z:v=11;break e;case ne:v=14;break e;case ee:v=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=un(v,a,o,f),o.elementType=i,o.type=h,o.lanes=p,o}function Er(i,o,a,h){return i=un(7,i,h,o),i.lanes=a,i}function ha(i,o,a,h){return i=un(22,i,h,o),i.elementType=H,i.lanes=a,i.stateNode={isHidden:!1},i}function Hc(i,o,a){return i=un(6,i,null,o),i.lanes=a,i}function $c(i,o,a){return o=un(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function t1(i,o,a,h,f){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cu(0),this.expirationTimes=Cu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cu(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function qc(i,o,a,h,f,p,v,S,L){return i=new t1(i,o,a,S,L),o===1?(o=1,p===!0&&(o|=8)):o=0,p=un(3,null,null,o),i.current=p,p.stateNode=i,p.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},cc(p),i}function n1(i,o,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:U,key:h==null?null:""+h,children:i,containerInfo:o,implementation:a}}function _m(i){if(!i)return Li;i=i._reactInternals;e:{if(ar(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Ot(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var a=i.type;if(Ot(a))return Yf(i,a,o)}return o}function ym(i,o,a,h,f,p,v,S,L){return i=qc(a,h,!0,i,f,p,v,S,L),i.context=_m(null),a=i.current,h=At(),f=Oi(a),p=ni(h,f),p.callback=o??null,Pi(a,p,f),i.current.lanes=f,$s(i,f,h),Gt(i,h),i}function da(i,o,a,h){var f=o.current,p=At(),v=Oi(f);return a=_m(a),o.context===null?o.context=a:o.pendingContext=a,o=ni(p,v),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Pi(f,o,v),i!==null&&(Rn(i,f,v,p),Xl(i,f,v)),v}function fa(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function vm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function Qc(i,o){vm(i,o),(i=i.alternate)&&vm(i,o)}function i1(){return null}var Em=typeof reportError=="function"?reportError:function(i){console.error(i)};function Jc(i){this._internalRoot=i}ga.prototype.render=Jc.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));da(i,o,null,null)},ga.prototype.unmount=Jc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;_r(function(){da(null,i,null,null)}),o[qn]=null}};function ga(i){this._internalRoot=i}ga.prototype.unstable_scheduleHydration=function(i){if(i){var o=nf();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Ci.length&&o!==0&&o<Ci[a].priority;a++);Ci.splice(a,0,i),a===0&&of(i)}};function eh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ma(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function xm(){}function r1(i,o,a,h,f){if(f){if(typeof h=="function"){var p=h;h=function(){var O=fa(v);p.call(O)}}var v=ym(o,h,i,0,null,!1,!1,"",xm);return i._reactRootContainer=v,i[qn]=v.current,co(i.nodeType===8?i.parentNode:i),_r(),v}for(;f=i.lastChild;)i.removeChild(f);if(typeof h=="function"){var S=h;h=function(){var O=fa(L);S.call(O)}}var L=qc(i,0,!1,null,null,!1,!1,"",xm);return i._reactRootContainer=L,i[qn]=L.current,co(i.nodeType===8?i.parentNode:i),_r(function(){da(o,L,a,h)}),L}function pa(i,o,a,h,f){var p=a._reactRootContainer;if(p){var v=p;if(typeof f=="function"){var S=f;f=function(){var L=fa(v);S.call(L)}}da(o,v,i,f)}else v=r1(a,o,i,f,h);return fa(v)}ef=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var a=Hs(o.pendingLanes);a!==0&&(Su(o,a|1),Gt(o,qe()),!(Ae&6)&&(as=qe()+500,Mi()))}break;case 13:_r(function(){var h=ti(i,1);if(h!==null){var f=At();Rn(h,i,1,f)}}),Qc(i,1)}},Ru=function(i){if(i.tag===13){var o=ti(i,134217728);if(o!==null){var a=At();Rn(o,i,134217728,a)}Qc(i,134217728)}},tf=function(i){if(i.tag===13){var o=Oi(i),a=ti(i,o);if(a!==null){var h=At();Rn(a,i,o,h)}Qc(i,o)}},nf=function(){return Oe},rf=function(i,o){var a=Oe;try{return Oe=i,o()}finally{Oe=a}},Ys=function(i,o,a){switch(o){case"input":if(_t(i,a),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<a.length;o++){var h=a[o];if(h!==i&&h.form===i.form){var f=Fl(h);if(!f)throw Error(t(90));kn(h),_t(h,f)}}}break;case"textarea":Hn(i,a);break;case"select":o=a.value,o!=null&&tn(i,!!a.multiple,o,!1)}},Ks=Yc,Tt=_r;var s1={usingClientEntryPoint:!1,Events:[go,Hr,Fl,vi,Vs,Yc]},Lo={findFiberByHostInstance:ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o1={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Vd(i),i===null?null:i.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||i1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _a=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_a.isDisabled&&_a.supportsFiber)try{gl=_a.inject(o1),Nn=_a}catch{}}return bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s1,bt.createPortal=function(i,o){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eh(o))throw Error(t(200));return n1(i,o,null,a)},bt.createRoot=function(i,o){if(!eh(i))throw Error(t(299));var a=!1,h="",f=Em;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(f=o.onRecoverableError)),o=qc(i,1,!1,null,null,a,!1,h,f),i[qn]=o.current,co(i.nodeType===8?i.parentNode:i),new Jc(o)},bt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Vd(o),i=i===null?null:i.stateNode,i},bt.flushSync=function(i){return _r(i)},bt.hydrate=function(i,o,a){if(!ma(o))throw Error(t(200));return pa(null,i,o,!0,a)},bt.hydrateRoot=function(i,o,a){if(!eh(i))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,p="",v=Em;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),o=ym(o,null,i,1,a??null,f,!1,p,v),i[qn]=o.current,co(i),h)for(i=0;i<h.length;i++)a=h[i],f=a._getVersion,f=f(a._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[a,f]:o.mutableSourceEagerHydrationData.push(a,f);return new ga(o)},bt.render=function(i,o,a){if(!ma(o))throw Error(t(200));return pa(null,i,o,!1,a)},bt.unmountComponentAtNode=function(i){if(!ma(i))throw Error(t(40));return i._reactRootContainer?(_r(function(){pa(null,null,i,!1,function(){i._reactRootContainer=null,i[qn]=null})}),!0):!1},bt.unstable_batchedUpdates=Yc,bt.unstable_renderSubtreeIntoContainer=function(i,o,a,h){if(!ma(a))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return pa(i,o,a,!1,h)},bt.version="18.3.1-next-f1338f8080-20240426",bt}var Am;function p1(){if(Am)return ih.exports;Am=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ih.exports=m1(),ih.exports}var Pm;function _1(){if(Pm)return ya;Pm=1;var r=p1();return ya.createRoot=r.createRoot,ya.hydrateRoot=r.hydrateRoot,ya}var y1=_1();class Yn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const As={PROPERTYCHANGE:"propertychange"};class Ja{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function v1(r,e,t){let n,s;t=t||ci;let l=0,u=r.length,c=!1;for(;l<u;)n=l+(u-l>>1),s=+t(r[n],e),s<0?l=n+1:(u=n,c=!s);return c?l:~l}function ci(r,e){return r>e?1:r<e?-1:0}function E1(r,e){return r<e?1:r>e?-1:0}function qh(r,e,t){if(r[0]<=e)return 0;const n=r.length;if(e<=r[n-1])return n-1;if(typeof t=="function"){for(let s=1;s<n;++s){const l=r[s];if(l===e)return s;if(l<e)return t(e,r[s-1],l)>0?s-1:s}return n-1}if(t>0){for(let s=1;s<n;++s)if(r[s]<e)return s-1;return n-1}if(t<0){for(let s=1;s<n;++s)if(r[s]<=e)return s;return n-1}for(let s=1;s<n;++s){if(r[s]==e)return s;if(r[s]<e)return r[s-1]-e<e-r[s]?s-1:s}return n-1}function x1(r,e,t){for(;e<t;){const n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function fn(r,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)r[r.length]=t[s]}function ir(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function w1(r,e,t){const n=e||ci;return r.every(function(s,l){if(l===0)return!0;const u=n(r[l-1],s);return!(u>0||u===0)})}function Mr(){return!0}function nl(){return!1}function Ps(){}function Vp(r){let e,t,n;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==n||!ir(s,t))&&(n=this,t=s,e=r.apply(this,arguments)),e}}function C1(r){function e(){let t;try{t=r()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function js(r){for(const e in r)delete r[e]}function Ar(r){let e;for(e in r)return!1;return!e}class eu extends Ja{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const l=t?new Yn(e):e;l.target||(l.target=this.eventTarget_||this);const u=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});n in u||(u[n]=0,c[n]=0),++u[n];let d;for(let g=0,m=s.length;g<m;++g)if("handleEvent"in s[g]?d=s[g].handleEvent(l):d=s[g].call(this,l),d===!1||l.propagationStopped){d=!1;break}if(--u[n]===0){let g=c[n];for(delete c[n];g--;)this.removeEventListener(n,Ps);delete u[n]}return d}disposeInternal(){this.listeners_&&js(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const s=n.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=Ps,++this.pendingRemovals_[e]):(n.splice(s,1),n.length===0&&delete this.listeners_[e]))}}const Ee={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Le(r,e,t,n,s){if(s){const u=t;t=function(){r.removeEventListener(e,t),u.apply(n??this,arguments)}}else n&&n!==r&&(t=t.bind(n));const l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function Fa(r,e,t,n){return Le(r,e,t,n,!0)}function be(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),js(r))}class il extends eu{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ee.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Le(this,e[l],t);return s}return Le(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let l=0;l<s;++l)n[l]=Fa(this,e[l],t)}else n=Fa(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)S1(n);else if(Array.isArray(e))for(let s=0,l=e.length;s<l;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}il.prototype.on;il.prototype.once;il.prototype.un;function S1(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)be(r[e]);else be(r)}function ve(){throw new Error("Unimplemented abstract method.")}let R1=0;function Te(r){return r.ol_uid||(r.ol_uid=String(++R1))}class km extends Yn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class Vn extends il{constructor(e){super(),this.on,this.once,this.un,Te(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new km(n,e,t)),n=As.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new km(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const l=s[e];s[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Ar(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const dt={ADD:"add",REMOVE:"remove"},Fm={LENGTH:"length"};class va extends Yn{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Ln extends Vn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Fm.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new va(dt.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new va(dt.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new va(dt.REMOVE,s,e)),this.dispatchEvent(new va(dt.ADD,t,e))}updateLength_(){this.set(Fm.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}function ke(r,e){if(!r)throw new Error(e)}class ks extends Vn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new ks(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(be(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Le(e,Ee.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?T1(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function T1(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(ke(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}new Array(6);function An(){return[1,0,0,1,0,0]}function I1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function ht(r,e){const t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function fi(r,e,t,n,s,l,u,c){const d=Math.sin(l),g=Math.cos(l);return r[0]=n*g,r[1]=s*d,r[2]=-n*d,r[3]=s*g,r[4]=u*n*g-c*n*d+e,r[5]=u*s*d+c*s*g+t,r}function Kp(r,e){const t=L1(e);ke(t!==0,"Transformation matrix cannot be inverted");const n=e[0],s=e[1],l=e[2],u=e[3],c=e[4],d=e[5];return r[0]=u/t,r[1]=-s/t,r[2]=-l/t,r[3]=n/t,r[4]=(l*d-u*c)/t,r[5]=-(n*d-s*c)/t,r}function L1(r){return r[0]*r[3]-r[1]*r[2]}const Dm=[1e6,1e6,1e6,1e6,2,2];function M1(r){return"matrix("+r.map((t,n)=>Math.round(t*Dm[n])/Dm[n]).join(", ")+")"}const ct={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Om(r){const e=Yt();for(let t=0,n=r.length;t<n;++t)jo(e,r[t]);return e}function Qh(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function Zp(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Fr(r,e,t){let n,s;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?s=r[1]-t:r[3]<t?s=t-r[3]:s=0,n*n+s*s}function Fs(r,e){return Jh(r,e[0],e[1])}function Cs(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function Jh(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function Lh(r,e){const t=r[0],n=r[1],s=r[2],l=r[3],u=e[0],c=e[1];let d=ct.UNKNOWN;return u<t?d=d|ct.LEFT:u>s&&(d=d|ct.RIGHT),c<n?d=d|ct.BELOW:c>l&&(d=d|ct.ABOVE),d===ct.UNKNOWN&&(d=ct.INTERSECTING),d}function Yt(){return[1/0,1/0,-1/0,-1/0]}function Qi(r,e,t,n,s){return s?(s[0]=r,s[1]=e,s[2]=t,s[3]=n,s):[r,e,t,n]}function rl(r){return Qi(1/0,1/0,-1/0,-1/0,r)}function Hp(r,e){const t=r[0],n=r[1];return Qi(t,n,t,n,e)}function ed(r,e,t,n,s){const l=rl(s);return $p(l,r,e,t,n)}function Wo(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function Xo(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function jo(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function $p(r,e,t,n,s){for(;t<n;t+=s)A1(r,e[t],e[t+1]);return r}function A1(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function qp(r,e){let t;return t=e(tu(r)),t||(t=e(nu(r)),t)||(t=e(iu(r)),t)||(t=e(gi(r)),t)?t:!1}function Bo(r){let e=0;return ru(r)||(e=Me(r)*st(r)),e}function tu(r){return[r[0],r[1]]}function nu(r){return[r[2],r[1]]}function Ji(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function P1(r,e){let t;if(e==="bottom-left")t=tu(r);else if(e==="bottom-right")t=nu(r);else if(e==="top-left")t=gi(r);else if(e==="top-right")t=iu(r);else throw new Error("Invalid corner");return t}function Mh(r,e,t,n,s){const[l,u,c,d,g,m,_,y]=k1(r,e,t,n);return Qi(Math.min(l,c,g,_),Math.min(u,d,m,y),Math.max(l,c,g,_),Math.max(u,d,m,y),s)}function k1(r,e,t,n){const s=e*n[0]/2,l=e*n[1]/2,u=Math.cos(t),c=Math.sin(t),d=s*u,g=s*c,m=l*u,_=l*c,y=r[0],x=r[1];return[y-d+_,x-g-m,y-d-_,x-g+m,y+d-_,x+g+m,y+d+_,x+g-m,y-d+_,x-g-m]}function st(r){return r[3]-r[1]}function Mn(r,e,t){const n=t||Yt();return Wt(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):rl(n),n}function gi(r){return[r[0],r[3]]}function iu(r){return[r[2],r[3]]}function Me(r){return r[2]-r[0]}function Wt(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function ru(r){return r[2]<r[0]||r[3]<r[1]}function F1(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function D1(r,e,t){let n=!1;const s=Lh(r,e),l=Lh(r,t);if(s===ct.INTERSECTING||l===ct.INTERSECTING)n=!0;else{const u=r[0],c=r[1],d=r[2],g=r[3],m=e[0],_=e[1],y=t[0],x=t[1],E=(x-_)/(y-m);let w,C;l&ct.ABOVE&&!(s&ct.ABOVE)&&(w=y-(x-g)/E,n=w>=u&&w<=d),!n&&l&ct.RIGHT&&!(s&ct.RIGHT)&&(C=x-(y-d)*E,n=C>=c&&C<=g),!n&&l&ct.BELOW&&!(s&ct.BELOW)&&(w=y-(x-c)/E,n=w>=u&&w<=d),!n&&l&ct.LEFT&&!(s&ct.LEFT)&&(C=x-(y-u)*E,n=C>=c&&C<=g)}return n}function Qp(r,e){const t=e.getExtent(),n=Ji(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=Me(t),u=Math.floor((n[0]-t[0])/s)*s;r[0]-=u,r[2]-=u}return r}function td(r,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];Qp(r,e);const s=Me(n);if(Me(r)>s&&!t)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+s,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-s,r[3]]]}return[r]}const Ds={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class nd{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ds[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const sl=6378137,Ss=Math.PI*sl,O1=[-Ss,-Ss,Ss,Ss],N1=[-180,-85,180,85],Ea=sl*Math.log(Math.tan(Math.PI/2));class cs extends nd{constructor(e){super({code:e,units:"m",extent:O1,global:!0,worldExtent:N1,getPointResolution:function(t,n){return t/Math.cosh(n[1]/sl)}})}}const Nm=[new cs("EPSG:3857"),new cs("EPSG:102100"),new cs("EPSG:102113"),new cs("EPSG:900913"),new cs("http://www.opengis.net/def/crs/EPSG/0/3857"),new cs("http://www.opengis.net/gml/srs/epsg.xml#3857")];function z1(r,e,t,n){const s=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(s));for(let l=0;l<s;l+=n){e[l]=Ss*r[l]/180;let u=sl*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));u>Ea?u=Ea:u<-Ea&&(u=-Ea),e[l+1]=u}return e}function G1(r,e,t,n){const s=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(s));for(let l=0;l<s;l+=n)e[l]=180*r[l]/Ss,e[l+1]=360*Math.atan(Math.exp(r[l+1]/sl))/Math.PI-90;return e}const b1=6378137,zm=[-180,-90,180,90],U1=Math.PI*b1/180;class xr extends nd{constructor(e,t){super({code:e,units:"degrees",extent:zm,axisOrientation:t,global:!0,metersPerUnit:U1,worldExtent:zm})}}const Gm=[new xr("CRS:84"),new xr("EPSG:4326","neu"),new xr("urn:ogc:def:crs:OGC:1.3:CRS84"),new xr("urn:ogc:def:crs:OGC:2:84"),new xr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new xr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new xr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ah={};function j1(r){return Ah[r]||Ah[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function W1(r,e){Ah[r]=e}let Ts={};function Yo(r,e,t){const n=r.getCode(),s=e.getCode();n in Ts||(Ts[n]={}),Ts[n][s]=t}function oh(r,e){return r in Ts&&e in Ts[r]?Ts[r][e]:null}function Ze(r,e,t){return Math.min(Math.max(r,e),t)}function X1(r,e,t,n,s,l){const u=s-t,c=l-n;if(u!==0||c!==0){const d=((r-t)*u+(e-n)*c)/(u*u+c*c);d>1?(t=s,n=l):d>0&&(t+=u*d,n+=c*d)}return Lr(r,e,t,n)}function Lr(r,e,t,n){const s=t-r,l=n-e;return s*s+l*l}function B1(r){const e=r.length;for(let n=0;n<e;n++){let s=n,l=Math.abs(r[n][n]);for(let c=n+1;c<e;c++){const d=Math.abs(r[c][n]);d>l&&(l=d,s=c)}if(l===0)return null;const u=r[s];r[s]=r[n],r[n]=u;for(let c=n+1;c<e;c++){const d=-r[c][n]/r[n][n];for(let g=n;g<e+1;g++)n==g?r[c][g]=0:r[c][g]+=d*r[n][g]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=r[n][e]/r[n][n];for(let s=n-1;s>=0;s--)r[s][e]-=r[s][n]*t[n]}return t}function bm(r){return r*180/Math.PI}function $i(r){return r*Math.PI/180}function Is(r,e){const t=r%e;return t*e<0?t+e:t}function qt(r,e,t){return r+t*(e-r)}function id(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function xa(r,e){return Math.floor(id(r,e))}function wa(r,e){return Math.ceil(id(r,e))}function Ph(r,e,t){if(r>=e&&r<t)return r;const n=t-e;return((r-e)%n+n)%n+e}function Y1(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function Da(r,e){let t=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function rd(r,e){const t=Math.cos(e),n=Math.sin(e),s=r[0]*t-r[1]*n,l=r[1]*t+r[0]*n;return r[0]=s,r[1]=l,r}function V1(r,e){return r[0]*=e,r[1]*=e,r}function Jp(r,e){if(e.canWrapX()){const t=Me(e.getExtent()),n=K1(r,e,t);n&&(r[0]-=n*t)}return r}function K1(r,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(t=t||Me(n),s=Math.floor((r[0]-n[0])/t)),s}const Z1=63710088e-1;function Um(r,e,t){t=t||Z1;const n=$i(r[1]),s=$i(e[1]),l=(s-n)/2,u=$i(e[0]-r[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}const Oa=.9996,gn=.00669438,su=gn*gn,ou=su*gn,Sr=gn/(1-gn),jm=Math.sqrt(1-gn),Os=(1-jm)/(1+jm),e_=Os*Os,sd=e_*Os,od=sd*Os,t_=od*Os,n_=1-gn/4-3*su/64-5*ou/256,H1=3*gn/8+3*su/32+45*ou/1024,$1=15*su/256+45*ou/1024,q1=35*ou/3072,Q1=3/2*Os-27/32*sd+269/512*t_,J1=21/16*e_-55/32*od,ev=151/96*sd-417/128*t_,tv=1097/512*od,Na=6378137;function nv(r,e,t){const n=r-5e5,u=(t.north?e:e-1e7)/Oa/(Na*n_),c=u+Q1*Math.sin(2*u)+J1*Math.sin(4*u)+ev*Math.sin(6*u)+tv*Math.sin(8*u),d=Math.sin(c),g=d*d,m=Math.cos(c),_=d/m,y=_*_,x=y*y,E=1-gn*g,w=Math.sqrt(1-gn*g),C=Na/w,I=(1-gn)/E,R=Sr*m**2,k=R*R,M=n/(C*Oa),P=M*M,U=P*M,Y=U*M,b=Y*M,W=b*M,j=c-_/I*(P/2-Y/24*(5+3*y+10*R-4*k-9*Sr))+W/720*(61+90*y+298*R+45*x-252*Sr-3*k);let ie=(M-U/6*(1+2*y+R)+b/120*(5-2*R+28*y-3*k+8*Sr+24*x))/m;return ie=Ph(ie+$i(i_(t.number)),-Math.PI,Math.PI),[bm(ie),bm(j)]}const Wm=-80,Xm=84,iv=-180,rv=180;function sv(r,e,t){r=Ph(r,iv,rv),e<Wm?e=Wm:e>Xm&&(e=Xm);const n=$i(e),s=Math.sin(n),l=Math.cos(n),u=s/l,c=u*u,d=c*c,g=$i(r),m=i_(t.number),_=$i(m),y=Na/Math.sqrt(1-gn*s**2),x=Sr*l**2,E=l*Ph(g-_,-Math.PI,Math.PI),w=E*E,C=w*E,I=C*E,R=I*E,k=R*E,M=Na*(n_*n-H1*Math.sin(2*n)+$1*Math.sin(4*n)-q1*Math.sin(6*n)),P=Oa*y*(E+C/6*(1-c+x)+R/120*(5-18*c+d+72*x-58*Sr))+5e5;let U=Oa*(M+y*u*(w/2+I/24*(5-c+9*x+4*x**2)+k/720*(61-58*c+d+600*x-330*Sr)));return t.north||(U+=1e7),[P,U]}function i_(r){return(r-1)*6-180+3}const ov=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function r_(r){let e=0;for(const s of ov){const l=r.match(s);if(l){e=parseInt(l[1]);break}}if(!e)return null;let t=0,n=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(n=!0,t=e-32600),t?{number:t,north:n}:null}function Bm(r,e){return function(t,n,s,l){const u=t.length;s=s>1?s:2,l=l??s,n||(s>2?n=t.slice():n=new Array(u));for(let c=0;c<u;c+=l){const d=t[c],g=t[c+1],m=r(d,g,e);n[c]=m[0],n[c+1]=m[1]}return n}}function lv(r){return r_(r)?new nd({code:r,units:"m"}):null}function av(r){const e=r_(r.getCode());return e?{forward:Bm(sv,e),inverse:Bm(nv,e)}:null}function s_(...r){console.warn(...r)}const uv=[av],cv=[lv];let kh=!0;function hv(r){kh=!1}function ld(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function Fh(r){W1(r.getCode(),r),Yo(r,r,ld)}function dv(r){r.forEach(Fh)}function He(r){if(typeof r!="string")return r;const e=j1(r);if(e)return e;for(const t of cv){const n=t(r);if(n)return n}return null}function za(r,e,t,n){r=He(r);let s;const l=r.getPointResolutionFunc();if(l){if(s=l(e,t),n&&n!==r.getUnits()){const u=r.getMetersPerUnit();u&&(s=s*u/Ds[n])}}else{const u=r.getUnits();if(u=="degrees"&&!n||n=="degrees")s=e;else{const c=ud(r,He("EPSG:4326"));if(!c&&u!=="degrees")s=e*r.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=c(g,g,2);const m=Um(g.slice(0,2),g.slice(2,4)),_=Um(g.slice(4,6),g.slice(6,8));s=(m+_)/2}const d=n?Ds[n]:r.getMetersPerUnit();d!==void 0&&(s/=d)}}return s}function Ym(r){dv(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Yo(e,t,ld)})})}function fv(r,e,t,n){r.forEach(function(s){e.forEach(function(l){Yo(s,l,t),Yo(l,s,n)})})}function ad(r,e){return r?typeof r=="string"?He(r):r:He(e)}function gv(r){return function(e,t,n,s){const l=e.length;n=n!==void 0?n:2,s=s??n,t=t!==void 0?t:new Array(l);for(let u=0;u<l;u+=s){const c=r(e.slice(u,u+n)),d=c.length;for(let g=0,m=s;g<m;++g)t[u+g]=g>=d?e[u+g]:c[g]}return t}}function ka(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||ud(r,e)===ld)&&t}function ud(r,e){const t=r.getCode(),n=e.getCode();let s=oh(t,n);if(s)return s;let l=null,u=null;for(const d of uv)l||(l=d(r)),u||(u=d(e));if(!l&&!u)return null;const c="EPSG:4326";if(u)if(l)s=lh(l.inverse,u.forward);else{const d=oh(t,c);d&&(s=lh(d,u.forward))}else{const d=oh(c,n);d&&(s=lh(l.inverse,d))}return s&&(Fh(r),Fh(e),Yo(r,e,s)),s}function lh(r,e){return function(t,n,s,l){return n=r(t,n,s,l),e(n,n,s,l)}}function Vo(r,e){const t=He(r),n=He(e);return ud(t,n)}function cd(r,e,t){const n=Vo(e,t);if(!n){const s=He(e).getCode(),l=He(t).getCode();throw new Error(`No transform available between ${s} and ${l}`)}return n(r,void 0,r.length)}function Dh(r,e){return r}function li(r,e){return kh&&!Da(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(kh=!1,s_("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function o_(r,e){return r}function Ki(r,e){return r}function mv(){Ym(Nm),Ym(Gm),fv(Gm,Nm,z1,G1)}mv();function qi(r,e,t,n,s,l,u){l=l||[],u=u||2;let c=0;for(let d=e;d<t;d+=n){const g=r[d],m=r[d+1];l[c++]=s[0]*g+s[2]*m+s[4],l[c++]=s[1]*g+s[3]*m+s[5];for(let _=2;_<u;_++)l[c++]=r[d+_]}return l&&l.length!=c&&(l.length=c),l}function l_(r,e,t,n,s,l,u){u=u||[];const c=Math.cos(s),d=Math.sin(s),g=l[0],m=l[1];let _=0;for(let y=e;y<t;y+=n){const x=r[y]-g,E=r[y+1]-m;u[_++]=g+x*c-E*d,u[_++]=m+x*d+E*c;for(let w=y+2;w<y+n;++w)u[_++]=r[w]}return u&&u.length!=_&&(u.length=_),u}function pv(r,e,t,n,s,l,u,c){c=c||[];const d=u[0],g=u[1];let m=0;for(let _=e;_<t;_+=n){const y=r[_]-d,x=r[_+1]-g;c[m++]=d+s*y,c[m++]=g+l*x;for(let E=_+2;E<_+n;++E)c[m++]=r[E]}return c&&c.length!=m&&(c.length=m),c}function _v(r,e,t,n,s,l,u){u=u||[];let c=0;for(let d=e;d<t;d+=n){u[c++]=r[d]+s,u[c++]=r[d+1]+l;for(let g=d+2;g<d+n;++g)u[c++]=r[g]}return u&&u.length!=c&&(u.length=c),u}const Vm=An();class a_ extends Vn{constructor(){super(),this.extent_=Yt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Vp((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ve()}closestPointXY(e,t,n,s){return ve()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ve()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&rl(t),this.extentRevision_=this.getRevision()}return F1(this.extent_,e)}rotate(e,t){ve()}scale(e,t,n){ve()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ve()}getType(){return ve()}applyTransform(e){ve()}intersectsExtent(e){return ve()}translate(e,t){ve()}transform(e,t){const n=He(e),s=n.getUnits()=="tile-pixels"?function(l,u,c){const d=n.getExtent(),g=n.getWorldExtent(),m=st(g)/st(d);fi(Vm,g[0],g[3],m,-m,0,0,0);const _=qi(l,0,l.length,c,Vm,u),y=Vo(n,t);return y?y(_,_,c):_}:Vo(n,t);return this.applyTransform(s),this}}class Dr extends a_{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return ed(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ve()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Km(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ve()}setLayout(e,t,n){let s;if(e)s=Km(e);else{for(let l=0;l<n;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=Or(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();l_(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Ji(this.getExtent()));const s=this.getFlatCoordinates();if(s){const l=this.getStride();pv(s,0,s.length,l,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();_v(n,0,n.length,s,e,t,n),this.changed()}}}function Or(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function Km(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function yv(r,e,t){const n=r.getFlatCoordinates();if(!n)return null;const s=r.getStride();return qi(n,0,n.length,s,e,t)}function Zm(r,e,t,n,s,l,u){const c=r[e],d=r[e+1],g=r[t]-c,m=r[t+1]-d;let _;if(g===0&&m===0)_=e;else{const y=((s-c)*g+(l-d)*m)/(g*g+m*m);if(y>1)_=t;else if(y>0){for(let x=0;x<n;++x)u[x]=qt(r[e+x],r[t+x],y);u.length=n;return}else _=e}for(let y=0;y<n;++y)u[y]=r[_+y];u.length=n}function hd(r,e,t,n,s){let l=r[e],u=r[e+1];for(e+=n;e<t;e+=n){const c=r[e],d=r[e+1],g=Lr(l,u,c,d);g>s&&(s=g),l=c,u=d}return s}function dd(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];s=hd(r,e,c,n,s),e=c}return s}function vv(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];s=dd(r,e,c,n,s),e=c[c.length-1]}return s}function fd(r,e,t,n,s,l,u,c,d,g,m){if(e==t)return g;let _,y;if(s===0){if(y=Lr(u,c,r[e],r[e+1]),y<g){for(_=0;_<n;++_)d[_]=r[e+_];return d.length=n,y}return g}m=m||[NaN,NaN];let x=e+n;for(;x<t;)if(Zm(r,x-n,x,n,u,c,m),y=Lr(u,c,m[0],m[1]),y<g){for(g=y,_=0;_<n;++_)d[_]=m[_];d.length=n,x+=n}else x+=n*Math.max((Math.sqrt(y)-Math.sqrt(g))/s|0,1);if(l&&(Zm(r,t-n,e,n,u,c,m),y=Lr(u,c,m[0],m[1]),y<g)){for(g=y,_=0;_<n;++_)d[_]=m[_];d.length=n}return g}function gd(r,e,t,n,s,l,u,c,d,g,m){m=m||[NaN,NaN];for(let _=0,y=t.length;_<y;++_){const x=t[_];g=fd(r,e,x,n,s,l,u,c,d,g,m),e=x}return g}function Ev(r,e,t,n,s,l,u,c,d,g,m){m=m||[NaN,NaN];for(let _=0,y=t.length;_<y;++_){const x=t[_];g=gd(r,e,x,n,s,l,u,c,d,g,m),e=x[x.length-1]}return g}function xv(r,e,t,n){for(let s=0,l=t.length;s<l;++s)r[e++]=t[s];return e}function lu(r,e,t,n){for(let s=0,l=t.length;s<l;++s){const u=t[s];for(let c=0;c<n;++c)r[e++]=u[c]}return e}function ol(r,e,t,n,s){s=s||[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=lu(r,e,t[u],n);s[l++]=d,e=d}return s.length=l,s}function u_(r,e,t,n,s){s=s||[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=ol(r,e,t[u],n,s[l]);d.length===0&&(d[0]=e),s[l++]=d,e=d[d.length-1]}return s.length=l,s}function au(r,e,t,n,s,l,u){const c=(t-e)/n;if(c<3){for(;e<t;e+=n)l[u++]=r[e],l[u++]=r[e+1];return u}const d=new Array(c);d[0]=1,d[c-1]=1;const g=[e,t-n];let m=0;for(;g.length>0;){const _=g.pop(),y=g.pop();let x=0;const E=r[y],w=r[y+1],C=r[_],I=r[_+1];for(let R=y+n;R<_;R+=n){const k=r[R],M=r[R+1],P=X1(k,M,E,w,C,I);P>x&&(m=R,x=P)}x>s&&(d[(m-e)/n]=1,y+n<m&&g.push(y,m),m+n<_&&g.push(m,_))}for(let _=0;_<c;++_)d[_]&&(l[u++]=r[e+_*n],l[u++]=r[e+_*n+1]);return u}function c_(r,e,t,n,s,l,u,c){for(let d=0,g=t.length;d<g;++d){const m=t[d];u=au(r,e,m,n,s,l,u),c.push(u),e=m}return u}function Cr(r,e){return e*Math.round(r/e)}function wv(r,e,t,n,s,l,u){if(e==t)return u;let c=Cr(r[e],s),d=Cr(r[e+1],s);e+=n,l[u++]=c,l[u++]=d;let g,m;do if(g=Cr(r[e],s),m=Cr(r[e+1],s),e+=n,e==t)return l[u++]=g,l[u++]=m,u;while(g==c&&m==d);for(;e<t;){const _=Cr(r[e],s),y=Cr(r[e+1],s);if(e+=n,_==g&&y==m)continue;const x=g-c,E=m-d,w=_-c,C=y-d;if(x*C==E*w&&(x<0&&w<x||x==w||x>0&&w>x)&&(E<0&&C<E||E==C||E>0&&C>E)){g=_,m=y;continue}l[u++]=g,l[u++]=m,c=g,d=m,g=_,m=y}return l[u++]=g,l[u++]=m,u}function md(r,e,t,n,s,l,u,c){for(let d=0,g=t.length;d<g;++d){const m=t[d];u=wv(r,e,m,n,s,l,u),c.push(u),e=m}return u}function Cv(r,e,t,n,s,l,u,c){for(let d=0,g=t.length;d<g;++d){const m=t[d],_=[];u=md(r,e,m,n,s,l,u,_),c.push(_),e=m[m.length-1]}return u}function Zi(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let u=e;u<t;u+=n)s[l++]=r.slice(u,u+n);return s.length=l,s}function Ko(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u];s[l++]=Zi(r,e,d,n,s[l]),e=d}return s.length=l,s}function Oh(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u];s[l++]=d.length===1&&d[0]===e?[]:Ko(r,e,d,n,s[l]),e=d[d.length-1]}return s.length=l,s}function h_(r,e,t,n){let s=0;const l=r[t-n],u=r[t-n+1];let c=0,d=0;for(;e<t;e+=n){const g=r[e]-l,m=r[e+1]-u;s+=d*g-c*m,c=g,d=m}return s/2}function d_(r,e,t,n){let s=0;for(let l=0,u=t.length;l<u;++l){const c=t[l];s+=h_(r,e,c,n),e=c}return s}function Sv(r,e,t,n){let s=0;for(let l=0,u=t.length;l<u;++l){const c=t[l];s+=d_(r,e,c,n),e=c[c.length-1]}return s}class Zo extends Dr{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Zo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return h_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Zi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=au(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Zo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lu(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ns extends Dr{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Ns(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const l=this.flatCoordinates,u=Lr(e,t,l[0],l[1]);if(u<s){const c=this.stride;for(let d=0;d<c;++d)n[d]=l[d];return n.length=c,u}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Hp(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Jh(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=xv(this.flatCoordinates,0,e,this.stride),this.changed()}}function Rv(r,e,t,n,s){return!qp(s,function(u){return!Rr(r,e,t,n,u[0],u[1])})}function Rr(r,e,t,n,s,l){let u=0,c=r[t-n],d=r[t-n+1];for(;e<t;e+=n){const g=r[e],m=r[e+1];d<=l?m>l&&(g-c)*(l-d)-(s-c)*(m-d)>0&&u++:m<=l&&(g-c)*(l-d)-(s-c)*(m-d)<0&&u--,c=g,d=m}return u!==0}function pd(r,e,t,n,s,l){if(t.length===0||!Rr(r,e,t[0],n,s,l))return!1;for(let u=1,c=t.length;u<c;++u)if(Rr(r,t[u-1],t[u],n,s,l))return!1;return!0}function Tv(r,e,t,n,s,l){if(t.length===0)return!1;for(let u=0,c=t.length;u<c;++u){const d=t[u];if(pd(r,e,d,n,s,l))return!0;e=d[d.length-1]}return!1}function _d(r,e,t,n,s,l,u){let c,d,g,m,_,y,x;const E=s[l+1],w=[];for(let R=0,k=t.length;R<k;++R){const M=t[R];for(m=r[M-n],y=r[M-n+1],c=e;c<M;c+=n)_=r[c],x=r[c+1],(E<=y&&x<=E||y<=E&&E<=x)&&(g=(E-y)/(x-y)*(_-m)+m,w.push(g)),m=_,y=x}let C=NaN,I=-1/0;for(w.sort(ci),m=w[0],c=1,d=w.length;c<d;++c){_=w[c];const R=Math.abs(_-m);R>I&&(g=(m+_)/2,pd(r,e,t,n,g,E)&&(C=g,I=R)),m=_}return isNaN(C)&&(C=s[l]),u?(u.push(C,E,I),u):[C,E,I]}function f_(r,e,t,n,s){let l=[];for(let u=0,c=t.length;u<c;++u){const d=t[u];l=_d(r,e,d,n,s,2*u,l),e=d[d.length-1]}return l}function g_(r,e,t,n,s){let l;for(e+=n;e<t;e+=n)if(l=s(r.slice(e-n,e),r.slice(e,e+n)),l)return l;return!1}function uu(r,e,t,n,s){const l=$p(Yt(),r,e,t,n);return Wt(s,l)?Cs(s,l)||l[0]>=s[0]&&l[2]<=s[2]||l[1]>=s[1]&&l[3]<=s[3]?!0:g_(r,e,t,n,function(u,c){return D1(s,u,c)}):!1}function Iv(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){if(uu(r,e,t[l],n,s))return!0;e=t[l]}return!1}function m_(r,e,t,n,s){return!!(uu(r,e,t,n,s)||Rr(r,e,t,n,s[0],s[1])||Rr(r,e,t,n,s[0],s[3])||Rr(r,e,t,n,s[2],s[1])||Rr(r,e,t,n,s[2],s[3]))}function p_(r,e,t,n,s){if(!m_(r,e,t[0],n,s))return!1;if(t.length===1)return!0;for(let l=1,u=t.length;l<u;++l)if(Rv(r,t[l-1],t[l],n,s)&&!uu(r,t[l-1],t[l],n,s))return!1;return!0}function Lv(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];if(p_(r,e,c,n,s))return!0;e=c[c.length-1]}return!1}function Mv(r,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const l=r[e+s];r[e+s]=r[t-n+s],r[t-n+s]=l}e+=n,t-=n}}function yd(r,e,t,n){let s=0,l=r[t-n],u=r[t-n+1];for(;e<t;e+=n){const c=r[e],d=r[e+1];s+=(c-l)*(d+u),l=c,u=d}return s===0?void 0:s>0}function vd(r,e,t,n,s){s=s!==void 0?s:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],d=yd(r,e,c,n);if(l===0){if(s&&d||!s&&!d)return!1}else if(s&&!d||!s&&d)return!1;e=c}return!0}function __(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];if(!vd(r,e,c,n,s))return!1;c.length&&(e=c[c.length-1])}return!0}function Ga(r,e,t,n,s){s=s!==void 0?s:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],d=yd(r,e,c,n);(l===0?s&&d||!s&&!d:s&&!d||!s&&d)&&Mv(r,e,c,n),e=c}return e}function Nh(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l)e=Ga(r,e,t[l],n,s);return e}function Av(r,e){const t=[];let n=0,s=0,l;for(let u=0,c=e.length;u<c;++u){const d=e[u],g=yd(r,n,d,2);if(l===void 0&&(l=g),g===l)t.push(e.slice(s,u+1));else{if(t.length===0)continue;t[t.length-1].push(e[s])}s=u+1,n=d}return t}class er extends Dr{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?fn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new er(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return pd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return d_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Ga(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Ko(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ji(this.getExtent());this.flatInteriorPoint_=_d(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ns(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Zo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let l=0;for(let u=0,c=n.length;u<c;++u){const d=n[u],g=new Zo(t.slice(l,d),e);s.push(g),l=d}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;vd(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Ga(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=md(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new er(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return p_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ol(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function Hm(r){if(ru(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],n=r[2],s=r[3],l=[e,t,e,s,n,s,n,t,e,t];return new er(l,"XY",[l.length])}const hn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ce={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Ho={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var mt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};mt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};mt.max=mt.whitepoint[2].D65;mt.rgb=function(r,e){e=e||mt.whitepoint[2].E;var t=r[0]/e[0],n=r[1]/e[1],s=r[2]/e[2],l,u,c;return l=t*3.240969941904521+n*-1.537383177570093+s*-.498610760293,u=t*-.96924363628087+n*1.87596750150772+s*.041555057407175,c=t*.055630079696993+n*-.20397695888897+s*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=c*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),c=Math.min(Math.max(0,c),1),[l*255,u*255,c*255]};Ho.xyz=function(r,e){var t=r[0]/255,n=r[1]/255,s=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var l=t*.41239079926595+n*.35758433938387+s*.18048078840183,u=t*.21263900587151+n*.71516867876775+s*.072192315360733,c=t*.019330818715591+n*.11919477979462+s*.95053215224966;return e=e||mt.whitepoint[2].E,[l*e[0],u*e[1],c*e[2]]};const Ed={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var n,s,l,u,c,d,g,m,_,y,x,E,w;if(l=r[0],u=r[1],c=r[2],l===0)return[0,0,0];var C=.0011070564598794539;return e=e||"D65",t=t||2,_=mt.whitepoint[t][e][0],y=mt.whitepoint[t][e][1],x=mt.whitepoint[t][e][2],E=4*_/(_+15*y+3*x),w=9*y/(_+15*y+3*x),n=u/(13*l)+E||0,s=c/(13*l)+w||0,g=l>8?y*Math.pow((l+16)/116,3):y*l*C,d=g*9*n/(4*s)||0,m=g*(12-3*n-20*s)/(4*s)||0,[d,g,m]}};mt.luv=function(r,e,t){var n,s,l,u,c,d,g,m,_,y,x,E,w,C=.008856451679035631,I=903.2962962962961;e=e||"D65",t=t||2,_=mt.whitepoint[t][e][0],y=mt.whitepoint[t][e][1],x=mt.whitepoint[t][e][2],E=4*_/(_+15*y+3*x),w=9*y/(_+15*y+3*x),d=r[0],g=r[1],m=r[2],n=4*d/(d+15*g+3*m)||0,s=9*g/(d+15*g+3*m)||0;var R=g/y;return l=R<=C?I*R:116*Math.pow(R,1/3)-16,u=13*l*(n-E),c=13*l*(s-w),[l,u,c]};var y_={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],n=r[2],s,l,u;return u=n/360*2*Math.PI,s=t*Math.cos(u),l=t*Math.sin(u),[e,s,l]},xyz:function(r){return Ed.xyz(y_.luv(r))}};Ed.lchuv=function(r){var e=r[0],t=r[1],n=r[2],s=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),u=l*360/2/Math.PI;return u<0&&(u+=360),[e,s,u]};mt.lchuv=function(r){return Ed.lchuv(mt.luv(r))};const $m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var qm={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Pv(r){var m,_;var e,t=[],n=1,s;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),$m[r])t=$m[r].slice(),s="rgb";else if(r==="transparent")n=0,s="rgb",t=[0,0,0];else if(r[0]==="#"){var l=r.slice(1),u=l.length,c=u<=4;n=1,c?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],u===4&&(n=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],u===8&&(n=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var d=e[1];s=d.replace(/a$/,"");var g=s==="cmyk"?4:s==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=t.shift()),t=t.map(function(y,x){if(y[y.length-1]==="%")return y=parseFloat(y)/100,x===3?y:s==="rgb"?y*255:s[0]==="h"||s[0]==="l"&&!x?y*100:s==="lab"?y*125:s==="lch"?x<2?y*150:y*360:s[0]==="o"&&!x?y:s==="oklab"?y*.4:s==="oklch"?x<2?y*.4:y*360:y;if(s[x]==="h"||x===2&&s[s.length-1]==="h"){if(qm[y]!==void 0)return qm[y];if(y.endsWith("deg"))return parseFloat(y);if(y.endsWith("turn"))return parseFloat(y)*360;if(y.endsWith("grad"))return parseFloat(y)*360/400;if(y.endsWith("rad"))return parseFloat(y)*180/Math.PI}return y==="none"?0:parseFloat(y)}),n=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),s=((_=(m=r.match(/([a-z])/ig))==null?void 0:m.join(""))==null?void 0:_.toLowerCase())||"rgb");return{space:s,values:t,alpha:n}}const ah={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,s,l,u,c,d,g=0;if(t===0)return d=n*255,[d,d,d];for(l=n<.5?n*(1+t):n+t-n*t,s=2*n-l,c=[0,0,0];g<3;)u=e+1/3*-(g-1),u<0?u++:u>1&&u--,d=6*u<1?s+(l-s)*6*u:2*u<1?l:3*u<2?s+(l-s)*(2/3-u)*6:s,c[g++]=d*255;return c}};Ho.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(e,t,n),l=Math.max(e,t,n),u=l-s,c,d,g;return l===s?c=0:e===l?c=(t-n)/u:t===l?c=2+(n-e)/u:n===l&&(c=4+(e-t)/u),c=Math.min(c*60,360),c<0&&(c+=360),g=(s+l)/2,l===s?d=0:g<=.5?d=u/(l+s):d=u/(2-l-s),[c,d*100,g*100]};function kv(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=Pv(r);if(!t.space)return[];const n=t.space[0]==="h"?ah.min:Ho.min,s=t.space[0]==="h"?ah.max:Ho.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),s[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),s[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),s[2]),t.space[0]==="h"&&(e=ah.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const xd=[NaN,NaN,NaN,0];function Fv(r){return typeof r=="string"?r:Cd(r)}const Dv=1024,Ao={};let uh=0;function Ov(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function Qm(r){const e=mt.lchuv(Ho.xyz(r));return e[3]=r[3],e}function Nv(r){const e=mt.rgb(y_.xyz(r));return e[3]=r[3],e}function wd(r){if(r==="none")return xd;if(Ao.hasOwnProperty(r))return Ao[r];if(uh>=Dv){let t=0;for(const n in Ao)t++&3||(delete Ao[n],--uh)}const e=kv(r);if(e.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+r+'" as color');return v_(e),Ao[r]=e,++uh,e}function zs(r){return Array.isArray(r)?r:wd(r)}function v_(r){return r[0]=Ze(r[0]+.5|0,0,255),r[1]=Ze(r[1]+.5|0,0,255),r[2]=Ze(r[2]+.5|0,0,255),r[3]=Ze(r[3],0,1),r}function Cd(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const s=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+s+")"}const tr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",zv=tr.includes("firefox"),Gv=tr.includes("safari")&&!tr.includes("chrom");Gv&&(tr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(tr));const bv=tr.includes("webkit")&&!tr.includes("edge"),E_=tr.includes("macintosh"),x_=typeof devicePixelRatio<"u"?devicePixelRatio:1,Sd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,w_=typeof Image<"u"&&Image.prototype.decode,C_=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function tt(r,e,t,n){let s;return t&&t.length?s=t.shift():Sd?s=new OffscreenCanvas(r||300,e||300):s=document.createElement("canvas"),r&&(s.width=r),e&&(s.height=e),s.getContext("2d",n)}let ch;function ba(){return ch||(ch=tt(1,1)),ch}function cu(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function Ua(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function Uv(r){for(;r.lastChild;)r.lastChild.remove()}function jv(r,e){const t=r.childNodes;for(let n=0;;++n){const s=t[n],l=e[n];if(!s&&!l)break;if(s!==l){if(!s){r.appendChild(l);continue}if(!l){r.removeChild(s),--n;continue}r.insertBefore(l,s)}}}function Wv(r,e,t){const n=r;let s=!0,l=!1,u=!1;const c=[Fa(n,Ee.LOAD,function(){u=!0,l||e()})];return n.src&&w_?(l=!0,n.decode().then(function(){s&&e()}).catch(function(d){s&&(u?e():t())})):c.push(Fa(n,Ee.ERROR,t)),function(){s=!1,c.forEach(be)}}function Xv(r,e){return new Promise((t,n)=>{function s(){u(),t(r)}function l(){u(),n(new Error("Image load error"))}function u(){r.removeEventListener("load",s),r.removeEventListener("error",l)}r.addEventListener("load",s),r.addEventListener("error",l)})}function Bv(r,e){return e&&(r.src=e),r.src&&w_?new Promise((t,n)=>r.decode().then(()=>t(r)).catch(s=>r.complete&&r.width?t(r):n(s))):Xv(r)}class Yv{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const s=hh(e,t,n);return s in this.cache_?this.cache_[s]:null}getPattern(e,t,n){const s=hh(e,t,n);return s in this.patternCache_?this.patternCache_[s]:null}set(e,t,n,s,l){const u=hh(e,t,n),c=u in this.cache_;this.cache_[u]=s,l&&(s.getImageState()===Ce.IDLE&&s.load(),s.getImageState()===Ce.LOADING?s.ready().then(()=>{this.patternCache_[u]=ba().createPattern(s.getImage(1),"repeat")}):this.patternCache_[u]=ba().createPattern(s.getImage(1),"repeat")),c||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function hh(r,e,t){const n=t?zs(t):"null";return e+":"+r+":"+n}const dn=new Yv;let Po=null;class S_ extends eu{constructor(e,t,n,s,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=s===void 0?Ce.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ce.LOADED){Po||(Po=tt(1,1,void 0,{willReadFrequently:!0})),Po.drawImage(this.image_,0,0);try{Po.getImageData(0,0,1,1),this.tainted_=!1}catch{Po=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ee.CHANGE)}handleImageError_(){this.imageState_=Ce.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ce.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=tt(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ce.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ce.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Bv(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ce.LOADED)return;const t=this.image_,n=tt(Math.ceil(t.width*e),Math.ceil(t.height*e)),s=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Fv(this.color_),n.fillRect(0,0,s.width/e,s.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=s}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)e();else{const t=()=>{(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)&&(this.removeEventListener(Ee.CHANGE,t),e())};this.addEventListener(Ee.CHANGE,t)}})),this.ready_}}function Rd(r,e,t,n,s,l){let u=e===void 0?void 0:dn.get(e,t,s);return u||(u=new S_(r,r&&"src"in r?r.src||void 0:e,t,n,s),dn.set(e,t,s,u,l)),l&&u&&!dn.getPattern(e,t,s)&&dn.set(e,t,s,u,l),u}class mi{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new mi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=Rd(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ce.IDLE&&t.load(),t.getImageState()===Ce.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Te(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:zs(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function ja(r,e,t,n,s,l,u){let c,d;const g=(t-e)/n;if(g===1)c=e;else if(g===2)c=e,d=s;else if(g!==0){let m=r[e],_=r[e+1],y=0;const x=[0];for(let C=e+n;C<t;C+=n){const I=r[C],R=r[C+1];y+=Math.sqrt((I-m)*(I-m)+(R-_)*(R-_)),x.push(y),m=I,_=R}const E=s*y,w=v1(x,E);w<0?(d=(E-x[-w-2])/(x[-w-1]-x[-w-2]),c=e+(-w-2)*n):c=e+w*n}u=u>1?u:2,l=l||new Array(u);for(let m=0;m<u;++m)l[m]=c===void 0?NaN:d===void 0?r[c+m]:qt(r[c+m],r[c+n+m],d);return l}function zh(r,e,t,n,s,l){if(t==e)return null;let u;if(s<r[e+n-1])return l?(u=r.slice(e,e+n),u[n-1]=s,u):null;if(r[t-1]<s)return l?(u=r.slice(t-n,t),u[n-1]=s,u):null;if(s==r[e+n-1])return r.slice(e,e+n);let c=e/n,d=t/n;for(;c<d;){const y=c+d>>1;s<r[(y+1)*n-1]?d=y:c=y+1}const g=r[c*n-1];if(s==g)return r.slice((c-1)*n,(c-1)*n+n);const m=r[(c+1)*n-1],_=(s-g)/(m-g);u=[];for(let y=0;y<n-1;++y)u.push(qt(r[(c-1)*n+y],r[c*n+y],_));return u.push(s),u}function Vv(r,e,t,n,s,l,u){if(u)return zh(r,e,t[t.length-1],n,s,l);let c;if(s<r[n-1])return l?(c=r.slice(0,n),c[n-1]=s,c):null;if(r[r.length-1]<s)return l?(c=r.slice(r.length-n),c[n-1]=s,c):null;for(let d=0,g=t.length;d<g;++d){const m=t[d];if(e!=m){if(s<r[e+n-1])return null;if(s<=r[m-1])return zh(r,e,m,n,s,!1);e=m}}return null}function R_(r,e,t,n){let s=r[e],l=r[e+1],u=0;for(let c=e+n;c<t;c+=n){const d=r[c],g=r[c+1];u+=Math.sqrt((d-s)*(d-s)+(g-l)*(g-l)),s=d,l=g}return u}class Gs extends Dr{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){fn(this.flatCoordinates,e),this.changed()}clone(){const e=new Gs(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(hd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,s))}forEachSegment(e){return g_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,zh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Zi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return ja(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return R_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=au(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Gs(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return uu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lu(this.flatCoordinates,0,e,this.stride),this.changed()}}class Bn{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Bn({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function Jm(r){return r[0]>0&&r[1]>0}function Kv(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Bt(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class hu{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Bt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new hu({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ve()}getImage(e){return ve()}getHitDetectionImage(){return ve()}getPixelRatio(e){return 1}getImageState(){return ve()}getImageSize(){return ve()}getOrigin(){return ve()}getSize(){return ve()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bt(e)}listenImageChange(e){ve()}load(){ve()}unlistenImageChange(e){ve()}ready(){return Promise.resolve()}}function Xn(r){return r?Array.isArray(r)?Cd(r):typeof r=="object"&&"src"in r?Zv(r):r:null}function Zv(r){if(!r.offset||!r.size)return dn.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=dn.getPattern(e,void 0,r.color);if(t)return t;const n=dn.get(r.src,"anonymous",null);if(n.getImageState()!==Ce.LOADED)return null;const s=tt(r.size[0],r.size[1]);return s.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),Rd(s.canvas,e,void 0,Ce.LOADED,r.color,!0),dn.getPattern(e,void 0,r.color)}const Ca="ol-hidden",Ws="ol-unselectable",ep="ol-unsupported",du="ol-control",tp="ol-collapsed",Hv=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),np=["style","variant","weight","size","lineHeight","family"],T_=function(r){const e=r.match(Hv);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=np.length;n<s;++n){const l=e[n+1];l!==void 0&&(t[np[n]]=l)}return t.families=t.family.split(/,\s?/),t},I_="10px sans-serif",Ut="#000",bs="round",hi=[],di=0,Us="round",$o=10,qo="#000",Qo="center",Wa="middle",Tr=[0,0,0,0],Jo=1,ai=new Vn;let vs=null,Gh;const bh={},$v=function(){const e="32px ",t=["monospace","serif"],n=t.length,s="wmytzilWMYTZIL@#/&?$%10";let l,u;function c(g,m,_){let y=!0;for(let x=0;x<n;++x){const E=t[x];if(u=Xa(g+" "+m+" "+e+E,s),_!=E){const w=Xa(g+" "+m+" "+e+_+","+E,s);y=y&&w!=u}}return!!y}function d(){let g=!0;const m=ai.getKeys();for(let _=0,y=m.length;_<y;++_){const x=m[_];if(ai.get(x)<100){const[E,w,C]=x.split(`
`);c(E,w,C)?(js(bh),vs=null,Gh=void 0,ai.set(x,100)):(ai.set(x,ai.get(x)+1,!0),g=!1)}}g&&(clearInterval(l),l=void 0)}return function(g){const m=T_(g);if(!m)return;const _=m.families;for(let y=0,x=_.length;y<x;++y){const E=_[y],w=m.style+`
`+m.weight+`
`+E;ai.get(w)===void 0&&(ai.set(w,100,!0),c(m.style,m.weight,E)||(ai.set(w,0,!0),l===void 0&&(l=setInterval(d,32))))}}}(),qv=function(){let r;return function(e){let t=bh[e];if(t==null){if(Sd){const n=T_(e),s=L_(e,"Žg");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);bh[e]=t}return t}}();function L_(r,e){return vs||(vs=tt(1,1)),r!=Gh&&(vs.font=r,Gh=vs.font),vs.measureText(e)}function Xa(r,e){return L_(r,e).width}function ip(r,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((s,l)=>Math.max(s,Xa(r,l)),0);return t[e]=n,n}function Qv(r,e){const t=[],n=[],s=[];let l=0,u=0,c=0,d=0;for(let g=0,m=e.length;g<=m;g+=2){const _=e[g];if(_===`
`||g===m){l=Math.max(l,u),s.push(u),u=0,c+=d,d=0;continue}const y=e[g+1]||r.font,x=Xa(y,_);t.push(x),u+=x;const E=qv(y);n.push(E),d=Math.max(d,E)}return{width:l,height:c,widths:t,heights:n,lineWidths:s}}function Jv(r,e,t,n,s,l,u,c,d,g,m){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=_=>_.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),n.contextInstructions?(r.translate(d,g),r.scale(m[0],m[1]),eE(n,r)):m[0]<0||m[1]<0?(r.translate(d,g),r.scale(m[0],m[1]),r.drawImage(n,s,l,u,c,0,0,u,c)):r.drawImage(n,s,l,u,c,d,g,u*m[0],c*m[1]),r.restore()}function eE(r,e){const t=r.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class fu extends hu{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ce.LOADING:Ce.LOADED,this.imageState_===Ce.LOADING&&this.ready().then(()=>this.imageState_=Ce.LOADED),this.render()}clone(){const e=this.getScale(),t=new fu({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var l,u;const t=(l=this.fill_)==null?void 0:l.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let s=(u=dn.get(n,null,null))==null?void 0:u.getImage(1);if(!s){const c=this.renderOptions_,d=Math.ceil(c.size*e),g=tt(d,d);this.draw_(c,g,e),s=g.canvas,dn.set(n,null,null,new S_(s,void 0,null,Ce.LOADED,null))}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius,l=this.radius2_===void 0?s:this.radius2_;if(s<l){const U=s;s=l,l=U}const u=this.radius2_===void 0?this.points_:this.points_*2,c=2*Math.PI/u,d=l*Math.sin(c),g=Math.sqrt(l*l-d*d),m=s-g,_=Math.sqrt(d*d+m*m),y=_/d;if(e==="miter"&&y<=n)return y*t;const x=t/2/y,E=t/2*(m/_),C=Math.sqrt((s+x)*(s+x)+E*E)-s;if(this.radius2_===void 0||e==="bevel")return C*2;const I=s*Math.sin(c),R=Math.sqrt(s*s-I*I),k=l-R,P=Math.sqrt(I*I+k*k)/I;if(P<=n){const U=P*t/2-l-s;return 2*Math.max(C,U)}return C*2}createRenderOptions(){let e=bs,t=Us,n=0,s=null,l=0,u,c=0;this.stroke_&&(u=Xn(this.stroke_.getColor()??qo),c=this.stroke_.getWidth()??Jo,s=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Us,e=this.stroke_.getLineCap()??bs,n=this.stroke_.getMiterLimit()??$o);const d=this.calculateLineJoinSize_(t,c,n),g=Math.max(this.radius,this.radius2_||0),m=Math.ceil(2*g+d);return{strokeStyle:u,strokeWidth:c,size:m,lineCap:e,lineDash:s,lineDashOffset:l,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Ut),t.fillStyle=Xn(s),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),s=0;typeof n=="string"&&(n=zs(n)),n===null?s=1:Array.isArray(n)&&(s=n.length===4?n[3]:1),s===0&&(t=tt(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,u=2*Math.PI/t;for(let c=0;c<t;c++){const d=l+c*u,g=c%2===0?n:s;e.lineTo(g*Math.cos(d),g*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ut,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Pr extends fu{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Pr({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class kt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=rp,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new kt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=rp,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function tE(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(ke(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let dh=null;function M_(r,e){if(!dh){const t=new mi({color:"rgba(255,255,255,0.4)"}),n=new Bn({color:"#3399CC",width:1.25});dh=[new kt({image:new Pr({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return dh}function nE(){const r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new kt({fill:new mi({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new kt({stroke:new Bn({color:e,width:n+2})}),new kt({stroke:new Bn({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new kt({image:new Pr({radius:n*2,fill:new mi({color:t}),stroke:new Bn({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function rp(r){return r.getGeometry()}const iE="#333";class Td{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Bt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new mi({color:iE}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Td({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Bt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Ne={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class A_ extends Vn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Ne.OPACITY]=e.opacity!==void 0?e.opacity:1,ke(typeof t[Ne.OPACITY]=="number","Layer opacity must be a number"),t[Ne.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Ne.Z_INDEX]=e.zIndex,t[Ne.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Ne.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Ne.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Ne.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Ze(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ve()}getLayerStatesArray(e){return ve()}getExtent(){return this.get(Ne.EXTENT)}getMaxResolution(){return this.get(Ne.MAX_RESOLUTION)}getMinResolution(){return this.get(Ne.MIN_RESOLUTION)}getMinZoom(){return this.get(Ne.MIN_ZOOM)}getMaxZoom(){return this.get(Ne.MAX_ZOOM)}getOpacity(){return this.get(Ne.OPACITY)}getSourceState(){return ve()}getVisible(){return this.get(Ne.VISIBLE)}getZIndex(){return this.get(Ne.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Ne.EXTENT,e)}setMaxResolution(e){this.set(Ne.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Ne.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Ne.MAX_ZOOM,e)}setMinZoom(e){this.set(Ne.MIN_ZOOM,e)}setOpacity(e){ke(typeof e=="number","Layer opacity must be a number"),this.set(Ne.OPACITY,e)}setVisible(e){this.set(Ne.VISIBLE,e)}setZIndex(e){this.set(Ne.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const St={ANIMATING:0,INTERACTING:1},Tn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},rE=42,Id=256;function sp(r,e,t){return function(n,s,l,u,c){if(!n)return;if(!s&&!e)return n;const d=e?0:l[0]*s,g=e?0:l[1]*s,m=c?c[0]:0,_=c?c[1]:0;let y=r[0]+d/2+m,x=r[2]-d/2+m,E=r[1]+g/2+_,w=r[3]-g/2+_;y>x&&(y=(x+y)/2,x=y),E>w&&(E=(w+E)/2,w=E);let C=Ze(n[0],y,x),I=Ze(n[1],E,w);if(u&&t&&s){const R=30*s;C+=-R*Math.log(1+Math.max(0,y-n[0])/R)+R*Math.log(1+Math.max(0,n[0]-x)/R),I+=-R*Math.log(1+Math.max(0,E-n[1])/R)+R*Math.log(1+Math.max(0,n[1]-w)/R)}return[C,I]}}function sE(r){return r}function Ld(r,e,t,n){const s=Me(e)/t[0],l=st(e)/t[1];return n?Math.min(r,Math.max(s,l)):Math.min(r,Math.min(s,l))}function Md(r,e,t){let n=Math.min(r,e);const s=50;return n*=Math.log(1+s*Math.max(0,r/e-1))/s+1,t&&(n=Math.max(n,t),n/=Math.log(1+s*Math.max(0,t/r-1))/s+1),Ze(n,t/2,e*2)}function oE(r,e,t,n){return e=e!==void 0?e:!0,function(s,l,u,c){if(s!==void 0){const d=r[0],g=r[r.length-1],m=t?Ld(d,t,u,n):d;if(c)return e?Md(s,m,g):Ze(s,g,m);const _=Math.min(m,s),y=Math.floor(qh(r,_,l));return r[y]>m&&y<r.length-1?r[y+1]:r[y]}}}function lE(r,e,t,n,s,l){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(u,c,d,g){if(u!==void 0){const m=s?Ld(e,s,d,l):e;if(g)return n?Md(u,m,t):Ze(u,t,m);const _=1e-9,y=Math.ceil(Math.log(e/m)/Math.log(r)-_),x=-c*(.5-_)+.5,E=Math.min(m,u),w=Math.floor(Math.log(e/E)/Math.log(r)+x),C=Math.max(y,w),I=e/Math.pow(r,C);return Ze(I,t,m)}}}function op(r,e,t,n,s){return t=t!==void 0?t:!0,function(l,u,c,d){if(l!==void 0){const g=n?Ld(r,n,c,s):r;return!t||!d?Ze(l,e,g):Md(l,g,e)}}}function Ad(r){if(r!==void 0)return 0}function lp(r){if(r!==void 0)return r}function aE(r){const e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function uE(r){const e=$i(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function P_(r){return Math.pow(r,3)}function Xs(r){return 1-P_(1-r)}function cE(r){return 3*r*r-2*r*r*r}function hE(r){return r}const fh=0;class jn extends Vn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=ad(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&hv(),e.center&&(e.center=li(e.center,this.projection_)),e.extent&&(e.extent=Ki(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const c in Tn)delete t[c];this.setProperties(t,!0);const n=fE(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=dE(e),l=n.constraint,u=gE(e);this.constraints_={center:s,resolution:l,rotation:u},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),u=l/2*(s[3]-t[3]+t[1]-s[1]),c=l/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([n[0]+u,n[1]-c])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=li(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=li(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const m=arguments[s];m.center&&this.setCenterInternal(m.center),m.zoom!==void 0?this.setZoom(m.zoom):m.resolution&&this.setResolution(m.resolution),m.rotation!==void 0&&this.setRotation(m.rotation)}if(s===t){n&&Sa(n,!0);return}let l=Date.now(),u=this.targetCenter_.slice(),c=this.targetResolution_,d=this.targetRotation_;const g=[];for(;s<t;++s){const m=arguments[s],_={start:l,complete:!1,anchor:m.anchor,duration:m.duration!==void 0?m.duration:1e3,easing:m.easing||cE,callback:n};if(m.center&&(_.sourceCenter=u,_.targetCenter=m.center.slice(),u=_.targetCenter),m.zoom!==void 0?(_.sourceResolution=c,_.targetResolution=this.getResolutionForZoom(m.zoom),c=_.targetResolution):m.resolution&&(_.sourceResolution=c,_.targetResolution=m.resolution,c=_.targetResolution),m.rotation!==void 0){_.sourceRotation=d;const y=Is(m.rotation-d+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=d+y,d=_.targetRotation}mE(_)?_.complete=!0:l+=_.duration,g.push(_)}this.animations_.push(g),this.setHint(St.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[St.ANIMATING]>0}getInteracting(){return this.hints_[St.INTERACTING]>0}cancelAnimations(){this.setHint(St.ANIMATING,-this.hints_[St.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&Sa(s[0].callback,!1),!e)for(let l=0,u=s.length;l<u;++l){const c=s[l];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let l=!0;for(let u=0,c=s.length;u<c;++u){const d=s[u];if(d.complete)continue;const g=e-d.start;let m=d.duration>0?g/d.duration:1;m>=1?(d.complete=!0,m=1):l=!1;const _=d.easing(m);if(d.sourceCenter){const y=d.sourceCenter[0],x=d.sourceCenter[1],E=d.targetCenter[0],w=d.targetCenter[1];this.nextCenter_=d.targetCenter;const C=y+_*(E-y),I=x+_*(w-x);this.targetCenter_=[C,I]}if(d.sourceResolution&&d.targetResolution){const y=_===1?d.targetResolution:d.sourceResolution+_*(d.targetResolution-d.sourceResolution);if(d.anchor){const x=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(y,0,x,!0);this.targetCenter_=this.calculateCenterZoom(E,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const y=_===1?Is(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+_*(d.targetRotation-d.sourceRotation);if(d.anchor){const x=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(x,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!d.complete)break}if(l){this.animations_[n]=null,this.setHint(St.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const u=s[0].callback;u&&Sa(u,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-t[0],s[1]-t[1]],rd(n,e-this.getRotation()),Y1(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),l=this.getResolution();if(s!==void 0&&l!==void 0){const u=t[0]-e*(t[0]-s[0])/l,c=t[1]-e*(t[1]-s[1])/l;n=[u,c]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Dh(e,this.getProjection())}getCenterInternal(){return this.get(Tn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return o_(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ke(t,"The view center is not defined");const n=this.getResolution();ke(n!==void 0,"The view resolution is not defined");const s=this.getRotation();return ke(s!==void 0,"The view rotation is not defined"),Mh(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Tn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ki(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Me(e)/t[0],s=st(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(t/n)/Math.log(e);return function(l){return t/Math.pow(e,l*s)}}getRotation(){return this.get(Tn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,l=Math.log(n/s)/t;return function(u){return Math.log(n/u)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const l=this.padding_;if(l){const u=this.getViewportSizeMinusPadding_();s=gh(s,this.getViewportSize_(),[u[0]/2+l[3],u[1]/2+l[0]],t,n)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,s;if(this.resolutions_){const l=qh(this.resolutions_,e,1);t=l,n=this.resolutions_[l],l==this.resolutions_.length-1?s=2:s=n/this.resolutions_[l+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=Ze(Math.floor(e),0,this.resolutions_.length-2),s=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(s,Ze(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(ke(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ke(!ru(e),"Cannot fit empty extent provided as `geometry`");const s=Ki(e,this.getProjection());n=Hm(s)}else if(e.getType()==="Circle"){const s=Ki(e.getExtent(),this.getProjection());n=Hm(s),n.rotate(this.getRotation(),Ji(s))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),l=e.getFlatCoordinates(),u=e.getStride();let c=1/0,d=1/0,g=-1/0,m=-1/0;for(let _=0,y=l.length;_<y;_+=u){const x=l[_]*n-l[_+1]*s,E=l[_]*s+l[_+1]*n;c=Math.min(c,x),d=Math.min(d,E),g=Math.max(g,x),m=Math.max(m,E)}return[c,d,g,m]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let u;t.minResolution!==void 0?u=t.minResolution:t.maxZoom!==void 0?u=this.getResolutionForZoom(t.maxZoom):u=0;const c=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(c,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);d=isNaN(d)?u:Math.max(d,u),d=this.getConstrainedResolution(d,l?0:1);const g=this.getRotation(),m=Math.sin(g),_=Math.cos(g),y=Ji(c);y[0]+=(s[1]-s[3])/2*d,y[1]+=(s[0]-s[2])/2*d;const x=y[0]*_-y[1]*m,E=y[1]*_+y[0]*m,w=this.getConstrainedCenter([x,E],d),C=t.callback?t.callback:Ps;t.duration!==void 0?this.animateInternal({resolution:d,center:w,duration:t.duration,easing:t.easing},C):(this.targetResolution_=d,this.targetCenter_=w,this.applyTargetState_(!1,!0),Sa(C,!0))}centerOn(e,t,n){this.centerOnInternal(li(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(gh(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let l;const u=this.padding_;if(u&&e){const c=this.getViewportSizeMinusPadding_(-n),d=gh(e,s,[c[0]/2+u[3],c[1]/2+u[0]],t,n);l=[e[0]-d[0],e[1]-d[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Dh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&li(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=li(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&li(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(s),u=this.constraints_.resolution(this.targetResolution_,0,l,n),c=this.constraints_.center(this.targetCenter_,u,l,n,this.calculateCenterShift(this.targetCenter_,u,s,l));this.get(Tn.ROTATION)!==s&&this.set(Tn.ROTATION,s),this.get(Tn.RESOLUTION)!==u&&(this.set(Tn.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!c||!this.get(Tn.CENTER)||!Da(this.get(Tn.CENTER),c))&&this.set(Tn.CENTER,c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const s=t||0,l=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,s,u),d=this.constraints_.center(this.targetCenter_,c,u,!1,this.calculateCenterShift(this.targetCenter_,c,l,u));if(e===0&&!this.cancelAnchor_){this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=d,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!Da(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:d,resolution:c,duration:e,easing:Xs,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(St.INTERACTING,1)}endInteraction(e,t,n){n=n&&li(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(St.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function Sa(r,e){setTimeout(function(){r(e)},0)}function dE(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return sp(r.extent,r.constrainOnlyCenter,t)}const e=ad(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,sp(t,!1,!1)}return sE}function fE(r){let e,t,n,u=r.minZoom!==void 0?r.minZoom:fh,c=r.maxZoom!==void 0?r.maxZoom:28;const d=r.zoomFactor!==void 0?r.zoomFactor:2,g=r.multiWorld!==void 0?r.multiWorld:!1,m=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,_=r.showFullExtent!==void 0?r.showFullExtent:!1,y=ad(r.projection,"EPSG:3857"),x=y.getExtent();let E=r.constrainOnlyCenter,w=r.extent;if(!g&&!w&&y.isGlobal()&&(E=!1,w=x),r.resolutions!==void 0){const C=r.resolutions;t=C[u],n=C[c]!==void 0?C[c]:C[C.length-1],r.constrainResolution?e=oE(C,m,!E&&w,_):e=op(t,n,m,!E&&w,_)}else{const I=(x?Math.max(Me(x),st(x)):360*Ds.degrees/y.getMetersPerUnit())/Id/Math.pow(2,fh),R=I/Math.pow(2,28-fh);t=r.maxResolution,t!==void 0?u=0:t=I/Math.pow(d,u),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(d,c):n=I/Math.pow(d,c):n=R),c=u+Math.floor(Math.log(t/n)/Math.log(d)),n=t/Math.pow(d,c-u),r.constrainResolution?e=lE(d,t,n,m,!E&&w,_):e=op(t,n,m,!E&&w,_)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:u,zoomFactor:d}}function gE(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?uE():t===!1?lp:typeof t=="number"?aE(t):lp}return Ad}function mE(r){return!(r.sourceCenter&&r.targetCenter&&!Da(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function gh(r,e,t,n,s){const l=Math.cos(-s);let u=Math.sin(-s),c=r[0]*l-r[1]*u,d=r[1]*l+r[0]*u;c+=(e[0]/2-t[0])*n,d+=(t[1]-e[1]/2)*n,u=-u;const g=c*l-d*u,m=d*l+c*u;return[g,m]}class gu extends A_{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Ne.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Ne.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(be(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Le(e,Ee.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof jn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;if(t.layerStatesArray){if(s=t.layerStatesArray.find(u=>u.layer===this),!s)return!1}else s=this.getLayerState();const l=this.getExtent();return Pd(s,t.viewState)&&(!l||Wt(l,t.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const t=(l=this.getSource())==null?void 0:l.getAttributions();if(!t)return[];const n=e instanceof jn?e.getViewStateAndExtent():e;let s=t(n);return Array.isArray(s)||(s=[s]),s}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Ne.MAP,e)}getMapInternal(){return this.get(Ne.MAP)}setMap(e){this.mapPrecomposeKey_&&(be(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(be(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Le(e,hn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Le(this,Ee.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);ke(!t.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(Ne.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Pd(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}function k_(r,e,t=0,n=r.length-1,s=pE){for(;n>t;){if(n-t>600){const d=n-t+1,g=e-t+1,m=Math.log(d),_=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*_*(d-_)/d)*(g-d/2<0?-1:1),x=Math.max(t,Math.floor(e-g*_/d+y)),E=Math.min(n,Math.floor(e+(d-g)*_/d+y));k_(r,e,x,E,s)}const l=r[e];let u=t,c=n;for(ko(r,t,e),s(r[n],l)>0&&ko(r,t,n);u<c;){for(ko(r,u,c),u++,c--;s(r[u],l)<0;)u++;for(;s(r[c],l)>0;)c--}s(r[t],l)===0?ko(r,t,c):(c++,ko(r,c,n)),c<=e&&(t=c+1),e<=c&&(n=c-1)}}function ko(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function pE(r,e){return r<e?-1:r>e?1:0}let F_=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!Ta(e,t))return n;const s=this.toBBox,l=[];for(;t;){for(let u=0;u<t.children.length;u++){const c=t.children[u],d=t.leaf?s(c):c;Ta(e,d)&&(t.leaf?n.push(c):ph(e,d)?this._all(c,n):l.push(c))}t=l.pop()}return n}collides(e){let t=this.data;if(!Ta(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const l=t.children[s],u=t.leaf?this.toBBox(l):l;if(Ta(e,u)){if(t.leaf||ph(e,u))return!0;n.push(l)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Es([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),l=[],u=[];let c,d,g;for(;n||l.length;){if(n||(n=l.pop(),d=l[l.length-1],c=u.pop(),g=!0),n.leaf){const m=_E(e,n.children,t);if(m!==-1)return n.children.splice(m,1),l.push(n),this._condense(l),this}!g&&!n.leaf&&ph(n,s)?(l.push(n),u.push(c),c=0,d=n,n=n.children[0]):d?(c++,n=d.children[c],g=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const l=n-t+1;let u=this._maxEntries,c;if(l<=u)return c=Es(e.slice(t,n+1)),hs(c,this.toBBox),c;s||(s=Math.ceil(Math.log(l)/Math.log(u)),u=Math.ceil(l/Math.pow(u,s-1))),c=Es([]),c.leaf=!1,c.height=s;const d=Math.ceil(l/u),g=d*Math.ceil(Math.sqrt(u));ap(e,t,n,g,this.compareMinX);for(let m=t;m<=n;m+=g){const _=Math.min(m+g-1,n);ap(e,m,_,d,this.compareMinY);for(let y=m;y<=_;y+=d){const x=Math.min(y+d-1,_);c.children.push(this._build(e,y,x,s-1))}}return hs(c,this.toBBox),c}_chooseSubtree(e,t,n,s){for(;s.push(t),!(t.leaf||s.length-1===n);){let l=1/0,u=1/0,c;for(let d=0;d<t.children.length;d++){const g=t.children[d],m=mh(g),_=EE(e,g)-m;_<u?(u=_,l=m<l?m:l,c=g):_===u&&m<l&&(l=m,c=g)}t=c||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),l=[],u=this._chooseSubtree(s,this.data,t,l);for(u.children.push(e),No(u,s);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(s,l,t)}_split(e,t){const n=e[t],s=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,s);const u=this._chooseSplitIndex(n,l,s),c=Es(n.children.splice(u,n.children.length-u));c.height=n.height,c.leaf=n.leaf,hs(n,this.toBBox),hs(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(n,c)}_splitRoot(e,t){this.data=Es([e,t]),this.data.height=e.height+1,this.data.leaf=!1,hs(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,l=1/0,u=1/0;for(let c=t;c<=n-t;c++){const d=Oo(e,0,c,this.toBBox),g=Oo(e,c,n,this.toBBox),m=xE(d,g),_=mh(d)+mh(g);m<l?(l=m,s=c,u=_<u?_:u):m===l&&_<u&&(u=_,s=c)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:yE,l=e.leaf?this.compareMinY:vE,u=this._allDistMargin(e,t,n,s),c=this._allDistMargin(e,t,n,l);u<c&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const l=this.toBBox,u=Oo(e,0,t,l),c=Oo(e,n-t,n,l);let d=Ra(u)+Ra(c);for(let g=t;g<n-t;g++){const m=e.children[g];No(u,e.leaf?l(m):m),d+=Ra(u)}for(let g=n-t-1;g>=t;g--){const m=e.children[g];No(c,e.leaf?l(m):m),d+=Ra(c)}return d}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)No(t[s],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():hs(e[t],this.toBBox)}};function _E(r,e,t){if(!t)return e.indexOf(r);for(let n=0;n<e.length;n++)if(t(r,e[n]))return n;return-1}function hs(r,e){Oo(r,0,r.children.length,e,r)}function Oo(r,e,t,n,s){s||(s=Es(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let l=e;l<t;l++){const u=r.children[l];No(s,r.leaf?n(u):u)}return s}function No(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function yE(r,e){return r.minX-e.minX}function vE(r,e){return r.minY-e.minY}function mh(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Ra(r){return r.maxX-r.minX+(r.maxY-r.minY)}function EE(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function xE(r,e){const t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),s=Math.min(r.maxX,e.maxX),l=Math.min(r.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,l-n)}function ph(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function Ta(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function Es(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ap(r,e,t,n,s){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=n)continue;const u=e+Math.ceil((t-e)/n/2)*n;k_(r,u,e,t,s),l.push(e,u,u,t)}}function up(r,e,t,n){return t!==void 0&&n!==void 0?[t/r,n/e]:t!==void 0?t/r:n!==void 0?n/e:1}class mu extends hu{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const u=e.img!==void 0?e.img:null;let c=e.src;ke(!(c!==void 0&&u),"`image` and `src` cannot be provided at the same time"),(c===void 0||c.length===0)&&u&&(c=u.src||Te(u)),ke(c!==void 0&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),ke(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=Ce.IDLE:u!==void 0&&("complete"in u?u.complete?d=u.src?Ce.LOADED:Ce.IDLE:d=Ce.LOADING:d=Ce.LOADED),this.color_=e.color!==void 0?zs(e.color):null,this.iconImage_=Rd(u,c,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,m;if(e.size)[g,m]=e.size;else{const _=this.getImage(1);if(_.width&&_.height)g=_.width,m=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(up(x[0],x[1],e.width,e.height))};this.listenImageChange(y);return}}g!==void 0&&this.setScale(up(g,m,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new mu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ee.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ee.CHANGE,e)}ready(){return this.iconImage_.ready()}}let Nr=0;const Pt=1<<Nr++,Ie=1<<Nr++,jt=1<<Nr++,In=1<<Nr++,kr=1<<Nr++,zo=1<<Nr++,Ia=Math.pow(2,Nr)-1,kd={[Pt]:"boolean",[Ie]:"number",[jt]:"string",[In]:"color",[kr]:"number[]",[zo]:"size"},wE=Object.keys(kd).map(Number).sort(ci);function CE(r){return r in kd}function Go(r){const e=[];for(const t of wE)bo(r,t)&&e.push(kd[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function bo(r,e){return(r&e)===e}function bi(r,e){return r===e}class rt{constructor(e,t){if(!CE(e))throw new Error(`literal expressions must have a specific type, got ${Go(e)}`);this.type=e,this.value=t}}class SE{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function D_(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function pt(r,e,t){switch(typeof r){case"boolean":{if(bi(e,jt))return new rt(jt,r?"true":"false");if(!bo(e,Pt))throw new Error(`got a boolean, but expected ${Go(e)}`);return new rt(Pt,r)}case"number":{if(bi(e,zo))return new rt(zo,Bt(r));if(bi(e,Pt))return new rt(Pt,!!r);if(bi(e,jt))return new rt(jt,r.toString());if(!bo(e,Ie))throw new Error(`got a number, but expected ${Go(e)}`);return new rt(Ie,r)}case"string":{if(bi(e,In))return new rt(In,wd(r));if(bi(e,Pt))return new rt(Pt,!!r);if(!bo(e,jt))throw new Error(`got a string, but expected ${Go(e)}`);return new rt(jt,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return OE(r,e,t);for(const n of r)if(typeof n!="number")throw new Error("expected an array of numbers");if(bi(e,zo)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new rt(zo,r)}if(bi(e,In)){if(r.length===3)return new rt(In,[...r,1]);if(r.length===4)return new rt(In,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!bo(e,kr))throw new Error(`got an array of numbers, but expected ${Go(e)}`);return new rt(kr,r)}const B={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},RE={[B.Get]:ye(we(1,1/0),cp),[B.Var]:ye(we(1,1),TE),[B.Has]:ye(we(1,1/0),cp),[B.Id]:ye(IE,ds),[B.Concat]:ye(we(2,1/0),Fe(jt)),[B.GeometryType]:ye(LE,ds),[B.LineMetric]:ye(ds),[B.Resolution]:ye(ds),[B.Zoom]:ye(ds),[B.Time]:ye(ds),[B.Any]:ye(we(2,1/0),Fe(Pt)),[B.All]:ye(we(2,1/0),Fe(Pt)),[B.Not]:ye(we(1,1),Fe(Pt)),[B.Equal]:ye(we(2,2),Fe(Ia)),[B.NotEqual]:ye(we(2,2),Fe(Ia)),[B.GreaterThan]:ye(we(2,2),Fe(Ie)),[B.GreaterThanOrEqualTo]:ye(we(2,2),Fe(Ie)),[B.LessThan]:ye(we(2,2),Fe(Ie)),[B.LessThanOrEqualTo]:ye(we(2,2),Fe(Ie)),[B.Multiply]:ye(we(2,1/0),hp),[B.Coalesce]:ye(we(2,1/0),hp),[B.Divide]:ye(we(2,2),Fe(Ie)),[B.Add]:ye(we(2,1/0),Fe(Ie)),[B.Subtract]:ye(we(2,2),Fe(Ie)),[B.Clamp]:ye(we(3,3),Fe(Ie)),[B.Mod]:ye(we(2,2),Fe(Ie)),[B.Pow]:ye(we(2,2),Fe(Ie)),[B.Abs]:ye(we(1,1),Fe(Ie)),[B.Floor]:ye(we(1,1),Fe(Ie)),[B.Ceil]:ye(we(1,1),Fe(Ie)),[B.Round]:ye(we(1,1),Fe(Ie)),[B.Sin]:ye(we(1,1),Fe(Ie)),[B.Cos]:ye(we(1,1),Fe(Ie)),[B.Atan]:ye(we(1,2),Fe(Ie)),[B.Sqrt]:ye(we(1,1),Fe(Ie)),[B.Match]:ye(we(4,1/0),dp,AE),[B.Between]:ye(we(3,3),Fe(Ie)),[B.Interpolate]:ye(we(6,1/0),dp,PE),[B.Case]:ye(we(3,1/0),ME,kE),[B.In]:ye(we(2,2),FE),[B.Number]:ye(we(1,1/0),Fe(Ia)),[B.String]:ye(we(1,1/0),Fe(Ia)),[B.Array]:ye(we(1,1/0),Fe(Ie)),[B.Color]:ye(we(1,4),Fe(Ie)),[B.Band]:ye(we(1,3),Fe(Ie)),[B.Palette]:ye(we(2,2),DE),[B.ToString]:ye(we(1,1),Fe(Pt|Ie|jt|In))};function cp(r,e,t){const n=r.length-1,s=new Array(n);for(let l=0;l<n;++l){const u=r[l+1];switch(typeof u){case"number":{s[l]=new rt(Ie,u);break}case"string":{s[l]=new rt(jt,u);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${u}`)}l===0&&t.properties.add(String(u))}return s}function TE(r,e,t){const n=r[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new rt(jt,n)]}function IE(r,e,t){t.featureId=!0}function LE(r,e,t){t.geometryType=!0}function ds(r,e,t){const n=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function we(r,e){return function(t,n,s){const l=t[0],u=t.length-1;if(r===e){if(u!==r){const c=r===1?"":"s";throw new Error(`expected ${r} argument${c} for ${l}, got ${u}`)}}else if(u<r||u>e){const c=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${c} arguments for ${l}, got ${u}`)}}}function hp(r,e,t){const n=r.length-1,s=new Array(n);for(let l=0;l<n;++l){const u=pt(r[l+1],e,t);s[l]=u}return s}function Fe(r){return function(e,t,n){const s=e.length-1,l=new Array(s);for(let u=0;u<s;++u){const c=pt(e[u+1],r,n);l[u]=c}return l}}function ME(r,e,t){const n=r[0],s=r.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}function dp(r,e,t){const n=r[0],s=r.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function AE(r,e,t){const n=r.length-1,s=jt|Ie|Pt,l=pt(r[1],s,t),u=pt(r[r.length-1],e,t),c=new Array(n-2);for(let d=0;d<n-2;d+=2){try{const g=pt(r[d+2],l.type,t);c[d]=g}catch(g){throw new Error(`failed to parse argument ${d+1} of match expression: ${g.message}`)}try{const g=pt(r[d+3],u.type,t);c[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+2} of match expression: ${g.message}`)}}return[l,...c,u]}function PE(r,e,t){const n=r[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const d=n[1];if(typeof d!="number"||d<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(d)} instead`);s=d;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new rt(Ie,s);let u;try{u=pt(r[2],Ie,t)}catch(d){throw new Error(`failed to parse argument 1 in interpolate expression: ${d.message}`)}const c=new Array(r.length-3);for(let d=0;d<c.length;d+=2){try{const g=pt(r[d+3],Ie,t);c[d]=g}catch(g){throw new Error(`failed to parse argument ${d+2} for interpolate expression: ${g.message}`)}try{const g=pt(r[d+4],e,t);c[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+3} for interpolate expression: ${g.message}`)}}return[l,u,...c]}function kE(r,e,t){const n=pt(r[r.length-1],e,t),s=new Array(r.length-1);for(let l=0;l<s.length-1;l+=2){try{const u=pt(r[l+1],Pt,t);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l} of case expression: ${u.message}`)}try{const u=pt(r[l+2],n.type,t);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of case expression: ${u.message}`)}}return s[s.length-1]=n,s}function FE(r,e,t){let n=r[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=jt}else s=Ie;const l=new Array(n.length);for(let c=0;c<l.length;c++)try{const d=pt(n[c],s,t);l[c]=d}catch(d){throw new Error(`failed to parse haystack item ${c} for "in" expression: ${d.message}`)}return[pt(r[1],s,t),...l]}function DE(r,e,t){let n;try{n=pt(r[1],Ie,t)}catch(u){throw new Error(`failed to parse first argument in palette expression: ${u.message}`)}const s=r[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const l=new Array(s.length);for(let u=0;u<l.length;u++){let c;try{c=pt(s[u],In,t)}catch(d){throw new Error(`failed to parse color at index ${u} in palette expression: ${d.message}`)}if(!(c instanceof rt))throw new Error(`the palette color at index ${u} must be a literal value`);l[u]=c}return[n,...l]}function ye(...r){return function(e,t,n){const s=e[0];let l;for(let u=0;u<r.length;u++){const c=r[u](e,t,n);if(u==r.length-1){if(!c)throw new Error("expected last argument validator to return the parsed args");l=c}}return new SE(t,s,...l)}}function OE(r,e,t){const n=r[0],s=RE[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(r,e,t)}function O_(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return O_(r.getGeometries()[0]);default:return""}}function N_(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function pi(r,e,t){const n=pt(r,e,t);return Pn(n)}function Pn(r,e){if(r instanceof rt){if(r.type===In&&typeof r.value=="string"){const n=wd(r.value);return function(){return n}}return function(){return r.value}}const t=r.operator;switch(t){case B.Number:case B.String:case B.Coalesce:return NE(r);case B.Get:case B.Var:case B.Has:return zE(r);case B.Id:return n=>n.featureId;case B.GeometryType:return n=>n.geometryType;case B.Concat:{const n=r.args.map(s=>Pn(s));return s=>"".concat(...n.map(l=>l(s).toString()))}case B.Resolution:return n=>n.resolution;case B.Any:case B.All:case B.Between:case B.In:case B.Not:return bE(r);case B.Equal:case B.NotEqual:case B.LessThan:case B.LessThanOrEqualTo:case B.GreaterThan:case B.GreaterThanOrEqualTo:return GE(r);case B.Multiply:case B.Divide:case B.Add:case B.Subtract:case B.Clamp:case B.Mod:case B.Pow:case B.Abs:case B.Floor:case B.Ceil:case B.Round:case B.Sin:case B.Cos:case B.Atan:case B.Sqrt:return UE(r);case B.Case:return jE(r);case B.Match:return WE(r);case B.Interpolate:return XE(r);case B.ToString:return BE(r);default:throw new Error(`Unsupported operator ${t}`)}}function NE(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Pn(r.args[l]);switch(t){case B.Coalesce:return l=>{for(let u=0;u<n;++u){const c=s[u](l);if(typeof c<"u"&&c!==null)return c}throw new Error("Expected one of the values to be non-null")};case B.Number:case B.String:return l=>{for(let u=0;u<n;++u){const c=s[u](l);if(typeof c===t)return c}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function zE(r,e){const n=r.args[0].value;switch(r.operator){case B.Get:return s=>{const l=r.args;let u=s.properties[n];for(let c=1,d=l.length;c<d;++c){const m=l[c].value;u=u[m]}return u};case B.Var:return s=>s.variables[n];case B.Has:return s=>{const l=r.args;if(!(n in s.properties))return!1;let u=s.properties[n];for(let c=1,d=l.length;c<d;++c){const m=l[c].value;if(!u||!Object.hasOwn(u,m))return!1;u=u[m]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function GE(r,e){const t=r.operator,n=Pn(r.args[0]),s=Pn(r.args[1]);switch(t){case B.Equal:return l=>n(l)===s(l);case B.NotEqual:return l=>n(l)!==s(l);case B.LessThan:return l=>n(l)<s(l);case B.LessThanOrEqualTo:return l=>n(l)<=s(l);case B.GreaterThan:return l=>n(l)>s(l);case B.GreaterThanOrEqualTo:return l=>n(l)>=s(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function bE(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Pn(r.args[l]);switch(t){case B.Any:return l=>{for(let u=0;u<n;++u)if(s[u](l))return!0;return!1};case B.All:return l=>{for(let u=0;u<n;++u)if(!s[u](l))return!1;return!0};case B.Between:return l=>{const u=s[0](l),c=s[1](l),d=s[2](l);return u>=c&&u<=d};case B.In:return l=>{const u=s[0](l);for(let c=1;c<n;++c)if(u===s[c](l))return!0;return!1};case B.Not:return l=>!s[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function UE(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Pn(r.args[l]);switch(t){case B.Multiply:return l=>{let u=1;for(let c=0;c<n;++c)u*=s[c](l);return u};case B.Divide:return l=>s[0](l)/s[1](l);case B.Add:return l=>{let u=0;for(let c=0;c<n;++c)u+=s[c](l);return u};case B.Subtract:return l=>s[0](l)-s[1](l);case B.Clamp:return l=>{const u=s[0](l),c=s[1](l);if(u<c)return c;const d=s[2](l);return u>d?d:u};case B.Mod:return l=>s[0](l)%s[1](l);case B.Pow:return l=>Math.pow(s[0](l),s[1](l));case B.Abs:return l=>Math.abs(s[0](l));case B.Floor:return l=>Math.floor(s[0](l));case B.Ceil:return l=>Math.ceil(s[0](l));case B.Round:return l=>Math.round(s[0](l));case B.Sin:return l=>Math.sin(s[0](l));case B.Cos:return l=>Math.cos(s[0](l));case B.Atan:return n===2?l=>Math.atan2(s[0](l),s[1](l)):l=>Math.atan(s[0](l));case B.Sqrt:return l=>Math.sqrt(s[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function jE(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Pn(r.args[s]);return s=>{for(let l=0;l<t-1;l+=2)if(n[l](s))return n[l+1](s);return n[t-1](s)}}function WE(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Pn(r.args[s]);return s=>{const l=n[0](s);for(let u=1;u<t;u+=2)if(l===n[u](s))return n[u+1](s);return n[t-1](s)}}function XE(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=Pn(r.args[s]);return s=>{const l=n[0](s),u=n[1](s);let c,d;for(let g=2;g<t;g+=2){const m=n[g](s);let _=n[g+1](s);const y=Array.isArray(_);if(y&&(_=Ov(_)),m>=u)return g===2?_:y?YE(l,u,c,d,m,_):Uo(l,u,c,d,m,_);c=m,d=_}return d}}function BE(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Pn(r.args[l]);switch(t){case B.ToString:return l=>{const u=s[0](l);return r.args[0].type===In?Cd(u):u.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Uo(r,e,t,n,s,l){const u=s-t;if(u===0)return n;const c=e-t,d=r===1?c/u:(Math.pow(r,c)-1)/(Math.pow(r,u)-1);return n+d*(l-n)}function YE(r,e,t,n,s,l){if(s-t===0)return n;const c=Qm(n),d=Qm(l);let g=d[2]-c[2];g>180?g-=360:g<-180&&(g+=360);const m=[Uo(r,e,t,c[0],s,d[0]),Uo(r,e,t,c[1],s,d[1]),c[2]+Uo(r,e,t,0,s,g),Uo(r,e,t,n[3],s,l[3])];return v_(Nv(m))}function VE(r){return!0}function KE(r){const e=D_(),t=ZE(r,e),n=N_();return function(s,l){if(n.properties=s.getPropertiesInternal(),n.resolution=l,e.featureId){const u=s.getId();u!==void 0?n.featureId=u:n.featureId=null}return e.geometryType&&(n.geometryType=O_(s.getGeometry())),t(n)}}function fp(r){const e=D_(),t=r.length,n=new Array(t);for(let u=0;u<t;++u)n[u]=Uh(r[u],e);const s=N_(),l=new Array(t);return function(u,c){if(s.properties=u.getPropertiesInternal(),s.resolution=c,e.featureId){const g=u.getId();g!==void 0?s.featureId=g:s.featureId=null}let d=0;for(let g=0;g<t;++g){const m=n[g](s);m&&(l[d]=m,d+=1)}return l.length=d,l}}function ZE(r,e){const t=r.length,n=new Array(t);for(let s=0;s<t;++s){const l=r[s],u="filter"in l?pi(l.filter,Pt,e):VE;let c;if(Array.isArray(l.style)){const d=l.style.length;c=new Array(d);for(let g=0;g<d;++g)c[g]=Uh(l.style[g],e)}else c=[Uh(l.style,e)];n[s]={filter:u,styles:c}}return function(s){const l=[];let u=!1;for(let c=0;c<t;++c){const d=n[c].filter;if(d(s)&&!(r[c].else&&u)){u=!0;for(const g of n[c].styles){const m=g(s);m&&l.push(m)}}}return l}}function Uh(r,e){const t=el(r,"",e),n=tl(r,"",e),s=HE(r,e),l=$E(r,e),u=Xt(r,"z-index",e);if(!t&&!n&&!s&&!l&&!Ar(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const c=new kt;return function(d){let g=!0;if(t){const m=t(d);m&&(g=!1),c.setFill(m)}if(n){const m=n(d);m&&(g=!1),c.setStroke(m)}if(s){const m=s(d);m&&(g=!1),c.setText(m)}if(l){const m=l(d);m&&(g=!1),c.setImage(m)}return u&&c.setZIndex(u(d)),g?null:c}}function el(r,e,t){let n;if(e+"fill-pattern-src"in r)n=ex(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return l=>null;n=Fd(r,e+"fill-color",t)}if(!n)return null;const s=new mi;return function(l){const u=n(l);return u===xd?null:(s.setColor(u),s)}}function tl(r,e,t){const n=Xt(r,e+"stroke-width",t),s=Fd(r,e+"stroke-color",t);if(!n&&!s)return null;const l=ui(r,e+"stroke-line-cap",t),u=ui(r,e+"stroke-line-join",t),c=z_(r,e+"stroke-line-dash",t),d=Xt(r,e+"stroke-line-dash-offset",t),g=Xt(r,e+"stroke-miter-limit",t),m=new Bn;return function(_){if(s){const y=s(_);if(y===xd)return null;m.setColor(y)}if(n&&m.setWidth(n(_)),l){const y=l(_);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");m.setLineCap(y)}if(u){const y=u(_);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");m.setLineJoin(y)}return c&&m.setLineDash(c(_)),d&&m.setLineDashOffset(d(_)),g&&m.setMiterLimit(g(_)),m}}function HE(r,e){const t="text-",n=ui(r,t+"value",e);if(!n)return null;const s=el(r,t,e),l=el(r,t+"background-",e),u=tl(r,t,e),c=tl(r,t+"background-",e),d=ui(r,t+"font",e),g=Xt(r,t+"max-angle",e),m=Xt(r,t+"offset-x",e),_=Xt(r,t+"offset-y",e),y=Ls(r,t+"overflow",e),x=ui(r,t+"placement",e),E=Xt(r,t+"repeat",e),w=pu(r,t+"scale",e),C=Ls(r,t+"rotate-with-view",e),I=Xt(r,t+"rotation",e),R=ui(r,t+"align",e),k=ui(r,t+"justify",e),M=ui(r,t+"baseline",e),P=Ls(r,t+"keep-upright",e),U=z_(r,t+"padding",e),Y=_u(r,t+"declutter-mode"),b=new Td({declutterMode:Y});return function(W){if(b.setText(n(W)),s&&b.setFill(s(W)),l&&b.setBackgroundFill(l(W)),u&&b.setStroke(u(W)),c&&b.setBackgroundStroke(c(W)),d&&b.setFont(d(W)),g&&b.setMaxAngle(g(W)),m&&b.setOffsetX(m(W)),_&&b.setOffsetY(_(W)),y&&b.setOverflow(y(W)),x){const j=x(W);if(j!=="point"&&j!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(j)}if(E&&b.setRepeat(E(W)),w&&b.setScale(w(W)),C&&b.setRotateWithView(C(W)),I&&b.setRotation(I(W)),R){const j=R(W);if(j!=="left"&&j!=="center"&&j!=="right"&&j!=="end"&&j!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(j)}if(k){const j=k(W);if(j!=="left"&&j!=="right"&&j!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(j)}if(M){const j=M(W);if(j!=="bottom"&&j!=="top"&&j!=="middle"&&j!=="alphabetic"&&j!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(j)}return U&&b.setPadding(U(W)),P&&b.setKeepUpright(P(W)),b}}function $E(r,e){return"icon-src"in r?qE(r,e):"shape-points"in r?QE(r,e):"circle-radius"in r?JE(r,e):null}function qE(r,e){const t="icon-",n=t+"src",s=G_(r[n],n),l=Ba(r,t+"anchor",e),u=pu(r,t+"scale",e),c=Xt(r,t+"opacity",e),d=Ba(r,t+"displacement",e),g=Xt(r,t+"rotation",e),m=Ls(r,t+"rotate-with-view",e),_=mp(r,t+"anchor-origin"),y=pp(r,t+"anchor-x-units"),x=pp(r,t+"anchor-y-units"),E=rx(r,t+"color"),w=nx(r,t+"cross-origin"),C=ix(r,t+"offset"),I=mp(r,t+"offset-origin"),R=Ya(r,t+"width"),k=Ya(r,t+"height"),M=tx(r,t+"size"),P=_u(r,t+"declutter-mode"),U=new mu({src:s,anchorOrigin:_,anchorXUnits:y,anchorYUnits:x,color:E,crossOrigin:w,offset:C,offsetOrigin:I,height:k,width:R,size:M,declutterMode:P});return function(Y){return c&&U.setOpacity(c(Y)),d&&U.setDisplacement(d(Y)),g&&U.setRotation(g(Y)),m&&U.setRotateWithView(m(Y)),u&&U.setScale(u(Y)),l&&U.setAnchor(l(Y)),U}}function QE(r,e){const t="shape-",n=t+"points",s=t+"radius",l=jh(r[n],n),u=jh(r[s],s),c=el(r,t,e),d=tl(r,t,e),g=pu(r,t+"scale",e),m=Ba(r,t+"displacement",e),_=Xt(r,t+"rotation",e),y=Ls(r,t+"rotate-with-view",e),x=Ya(r,t+"radius2"),E=Ya(r,t+"angle"),w=_u(r,t+"declutter-mode"),C=new fu({points:l,radius:u,radius2:x,angle:E,declutterMode:w});return function(I){return c&&C.setFill(c(I)),d&&C.setStroke(d(I)),m&&C.setDisplacement(m(I)),_&&C.setRotation(_(I)),y&&C.setRotateWithView(y(I)),g&&C.setScale(g(I)),C}}function JE(r,e){const t="circle-",n=el(r,t,e),s=tl(r,t,e),l=Xt(r,t+"radius",e),u=pu(r,t+"scale",e),c=Ba(r,t+"displacement",e),d=Xt(r,t+"rotation",e),g=Ls(r,t+"rotate-with-view",e),m=_u(r,t+"declutter-mode"),_=new Pr({radius:5,declutterMode:m});return function(y){return l&&_.setRadius(l(y)),n&&_.setFill(n(y)),s&&_.setStroke(s(y)),c&&_.setDisplacement(c(y)),d&&_.setRotation(d(y)),g&&_.setRotateWithView(g(y)),u&&_.setScale(u(y)),_}}function Xt(r,e,t){if(!(e in r))return;const n=pi(r[e],Ie,t);return function(s){return jh(n(s),e)}}function ui(r,e,t){if(!(e in r))return null;const n=pi(r[e],jt,t);return function(s){return G_(n(s),e)}}function ex(r,e,t){const n=ui(r,e+"pattern-src",t),s=gp(r,e+"pattern-offset",t),l=gp(r,e+"pattern-size",t),u=Fd(r,e+"color",t);return function(c){return{src:n(c),offset:s&&s(c),size:l&&l(c),color:u&&u(c)}}}function Ls(r,e,t){if(!(e in r))return null;const n=pi(r[e],Pt,t);return function(s){const l=n(s);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function Fd(r,e,t){if(!(e in r))return null;const n=pi(r[e],In,t);return function(s){return b_(n(s),e)}}function z_(r,e,t){if(!(e in r))return null;const n=pi(r[e],kr,t);return function(s){return ll(n(s),e)}}function Ba(r,e,t){if(!(e in r))return null;const n=pi(r[e],kr,t);return function(s){const l=ll(n(s),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function gp(r,e,t){if(!(e in r))return null;const n=pi(r[e],kr,t);return function(s){return U_(n(s),e)}}function pu(r,e,t){if(!(e in r))return null;const n=pi(r[e],kr|Ie,t);return function(s){return sx(n(s),e)}}function Ya(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function tx(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return Bt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function nx(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function mp(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function pp(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function ix(r,e){const t=r[e];if(t!==void 0)return ll(t,e)}function _u(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function rx(r,e){const t=r[e];if(t!==void 0)return b_(t,e)}function ll(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let n=0;n<t;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function G_(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function jh(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function b_(r,e){if(typeof r=="string")return r;const t=ll(r,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function U_(r,e){const t=ll(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function sx(r,e){return typeof r=="number"?r:U_(r,e)}const _p={RENDER_ORDER:"renderOrder"};class j_ extends gu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(_p.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new F_(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(_p.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?M_:e;const t=ox(e);this.styleFunction_=e===null?void 0:tE(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function ox(r){if(r===void 0)return M_;if(!r)return null;if(typeof r=="function"||r instanceof kt)return r;if(!Array.isArray(r))return fp([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof kt){const s=new Array(e);for(let l=0;l<e;++l){const u=r[l];if(!(u instanceof kt))throw new Error("Expected a list of style instances");s[l]=u}return s}if("style"in t){const s=new Array(e);for(let l=0;l<e;++l){const u=r[l];if(!("style"in u))throw new Error("Expected a list of rules with a style property");s[l]=u}return KE(s)}return fp(r)}const fe={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},La=[fe.FILL],Hi=[fe.STROKE],Ir=[fe.BEGIN_PATH],yp=[fe.CLOSE_PATH];class W_{drawCustom(e,t,n,s,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class al extends W_{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,l=this.coordinates;let u=l.length;for(let c=0,d=e.length;c<d;c+=t)s[0]=e[c],s[1]=e[c+1],Fs(n,s)&&(l[u++]=s[0],l[u++]=s[1]);return u}appendFlatLineCoordinates(e,t,n,s,l,u){const c=this.coordinates;let d=c.length;const g=this.getBufferedMaxExtent();u&&(t+=s);let m=e[t],_=e[t+1];const y=this.tmpCoordinate_;let x=!0,E,w,C;for(E=t+s;E<n;E+=s)y[0]=e[E],y[1]=e[E+1],C=Lh(g,y),C!==w?(x&&(c[d++]=m,c[d++]=_,x=!1),c[d++]=y[0],c[d++]=y[1]):C===ct.INTERSECTING?(c[d++]=y[0],c[d++]=y[1],x=!1):x=!0,m=y[0],_=y[1],w=C;return(l&&x||E===t+s)&&(c[d++]=m,c[d++]=_),d}drawCustomCoordinates_(e,t,n,s,l){for(let u=0,c=n.length;u<c;++u){const d=n[u],g=this.appendFlatLineCoordinates(e,t,d,s,!1,!1);l.push(g),t=d}return t}drawCustom(e,t,n,s,l){this.beginGeometry(e,t,l);const u=e.getType(),c=e.getStride(),d=this.coordinates.length;let g,m,_,y,x;switch(u){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),y=[];const E=e.getEndss();x=0;for(let w=0,C=E.length;w<C;++w){const I=[];x=this.drawCustomCoordinates_(g,x,E[w],c,I),y.push(I)}this.instructions.push([fe.CUSTOM,d,y,e,n,Oh,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,y,e,s||n,Oh,l]);break;case"Polygon":case"MultiLineString":_=[],g=u=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(g,0,e.getEnds(),c,_),this.instructions.push([fe.CUSTOM,d,_,e,n,Ko,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,_,e,s||n,Ko,l]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),m=this.appendFlatLineCoordinates(g,0,g.length,c,!1,!1),this.instructions.push([fe.CUSTOM,d,m,e,n,Zi,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,m,e,s||n,Zi,l]);break;case"MultiPoint":g=e.getFlatCoordinates(),m=this.appendFlatPointCoordinates(g,c),m>d&&(this.instructions.push([fe.CUSTOM,d,m,e,n,Zi,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,m,e,s||n,Zi,l]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),m=this.coordinates.length,this.instructions.push([fe.CUSTOM,d,m,e,n,void 0,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,m,e,s||n,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[fe.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fe.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let s,l,u=-1;for(t=0;t<n;++t)s=e[t],l=s[0],l==fe.END_GEOMETRY?u=t:l==fe.BEGIN_GEOMETRY&&(s[2]=t,x1(this.hitDetectionInstructions,u,t),u=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const s=e.getColor();n.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,n.fillStyle=Xn(s||Ut)}else n.fillStyle=void 0;if(t){const s=t.getColor();n.strokeStyle=Xn(s||qo);const l=t.getLineCap();n.lineCap=l!==void 0?l:bs;const u=t.getLineDash();n.lineDash=u?u.slice():hi;const c=t.getLineDashOffset();n.lineDashOffset=c||di;const d=t.getLineJoin();n.lineJoin=d!==void 0?d:Us;const g=t.getWidth();n.lineWidth=g!==void 0?g:Jo;const m=t.getMiterLimit();n.miterLimit=m!==void 0?m:$o,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[fe.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,l=e.lineDash,u=e.lineDashOffset,c=e.lineJoin,d=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||l!=e.currentLineDash&&!ir(e.currentLineDash,l)||e.currentLineDashOffset!=u||e.currentLineJoin!=c||e.currentLineWidth!=d||e.currentMiterLimit!=g)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=l,e.currentLineDashOffset=u,e.currentLineJoin=c,e.currentLineWidth=d,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[fe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Zp(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Qh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class lx extends al{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!Fs(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length,c=this.appendFlatPointCoordinates(s,l);this.instructions.push([fe.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),l=[];for(let d=0,g=s.length;d<g;d+=e.getStride())(!this.maxExtent||Fs(this.maxExtent,s.slice(d,d+2)))&&l.push(s[d],s[d+1]);const u=this.coordinates.length,c=this.appendFlatPointCoordinates(l,2);this.instructions.push([fe.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class ax extends al{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const l=this.coordinates.length,u=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),c=[fe.MOVE_TO_LINE_TO,l,u];return this.instructions.push(c),this.hitDetectionInstructions.push(c),n}drawLineString(e,t,n){const s=this.state,l=s.strokeStyle,u=s.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di],Ir);const c=e.getFlatCoordinates(),d=e.getStride();this.drawFlatCoordinates_(c,0,c.length,d),this.hitDetectionInstructions.push(Hi),this.endGeometry(t)}drawMultiLineString(e,t,n){const s=this.state,l=s.strokeStyle,u=s.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di],Ir);const c=e.getEnds(),d=e.getFlatCoordinates(),g=e.getStride();let m=0;for(let _=0,y=c.length;_<y;++_)m=this.drawFlatCoordinates_(d,m,c[_],g);this.hitDetectionInstructions.push(Hi),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Hi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Hi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ir)}}class vp extends al{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const l=this.state,u=l.fillStyle!==void 0,c=l.strokeStyle!==void 0,d=n.length;this.instructions.push(Ir),this.hitDetectionInstructions.push(Ir);for(let g=0;g<d;++g){const m=n[g],_=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,m,s,!0,!c),x=[fe.MOVE_TO_LINE_TO,_,y];this.instructions.push(x),this.hitDetectionInstructions.push(x),c&&(this.instructions.push(yp),this.hitDetectionInstructions.push(yp)),t=m}return u&&(this.instructions.push(La),this.hitDetectionInstructions.push(La)),c&&(this.instructions.push(Hi),this.hitDetectionInstructions.push(Hi)),t}drawCircle(e,t,n){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di]);const c=e.getFlatCoordinates(),d=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,d,!1,!1);const m=[fe.CIRCLE,g];this.instructions.push(Ir,m),this.hitDetectionInstructions.push(Ir,m),s.fillStyle!==void 0&&(this.instructions.push(La),this.hitDetectionInstructions.push(La)),s.strokeStyle!==void 0&&(this.instructions.push(Hi),this.hitDetectionInstructions.push(Hi)),this.endGeometry(t)}drawPolygon(e,t,n){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di]);const c=e.getEnds(),d=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(d,0,c,g),this.endGeometry(t)}drawMultiPolygon(e,t,n){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Ut]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di]);const c=e.getEndss(),d=e.getOrientedFlatCoordinates(),g=e.getStride();let m=0;for(let _=0,y=c.length;_<y;++_)m=this.drawFlatCoordinatess_(d,m,c[_],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=Cr(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function ux(r,e,t,n,s){const l=[];let u=t,c=0,d=e.slice(t,2);for(;c<r&&u+s<n;){const[g,m]=d.slice(-2),_=e[u+s],y=e[u+s+1],x=Math.sqrt((_-g)*(_-g)+(y-m)*(y-m));if(c+=x,c>=r){const E=(r-c+x)/x,w=qt(g,_,E),C=qt(m,y,E);d.push(w,C),l.push(d),d=[w,C],c==r&&(u+=s),c=0}else if(c<r)d.push(e[u+s],e[u+s+1]),u+=s;else{const E=x-c,w=qt(g,_,E/x),C=qt(m,y,E/x);d.push(w,C),l.push(d),d=[w,C],c=0,u+=s}}return c>0&&l.push(d),l}function cx(r,e,t,n,s){let l=t,u=t,c=0,d=0,g=t,m,_,y,x,E,w,C,I,R,k;for(_=t;_<n;_+=s){const M=e[_],P=e[_+1];E!==void 0&&(R=M-E,k=P-w,x=Math.sqrt(R*R+k*k),C!==void 0&&(d+=y,m=Math.acos((C*R+I*k)/(y*x)),m>r&&(d>c&&(c=d,l=g,u=_),d=0,g=_-s)),y=x,C=R,I=k),E=M,w=P}return d+=x,d>c?[g,_]:[l,u]}const Va={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class hx extends al{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ut]={fillStyle:Ut},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const s=this.textFillState_,l=this.textStrokeState_,u=this.textState_;if(this.text_===""||!u||!s&&!l)return;const c=this.coordinates;let d=c.length;const g=e.getType();let m=null,_=e.getStride();if(u.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Wt(this.maxExtent,e.getExtent()))return;let y;if(m=e.getFlatCoordinates(),g=="LineString")y=[m.length];else if(g=="MultiLineString")y=e.getEnds();else if(g=="Polygon")y=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const C=e.getEndss();y=[];for(let I=0,R=C.length;I<R;++I)y.push(C[I][0])}this.beginGeometry(e,t,n);const x=u.repeat,E=x?void 0:u.textAlign;let w=0;for(let C=0,I=y.length;C<I;++C){let R;x?R=ux(x*this.resolution,m,w,y[C],_):R=[m.slice(w,y[C])];for(let k=0,M=R.length;k<M;++k){const P=R[k];let U=0,Y=P.length;if(E==null){const W=cx(u.maxAngle,P,0,P.length,2);U=W[0],Y=W[1]}for(let W=U;W<Y;W+=_)c.push(P[W],P[W+1]);const b=c.length;w=y[C],this.drawChars_(d,b),d=b}}this.endGeometry(t)}else{let y=u.overflow?null:[];switch(g){case"Point":case"MultiPoint":m=e.getFlatCoordinates();break;case"LineString":m=e.getFlatMidpoint();break;case"Circle":m=e.getCenter();break;case"MultiLineString":m=e.getFlatMidpoints(),_=2;break;case"Polygon":m=e.getFlatInteriorPoint(),u.overflow||y.push(m[2]/this.resolution),_=3;break;case"MultiPolygon":const R=e.getFlatInteriorPoints();m=[];for(let k=0,M=R.length;k<M;k+=3)u.overflow||y.push(R[k+2]/this.resolution),m.push(R[k],R[k+1]);if(m.length===0)return;_=2;break}const x=this.appendFlatPointCoordinates(m,_);if(x===d)return;if(y&&(x-d)/2!==m.length/_){let R=d/2;y=y.filter((k,M)=>{const P=c[(R+M)*2]===m[M*_]&&c[(R+M)*2+1]===m[M*_+1];return P||--R,P})}this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&this.updateFillStyle(this.state,this.createFill),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let E=u.padding;if(E!=Tr&&(u.scale[0]<0||u.scale[1]<0)){let R=u.padding[0],k=u.padding[1],M=u.padding[2],P=u.padding[3];u.scale[0]<0&&(k=-k,P=-P),u.scale[1]<0&&(R=-R,M=-M),E=[R,k,M,P]}const w=this.pixelRatio;this.instructions.push([fe.DRAW_IMAGE,d,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,E==Tr?Tr:E.map(function(R){return R*w}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const C=1/w,I=this.state.fillStyle;u.backgroundFill&&(this.state.fillStyle=Ut,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,d,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,this.declutterMode_,this.declutterImageWithText_,E,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ut:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),u.backgroundFill&&(this.state.fillStyle=I,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||Qo,justify:t.justify,textBaseline:t.textBaseline||Wa,scale:t.scale});const u=this.fillKey_;n&&(u in this.fillStates||(this.fillStates[u]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,l=this.strokeKey_,u=this.textKey_,c=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,g=Va[s.textBaseline],m=this.textOffsetY_*d,_=this.text_,y=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([fe.DRAW_CHARS,e,t,g,s.overflow,c,s.maxAngle,d,m,l,y*d,_,u,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fe.DRAW_CHARS,e,t,g,s.overflow,c&&Ut,s.maxAngle,d,m,l,y*d,_,u,1/d,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,s,l;if(!e)this.text_="";else{const u=e.getFill();u?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Xn(u.getColor()||Ut)):(s=null,this.textFillState_=s);const c=e.getStroke();if(!c)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const w=c.getLineDash(),C=c.getLineDashOffset(),I=c.getWidth(),R=c.getMiterLimit();l.lineCap=c.getLineCap()||bs,l.lineDash=w?w.slice():hi,l.lineDashOffset=C===void 0?di:C,l.lineJoin=c.getLineJoin()||Us,l.lineWidth=I===void 0?Jo:I,l.miterLimit=R===void 0?$o:R,l.strokeStyle=Xn(c.getColor()||qo)}n=this.textState_;const d=e.getFont()||I_;$v(d);const g=e.getScaleArray();n.overflow=e.getOverflow(),n.font=d,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Wa,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Tr,n.scale=g===void 0?[1,1]:g;const m=e.getOffsetX(),_=e.getOffsetY(),y=e.getRotateWithView(),x=e.getKeepUpright(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=m===void 0?0:m,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=E===void 0?0:E,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Te(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+Te(s.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const dx={Circle:vp,Default:al,Image:lx,LineString:ax,Polygon:vp,Text:hx};class fx{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const l=n[s].finish();e[t][s]=l}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let l=s[t];if(l===void 0){const u=dx[t];l=new u(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=l}return l}}const gx=5;class mx extends il{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=gx}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ve()}getData(e){return null}prepareFrame(e){return ve()}renderFrame(e,t){return ve()}forEachFeatureAtCoordinate(e,t,n,s,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ce.LOADED||t.getState()===Ce.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ce.LOADED&&t!=Ce.ERROR&&e.addEventListener(Ee.CHANGE,this.boundHandleImageChange_),t==Ce.IDLE&&(e.load(),t=e.getState()),t==Ce.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class X_ extends Yn{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}}class B_{constructor(){wm(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(ba(),{get:(e,t)=>{if(typeof ba()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,s=t.length;n<s;++n){const l=t[n];if(typeof l=="function"){l(e);continue}const u=t[++n];if(typeof e[l]=="function")e[l](...u);else{if(typeof u=="function"){e[l]=u(e);continue}e[l]=u}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Ep=[];let xs=null;function px(){xs=tt(1,1,void 0,{willReadFrequently:!0})}class Y_ extends mx{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=An(),this.pixelTransform=An(),this.inversePixelTransform=An(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){xs||px(),xs.clearRect(0,0,1,1);let s;try{xs.drawImage(e,t,n,1,1,0,0,1,1),s=xs.getImageData(0,0,1,1).data}catch{return xs=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let l,u;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&ir(zs(e.style.backgroundColor),zs(n)))){const c=e.firstElementChild;c instanceof HTMLCanvasElement&&(u=c.getContext("2d"))}if(u&&u.canvas.style.transform===t?(this.container=e,this.context=u,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=s;let c=l.style;c.position="absolute",c.width="100%",c.height="100%",u=tt();const d=u.canvas;l.appendChild(d),c=d.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=l,this.context=u}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=gi(n),l=iu(n),u=nu(n),c=tu(n);ht(t.coordinateToPixelTransform,s),ht(t.coordinateToPixelTransform,l),ht(t.coordinateToPixelTransform,u),ht(t.coordinateToPixelTransform,c);const d=this.inversePixelTransform;ht(d,s),ht(d,l),ht(d,u),ht(d,c),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}prepareContainer(e,t){const n=e.extent,s=e.viewState.resolution,l=e.viewState.rotation,u=e.pixelRatio,c=Math.round(Me(n)/s*u),d=Math.round(st(n)/s*u);fi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-c/2,-d/2),Kp(this.inversePixelTransform,this.pixelTransform);const g=M1(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const m=this.context.canvas;m.width!=c||m.height!=d?(m.width=c,m.height=d):this.context.clearRect(0,0,c,d),g!==m.style.transform&&(m.style.transform=g)}}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const l=new X_(e,this.inversePixelTransform,n,t);s.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(hn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(hn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new B_),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(hn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(hn.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,s,l,u,c){const d=l/2,g=u/2,m=s/t,_=-m,y=-e[0]+c,x=-e[1];return fi(this.tempTransform,d,g,m,_,-n,y,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function _x(r,e,t,n,s,l,u,c,d,g,m,_,y=!0){let x=r[e],E=r[e+1],w=0,C=0,I=0,R=0;function k(){w=x,C=E,e+=n,x=r[e],E=r[e+1],R+=I,I=Math.sqrt((x-w)*(x-w)+(E-C)*(E-C))}do k();while(e<t-n&&R+I<l);let M=I===0?0:(l-R)/I;const P=qt(w,x,M),U=qt(C,E,M),Y=e-n,b=R,W=l+c*d(g,s,m);for(;e<t-n&&R+I<W;)k();M=I===0?0:(W-R)/I;const j=qt(w,x,M),ie=qt(C,E,M);let Z=!1;if(y)if(_){const H=[P,U,j,ie];l_(H,0,4,2,_,H,H),Z=H[0]>H[2]}else Z=P>j;const te=Math.PI,J=[],ne=Y+n===e;e=Y,I=0,R=b,x=r[e],E=r[e+1];let ee;if(ne){k(),ee=Math.atan2(E-C,x-w),Z&&(ee+=ee>0?-te:te);const H=(j+P)/2,X=(ie+U)/2;return J[0]=[H,X,(W-l)/2,ee,s],J}s=s.replace(/\n/g," ");for(let H=0,X=s.length;H<X;){k();let q=Math.atan2(E-C,x-w);if(Z&&(q+=q>0?-te:te),ee!==void 0){let ue=q-ee;if(ue+=ue>te?-2*te:ue<-te?2*te:0,Math.abs(ue)>u)return null}ee=q;const G=H;let T=0;for(;H<X;++H){const ue=Z?X-H-1:H,he=c*d(g,s[ue],m);if(e+n<t&&R+I<l+T+he/2)break;T+=he}if(H===G)continue;const N=Z?s.substring(X-G,X-H):s.substring(G,H);M=I===0?0:(l+T/2-R)/I;const re=qt(w,x,M),z=qt(C,E,M);J.push([re,z,T/2,q,N]),l+=T}return J}const fs=Yt(),Ui=[],si=[],oi=[],ji=[];function xp(r){return r[3].declutterBox}const wp=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function _h(r,e){return e==="start"?e=wp.test(r)?"right":"left":e==="end"&&(e=wp.test(r)?"left":"right"),Va[e]}function yx(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class vx{constructor(e,t,n,s,l){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=An(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new B_:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,s){const l=e+t+n+s;if(this.labels_[l])return this.labels_[l];const u=s?this.strokeStates[s]:null,c=n?this.fillStates[n]:null,d=this.textStates[t],g=this.pixelRatio,m=[d.scale[0]*g,d.scale[1]*g],_=d.justify?Va[d.justify]:_h(Array.isArray(e)?e[0]:e,d.textAlign||Qo),y=s&&u.lineWidth?u.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(yx,[]),{width:E,height:w,widths:C,heights:I,lineWidths:R}=Qv(d,x),k=E+y,M=[],P=(k+2)*m[0],U=(w+y)*m[1],Y={width:P<0?Math.floor(P):Math.ceil(P),height:U<0?Math.floor(U):Math.ceil(U),contextInstructions:M};(m[0]!=1||m[1]!=1)&&M.push("scale",m),s&&(M.push("strokeStyle",u.strokeStyle),M.push("lineWidth",y),M.push("lineCap",u.lineCap),M.push("lineJoin",u.lineJoin),M.push("miterLimit",u.miterLimit),M.push("setLineDash",[u.lineDash]),M.push("lineDashOffset",u.lineDashOffset)),n&&M.push("fillStyle",c.fillStyle),M.push("textBaseline","middle"),M.push("textAlign","center");const b=.5-_;let W=_*k+b*y;const j=[],ie=[];let Z=0,te=0,J=0,ne=0,ee;for(let H=0,X=x.length;H<X;H+=2){const q=x[H];if(q===`
`){te+=Z,Z=0,W=_*k+b*y,++ne;continue}const G=x[H+1]||d.font;G!==ee&&(s&&j.push("font",G),n&&ie.push("font",G),ee=G),Z=Math.max(Z,I[J]);const T=[q,W+b*C[J]+_*(C[J]-R[ne]),.5*(y+Z)+te];W+=C[J],s&&j.push("strokeText",T),n&&ie.push("fillText",T),++J}return Array.prototype.push.apply(M,j),Array.prototype.push.apply(M,ie),this.labels_[l]=Y,Y}replayTextBackground_(e,t,n,s,l,u,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,l),e.lineTo.apply(e,t),u&&(this.alignAndScaleFill_=u[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,l,u,c,d,g,m,_,y,x,E,w,C){c*=y[0],d*=y[1];let I=n-c,R=s-d;const k=l+g>e?e-g:l,M=u+m>t?t-m:u,P=E[3]+k*y[0]+E[1],U=E[0]+M*y[1]+E[2],Y=I-E[3],b=R-E[0];(w||_!==0)&&(Ui[0]=Y,ji[0]=Y,Ui[1]=b,si[1]=b,si[0]=Y+P,oi[0]=si[0],oi[1]=b+U,ji[1]=oi[1]);let W;return _!==0?(W=fi(An(),n,s,1,1,_,-n,-s),ht(W,Ui),ht(W,si),ht(W,oi),ht(W,ji),Qi(Math.min(Ui[0],si[0],oi[0],ji[0]),Math.min(Ui[1],si[1],oi[1],ji[1]),Math.max(Ui[0],si[0],oi[0],ji[0]),Math.max(Ui[1],si[1],oi[1],ji[1]),fs)):Qi(Math.min(Y,Y+P),Math.min(b,b+U),Math.max(Y,Y+P),Math.max(b,b+U),fs),x&&(I=Math.round(I),R=Math.round(R)),{drawImageX:I,drawImageY:R,drawImageW:k,drawImageH:M,originX:g,originY:m,declutterBox:{minX:fs[0],minY:fs[1],maxX:fs[2],maxY:fs[3],value:C},canvasTransform:W,scale:y}}replayImageOrLabel_(e,t,n,s,l,u,c){const d=!!(u||c),g=s.declutterBox,m=c?c[2]*s.scale[0]/2:0;return g.minX-m<=t[0]&&g.maxX+m>=0&&g.minY-m<=t[1]&&g.maxY+m>=0&&(d&&this.replayTextBackground_(e,Ui,si,oi,ji,u,c),Jv(e,s.canvasTransform,l,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=ht(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(n[0]%s,n[1]%s),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,s){const l=this.textStates[t],u=this.createLabel(e,t,s,n),c=this.strokeStates[n],d=this.pixelRatio,g=_h(Array.isArray(e)?e[0]:e,l.textAlign||Qo),m=Va[l.textBaseline||Wa],_=c&&c.lineWidth?c.lineWidth:0,y=u.width/d-2*l.scale[0],x=g*y+2*(.5-g)*_,E=m*u.height/d+2*(.5-m)*_;return{label:u,anchorX:x,anchorY:E}}execute_(e,t,n,s,l,u,c,d){const g=this.zIndexContext_;let m;this.pixelCoordinates_&&ir(n,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=qi(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),I1(this.renderedTransform_,n));let _=0;const y=s.length;let x=0,E,w,C,I,R,k,M,P,U,Y,b,W,j,ie=0,Z=0,te=null,J=null;const ne=this.coordinateCache_,ee=this.viewRotation_,H=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,X={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ee},q=this.instructions!=s||this.overlaps?0:200;let G,T,N,re;for(;_<y;){const z=s[_];switch(z[0]){case fe.BEGIN_GEOMETRY:G=z[1],re=z[3],G.getGeometry()?c!==void 0&&!Wt(c,re.getExtent())?_=z[2]+1:++_:_=z[2],g&&(g.zIndex=z[4]);break;case fe.BEGIN_PATH:ie>q&&(this.fill_(e),ie=0),Z>q&&(e.stroke(),Z=0),!ie&&!Z&&(e.beginPath(),R=NaN,k=NaN),++_;break;case fe.CIRCLE:x=z[1];const he=m[x],pe=m[x+1],xe=m[x+2],Re=m[x+3],ze=xe-he,Rt=Re-pe,kn=Math.sqrt(ze*ze+Rt*Rt);e.moveTo(he+kn,pe),e.arc(he,pe,kn,0,2*Math.PI,!0),++_;break;case fe.CLOSE_PATH:e.closePath(),++_;break;case fe.CUSTOM:x=z[1],E=z[2];const mn=z[3],Kn=z[4],Fn=z[5];X.geometry=mn,X.feature=G,_ in ne||(ne[_]=[]);const Jt=ne[_];Fn?Fn(m,x,E,2,Jt):(Jt[0]=m[x],Jt[1]=m[x+1],Jt.length=2),g&&(g.zIndex=z[6]),Kn(Jt,X),++_;break;case fe.DRAW_IMAGE:x=z[1],E=z[2],U=z[3],w=z[4],C=z[5];let _t=z[6];const Vt=z[7],Dn=z[8],en=z[9],tn=z[10];let pn=z[11];const Zn=z[12];let Hn=z[13];I=z[14]||"declutter";const $e=z[15];if(!U&&z.length>=20){Y=z[19],b=z[20],W=z[21],j=z[22];const Tt=this.drawLabelWithPointPlacement_(Y,b,W,j);U=Tt.label,z[3]=U;const _n=z[23];w=(Tt.anchorX-_n)*this.pixelRatio,z[4]=w;const It=z[24];C=(Tt.anchorY-It)*this.pixelRatio,z[5]=C,_t=U.height,z[6]=_t,Hn=U.width,z[13]=Hn}let zr;z.length>25&&(zr=z[25]);let rr,$n,sr;z.length>17?(rr=z[16],$n=z[17],sr=z[18]):(rr=Tr,$n=!1,sr=!1),tn&&H?pn+=ee:!tn&&!H&&(pn-=ee);let or=0;for(;x<E;x+=2){if(zr&&zr[or++]<Hn/this.pixelRatio)continue;const Tt=this.calculateImageOrLabelDimensions_(U.width,U.height,m[x],m[x+1],Hn,_t,w,C,Dn,en,pn,Zn,l,rr,$n||sr,G),_n=[e,t,U,Tt,Vt,$n?te:null,sr?J:null];if(d){let It,yt,vt;if($e){const Ge=E-x;if(!$e[Ge]){$e[Ge]={args:_n,declutterMode:I};continue}const Je=$e[Ge];It=Je.args,yt=Je.declutterMode,delete $e[Ge],vt=xp(It)}let Lt,yn;if(It&&(yt!=="declutter"||!d.collides(vt))&&(Lt=!0),(I!=="declutter"||!d.collides(Tt.declutterBox))&&(yn=!0),yt==="declutter"&&I==="declutter"){const Ge=Lt&&yn;Lt=Ge,yn=Ge}Lt&&(yt!=="none"&&d.insert(vt),this.replayImageOrLabel_.apply(this,It)),yn&&(I!=="none"&&d.insert(Tt.declutterBox),this.replayImageOrLabel_.apply(this,_n))}else this.replayImageOrLabel_.apply(this,_n)}++_;break;case fe.DRAW_CHARS:const _i=z[1],hl=z[2],Gr=z[3],dl=z[4];j=z[5];const Eu=z[6],br=z[7],Ur=z[8];W=z[9];const lr=z[10];Y=z[11],b=z[12];const jr=[z[13],z[13]];I=z[14]||"declutter";const Ys=z[15],On=this.textStates[b],nn=On.font,yi=[On.scale[0]*br,On.scale[1]*br];let vi;nn in this.widths_?vi=this.widths_[nn]:(vi={},this.widths_[nn]=vi);const Vs=R_(m,_i,hl,2),Ks=Math.abs(yi[0])*ip(nn,Y,vi);if(dl||Ks<=Vs){const Tt=this.textStates[b].textAlign,_n=(Vs-Ks)*_h(Y,Tt),It=_x(m,_i,hl,2,Y,_n,Eu,Math.abs(yi[0]),ip,nn,vi,H?0:this.viewRotation_,Ys);e:if(It){const yt=[];let vt,Lt,yn,Ge,Je;if(W)for(vt=0,Lt=It.length;vt<Lt;++vt){Je=It[vt],yn=Je[4],Ge=this.createLabel(yn,b,"",W),w=Je[2]+(yi[0]<0?-lr:lr),C=Gr*Ge.height+(.5-Gr)*2*lr*yi[1]/yi[0]-Ur;const Ft=this.calculateImageOrLabelDimensions_(Ge.width,Ge.height,Je[0],Je[1],Ge.width,Ge.height,w,C,0,0,Je[3],jr,!1,Tr,!1,G);if(d&&I==="declutter"&&d.collides(Ft.declutterBox))break e;yt.push([e,t,Ge,Ft,1,null,null])}if(j)for(vt=0,Lt=It.length;vt<Lt;++vt){Je=It[vt],yn=Je[4],Ge=this.createLabel(yn,b,j,""),w=Je[2],C=Gr*Ge.height-Ur;const Ft=this.calculateImageOrLabelDimensions_(Ge.width,Ge.height,Je[0],Je[1],Ge.width,Ge.height,w,C,0,0,Je[3],jr,!1,Tr,!1,G);if(d&&I==="declutter"&&d.collides(Ft.declutterBox))break e;yt.push([e,t,Ge,Ft,1,null,null])}d&&I!=="none"&&d.load(yt.map(xp));for(let Ft=0,Zs=yt.length;Ft<Zs;++Ft)this.replayImageOrLabel_.apply(this,yt[Ft])}}++_;break;case fe.END_GEOMETRY:if(u!==void 0){G=z[1];const Tt=u(G,re,I);if(Tt)return Tt}++_;break;case fe.FILL:q?ie++:this.fill_(e),++_;break;case fe.MOVE_TO_LINE_TO:for(x=z[1],E=z[2],T=m[x],N=m[x+1],e.moveTo(T,N),R=T+.5|0,k=N+.5|0,x+=2;x<E;x+=2)T=m[x],N=m[x+1],M=T+.5|0,P=N+.5|0,(x==E-2||M!==R||P!==k)&&(e.lineTo(T,N),R=M,k=P);++_;break;case fe.SET_FILL_STYLE:te=z,this.alignAndScaleFill_=z[2],ie&&(this.fill_(e),ie=0,Z&&(e.stroke(),Z=0)),e.fillStyle=z[1],++_;break;case fe.SET_STROKE_STYLE:J=z,Z&&(e.stroke(),Z=0),this.setStrokeStyle_(e,z),++_;break;case fe.STROKE:q?Z++:e.stroke(),++_;break;default:++_;break}}ie&&this.fill_(e),Z&&e.stroke()}execute(e,t,n,s,l,u){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,l,void 0,void 0,u)}executeHitDetection(e,t,n,s,l){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,s,l)}}const Rs=["Polygon","Circle","LineString","Image","Text","Default"],V_=["Image","Text"],Ex=Rs.filter(r=>!V_.includes(r));class xx{constructor(e,t,n,s,l,u,c){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=u,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=An(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,c)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let s=this.executorsByZIndex_[n];s===void 0&&(s={},this.executorsByZIndex_[n]=s);const l=e[n];for(const u in l){const c=l[u];s[u]=new vx(this.resolution_,this.pixelRatio_,this.overlaps_,c,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,l=e.length;s<l;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,l,u){s=Math.round(s);const c=s*2+1,d=fi(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=tt(c,c,void 0,{willReadFrequently:!0}));const m=this.hitDetectionContext_;m.canvas.width!==c||m.canvas.height!==c?(m.canvas.width=c,m.canvas.height=c):g||m.clearRect(0,0,c,c);let _;this.renderBuffer_!==void 0&&(_=Yt(),jo(_,e),Qh(_,t*(this.renderBuffer_+s),_));const y=wx(s);let x;function E(P,U,Y){const b=m.getImageData(0,0,c,c).data;for(let W=0,j=y.length;W<j;W++)if(b[y[W]]>0){if(!u||Y==="none"||x!=="Image"&&x!=="Text"||u.includes(P)){const ie=(y[W]-3)/4,Z=s-ie%c,te=s-(ie/c|0),J=l(P,U,Z*Z+te*te);if(J)return J}m.clearRect(0,0,c,c);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(ci);let C,I,R,k,M;for(C=w.length-1;C>=0;--C){const P=w[C].toString();for(R=this.executorsByZIndex_[P],I=Rs.length-1;I>=0;--I)if(x=Rs[I],k=R[x],k!==void 0&&(M=k.executeHitDetection(m,d,n,E,_),M))return M}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],l=t[2],u=t[3],c=[n,s,n,u,l,u,l,s];return qi(c,0,8,2,e,c),c}isEmpty(){return Ar(this.executorsByZIndex_)}execute(e,t,n,s,l,u,c){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(c?E1:ci),u=u||Rs;const g=Rs.length;for(let m=0,_=d.length;m<_;++m){const y=d[m].toString(),x=this.executorsByZIndex_[y];for(let E=0,w=u.length;E<w;++E){const C=u[E],I=x[C];if(I!==void 0){const R=c===null?void 0:I.getZIndexContext(),k=R?R.getContext():e,M=this.maxExtent_&&C!=="Image"&&C!=="Text";if(M&&(k.save(),this.clip(k,n)),!R||C==="Text"||C==="Image"?I.execute(k,t,n,s,l,c):R.pushFunction(P=>I.execute(P,t,n,s,l,c)),M&&k.restore(),R){R.offset();const P=d[m]*g+E;this.deferredZIndexContexts_[P]||(this.deferredZIndexContexts_[P]=[]),this.deferredZIndexContexts_[P].push(R)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ci);for(let n=0,s=t.length;n<s;++n)e[t[n]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[n]].length=0}}const yh={};function wx(r){if(yh[r]!==void 0)return yh[r];const e=r*2+1,t=r*r,n=new Array(t+1);for(let l=0;l<=r;++l)for(let u=0;u<=r;++u){const c=l*l+u*u;if(c>t)break;let d=n[c];d||(d=[],n[c]=d),d.push(((r+l)*e+(r+u))*4+3),l>0&&d.push(((r-l)*e+(r+u))*4+3),u>0&&(d.push(((r+l)*e+(r-u))*4+3),l>0&&d.push(((r-l)*e+(r-u))*4+3))}const s=[];for(let l=0,u=n.length;l<u;++l)n[l]&&s.push(...n[l]);return yh[r]=s,s}class Cx extends W_{constructor(e,t,n,s,l,u,c){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?id(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=u,this.userTransform_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=An()}drawImages_(e,t,n,s){if(!this.image_)return;const l=qi(e,t,n,s,this.transform_,this.pixelCoordinates_),u=this.context_,c=this.tmpLocalTransform_,d=u.globalAlpha;this.imageOpacity_!=1&&(u.globalAlpha=d*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let m=0,_=l.length;m<_;m+=2){const y=l[m]-this.imageAnchorX_,x=l[m+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=y+this.imageAnchorX_,w=x+this.imageAnchorY_;fi(c,E,w,1,1,g,-E,-w),u.save(),u.transform.apply(u,c),u.translate(E,w),u.scale(this.imageScale_[0],this.imageScale_[1]),u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),u.restore()}else u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(u.globalAlpha=d)}drawText_(e,t,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=qi(e,t,n,s,this.transform_,this.pixelCoordinates_),u=this.context_;let c=this.textRotation_;for(this.transformRotation_===0&&(c-=this.viewRotation_),this.textRotateWithView_&&(c+=this.viewRotation_);t<n;t+=s){const d=l[t]+this.textOffsetX_,g=l[t+1]+this.textOffsetY_;c!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(u.save(),u.translate(d-this.textOffsetX_,g-this.textOffsetY_),u.rotate(c),u.translate(this.textOffsetX_,this.textOffsetY_),u.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&u.strokeText(this.text_,0,0),this.textFillState_&&u.fillText(this.text_,0,0),u.restore()):(this.textStrokeState_&&u.strokeText(this.text_,d,g),this.textFillState_&&u.fillText(this.text_,d,g))}}moveToLineTo_(e,t,n,s,l){const u=this.context_,c=qi(e,t,n,s,this.transform_,this.pixelCoordinates_);u.moveTo(c[0],c[1]);let d=c.length;l&&(d-=2);for(let g=2;g<d;g+=2)u.lineTo(c[g],c[g+1]);return l&&u.closePath(),n}drawRings_(e,t,n,s){for(let l=0,u=n.length;l<u;++l)t=this.moveToLineTo_(e,t,n[l],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=yv(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],l=Math.sqrt(n*n+s*s),u=this.context_;u.beginPath(),u.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Wt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let l=0;const u=e.getEnds(),c=e.getStride();n.beginPath();for(let d=0,g=u.length;d<g;++d)l=this.moveToLineTo_(s,l,u[d],c,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Wt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const l=e.getEndss(),u=e.getStride();t.beginPath();for(let c=0,d=l.length;c<d;++c){const g=l[c];s=this.drawRings_(n,s,g,u)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),ir(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:Qo;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Xn(n||Ut)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),s=t.getLineCap(),l=t.getLineDash(),u=t.getLineDashOffset(),c=t.getLineJoin(),d=t.getWidth(),g=t.getMiterLimit(),m=l||hi;this.strokeState_={lineCap:s!==void 0?s:bs,lineDash:this.pixelRatio_===1?m:m.map(_=>_*this.pixelRatio_),lineDashOffset:(u||di)*this.pixelRatio_,lineJoin:c!==void 0?c:Us,lineWidth:(d!==void 0?d:Jo)*this.pixelRatio_,miterLimit:g!==void 0?g:$o,strokeStyle:Xn(n||qo)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const u=e.getScaleArray();this.imageScale_=[u[0]*this.pixelRatio_/n,u[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:Xn(x||Ut)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const x=n.getColor(),E=n.getLineCap(),w=n.getLineDash(),C=n.getLineDashOffset(),I=n.getLineJoin(),R=n.getWidth(),k=n.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:bs,lineDash:w||hi,lineDashOffset:C||di,lineJoin:I!==void 0?I:Us,lineWidth:R!==void 0?R:Jo,miterLimit:k!==void 0?k:$o,strokeStyle:Xn(x||qo)}}const s=e.getFont(),l=e.getOffsetX(),u=e.getOffsetY(),c=e.getRotateWithView(),d=e.getRotation(),g=e.getScaleArray(),m=e.getText(),_=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:s!==void 0?s:I_,textAlign:_!==void 0?_:Qo,textBaseline:y!==void 0?y:Wa},this.text_=m!==void 0?Array.isArray(m)?m.reduce((x,E,w)=>x+=w%2?" ":E,""):m:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=u!==void 0?this.pixelRatio_*u:0,this.textRotateWithView_=c!==void 0?c:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const Wn=.5;function Sx(r,e,t,n,s,l,u,c,d){const g=s,m=r[0]*Wn,_=r[1]*Wn,y=tt(m,_);y.imageSmoothingEnabled=!1;const x=y.canvas,E=new Cx(y,Wn,s,null,u,c,null),w=t.length,C=Math.floor((256*256*256-1)/w),I={};for(let k=1;k<=w;++k){const M=t[k-1],P=M.getStyleFunction()||n;if(!P)continue;let U=P(M,l);if(!U)continue;Array.isArray(U)||(U=[U]);const b=(k*C).toString(16).padStart(7,"#00000");for(let W=0,j=U.length;W<j;++W){const ie=U[W],Z=ie.getGeometryFunction()(M);if(!Z||!Wt(g,Z.getExtent()))continue;const te=ie.clone(),J=te.getFill();J&&J.setColor(b);const ne=te.getStroke();ne&&(ne.setColor(b),ne.setLineDash(null)),te.setText(void 0);const ee=ie.getImage();if(ee){const G=ee.getImageSize();if(!G)continue;const T=tt(G[0],G[1],void 0,{alpha:!1}),N=T.canvas;T.fillStyle=b,T.fillRect(0,0,N.width,N.height),te.setImage(new mu({img:N,anchor:ee.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ee.getOrigin(),opacity:1,size:ee.getSize(),scale:ee.getScale(),rotation:ee.getRotation(),rotateWithView:ee.getRotateWithView()}))}const H=te.getZIndex()||0;let X=I[H];X||(X={},I[H]=X,X.Polygon=[],X.Circle=[],X.LineString=[],X.Point=[]);const q=Z.getType();if(q==="GeometryCollection"){const G=Z.getGeometriesArrayRecursive();for(let T=0,N=G.length;T<N;++T){const re=G[T];X[re.getType().replace("Multi","")].push(re,te)}}else X[q.replace("Multi","")].push(Z,te)}}const R=Object.keys(I).map(Number).sort(ci);for(let k=0,M=R.length;k<M;++k){const P=I[R[k]];for(const U in P){const Y=P[U];for(let b=0,W=Y.length;b<W;b+=2){E.setStyle(Y[b+1]);for(let j=0,ie=e.length;j<ie;++j)E.setTransform(e[j]),E.drawGeometry(Y[b])}}}return y.getImageData(0,0,x.width,x.height)}function Rx(r,e,t){const n=[];if(t){const s=Math.floor(Math.round(r[0])*Wn),l=Math.floor(Math.round(r[1])*Wn),u=(Ze(s,0,t.width-1)+Ze(l,0,t.height-1)*t.width)*4,c=t.data[u],d=t.data[u+1],m=t.data[u+2]+256*(d+256*c),_=Math.floor((256*256*256-1)/e.length);m&&m%_===0&&n.push(e[m/_-1])}return n}const Tx=.5,K_={Point:Dx,LineString:Px,Polygon:Nx,MultiPoint:Ox,MultiLineString:kx,MultiPolygon:Fx,GeometryCollection:Ax,Circle:Lx};function Ix(r,e){return parseInt(Te(r),10)-parseInt(Te(e),10)}function Cp(r,e){const t=Z_(r,e);return t*t}function Z_(r,e){return Tx*r/e}function Lx(r,e,t,n,s){const l=t.getFill(),u=t.getStroke();if(l||u){const d=r.getBuilder(t.getZIndex(),"Circle");d.setFillStrokeStyle(l,u),d.drawCircle(e,n,s)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,n)}}function Sp(r,e,t,n,s,l,u,c){const d=[],g=t.getImage();if(g){let y=!0;const x=g.getImageState();x==Ce.LOADED||x==Ce.ERROR?y=!1:x==Ce.IDLE&&g.load(),y&&d.push(g.ready())}const m=t.getFill();m&&m.loading()&&d.push(m.ready());const _=d.length>0;return _&&Promise.all(d).then(()=>s(null)),Mx(r,e,t,n,l,u,c),_}function Mx(r,e,t,n,s,l,u){const c=t.getGeometryFunction()(e);if(!c)return;const d=c.simplifyTransformed(n,s);if(t.getRenderer())H_(r,d,t,e,u);else{const m=K_[d.getType()];m(r,d,t,e,u,l)}}function H_(r,e,t,n,s){if(e.getType()=="GeometryCollection"){const u=e.getGeometries();for(let c=0,d=u.length;c<d;++c)H_(r,u[c],t,n,s);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),s)}function Ax(r,e,t,n,s,l){const u=e.getGeometriesArray();let c,d;for(c=0,d=u.length;c<d;++c){const g=K_[u[c].getType()];g(r,u[c],t,n,s,l)}}function Px(r,e,t,n,s){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawLineString(e,n,s)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n,s)}}function kx(r,e,t,n,s){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawMultiLineString(e,n,s)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n,s)}}function Fx(r,e,t,n,s){const l=t.getFill(),u=t.getStroke();if(u||l){const d=r.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(l,u),d.drawMultiPolygon(e,n,s)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,n,s)}}function Dx(r,e,t,n,s,l){const u=t.getImage(),c=t.getText(),d=c&&c.getText(),g=l&&u&&d?{}:void 0;if(u){if(u.getImageState()!=Ce.LOADED)return;const m=r.getBuilder(t.getZIndex(),"Image");m.setImageStyle(u,g),m.drawPoint(e,n,s)}if(d){const m=r.getBuilder(t.getZIndex(),"Text");m.setTextStyle(c,g),m.drawText(e,n,s)}}function Ox(r,e,t,n,s,l){const u=t.getImage(),c=u&&u.getOpacity()!==0,d=t.getText(),g=d&&d.getText(),m=l&&c&&g?{}:void 0;if(c){if(u.getImageState()!=Ce.LOADED)return;const _=r.getBuilder(t.getZIndex(),"Image");_.setImageStyle(u,m),_.drawMultiPoint(e,n,s)}if(g){const _=r.getBuilder(t.getZIndex(),"Text");_.setTextStyle(d,m),_.drawText(e,n,s)}}function Nx(r,e,t,n,s){const l=t.getFill(),u=t.getStroke();if(l||u){const d=r.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(l,u),d.drawPolygon(e,n,s)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,n,s)}}class zx extends Y_{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Yt(),this.wrappedRenderedExtent_=Yt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,l=t.viewState,u=l.center,c=l.resolution,d=l.projection,g=l.rotation,m=d.getExtent(),_=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),x=t.pixelRatio,E=t.viewHints,w=!(E[St.ANIMATING]||E[St.INTERACTING]),C=this.context,I=Math.round(Me(s)/c*x),R=Math.round(st(s)/c*x),k=_.getWrapX()&&d.canWrapX(),M=k?Me(m):null,P=k?Math.ceil((s[2]-m[2])/M)+1:1;let U=k?Math.floor((s[0]-m[0])/M):0;do{let Y=this.getRenderTransform(u,c,0,x,I,R,U*M);t.declutter&&(Y=Y.slice(0)),e.execute(C,[C.canvas.width,C.canvas.height],Y,g,w,n===void 0?Rs:n?V_:Ex,n?y&&t.declutter[y]:void 0)}while(++U<P)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=tt(this.context.canvas.width,this.context.canvas.height,Ep))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,cu(this.context),Ep.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const s=e.viewState;this.prepareContainer(e,t);const l=this.context,u=this.replayGroup_;let c=u&&!u.isEmpty();if(!c&&!(this.getLayer().hasListener(hn.PRERENDER)||this.getLayer().hasListener(hn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(l,e),s.projection,this.clipped_=!1,c&&n.extent&&this.clipping){const d=Ki(n.extent);c=Wt(d,e.extent),this.clipped_=c&&!Cs(d,e.extent),this.clipped_&&this.clipUnrotated(l,e,d)}return c&&this.renderWorlds(u,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),s=this.renderedCenter_,l=this.renderedResolution_,u=this.renderedRotation_,c=this.renderedProjection_,d=this.wrappedRenderedExtent_,g=this.getLayer(),m=[],_=n[0]*Wn,y=n[1]*Wn;m.push(this.getRenderTransform(s,l,u,Wn,_,y,0).slice());const x=g.getSource(),E=c.getExtent();if(x.getWrapX()&&c.canWrapX()&&!Cs(E,d)){let w=d[0];const C=Me(E);let I=0,R;for(;w<E[0];)--I,R=C*I,m.push(this.getRenderTransform(s,l,u,Wn,_,y,R).slice()),w+=C;for(I=0,w=d[2];w>E[2];)++I,R=C*I,m.push(this.getRenderTransform(s,l,u,Wn,_,y,R).slice()),w-=C}this.hitDetectionImageData_=Sx(n,m,this.renderedFeatures_,g.getStyleFunction(),d,l,u,Cp(l,this.renderedPixelRatio_))}t(Rx(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,l){if(!this.replayGroup_)return;const u=t.viewState.resolution,c=t.viewState.rotation,d=this.getLayer(),g={},m=function(y,x,E){const w=Te(y),C=g[w];if(C){if(C!==!0&&E<C.distanceSq){if(E===0)return g[w]=!0,l.splice(l.lastIndexOf(C),1),s(y,d,x);C.geometry=x,C.distanceSq=E}}else{if(E===0)return g[w]=!0,s(y,d,x);l.push(g[w]={feature:y,layer:d,geometry:x,distanceSq:E,callback:s})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,u,c,n,m,_?t.declutter[_].all().map(y=>y.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[St.ANIMATING],l=e.viewHints[St.INTERACTING],u=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!u&&s||!c&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,g=e.viewState,m=g.projection,_=g.resolution,y=e.pixelRatio,x=t.getRevision(),E=t.getRenderBuffer();let w=t.getRenderOrder();w===void 0&&(w=Ix);const C=g.center.slice(),I=Qh(d,E*_),R=I.slice(),k=[I.slice()],M=m.getExtent();if(n.getWrapX()&&m.canWrapX()&&!Cs(M,e.extent)){const J=Me(M),ne=Math.max(Me(I)/2,J);I[0]=M[0]-ne,I[2]=M[2]+ne,Jp(C,m);const ee=Qp(k[0],m);ee[0]<M[0]&&ee[2]<M[2]?k.push([ee[0]+J,ee[1],ee[2]+J,ee[3]]):ee[0]>M[0]&&ee[2]>M[2]&&k.push([ee[0]-J,ee[1],ee[2]-J,ee[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==x&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&Cs(this.wrappedRenderedExtent_,I))return ir(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const P=new fx(Z_(_,y),I,_,y);let U;for(let J=0,ne=k.length;J<ne;++J)n.loadFeatures(k[J],_,m);const Y=Cp(_,y);let b=!0;const W=(J,ne)=>{let ee;const H=J.getStyleFunction()||t.getStyleFunction();if(H&&(ee=H(J,_)),ee){const X=this.renderFeature(J,Y,ee,P,U,this.getLayer().getDeclutter(),ne);b=b&&!X}},j=o_(I),ie=n.getFeaturesInExtent(j);w&&ie.sort(w);for(let J=0,ne=ie.length;J<ne;++J)W(ie[J],J);this.renderedFeatures_=ie,this.ready=b;const Z=P.finish(),te=new xx(I,_,y,n.getOverlaps(),Z,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=_,this.renderedRevision_=x,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=R,this.wrappedRenderedExtent_=I,this.renderedCenter_=C,this.renderedProjection_=m,this.renderedPixelRatio_=y,this.replayGroup_=te,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,l,u,c){if(!n)return!1;let d=!1;if(Array.isArray(n))for(let g=0,m=n.length;g<m;++g)d=Sp(s,e,n[g],t,this.boundHandleStyleImageChange_,l,u,c)||d;else d=Sp(s,e,n,t,this.boundHandleStyleImageChange_,l,u,c);return d}}class Wh extends j_{constructor(e){super(e)}createRenderer(){return new zx(this)}}class Rp{constructor(e){this.rbush_=new F_(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Te(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,l=t.length;s<l;s++){const u=e[s],c=t[s],d={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:c};n[s]=d,this.items_[Te(c)]=d}this.rbush_.load(n)}remove(e){const t=Te(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Te(t)],s=[n.minX,n.minY,n.maxX,n.maxY];Wo(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,l=e.length;s<l;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return Ar(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Qi(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ka extends a_{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(be),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Le(e[t],Ee.CHANGE,this.changed,this))}clone(){const e=new Ka(vh(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Fr(this.getExtent(),e,t))return s;const l=this.geometries_;for(let u=0,c=l.length;u<c;++u)s=l[u].closestPointXY(e,t,n,s);return s}containsXY(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)if(n[s].containsXY(e,t))return!0;return!1}computeExtent(e){rl(e);const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)Xo(e,t[n].getExtent());return e}getGeometries(){return vh(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let s=!1;for(let l=0,u=n.length;l<u;++l){const c=n[l],d=c.getSimplifiedGeometry(e);t.push(d),d!==c&&(s=!0)}return s?new Ka(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)n[s].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Ji(this.getExtent()));const s=this.geometries_;for(let l=0,u=s.length;l<u;++l)s[l].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(vh(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)n[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function vh(r){return r.map(e=>e.clone())}class Za extends Dr{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const s=e,l=[],u=[];for(let d=0,g=s.length;d<g;++d){const m=s[d];fn(l,m.getFlatCoordinates()),u.push(l.length)}const c=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(c,l),this.ends_=u}}appendLineString(e){fn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Za(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(dd(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),gd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,s))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,Vv(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Ko(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Gs(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,s=[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u],g=new Gs(e.slice(l,d),n);s.push(g),l=d}return s}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const s=this.ends_,l=this.stride;for(let u=0,c=s.length;u<c;++u){const d=s[u],g=ja(t,n,d,l,.5);fn(e,g),n=d}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=c_(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new Za(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return Iv(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=ol(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class yu extends Dr{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){fn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new yu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Fr(this.getExtent(),e,t))return s;const l=this.flatCoordinates,u=this.stride;for(let c=0,d=l.length;c<d;c+=u){const g=Lr(e,t,l[c],l[c+1]);if(g<s){s=g;for(let m=0;m<u;++m)n[m]=l[c+m];n.length=u}}return s}getCoordinates(){return Zi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ns(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,s=[];for(let l=0,u=e.length;l<u;l+=n){const c=new Ns(e.slice(l,l+n),t);s.push(c)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let s=0,l=t.length;s<l;s+=n){const u=t[s],c=t[s+1];if(Jh(e,u,c))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=lu(this.flatCoordinates,0,e,this.stride),this.changed()}}function $_(r,e,t,n){const s=[];let l=Yt();for(let u=0,c=t.length;u<c;++u){const d=t[u];l=ed(r,e,d[0],n),s.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=d[d.length-1]}return s}class Ha extends Dr{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const s=e,l=[],u=[];for(let c=0,d=s.length;c<d;++c){const g=s[c],m=l.length,_=g.getEnds();for(let y=0,x=_.length;y<x;++y)_[y]+=m;fn(l,g.getFlatCoordinates()),u.push(_)}t=s.length===0?this.getLayout():s[0].getLayout(),e=l,n=u}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;fn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,l=t.length;s<l;++s)t[s]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const n=new Ha(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vv(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ev(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return Tv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return Sv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Nh(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Oh(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=$_(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=f_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new yu(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;__(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Nh(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=Cv(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new Ha(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const l=this.endss_[e-1];t=l[l.length-1]}const n=this.endss_[e].slice(),s=n[n.length-1];if(t!==0)for(let l=0,u=n.length;l<u;++l)n[l]-=t;return new er(this.flatCoordinates.slice(t,s),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,s=[];let l=0;for(let u=0,c=n.length;u<c;++u){const d=n[u].slice(),g=d[d.length-1];if(l!==0)for(let _=0,y=d.length;_<y;++_)d[_]-=l;const m=new er(t.slice(l,g),e,d);s.push(m),l=g}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return Lv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=u_(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const Tp=An();class Qt{constructor(e,t,n,s,l,u){this.styleFunction,this.extent_,this.id_=u,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Hp(this.flatCoordinates_):ed(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ji(this.getExtent());this.flatInteriorPoints_=_d(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Av(this.flatCoordinates_,this.ends_),t=$_(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=f_(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=ja(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let s=0,l=n.length;s<l;++s){const u=n[s],c=ja(e,t,u,2,.5);fn(this.flatMidpoints_,c),t=u}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=He(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const s=st(n)/st(t);fi(Tp,n[0],n[3],s,-s,0,0,0),qi(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Tp,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new Qt(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Vp((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":n.length=au(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),s=[n.length];break;case"MultiLineString":s=[],n.length=c_(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,s);break;case"Polygon":s=[],n.length=md(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,s);break}return s&&(this.simplifiedGeometry_=new Qt(this.type_,n,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}Qt.prototype.getFlatCoordinates=Qt.prototype.getOrientedFlatCoordinates;class q_ extends Vn{constructor(e){super(),this.projection=He(e.projection),this.attributions_=Ip(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Ip(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Ip(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const cn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Gx(r,e){return[[-1/0,-1/0,1/0,1/0]]}let bx=!1;function Ux(r,e,t,n,s,l,u){const c=new XMLHttpRequest;c.open("GET",typeof r=="function"?r(t,n,s):r,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=bx,c.onload=function(d){if(!c.status||c.status>=200&&c.status<300){const g=e.getType();try{let m;g=="text"||g=="json"?m=c.responseText:g=="xml"?m=c.responseXML||c.responseText:g=="arraybuffer"&&(m=c.response),m?l(e.readFeatures(m,{extent:t,featureProjection:s}),e.readProjection(m)):u()}catch{u()}}else u()},c.onerror=u,c.send()}function Lp(r,e){return function(t,n,s,l,u){const c=this;Ux(r,e,t,n,s,function(d,g){c.addFeatures(d),l!==void 0&&l(d)},u||Ps)}}class Wi extends Yn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class Mp extends q_{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ps,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ke(this.format_,"`format` must be set when `url` is set"),this.loader_=Lp(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Gx;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Rp:null,this.loadedExtentsRtree_=new Rp,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&n===void 0&&(n=new Ln(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Te(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Wi(cn.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof Qt||(this.featureChangeKeys_[e]=[Le(t,Ee.CHANGE,this.handleFeatureChange_,this),Le(t,As.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const s=String(t.getId());if(!(s in this.idIndex_))this.idIndex_[s]=t;else if(t instanceof Qt){const l=this.idIndex_[s];l instanceof Qt?Array.isArray(l)?l.push(t):this.idIndex_[s]=[l,t]:n=!1}else n=!1}return n&&(ke(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let l=0,u=e.length;l<u;l++){const c=e[l],d=Te(c);this.addToIndex_(d,c)&&n.push(c)}for(let l=0,u=n.length;l<u;l++){const c=n[l],d=Te(c);this.setupChangeEvents_(d,c);const g=c.getGeometry();if(g){const m=g.getExtent();t.push(m),s.push(c)}else this.nullGeometryFeatures_[d]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(cn.ADDFEATURE))for(let l=0,u=n.length;l<u;l++)this.dispatchEvent(new Wi(cn.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(cn.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(cn.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(dt.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(dt.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(be);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Wi(cn.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(s){const l=s.getGeometry();if(l instanceof Qt||l.intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const s=n.getGeometry();if(s instanceof Qt||s.intersectsExtent(e)){const l=t(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Ar(this.nullGeometryFeatures_)||fn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=td(e,t);return[].concat(...s.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let l=null;const u=[NaN,NaN];let c=1/0;const d=[-1/0,-1/0,1/0,1/0];return t=t||Mr,this.featuresRtree_.forEachInExtent(d,function(g){if(t(g)){const m=g.getGeometry(),_=c;if(c=m instanceof Qt?0:m.closestPointXY(n,s,u,c),c<_){l=g;const y=Math.sqrt(c);d[0]=n-y,d[1]=s-y,d[2]=n+y,d[3]=s+y}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Te(t),s=t.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const u=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(u,t)):this.featuresRtree_&&this.featuresRtree_.update(u,t)}const l=t.getId();if(l!==void 0){const u=l.toString();this.idIndex_[u]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[u]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Wi(cn.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Te(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Ar(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,l=this.strategy_(e,t,n);for(let u=0,c=l.length;u<c;++u){const d=l[u];s.forEachInExtent(d,function(m){return Cs(m.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Wi(cn.FEATURESLOADSTART)),this.loader_.call(this,d,t,n,m=>{--this.loadingExtentsCount_,this.dispatchEvent(new Wi(cn.FEATURESLOADEND,void 0,m))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Wi(cn.FEATURESLOADERROR))}),s.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(s){if(Wo(s.extent,e))return s});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,s=e.length;n<s;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Te(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(be),delete this.featureChangeKeys_[t];const s=e.getId();if(s!==void 0){const l=s.toString(),u=this.idIndex_[l];u===e?delete this.idIndex_[l]:Array.isArray(u)&&(u.splice(u.indexOf(e),1),u.length===1&&(this.idIndex_[l]=u[0]))}return delete this.uidIndex_[t],this.hasListener(cn.REMOVEFEATURE)&&this.dispatchEvent(new Wi(cn.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ke(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Lp(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Dd extends eu{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Ee.CHANGE)}release(){this.state===oe.ERROR&&this.setState(oe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==oe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ve()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const s=t-n+1e3/60;return s>=this.transition_?1:P_(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class Q_ extends Dd{constructor(e,t,n,s,l,u){super(e,t,u),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=oe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=oe.ERROR,this.unlistenImage_(),this.image_=jx(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oe.LOADED:this.state=oe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==oe.ERROR&&(this.state=oe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oe.IDLE&&(this.state=oe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Wv(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function jx(){const r=tt(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class Wx{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const l=this.points_[t]-this.points_[n],u=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(u,l),this.initialVelocity_=Math.sqrt(l*l+u*u)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class Xx extends Ja{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ve()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;fi(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Kp(s,n)}forEachFeatureAtCoordinate(e,t,n,s,l,u,c,d){let g;const m=t.viewState;function _(M,P,U,Y){return l.call(u,P,M?U:null,Y)}const y=m.projection,x=Jp(e.slice(),y),E=[[0,0]];if(y.canWrapX()&&s){const M=y.getExtent(),P=Me(M);E.push([-P,0],[P,0])}const w=t.layerStatesArray,C=w.length,I=[],R=[];for(let M=0;M<E.length;M++)for(let P=C-1;P>=0;--P){const U=w[P],Y=U.layer;if(Y.hasRenderer()&&Pd(U,m)&&c.call(d,Y)){const b=Y.getRenderer(),W=Y.getSource();if(b&&W){const j=W.getWrapX()?x:e,ie=_.bind(null,U.managed);R[0]=j[0]+E[M][0],R[1]=j[1]+E[M][1],g=b.forEachFeatureAtCoordinate(R,t,n,ie,I)}if(g)return g}}if(I.length===0)return;const k=1/I.length;return I.forEach((M,P)=>M.distanceSq+=P*k),I.sort((M,P)=>M.distanceSq-P.distanceSq),I.some(M=>g=M.callback(M.feature,M.layer,M.geometry)),g}hasFeatureAtCoordinate(e,t,n,s,l,u){return this.forEachFeatureAtCoordinate(e,t,n,s,Mr,this,l,u)!==void 0}getMap(){return this.map_}renderFrame(e){ve()}scheduleExpireIconCache(e){dn.canExpireCache()&&e.postRenderFunctions.push(Bx)}}function Bx(r,e){dn.expire()}class Yx extends Xx{constructor(e){super(e),this.fontChangeListenerKey_=Le(ai,As.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Ws+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new X_(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){be(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(hn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,d)=>c.zIndex-d.zIndex);t.some(c=>c.layer instanceof j_&&c.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const l=[];let u=null;for(let c=0,d=t.length;c<d;++c){const g=t[c];e.layerIndex=c;const m=g.layer,_=m.getSourceState();if(!Pd(g,s)||_!="ready"&&_!="undefined"){m.unrender();continue}const y=m.render(e,u);y&&(y!==u&&(this.children_.push(y),u=y),l.push(g))}this.declutter(e,l),jv(this.element_,this.children_),this.dispatchRenderEvent(hn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const s=t[n],l=s.layer;l.getDeclutter()&&l.renderDeclutter(e,s)}t.forEach(n=>n.layer.renderDeferred(e))}}}class Vi extends Yn{constructor(e,t){super(e),this.layer=t}}const Eh={LAYERS:"layers"};class nr extends A_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Eh.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Ln(n.slice(),{unique:!0}):ke(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Ln(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(be),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Le(e,dt.ADD,this.handleLayersAdd_,this),Le(e,dt.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(be);js(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const l=t[n];this.registerLayerListeners_(l),this.dispatchEvent(new Vi("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[Le(e,As.PROPERTYCHANGE,this.handleLayerChange_,this),Le(e,Ee.CHANGE,this.handleLayerChange_,this)];e instanceof nr&&t.push(Le(e,"addlayer",this.handleLayerGroupAdd_,this),Le(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Te(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Vi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Vi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Vi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Te(t);this.listenerKeys_[n].forEach(be),delete this.listenerKeys_[n],this.dispatchEvent(new Vi("removelayer",t)),this.changed()}getLayers(){return this.get(Eh.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,l=n.length;s<l;++s)this.dispatchEvent(new Vi("removelayer",n[s]))}this.set(Eh.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(t)});const s=this.getLayerState();let l=s.zIndex;!e&&s.zIndex===void 0&&(l=0);for(let u=n,c=t.length;u<c;u++){const d=t[u];d.opacity*=s.opacity,d.visible=d.visible&&s.visible,d.maxResolution=Math.min(d.maxResolution,s.maxResolution),d.minResolution=Math.max(d.minResolution,s.minResolution),d.minZoom=Math.max(d.minZoom,s.minZoom),d.maxZoom=Math.min(d.maxZoom,s.maxZoom),s.extent!==void 0&&(d.extent!==void 0?d.extent=Mn(d.extent,s.extent):d.extent=s.extent),d.zIndex===void 0&&(d.zIndex=l)}return t}getSourceState(){return"ready"}}class ws extends Yn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Bi extends ws{constructor(e,t,n,s,l,u){super(e,t,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=u}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ve={SINGLECLICK:"singleclick",CLICK:Ee.CLICK,DBLCLICK:Ee.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Xh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Vx extends eu{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Le(n,Xh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Le(n,Xh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ee.TOUCHMOVE,this.boundHandleTouchMove_,C_?{passive:!1}:!1)}emulateClick_(e){let t=new Bi(Ve.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Bi(Ve.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Bi(Ve.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Ve.POINTERUP||t.type==Ve.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Ve.POINTERDOWN||t.type==Ve.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Bi(Ve.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(be),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Bi(Ve.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Le(n,Ve.POINTERMOVE,this.handlePointerMove_,this),Le(n,Ve.POINTERUP,this.handlePointerUp_,this),Le(this.element_,Ve.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Le(this.element_.getRootNode(),Ve.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Bi(Ve.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Bi(Ve.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(be(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ee.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(be(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(be),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Yi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ut={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},$a=1/0;class Kx{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,js(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){ke(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=$a?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,l=t[e],u=n[e],c=e;for(;e<s>>1;){const d=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),m=g<s&&n[g]<n[d]?g:d;t[e]=t[m],n[e]=n[m],e=m}t[e]=l,n[e]=u,this.siftDown_(c,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,l=n[t],u=s[t];for(;t>e;){const c=this.getParentIndex_(t);if(s[c]>u)n[t]=n[c],s[t]=s[c],t=c;else break}n[t]=l,s[t]=u}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const l=t.length;let u,c,d;for(c=0;c<l;++c)u=t[c],d=e(u),d==$a?delete this.queuedElements_[this.keyFunction_(u)]:(n[s]=d,t[s++]=u);t.length=s,n.length=s,this.heapify_()}}class Zx extends Kx{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ee.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===oe.LOADED||n===oe.ERROR||n===oe.EMPTY){n!==oe.ERROR&&t.removeEventListener(Ee.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const s=this.dequeue()[0],l=s.getKey();s.getState()===oe.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,s.load())}}}function Hx(r,e,t,n,s){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return $a;const l=r.viewState.center,u=n[0]-l[0],c=n[1]-l[1];return 65536*Math.log(s)+Math.sqrt(u*u+c*c)/s}class ul extends Vn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let n=0,s=this.listenerKeys.length;n<s;++n)be(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,e){const n=this.target_??e.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==Ps&&this.listenerKeys.push(Le(e,Yi.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class $x extends ul{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"›",u=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=u):this.collapseLabel_=l;const c=e.label!==void 0?e.label:"i";typeof c=="string"?(this.label_=document.createElement("span"),this.label_.textContent=c,this.label_.className=s):this.label_=c;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+Ws+" "+du+(this.collapsed_&&this.collapsible_?" "+tp:"")+(this.collapsible_?"":" ol-uncollapsible"),m=this.element;m.className=g,m.appendChild(this.toggleButton_),m.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(s=>s.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!t.some(l=>{var u;return((u=l.getSource())==null?void 0:u.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(s=>C1(()=>s))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ir(t,this.renderedAttributions_)){Uv(this.ulElement_);for(let s=0,l=t.length;s<l;++s){const u=document.createElement("li");u.innerHTML=t[s],this.ulElement_.appendChild(u)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(tp),this.collapsed_?Ua(this.collapseLabel_,this.label_):Ua(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class qx extends ul{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const l=e.tipLabel?e.tipLabel:"Reset rotation",u=document.createElement("button");u.className=t+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(this.label_),u.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Ws+" "+du,d=this.element;d.className=c,d.appendChild(u),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ca)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Xs}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(Ca);!l&&n===0?this.element.classList.add(Ca):l&&n!==0&&this.element.classList.remove(Ca)}this.label_.style.transform=s}this.rotation_=n}}class Qx extends ul{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",u=e.zoomInLabel!==void 0?e.zoomInLabel:"+",c=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=s,m.setAttribute("type","button"),m.title=d,m.appendChild(typeof u=="string"?document.createTextNode(u):u),m.addEventListener(Ee.CLICK,this.handleClick_.bind(this,n),!1);const _=document.createElement("button");_.className=l,_.setAttribute("type","button"),_.title=g,_.appendChild(typeof c=="string"?document.createTextNode(c):c),_.addEventListener(Ee.CLICK,this.handleClick_.bind(this,-n),!1);const y=t+" "+Ws+" "+du,x=this.element;x.className=y,x.appendChild(m),x.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const l=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:Xs})):n.setZoom(l)}}}function J_(r){r=r||{};const e=new Ln;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new Qx(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new qx(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new $x(r.attributionOptions)),e}const Ap={ACTIVE:"active"};class Bs extends Vn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Ap.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Ap.ACTIVE,e)}setMap(e){this.map_=e}}function Jx(r,e,t){const n=r.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:hE,center:r.getConstrainedCenter(s)})}}function Od(r,e,t,n){const s=r.getZoom();if(s===void 0)return;const l=r.getConstrainedZoom(s+e),u=r.getResolutionForZoom(l);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:u,anchor:t,duration:n!==void 0?n:250,easing:Xs})}class ew extends Bs{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ve.DBLCLICK){const n=e.originalEvent,s=e.map,l=e.coordinate,u=n.shiftKey?-this.delta_:this.delta_,c=s.getView();Od(c,u,l,this.duration_),n.preventDefault(),t=!0}return!t}}class cl extends Bs{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ve.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ve.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Ve.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Ve.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Nd(r){const e=r.length;let t=0,n=0;for(let s=0;s<e;s++)t+=r[s].clientX,n+=r[s].clientY;return{clientX:t/e,clientY:n/e}}function Bh(r){const e=arguments;return function(t){let n=!0;for(let s=0,l=e.length;s<l&&(n=n&&e[s](t),!!n);++s);return n}}const tw=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},nw=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),n=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},e0=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?nw(r):!0},iw=Mr,t0=function(r){const e=r.originalEvent;return e.button==0&&!(bv&&E_&&e.ctrlKey)},Pp=nl,rw=function(r){return r.type==Ve.SINGLECLICK},n0=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},sw=function(r){const e=r.originalEvent;return E_?e.metaKey:e.ctrlKey},i0=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},r0=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},xh=function(r){const e=r.originalEvent;return ke(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},ow=function(r){const e=r.originalEvent;return ke(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class lw extends cl{constructor(e){super({stopDown:nl}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:Bh(n0,ow);this.condition_=e.onFocusOnly?Bh(e0,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(Nd(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const l=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],c=e.map.getView();V1(l,c.getResolution()),rd(l,c.getRotation()),c.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),u=n.getCenterInternal(),c=t.getPixelFromCoordinateInternal(u),d=t.getCoordinateFromPixelInternal([c[0]-s*Math.cos(l),c[1]-s*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(d),duration:500,easing:Xs})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class aw extends cl{constructor(e){e=e||{},super({stopDown:nl}),this.condition_=e.condition?e.condition:tw,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!xh(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Ad)return;const s=t.getSize(),l=e.pixel,u=Math.atan2(s[1]/2-l[1],l[0]-s[0]/2);if(this.lastAngle_!==void 0){const c=u-this.lastAngle_;n.adjustRotationInternal(-c)}this.lastAngle_=u}handleUpEvent(e){return xh(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return xh(e)&&t0(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class uw extends Ja{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new er([s])}getGeometry(){return this.geometry_}}const gs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Fo extends Yn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class cw extends cl{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new uw(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??t0,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],l=n[1]-t[1];return s*s+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Fo(gs.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Fo(t?gs.BOXEND:gs.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Fo(gs.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fo(gs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fo(gs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class hw extends cw{constructor(e){e=e||{};const t=e.condition?e.condition:i0;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(s),u=n.getResolutionForExtentInternal(l),c=n.getResolution()/u;s=s.clone(),s.scale(c*c)}n.fitInternal(s,{duration:this.duration_,easing:Xs})}}const wr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class dw extends Bs{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return n0(t)&&r0(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ee.KEYDOWN){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==wr.DOWN||s==wr.LEFT||s==wr.RIGHT||s==wr.UP)){const u=e.map.getView(),c=u.getResolution()*this.pixelDelta_;let d=0,g=0;s==wr.DOWN?g=-c:s==wr.LEFT?d=-c:s==wr.RIGHT?d=c:g=c;const m=[d,g];rd(m,u.getRotation()),Jx(u,m,this.duration_),n.preventDefault(),t=!0}}return!t}}class fw extends Bs{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!sw(t)&&r0(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ee.KEYDOWN||e.type==Ee.KEYPRESS){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==="+"||s==="-")){const l=e.map,u=s==="+"?this.delta_:-this.delta_,c=l.getView();Od(c,u,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class gw extends Bs{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:iw;this.condition_=e.onFocusOnly?Bh(e0,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ee.WHEEL)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==Ee.WHEEL&&(l=s.deltaY,zv&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=x_),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const c=n.getView();if(this.mode_==="trackpad"&&!(c.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=u,!1;this.totalDelta_+=l;const d=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Ze(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Od(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class mw extends cl{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=nl),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],l=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const d=l-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=d}this.lastAngle_=l;const u=e.map,c=u.getView();c.getConstraints().rotation!==Ad&&(this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(Nd(this.targetPointers))),this.rotating_&&(u.render(),c.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class pw extends cl{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=nl),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],l=n.clientX-s.clientX,u=n.clientY-s.clientY,c=Math.sqrt(l*l+u*u);this.lastDistance_!==void 0&&(t=this.lastDistance_/c),this.lastDistance_=c;const d=e.map,g=d.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(Nd(this.targetPointers))),d.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function _w(r){r=r||{};const e=new Ln,t=new Wx(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new aw),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new ew({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new lw({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new mw),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new pw({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new dw),e.push(new fw({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new gw({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new hw({duration:r.zoomDuration})),e}function s0(r){if(r instanceof gu){r.setMapInternal(null);return}r instanceof nr&&r.getLayers().forEach(s0)}function o0(r,e){if(r instanceof gu){r.setMapInternal(e);return}if(r instanceof nr){const t=r.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)o0(t[n],e)}}let yw=class extends Vn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=vw(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:x_,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=An(),this.pixelToCoordinateTransform_=An(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||J_(),this.interactions=t.interactions||_w({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Zx(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(ut.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(ut.VIEW,this.handleViewChanged_),this.addChangeListener(ut.SIZE,this.handleSizeChanged_),this.addChangeListener(ut.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof jn)&&e.view.then(function(s){n.setView(new jn(s))}),this.controls.addEventListener(dt.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(dt.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(dt.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(dt.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(dt.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(dt.REMOVE,s=>{const l=s.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){o0(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,u=n.layerFilter!==void 0?n.layerFilter:Mr,c=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,l,c,t,null,u,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(s){s instanceof nr?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:Mr,l=t.hitTolerance!==void 0?t.hitTolerance:0,u=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,u,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),l=n.width/s[0],u=n.height/s[1],c="changedTouches"in e?e.changedTouches[0]:e;return[(c.clientX-n.left)/l,(c.clientY-n.top)/u]}getTarget(){return this.get(ut.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Dh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ht(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(ut.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Ln){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const l=s.layer.getRenderer();if(l&&!l.ready)return!0;const u=s.layer.getSource();if(u&&u.loading)return!0}return!1}getPixelFromCoordinate(e){const t=li(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ht(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(ut.SIZE)}getView(){return this.get(ut.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return Hx(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){t=t||e.type;const n=new Bi(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Xh.POINTERDOWN||n===Ee.WHEEL||n===Ee.KEYDOWN){const s=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():s,u=t.target,c=l instanceof ShadowRoot?l.host===u?l.host.ownerDocument:l:l===s?s.documentElement:l;if(this.overlayContainerStopEvent_.contains(u)||!c.contains(u))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let l=s.length-1;l>=0;l--){const u=s[l];if(u.getMap()!==this||!u.getActive()||!this.getTargetElement())continue;if(!u.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,l=s;if(e){const u=e.viewHints;if(u[St.ANIMATING]||u[St.INTERACTING]){const c=Date.now()-e.time>8;s=c?0:8,l=c?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(hn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(hn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ws(Yi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ws(Yi.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let s=0,l=n.length;s<l;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)be(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ee.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ee.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Yx(this)),this.mapBrowserEventHandler_=new Vx(this,this.moveTolerance_);for(const l in Ve)this.mapBrowserEventHandler_.addEventListener(Ve[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ee.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ee.WHEEL,this.boundHandleBrowserEvent_,C_?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const l=t.getRootNode();n=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[Le(n,Ee.KEYDOWN,this.handleBrowserEvent,this),Le(n,Ee.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(be(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(be(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Le(e,As.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Le(e,Ee.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(be),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Vi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Le(e,As.PROPERTYCHANGE,this.render,this),Le(e,Ee.CHANGE,this.render,this),Le(e,"addlayer",this.handleLayerAdd_,this),Le(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){s0(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let l=null;if(t!==void 0&&Jm(t)&&n&&n.isDef()){const u=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Mh(c.center,c.resolution,c.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:u,wantedTiles:{},mapId:Te(this),renderTargets:{}},c.nextCenter&&c.nextResolution){const d=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=Mh(c.nextCenter,c.nextResolution,d,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),s&&(!this.previousExtent_||!ru(this.previousExtent_)&&!Wo(l.extent,this.previousExtent_))&&(this.dispatchEvent(new ws(Yi.MOVESTART,this,s)),this.previousExtent_=rl(this.previousExtent_)),this.previousExtent_&&!l.viewHints[St.ANIMATING]&&!l.viewHints[St.INTERACTING]&&!Wo(l.extent,this.previousExtent_)&&(this.dispatchEvent(new ws(Yi.MOVEEND,this,l)),Zp(l.extent,this.previousExtent_))),this.dispatchEvent(new ws(Yi.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(Yi.LOADSTART)||this.hasListener(Yi.LOADEND)||this.hasListener(hn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Vi("removelayer",t)),this.set(ut.LAYERGROUP,e)}setSize(e){this.set(ut.SIZE,e)}setTarget(e){this.set(ut.TARGET,e)}setView(e){if(!e||e instanceof jn){this.set(ut.VIEW,e);return}this.set(ut.VIEW,new jn);const t=this;e.then(function(n){t.setView(new jn(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),l=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),u=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(l)&&!isNaN(u)&&(t=[Math.max(0,l),Math.max(0,u)],!Jm(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&s_("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!ir(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function vw(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new nr({layers:r.layers});t[ut.LAYERGROUP]=n,t[ut.TARGET]=r.target,t[ut.VIEW]=r.view instanceof jn?r.view:new jn;let s;r.controls!==void 0&&(Array.isArray(r.controls)?s=new Ln(r.controls.slice()):(ke(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=r.controls));let l;r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new Ln(r.interactions.slice()):(ke(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions));let u;return r.overlays!==void 0?Array.isArray(r.overlays)?u=new Ln(r.overlays.slice()):(ke(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=r.overlays):u=new Ln,{controls:s,interactions:l,keyboardEventTarget:e,overlays:u,values:t}}class Ew{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Ja&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return ke(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return ke(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ke(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function qa(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function xw(r,e,t){return r+"/"+e+"/"+t}function ww(r){return Cw(r[0],r[1],r[2])}function Cw(r,e,t){return(e<<r)+t}function Sw(r,e){const t=r[0],n=r[1],s=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(n,s):!0}class zd{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ms(r,e,t,n,s){return s!==void 0?(s.minX=r,s.maxX=e,s.minY=t,s.maxY=n,s):new zd(r,e,t,n)}var ps=$h();const Ma={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Rw extends gu{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ma.PRELOAD)}setPreload(e){this.set(Ma.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ma.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ma.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function Qa(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function Tw(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const Iw=new Error("disposed");let _s=null;function Lw(r){_s||(_s=tt(r.width,r.height,void 0,{willReadFrequently:!0}));const e=_s.canvas,t=r.width;e.width!==t&&(e.width=t);const n=r.height;return e.height!==n&&(e.height=n),_s.clearRect(0,0,t,n),_s.drawImage(r,0,0),_s.getImageData(0,0,t,n).data}const Mw=[256,256];class Yh extends Dd{constructor(e){const t=oe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Qa(this.data_);return e?[e.width,e.height]:Mw}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=oe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=oe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Iw),this.controller_=null),super.disposeInternal()}}const l0=.5,Aw=10,kp=.25;class a0{constructor(e,t,n,s,l,u,c){this.sourceProj_=e,this.targetProj_=t;let d={};const g=c?gv(k=>ht(c,cd(k,this.targetProj_,this.sourceProj_))):Vo(this.targetProj_,this.sourceProj_);this.transformInv_=function(k){const M=k[0]+"/"+k[1];return d[M]||(d[M]=g(k)),d[M]},this.maxSourceExtent_=s,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Me(s)>=Me(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Me(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Me(this.targetProj_.getExtent()):null;const m=gi(n),_=iu(n),y=nu(n),x=tu(n),E=this.transformInv_(m),w=this.transformInv_(_),C=this.transformInv_(y),I=this.transformInv_(x),R=Aw+(u?Math.max(0,Math.ceil(Math.log2(Bo(n)/(u*u*256*256)))):0);if(this.addQuad_(m,_,y,x,E,w,C,I,R),this.wrapsXInSource_){let k=1/0;this.triangles_.forEach(function(M,P,U){k=Math.min(k,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(M=>{if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-k>this.sourceWorldWidth_/2){const P=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];P[0][0]-k>this.sourceWorldWidth_/2&&(P[0][0]-=this.sourceWorldWidth_),P[1][0]-k>this.sourceWorldWidth_/2&&(P[1][0]-=this.sourceWorldWidth_),P[2][0]-k>this.sourceWorldWidth_/2&&(P[2][0]-=this.sourceWorldWidth_);const U=Math.min(P[0][0],P[1][0],P[2][0]);Math.max(P[0][0],P[1][0],P[2][0])-U<this.sourceWorldWidth_/2&&(M.source=P)}})}d={}}addTriangle_(e,t,n,s,l,u){this.triangles_.push({source:[s,l,u],target:[e,t,n]})}addQuad_(e,t,n,s,l,u,c,d,g){const m=Om([l,u,c,d]),_=this.sourceWorldWidth_?Me(m)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&_>.5&&_<1;let E=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const C=Om([e,t,n,s]);E=Me(C)/this.targetWorldWidth_>kp||E}!x&&this.sourceProj_.isGlobal()&&_&&(E=_>kp||E)}if(!E&&this.maxSourceExtent_&&isFinite(m[0])&&isFinite(m[1])&&isFinite(m[2])&&isFinite(m[3])&&!Wt(m,this.maxSourceExtent_))return;let w=0;if(!E&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(d[0])||!isFinite(d[1]))){if(g>0)E=!0;else if(w=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(u[0])||!isFinite(u[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!E){const C=[(e[0]+n[0])/2,(e[1]+n[1])/2],I=this.transformInv_(C);let R;x?R=(Is(l[0],y)+Is(c[0],y))/2-Is(I[0],y):R=(l[0]+c[0])/2-I[0];const k=(l[1]+c[1])/2-I[1];E=R*R+k*k>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const C=[(t[0]+n[0])/2,(t[1]+n[1])/2],I=this.transformInv_(C),R=[(s[0]+e[0])/2,(s[1]+e[1])/2],k=this.transformInv_(R);this.addQuad_(e,t,C,R,l,u,I,k,g-1),this.addQuad_(R,C,n,s,k,I,c,d,g-1)}else{const C=[(e[0]+t[0])/2,(e[1]+t[1])/2],I=this.transformInv_(C),R=[(n[0]+s[0])/2,(n[1]+s[1])/2],k=this.transformInv_(R);this.addQuad_(e,C,R,s,l,I,k,d,g-1),this.addQuad_(C,t,n,R,I,u,c,k,g-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(e,n,s,l,c,d),w&14||this.addTriangle_(e,n,t,l,c,u),w&&(w&13||this.addTriangle_(t,s,e,u,d,l),w&7||this.addTriangle_(t,s,n,u,d,c))}calculateSourceExtent(){const e=Yt();return this.triangles_.forEach(function(t,n,s){const l=t.source;jo(e,l[0]),jo(e,l[1]),jo(e,l[2])}),e}getTriangles(){return this.triangles_}}let wh;const Ms=[];function Fp(r,e,t,n,s){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,s),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),r.restore()}function Ch(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function Pw(){if(wh===void 0){const r=tt(6,6,Ms);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Fp(r,4,5,4,0),Fp(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;wh=Ch(e,0)||Ch(e,4)||Ch(e,8),cu(r),Ms.push(r.canvas)}return wh}function Dp(r,e,t,n){const s=cd(t,e,r);let l=za(e,n,t);const u=e.getMetersPerUnit();u!==void 0&&(l*=u);const c=r.getMetersPerUnit();c!==void 0&&(l/=c);const d=r.getExtent();if(!d||Fs(d,s)){const g=za(r,l,s)/l;isFinite(g)&&g>0&&(l/=g)}return l}function u0(r,e,t,n){const s=Ji(t);let l=Dp(r,e,s,n);return(!isFinite(l)||l<=0)&&qp(t,function(u){return l=Dp(r,e,u,n),isFinite(l)&&l>0}),l}function kw(r,e,t,n,s,l,u,c,d,g,m,_,y,x){const E=tt(Math.round(t*r),Math.round(t*e),Ms);if(_||(E.imageSmoothingEnabled=!1),d.length===0)return E.canvas;E.scale(t,t);function w(P){return Math.round(P*t)/t}E.globalCompositeOperation="lighter";const C=Yt();d.forEach(function(P,U,Y){Xo(C,P.extent)});let I;const R=t/n,k=(_?1:1+Math.pow(2,-24))/R;{if(I=tt(Math.round(Me(C)*R),Math.round(st(C)*R),Ms),_||(I.imageSmoothingEnabled=!1),s&&x){const P=(s[0]-C[0])*R,U=-(s[3]-C[3])*R,Y=Me(s)*R,b=st(s)*R;I.rect(P,U,Y,b),I.clip()}d.forEach(function(P,U,Y){if(P.image.width>0&&P.image.height>0){if(P.clipExtent){I.save();const Z=(P.clipExtent[0]-C[0])*R,te=-(P.clipExtent[3]-C[3])*R,J=Me(P.clipExtent)*R,ne=st(P.clipExtent)*R;I.rect(_?Z:Math.round(Z),_?te:Math.round(te),_?J:Math.round(Z+J)-Math.round(Z),_?ne:Math.round(te+ne)-Math.round(te)),I.clip()}const b=(P.extent[0]-C[0])*R,W=-(P.extent[3]-C[3])*R,j=Me(P.extent)*R,ie=st(P.extent)*R;I.drawImage(P.image,g,g,P.image.width-2*g,P.image.height-2*g,_?b:Math.round(b),_?W:Math.round(W),_?j:Math.round(b+j)-Math.round(b),_?ie:Math.round(W+ie)-Math.round(W)),P.clipExtent&&I.restore()}})}const M=gi(u);return c.getTriangles().forEach(function(P,U,Y){const b=P.source,W=P.target;let j=b[0][0],ie=b[0][1],Z=b[1][0],te=b[1][1],J=b[2][0],ne=b[2][1];const ee=w((W[0][0]-M[0])/l),H=w(-(W[0][1]-M[1])/l),X=w((W[1][0]-M[0])/l),q=w(-(W[1][1]-M[1])/l),G=w((W[2][0]-M[0])/l),T=w(-(W[2][1]-M[1])/l),N=j,re=ie;j=0,ie=0,Z-=N,te-=re,J-=N,ne-=re;const z=[[Z,te,0,0,X-ee],[J,ne,0,0,G-ee],[0,0,Z,te,q-H],[0,0,J,ne,T-H]],ue=B1(z);if(!ue)return;if(E.save(),E.beginPath(),Pw()||!_){E.moveTo(X,q);const pe=4,xe=ee-X,Re=H-q;for(let ze=0;ze<pe;ze++)E.lineTo(X+w((ze+1)*xe/pe),q+w(ze*Re/(pe-1))),ze!=pe-1&&E.lineTo(X+w((ze+1)*xe/pe),q+w((ze+1)*Re/(pe-1)));E.lineTo(G,T)}else E.moveTo(X,q),E.lineTo(ee,H),E.lineTo(G,T);E.clip(),E.transform(ue[0],ue[2],ue[1],ue[3],ee,H),E.translate(C[0]-N,C[3]-re);let he;if(I)he=I.canvas,E.scale(k,-k);else{const pe=d[0],xe=pe.extent;he=pe.image,E.scale(Me(xe)/he.width,-st(xe)/he.height)}E.drawImage(he,0,0),E.restore()}),I&&(cu(I),Ms.push(I.canvas)),m&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,c.getTriangles().forEach(function(P,U,Y){const b=P.target,W=(b[0][0]-M[0])/l,j=-(b[0][1]-M[1])/l,ie=(b[1][0]-M[0])/l,Z=-(b[1][1]-M[1])/l,te=(b[2][0]-M[0])/l,J=-(b[2][1]-M[1])/l;E.beginPath(),E.moveTo(ie,Z),E.lineTo(W,j),E.lineTo(te,J),E.closePath(),E.stroke()}),E.restore()),E.canvas}function vu(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Vh(r,e,t,n,s,l,u){u=u??vu();const c=1/(r-e),d=1/(t-n),g=1/(s-l);return u[0]=-2*c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*d,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*g,u[11]=0,u[12]=(r+e)*c,u[13]=(n+t)*d,u[14]=(l+s)*g,u[15]=1,u}function Op(r,e,t,n,s){return s=s??vu(),s[0]=r[0]*e,s[1]=r[1]*e,s[2]=r[2]*e,s[3]=r[3]*e,s[4]=r[4]*t,s[5]=r[5]*t,s[6]=r[6]*t,s[7]=r[7]*t,s[8]=r[8]*n,s[9]=r[9]*n,s[10]=r[10]*n,s[11]=r[11]*n,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s}function Fw(r,e,t,n,s){s=s??vu();let l,u,c,d,g,m,_,y,x,E,w,C;return r===s?(s[12]=r[0]*e+r[4]*t+r[8]*n+r[12],s[13]=r[1]*e+r[5]*t+r[9]*n+r[13],s[14]=r[2]*e+r[6]*t+r[10]*n+r[14],s[15]=r[3]*e+r[7]*t+r[11]*n+r[15]):(l=r[0],u=r[1],c=r[2],d=r[3],g=r[4],m=r[5],_=r[6],y=r[7],x=r[8],E=r[9],w=r[10],C=r[11],s[0]=l,s[1]=u,s[2]=c,s[3]=d,s[4]=g,s[5]=m,s[6]=_,s[7]=y,s[8]=x,s[9]=E,s[10]=w,s[11]=C,s[12]=l*e+g*t+x*n+r[12],s[13]=u*e+m*t+E*n+r[13],s[14]=c*e+_*t+w*n+r[14],s[15]=d*e+y*t+C*n+r[15]),s}function Dw(r,e,t,n){return n=n??vu(),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r,n[13]=e,n[14]=t,n[15]=1,n}const Ow=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Nw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class zw{constructor(e){this.gl_=e,this.program_=Kh(e,Nw,Ow),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,n,s,l,u,c,d,g,m,_,y,x){const E=this.gl_;d===void 0&&(d=s),g===void 0&&(g=l),u===void 0&&(u=t),c===void 0&&(c=n),m===void 0&&(m=u),_===void 0&&(_=c),y===void 0&&(y=E.canvas.width),x===void 0&&(x=E.canvas.height),E.bindTexture(E.TEXTURE_2D,e),E.useProgram(this.program_),E.bindBuffer(E.ARRAY_BUFFER,this.positionBuffer),E.enableVertexAttribArray(this.positionLocation),E.vertexAttribPointer(this.positionLocation,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,this.texcoordBuffer),E.enableVertexAttribArray(this.texcoordLocation),E.vertexAttribPointer(this.texcoordLocation,2,E.FLOAT,!1,0,0);let w=Vh(0,y,0,x,-1,1);w=Fw(w,d,g,0),w=Op(w,m,_,1),E.uniformMatrix4fv(this.matrixLocation,!1,w);let C=Dw(s/t,l/n,0);C=Op(C,u/t,c/n,1),E.uniformMatrix4fv(this.textureMatrixLocation,!1,C),E.uniform1i(this.textureLocation,0),E.drawArrays(E.TRIANGLES,0,this.positions.length/2)}}function Np(r,e,t){const n=r.createShader(e);if(n===null)throw new Error("Shader compilation failed");if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){const s=r.getShaderInfoLog(n);throw s===null?new Error("Shader info log creation failed"):new Error(s)}return n}function Kh(r,e,t){const n=r.createProgram(),s=Np(r,r.VERTEX_SHADER,t),l=Np(r,r.FRAGMENT_SHADER,e);if(n===null)throw new Error("Program creation failed");if(r.attachShader(n,s),r.attachShader(n,l),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw r.getProgramInfoLog(n)===null?new Error("Program info log creation failed"):new Error;return n}const Gw=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,bw=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Uw=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,jw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function Ww(r,e,t,n){let s;return t&&t.length?s=t.shift():Sd?s=new OffscreenCanvas(r||300,e||300):s=document.createElement("canvas"),r&&(s.width=r),e&&(s.height=e),s.getContext("webgl",n)}function Xw(r){const e=r.canvas;e.width=1,e.height=1,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)}const zp=[];function Bw(r,e,t,n,s,l,u,c,d,g,m,_,y,x){const E=Math.round(n*e),w=Math.round(n*t);r.canvas.width=E,r.canvas.height=w;let C,I;if(I=r.createTexture(),r.bindTexture(r.TEXTURE_2D,I),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,E,w,0,r.RGBA,m,null),C=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,C),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,I,0),C===null)throw new Error("Could not create framebuffer");if(I===null)throw new Error("Could not create texture");if(d.length===0)return{width:E,height:w,framebuffer:C,texture:I};const R=Yt();d.forEach(function(j,ie,Z){Xo(R,j.extent)});let k,M,P;const U=1/s;{if(k=r.createTexture(),I===null)throw new Error("Could not create texture");M=Math.round(Me(R)*U),P=Math.round(st(R)*U);const j=r.getParameter(r.MAX_TEXTURE_SIZE),ie=Math.max(M,P),Z=ie>j?j/ie:1,te=Math.round(M*Z),J=Math.round(P*Z);r.bindTexture(r.TEXTURE_2D,k),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,te,J,0,r.RGBA,m,null);const ne=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,ne),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,k,0);const ee=new zw(r);d.forEach(function(H,X,q){const G=(H.extent[0]-R[0])*U*Z,T=-(H.extent[3]-R[3])*U*Z,N=Me(H.extent)*U*Z,re=st(H.extent)*U*Z;if(r.bindFramebuffer(r.FRAMEBUFFER,ne),r.viewport(0,0,te,J),H.clipExtent){const z=(H.clipExtent[0]-R[0])*U*Z,ue=-(H.clipExtent[3]-R[3])*U*Z,he=Me(H.clipExtent)*U*Z,pe=st(H.clipExtent)*U*Z;r.enable(r.SCISSOR_TEST),r.scissor(y?z:Math.round(z),y?ue:Math.round(ue),y?he:Math.round(z+he)-Math.round(z),y?pe:Math.round(ue+pe)-Math.round(ue))}ee.drawImage(H.texture,H.width,H.height,g,g,H.width-2*g,H.height-2*g,y?G:Math.round(G),y?T:Math.round(T),y?N:Math.round(G+N)-Math.round(G),y?re:Math.round(T+re)-Math.round(T),te,J),r.disable(r.SCISSOR_TEST)}),r.deleteFramebuffer(ne)}const Y=gi(u),b=gi(R),W=j=>{const ie=(j[0][0]-Y[0])/l*n,Z=-(j[0][1]-Y[1])/l*n,te=(j[1][0]-Y[0])/l*n,J=-(j[1][1]-Y[1])/l*n,ne=(j[2][0]-Y[0])/l*n,ee=-(j[2][1]-Y[1])/l*n;return{u1:te,v1:J,u0:ie,v0:Z,u2:ne,v2:ee}};r.bindFramebuffer(r.FRAMEBUFFER,C),r.viewport(0,0,E,w);{const j=[],ie=[],Z=Kh(r,jw,Uw);r.useProgram(Z);const te=r.getUniformLocation(Z,"u_texture");r.bindTexture(r.TEXTURE_2D,k),r.uniform1i(te,0),c.getTriangles().forEach(function(G,T,N){const re=G.source,z=G.target,{u1:ue,v1:he,u0:pe,v0:xe,u2:Re,v2:ze}=W(z),Rt=(re[0][0]-b[0])/s/M,kn=-(re[0][1]-b[1])/s/P,mn=(re[1][0]-b[0])/s/M,Kn=-(re[1][1]-b[1])/s/P,Fn=(re[2][0]-b[0])/s/M,Jt=-(re[2][1]-b[1])/s/P;j.push(ue,he,pe,xe,Re,ze),ie.push(mn,Kn,Rt,kn,Fn,Jt)});const J=Vh(0,E,w,0,-1,1),ne=r.getUniformLocation(Z,"u_matrix");r.uniformMatrix4fv(ne,!1,J);const ee=r.getAttribLocation(Z,"a_position"),H=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,H),r.bufferData(r.ARRAY_BUFFER,new Float32Array(j),r.STATIC_DRAW),r.vertexAttribPointer(ee,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ee);const X=r.getAttribLocation(Z,"a_texcoord"),q=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,q),r.bufferData(r.ARRAY_BUFFER,new Float32Array(ie),r.STATIC_DRAW),r.vertexAttribPointer(X,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(X),r.drawArrays(r.TRIANGLES,0,j.length/2)}if(_){const j=Kh(r,bw,Gw);r.useProgram(j);const ie=Vh(0,E,w,0,-1,1),Z=r.getUniformLocation(j,"u_matrix");r.uniformMatrix4fv(Z,!1,ie);const te=Array.isArray(_)?_:[0,0,0,255],J=r.getUniformLocation(j,"u_val");r.uniform4fv(J,te);const ne=r.getAttribLocation(j,"a_position"),ee=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,ee),r.vertexAttribPointer(ne,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ne);const H=c.getTriangles().reduce(function(X,q){const G=q.target,{u1:T,v1:N,u0:re,v0:z,u2:ue,v2:he}=W(G);return X.concat([T,N,re,z,re,z,ue,he,ue,he,T,N])},[]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(H),r.STATIC_DRAW),r.drawArrays(r.LINES,0,H.length/2)}return{width:E,height:w,framebuffer:C,texture:I}}class Yw extends Yh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),s=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?s?Mn(n,s):n:s;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),u=this.targetTileGrid_.getExtent();let c=this.sourceTileGrid_.getExtent();const d=u?Mn(l,u):l;if(Bo(d)===0){this.state=oe.EMPTY;return}n&&(c?c=Mn(c,n):c=n);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),m=e.targetProj,_=u0(t,m,d,g);if(!isFinite(_)||_<=0){this.state=oe.EMPTY;return}const y=e.errorThreshold!==void 0?e.errorThreshold:l0;if(this.triangulation_=new a0(t,m,d,c,_*y,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(_);let x=this.triangulation_.calculateSourceExtent();if(c&&(t.canWrapX()?(x[1]=Ze(x[1],c[1],c[3]),x[3]=Ze(x[3],c[1],c[3])):x=Mn(x,c)),!Bo(x))this.state=oe.EMPTY;else{let E=0,w=0;t.canWrapX()&&(E=Me(n),w=Math.floor((x[0]-n[0])/E)),td(x.slice(),t,!0).forEach(I=>{const R=this.sourceTileGrid_.getTileRangeForExtentAndZ(I,this.sourceZ_),k=e.getTileFunction;for(let M=R.minX;M<=R.maxX;M++)for(let P=R.minY;P<=R.maxY;P++){const U=k(this.sourceZ_,M,P,this.pixelRatio_);if(U){const Y=w*E;this.sourceTiles_.push({tile:U,offset:Y})}}++w}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(M=>{var T;const P=M.tile;if(!P||P.getState()!==oe.LOADED)return;const U=P.getSize(),Y=this.gutter_;let b;const W=Tw(P.getData());W?b=W:(t=!0,b=Lw(Qa(P.getData())));const j=[U[0]+2*Y,U[1]+2*Y],ie=b instanceof Float32Array,Z=j[0]*j[1],te=ie?Float32Array:Uint8ClampedArray,J=new te(b.buffer),ne=te.BYTES_PER_ELEMENT,ee=ne*J.length/Z,H=J.byteLength/j[1],X=Math.floor(H/ne/j[0]),q=this.sourceTileGrid_.getTileCoordExtent(P.tileCoord);q[0]+=M.offset,q[2]+=M.offset;const G=(T=this.clipExtent_)==null?void 0:T.slice();G&&(G[0]+=M.offset,G[2]+=M.offset),e.push({extent:q,clipExtent:G,data:J,dataType:te,bytesPerPixel:ee,pixelSize:j,bandCount:X})}),this.sourceTiles_.length=0,e.length===0){this.state=oe.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(n),l=typeof s=="number"?s:s[0],u=typeof s=="number"?s:s[1],c=l*this.pixelRatio_,d=u*this.pixelRatio_,g=this.targetTileGrid_.getResolution(n),m=this.sourceTileGrid_.getResolution(this.sourceZ_),_=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,x=new e[0].dataType(y*c*d),E=Ww(c,d,zp,{premultipliedAlpha:!1,antialias:!1});let w;const C=E.RGBA;let I;e[0].dataType==Float32Array?(I=E.FLOAT,E.getExtension("WEBGL_color_buffer_float"),E.getExtension("OES_texture_float"),E.getExtension("EXT_float_blend"),w=E.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(I=E.UNSIGNED_BYTE,w=this.interpolate);const R=4,k=Math.ceil(y/R);for(let M=k-1;M>=0;--M){const P=[];for(let te=0,J=e.length;te<J;++te){const ne=e[te],ee=ne.pixelSize,H=ee[0],X=ee[1],q=new ne.dataType(R*H*X),G=ne.data;let T=M*R;for(let re=0,z=q.length;re<z;re+=R)q[re]=G[T],q[re+1]=G[T+1],q[re+2]=G[T+2],q[re+3]=G[T+3],T+=y;const N=E.createTexture();E.bindTexture(E.TEXTURE_2D,N),w?(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR)):(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST)),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,C,H,X,0,C,I,q),P.push({extent:ne.extent,clipExtent:ne.clipExtent,texture:N,width:H,height:X})}const{framebuffer:U,width:Y,height:b}=Bw(E,l,u,this.pixelRatio_,m,g,_,this.triangulation_,P,this.gutter_,I,this.renderEdges_,w),W=Y,j=b*R,ie=new e[0].dataType(W*j);E.bindFramebuffer(E.FRAMEBUFFER,U),E.readPixels(0,0,Y,b,E.RGBA,I,ie);let Z=M*R;for(let te=0,J=ie.length;te<J;te+=R){const ne=(W-1-(te/j|0))*j+te%j;x[Z]=ie[ne],x[Z+1]=ie[ne+1],x[Z+2]=ie[ne+2],x[Z+3]=ie[ne+3],Z+=y}}if(Xw(E),zp.push(E.canvas),t){const M=tt(l,u),P=new ImageData(x,l);M.putImageData(P,0,0),this.reprojData_=M.canvas}else this.reprojData_=x;this.reprojSize_=[Math.round(c),Math.round(d)],this.state=oe.LOADED,this.changed()}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==oe.IDLE&&n!==oe.LOADING)return;e++;const s=Le(t,Ee.CHANGE,()=>{const l=t.getState();(l==oe.LOADED||l==oe.ERROR||l==oe.EMPTY)&&(be(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==oe.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(be),this.sourcesListenerKeys_=null}}class Zh extends Dd{constructor(e,t,n,s,l,u,c,d,g,m,_,y){super(l,oe.IDLE,y),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=c,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=u||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=s.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const C=E?Mn(x,E):x;if(Bo(C)===0){this.state=oe.EMPTY;return}const I=e.getExtent();I&&(w?w=Mn(w,I):w=I);const R=s.getResolution(this.wrappedTileCoord_[0]),k=u0(e,n,C,R);if(!isFinite(k)||k<=0){this.state=oe.EMPTY;return}const M=m!==void 0?m:l0;if(this.triangulation_=new a0(e,n,C,w,k*M,R),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=t.getZForResolution(k);let P=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(P[1]=Ze(P[1],w[1],w[3]),P[3]=Ze(P[3],w[1],w[3])):P=Mn(P,w)),!Bo(P))this.state=oe.EMPTY;else{let U=0,Y=0;e.canWrapX()&&(U=Me(I),Y=Math.floor((P[0]-I[0])/U)),td(P.slice(),e,!0).forEach(W=>{const j=t.getTileRangeForExtentAndZ(W,this.sourceZ_);for(let ie=j.minX;ie<=j.maxX;ie++)for(let Z=j.minY;Z<=j.maxY;Z++){const te=g(this.sourceZ_,ie,Z,c);if(te){const J=Y*U;this.sourceTiles_.push({tile:te,offset:J})}}++Y}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var s;const n=t.tile;if(n&&n.getState()==oe.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const u=(s=this.clipExtent_)==null?void 0:s.slice();u&&(u[0]+=t.offset,u[2]+=t.offset),e.push({extent:l,clipExtent:u,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=oe.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],u=this.targetTileGrid_.getResolution(t),c=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=kw(s,l,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),u,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=oe.LOADED}this.changed()}load(){if(this.state==oe.IDLE){this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==oe.IDLE||n==oe.LOADING){e++;const s=Le(t,Ee.CHANGE,l=>{const u=t.getState();(u==oe.LOADED||u==oe.ERROR||u==oe.EMPTY)&&(be(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,s){t.getState()==oe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(be),this.sourcesListenerKeys_=null}release(){this.canvas_&&(cu(this.canvas_.getContext("2d")),Ms.push(this.canvas_),this.canvas_=null),super.release()}}function Sh(r,e,t,n){return`${r},${xw(e,t,n)}`}function Rh(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const n=r[t],s=n.has(e);return s||n.add(e),!s}function Vw(r,e,t){const n=r[t];return n?n.delete(e):!1}function Gp(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=Mn(e,Ki(t.extent,r.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(r.viewState.projection).getExtent();s&&(e=Mn(e,s))}return e}class Kw extends Y_{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Yt(),this.tempTileRange_=new zd(0,0,0,0),this.tempTileCoord_=qa(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new Ew(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,s){const l=this.tileCache_,c=this.getLayer().getSource(),d=Sh(c.getKey(),e,t,n);let g;if(l.containsKey(d))g=l.get(d);else{if(g=c.getTile(e,t,n,s.pixelRatio,s.viewState.projection),!g)return null;l.set(d,g)}return g}getTile(e,t,n,s){const l=this.getOrCreateTile(e,t,n,s);return l||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=ht(t.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!Fs(l,s))return null;const u=t.viewState,c=n.getRenderSource(),d=c.getTileGridForProjection(u.projection),g=c.getTilePixelRatio(t.pixelRatio);for(let m=d.getZForResolution(u.resolution);m>=d.getMinZoom();--m){const _=d.getTileCoordForCoordAndZ(s,m),y=this.getTile(m,_[1],_[2],t);if(!y||y.getState()!==oe.LOADED)continue;const x=d.getOrigin(m),E=Bt(d.getTileSize(m)),w=d.getResolution(m);let C;if(y instanceof Q_||y instanceof Zh)C=y.getImage();else if(y instanceof Yh){if(C=Qa(y.getData()),!C)continue}else continue;const I=Math.floor(g*((s[0]-x[0])/w-_[1]*E[0])),R=Math.floor(g*((x[1]-s[1])/w-_[2]*E[1])),k=Math.round(g*c.getGutterForProjection(u.projection));return this.getImageData(C,I+k,R+k)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,t,n,s,l){const u=e.viewState,c=this.getLayer(),d=c.getRenderSource(),g=d.getTileGridForProjection(u.projection),m=Te(d);m in e.wantedTiles||(e.wantedTiles[m]={});const _=e.wantedTiles[m],y=c.getMapInternal(),x=Math.max(n-l,g.getMinZoom(),g.getZForResolution(Math.min(c.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):g.getResolution(0)),d.zDirection));for(let E=n;E>=x;--E){const w=g.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),C=g.getResolution(E);for(let I=w.minX;I<=w.maxX;++I)for(let R=w.minY;R<=w.maxY;++R){const k=this.getTile(E,I,R,e);if(!k||!Rh(s,k,E))continue;const P=k.getKey();if(_[P]=!0,k.getState()===oe.IDLE&&!e.tileQueue.isKeyQueued(P)){const U=qa(E,I,R,this.tempTileCoord_);e.tileQueue.enqueue([k,m,g.getTileCoordCenter(U),C])}}}}findStaleTile_(e,t){const n=this.tileCache_,s=e[0],l=e[1],u=e[2],c=this.getStaleKeys();for(let d=0;d<c.length;++d){const g=Sh(c[d],s,l,u);if(n.containsKey(g)){const m=n.get(g);if(m.getState()===oe.LOADED)return m.endTransition(Te(this)),Rh(t,m,s),!0}}return!1}findAltTiles_(e,t,n,s){const l=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!l)return!1;let u=!0;const c=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let m=l.minX;m<=l.maxX;++m)for(let _=l.minY;_<=l.maxY;++_){const y=Sh(g,n,m,_);let x=!1;if(c.containsKey(y)){const E=c.get(y);E.getState()===oe.LOADED&&(Rh(s,E,n),x=!0)}x||(u=!1)}return u}renderFrame(e,t){let n=!0;this.renderComplete=!0;const s=e.layerStatesArray[e.layerIndex],l=e.viewState,u=l.projection,c=l.resolution,d=l.center,g=e.pixelRatio,m=this.getLayer(),_=m.getSource(),y=_.getRevision(),x=_.getTileGridForProjection(u),E=x.getZForResolution(c,_.zDirection),w=x.getResolution(E),C=_.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==C&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=C):this.renderedSourceKey_=C;let I=e.extent;const R=_.getTilePixelRatio(g);this.prepareContainer(e,t);const k=this.context.canvas.width,M=this.context.canvas.height,P=s.extent&&Ki(s.extent);P&&(I=Mn(I,Ki(s.extent)));const U=w*k/2/R,Y=w*M/2/R,b=[d[0]-U,d[1]-Y,d[0]+U,d[1]+Y],W={};this.renderedTiles.length=0;const j=m.getPreload();if(e.nextExtent){const G=x.getZForResolution(l.nextResolution,_.zDirection),T=Gp(e,e.nextExtent);this.enqueueTiles(e,T,G,W,j)}const ie=Gp(e,I);if(this.enqueueTiles(e,ie,E,W,0),j>0&&setTimeout(()=>{this.enqueueTiles(e,ie,E-1,W,j-1)},0),!(E in W))return this.container;const Z=Te(this),te=e.time;for(const G of W[E]){const T=G.getState();if((G instanceof Zh||G instanceof Yw)&&T===oe.EMPTY)continue;const N=G.tileCoord;if(T===oe.LOADED&&G.getAlpha(Z,te)===1){G.endTransition(Z);continue}if(T!==oe.IDLE&&(n=!1),T!==oe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(N,W)){Vw(W,G,E),e.animate=!0;continue}if(this.findAltTiles_(x,N,E+1,W))continue;const ue=x.getMinZoom();for(let he=E-1;he>=ue&&!this.findAltTiles_(x,N,he,W);--he);}const J=w/c*g/R,ne=this.getRenderContext(e);fi(this.tempTransform,k/2,M/2,J,J,0,-k/2,-M/2),s.extent&&this.clipUnrotated(ne,e,P),_.getInterpolate()||(ne.imageSmoothingEnabled=!1),this.preRender(ne,e);const ee=Object.keys(W).map(Number);ee.sort(ci);let H;const X=[],q=[];for(let G=ee.length-1;G>=0;--G){const T=ee[G],N=_.getTilePixelSize(T,g,u),z=x.getResolution(T)/w,ue=N[0]*z*J,he=N[1]*z*J,pe=x.getTileCoordForCoordAndZ(gi(b),T),xe=x.getTileCoordExtent(pe),Re=ht(this.tempTransform,[R*(xe[0]-b[0])/w,R*(b[3]-xe[3])/w]),ze=R*_.getGutterForProjection(u);for(const Rt of W[T]){if(Rt.getState()!==oe.LOADED)continue;const kn=Rt.tileCoord,mn=pe[1]-kn[1],Kn=Math.round(Re[0]-(mn-1)*ue),Fn=pe[2]-kn[2],Jt=Math.round(Re[1]-(Fn-1)*he),_t=Math.round(Re[0]-mn*ue),Vt=Math.round(Re[1]-Fn*he),Dn=Kn-_t,en=Jt-Vt,tn=ee.length===1;let pn=!1;H=[_t,Vt,_t+Dn,Vt,_t+Dn,Vt+en,_t,Vt+en];for(let Zn=0,Hn=X.length;Zn<Hn;++Zn)if(!tn&&T<q[Zn]){const $e=X[Zn];Wt([_t,Vt,_t+Dn,Vt+en],[$e[0],$e[3],$e[4],$e[7]])&&(pn||(ne.save(),pn=!0),ne.beginPath(),ne.moveTo(H[0],H[1]),ne.lineTo(H[2],H[3]),ne.lineTo(H[4],H[5]),ne.lineTo(H[6],H[7]),ne.moveTo($e[6],$e[7]),ne.lineTo($e[4],$e[5]),ne.lineTo($e[2],$e[3]),ne.lineTo($e[0],$e[1]),ne.clip())}X.push(H),q.push(T),this.drawTile(Rt,e,_t,Vt,Dn,en,ze,tn),pn&&ne.restore(),this.renderedTiles.unshift(Rt),this.updateUsedTiles(e.usedTiles,_,Rt)}}if(this.renderedRevision=y,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!Wo(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=g,this.postRender(this.context,e),s.extent&&ne.restore(),ne.imageSmoothingEnabled=!0,this.renderComplete){const G=(T,N)=>{const re=Te(_),z=N.wantedTiles[re],ue=z?Object.keys(z).length:0;this.updateCacheSize(ue),this.tileCache_.expireCache()};e.postRenderFunctions.push(G)}return!this.renderComplete&&!n&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,s,l,u,c,d){let g;if(e instanceof Yh){if(g=Qa(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const m=this.getRenderContext(t),_=Te(this),y=t.layerStatesArray[t.layerIndex],x=y.opacity*(d?e.getAlpha(_,t.time):1),E=x!==m.globalAlpha;E&&(m.save(),m.globalAlpha=x),m.drawImage(g,c,c,g.width-2*c,g.height-2*c,n,s,l,u),E&&m.restore(),x!==y.opacity?t.animate=!0:d&&e.endTransition(_)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const s=Te(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}}class bp extends Rw{constructor(e){super(e)}createRenderer(){return new Kw(this,{cacheSize:this.getCacheSize()})}}const Th={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},ys=[0,0,0],Xi=5;class c0{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ke(w1(this.resolutions_,(s,l)=>l-s),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let s=0,l=this.resolutions_.length-1;s<l;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ke(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=gi(n)),ke(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ke(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Id,ke(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,l)=>{const u=new zd(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const c=this.getTileRangeForExtentAndZ(n,l);u.minX=Math.max(c.minX,u.minX),u.maxX=Math.min(c.maxX,u.maxX),u.minY=Math.max(c.minY,u.minY),u.maxY=Math.min(c.maxY,u.maxY)}return u}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let l=s.minX,u=s.maxX;l<=u;++l)for(let c=s.minY,d=s.maxY;c<=d;++c)n([t,l,c])}forEachTileCoordParentTileRange(e,t,n,s){let l,u,c,d=null,g=e[0]-1;for(this.zoomFactor_===2?(u=e[1],c=e[2]):d=this.getTileCoordExtent(e,s);g>=this.minZoom;){if(u!==void 0&&c!==void 0?(u=Math.floor(u/2),c=Math.floor(c/2),l=ms(u,u,c,c,n)):l=this.getTileRangeForExtentAndZ(d,g,n),t(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,u=e[2]*2;return ms(l,l+1,u,u+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],l=e[1],u=e[2];if(t===s)return ms(l,u,l,u,n);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,t-s),g=Math.floor(l*d),m=Math.floor(u*d);if(t<s)return ms(g,g,m,m,n);const _=Math.floor(d*(l+1))-1,y=Math.floor(d*(u+1))-1;return ms(g,_,m,y,n)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,ys);const s=ys[1],l=ys[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,ys);const u=ys[1],c=ys[2];return ms(s,u,l,c,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=Bt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),l=Bt(this.getTileSize(e[0]),this.tmpSize_),u=n[0]+e[1]*l[0]*s,c=n[1]-(e[2]+1)*l[1]*s,d=u+l[0]*s,g=c+l[1]*s;return Qi(u,c,d,g,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,l){const u=this.getZForResolution(n),c=n/this.getResolution(u),d=this.getOrigin(u),g=Bt(this.getTileSize(u),this.tmpSize_);let m=c*(e-d[0])/n/g[0],_=c*(d[1]-t)/n/g[1];return s?(m=wa(m,Xi)-1,_=wa(_,Xi)-1):(m=xa(m,Xi),_=xa(_,Xi)),qa(u,m,_,l)}getTileCoordForXYAndZ_(e,t,n,s,l){const u=this.getOrigin(n),c=this.getResolution(n),d=Bt(this.getTileSize(n),this.tmpSize_);let g=(e-u[0])/c/d[0],m=(u[1]-t)/c/d[1];return s?(g=wa(g,Xi)-1,m=wa(m,Xi)-1):(g=xa(g,Xi),m=xa(m,Xi)),qa(n,g,m,l)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=qh(this.resolutions_,e,t||0);return Ze(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return m_(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}}function h0(r){let e=r.getDefaultTileGrid();return e||(e=qw(r),r.setDefaultTileGrid(e)),e}function Zw(r,e,t){const n=e[0],s=r.getTileCoordCenter(e),l=Gd(t);if(!Fs(l,s)){const u=Me(l),c=Math.ceil((l[0]-s[0])/u);return s[0]+=u*c,r.getTileCoordForCoordAndZ(s,n)}return e}function Hw(r,e,t,n){n=n!==void 0?n:"top-left";const s=d0(r,e,t);return new c0({extent:r,origin:P1(r,n),resolutions:s,tileSize:t})}function $w(r){const e=r||{},t=e.extent||He("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:d0(t,e.maxZoom,e.tileSize,e.maxResolution)};return new c0(n)}function d0(r,e,t,n){e=e!==void 0?e:rE,t=Bt(t!==void 0?t:Id);const s=st(r),l=Me(r);n=n>0?n:Math.max(l/t[0],s/t[1]);const u=e+1,c=new Array(u);for(let d=0;d<u;++d)c[d]=n/Math.pow(2,d);return c}function qw(r,e,t,n){const s=Gd(r);return Hw(s,e,t,n)}function Gd(r){r=He(r);let e=r.getExtent();if(!e){const t=180*Ds.degrees/r.getMetersPerUnit();e=Qi(-t,-t,t,t)}return e}class Qw extends q_{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Bt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Te(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,l){return ve()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:h0(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),l=this.getTilePixelRatio(t),u=Bt(s.getTileSize(e),this.tmpSize);return l==1?u:Kv(u,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const n=t!==void 0?t:this.getProjection(),s=t!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=Zw(s,e,n)),Sw(e,s)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Jw extends Yn{constructor(e,t){super(e),this.tile=t}}const eC=/\{z\}/g,tC=/\{x\}/g,nC=/\{y\}/g,iC=/\{-y\}/g;function rC(r,e,t,n,s){return r.replace(eC,e.toString()).replace(tC,t.toString()).replace(nC,n.toString()).replace(iC,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}function sC(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let l;for(l=n;l<=s;++l)e.push(r.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(r.replace(t[0],s.toString()));return e}return e.push(r),e}function oC(r,e){return function(t,n,s){if(!t)return;let l;const u=t[0];if(e){const c=e.getFullTileRange(u);c&&(l=c.getHeight()-1)}return rC(r,u,t[1],t[2],l)}}function lC(r,e){const t=r.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=oC(r[s],e);return aC(n)}function aC(r){return r.length===1?r[0]:function(e,t,n){if(!e)return;const s=ww(e),l=Is(s,r.length);return r[l](e,t,n)}}class bd extends Qw{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===bd.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Te(t),s=t.getState();let l;s==oe.LOADING?(this.tileLoadingKeys_[n]=!0,l=Th.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=s==oe.ERROR?Th.TILELOADERROR:s==oe.LOADED?Th.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new Jw(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=sC(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(lC(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class uC extends bd{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:cC,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Q_,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!ka(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||ka(t,e)))return this.tileGrid;const n=Te(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=h0(e)),this.tileGridForProjection[n]}createTile_(e,t,n,s,l,u){const c=[e,t,n],d=this.getTileCoordForTileUrlFunction(c,l),g=d?this.tileUrlFunction(d,s,l):void 0,m=new this.tileClass(c,g!==void 0?oe.IDLE:oe.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return m.key=u,m.addEventListener(Ee.CHANGE,this.handleTileChange.bind(this)),m}getTile(e,t,n,s,l){const u=this.getProjection();if(!u||!l||ka(u,l))return this.getTileInternal(e,t,n,s,u||l);const c=[e,t,n],d=this.getKey(),g=this.getTileGridForProjection(u),m=this.getTileGridForProjection(l),_=this.getTileCoordForTileUrlFunction(c,l),y=new Zh(u,g,l,m,c,_,this.getTilePixelRatio(s),this.getGutter(),(x,E,w,C)=>this.getTileInternal(x,E,w,C,u),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=d,y}getTileInternal(e,t,n,s,l){const u=this.getKey();return this.createTile_(e,t,n,s,l,u)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=He(e);if(n){const s=Te(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}}function cC(r,e){r.getImage().src=e}class Up extends uC{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:$w({extent:Gd(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const jp=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Wp={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class hC extends ul{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const n=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof n=="string"?document.createTextNode(n):n;const s=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Ws} ${du}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(Xp(t))if(Bp(t))fC(t);else{let n;this.source_?n=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:n=e.getTargetElement(),this.keys_?dC(n):f0(n)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=Bp(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Ua(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Wp.ENTERFULLSCREEN)):(Ua(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Wp.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(ut.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(ut.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let n=0,s=e.length;n<s;++n)be(e[n]);e.length=0;const t=this.getMap();if(t){const n=t.getOwnerDocument();Xp(n)?this.element.classList.remove(ep):this.element.classList.add(ep);for(let s=0,l=jp.length;s<l;++s)e.push(Le(n,jp[s],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function Xp(r){const e=r.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&r.fullscreenEnabled)}function Bp(r){return!!(r.webkitIsFullScreen||r.fullscreenElement)}function f0(r){r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}function dC(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():f0(r)}function fC(r){r.exitFullscreen?r.exitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}const Ih="units",gC=[1,2,5],Do=25.4/.28;class mC extends ul{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const n=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+Ws,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(Ih,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(Ih)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(Ih,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,n=e.projection,s=this.getUnits(),l=s=="degrees"?"degrees":"m";let u=za(n,e.resolution,t,l);const c=this.minWidth_*(this.dpi_||Do)/Do,d=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||Do)/Do:void 0;let g=c*u,m="";if(s=="degrees"){const k=Ds.degrees;g*=k,g<k/60?(m="″",u*=3600):g<k?(m="′",u*=60):m="°"}else if(s=="imperial")g<.9144?(m="in",u/=.0254):g<1609.344?(m="ft",u/=.3048):(m="mi",u/=1609.344);else if(s=="nautical")u/=1852,m="NM";else if(s=="metric")g<1e-6?(m="nm",u*=1e9):g<.001?(m="μm",u*=1e6):g<1?(m="mm",u*=1e3):g<1e3?m="m":(m="km",u/=1e3);else if(s=="us")g<.9144?(m="in",u*=39.37):g<1609.344?(m="ft",u/=.30480061):(m="mi",u/=1609.3472);else throw new Error("Invalid units");let _=3*Math.floor(Math.log(c*u)/Math.log(10)),y,x,E,w,C,I;for(;;){E=Math.floor(_/3);const k=Math.pow(10,E);if(y=gC[(_%3+3)%3]*k,x=Math.round(y/u),isNaN(x)){this.element.style.display="none",this.renderedVisible_=!1;return}if(d!==void 0&&x>=d){y=w,x=C,E=I;break}else if(x>=c)break;w=y,C=x,I=E,++_}const R=this.scaleBar_?this.createScaleBar(x,y,m):y.toFixed(E<0?-E:0)+" "+m;this.renderedHTML_!=R&&(this.innerElement_.innerHTML=R,this.renderedHTML_=R),this.renderedWidth_!=x&&(this.innerElement_.style.width=x+"px",this.renderedWidth_=x),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,n){const s=this.getScaleForResolution(),l=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),u=this.scaleBarSteps_,c=e/u,d=[this.createMarker("absolute")];for(let m=0;m<u;++m){const _=m%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";d.push(`<div><div class="ol-scale-singlebar ${_}" style="width: ${c}px;"></div>`+this.createMarker("relative")+(m%2===0||u===2?this.createStepText(m,e,!1,t,n):"")+"</div>")}return d.push(this.createStepText(u,e,!0,t,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+l+"</div>":"")+d.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,n,s,l){const c=(e===0?0:Math.round(s/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+l),d=e===0?-3:t/this.scaleBarSteps_*-1,g=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${d}px;text-align: ${e===0?"left":"center"};min-width: ${g}px;left: ${n?t+"px":"unset"};">`+c+"</div>"}getScaleForResolution(){const e=za(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||Do,n=1e3/25.4;return e*n*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}class pC{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=ks,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?He(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=He(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ve()}readFeature(e,t){return ve()}readFeatures(e,t){return ve()}readGeometry(e,t){return ve()}readProjection(e){return ve()}writeFeature(e,t){return ve()}writeFeatures(e,t){return ve()}writeGeometry(e,t){return ve()}}function Ud(r,e,t){const n=t?He(t.featureProjection):null,s=t?He(t.dataProjection):null;let l=r;if(n&&s&&!ka(n,s)){e&&(l=r.clone());const u=e?n:s,c=e?s:n;u.getUnits()==="tile-pixels"?l.transform(u,c):l.applyTransform(Vo(u,c))}if(e&&t&&t.decimals!==void 0){const u=Math.pow(10,t.decimals),c=function(d){for(let g=0,m=d.length;g<m;++g)d[g]=Math.round(d[g]*u)/u;return d};l===r&&(l=r.clone()),l.applyTransform(c)}return l}const _C={Point:Ns,LineString:Gs,Polygon:er,MultiPoint:yu,MultiLineString:Za,MultiPolygon:Ha};function yC(r,e,t){return Array.isArray(e[0])?(__(r,0,e,t)||(r=r.slice(),Nh(r,0,e,t)),r):(vd(r,0,e,t)||(r=r.slice(),Ga(r,0,e,t)),r)}function g0(r,e){var l;const t=r.geometry;if(!t)return[];if(Array.isArray(t))return t.map(u=>g0({...r,geometry:u})).flat();const n=t.type==="MultiPolygon"?"Polygon":t.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const s=t.layout.length;return Ud(new Qt(n,n==="Polygon"?yC(t.flatCoordinates,t.ends,s):t.flatCoordinates,(l=t.ends)==null?void 0:l.flat(),s,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)}function jd(r,e){if(!r)return null;if(Array.isArray(r)){const n=r.map(s=>jd(s,e));return new Ka(n)}const t=_C[r.type];return Ud(new t(r.flatCoordinates,r.layout,r.ends),!1,e)}class vC extends pC{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Aa(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Aa(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ve()}readFeaturesFromObject(e,t){return ve()}readGeometry(e,t){return this.readGeometryFromObject(Aa(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ve()}readProjection(e){return this.readProjectionFromObject(Aa(e))}readProjectionFromObject(e){return ve()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ve()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ve()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ve()}}function Aa(r){if(typeof r=="string"){const e=JSON.parse(r);return e||null}return r!==null?r:null}class Yp extends vC{constructor(e){e=e||{},super(),this.dataProjection=He(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=He(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const s=Wd(n.geometry);if(this.featureClass===Qt)return g0({geometry:s,id:n.id,properties:n.properties},t);const l=new ks;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&l.setGeometryName(n.geometry_name),l.setGeometry(jd(s,t)),"id"in n&&l.setId(n.id),n.properties&&l.setProperties(n.properties,!0),l}readFeaturesFromObject(e,t){const n=e;let s=null;if(n.type==="FeatureCollection"){const l=e;s=[];const u=l.features;for(let c=0,d=u.length;c<d;++c){const g=this.readFeatureFromObject(u[c],t);g&&s.push(g)}}else s=[this.readFeatureFromObject(e,t)];return s.flat()}readGeometryFromObject(e,t){return EC(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if(t.type=="name")n=He(t.properties.name);else if(t.type==="EPSG")n=He("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},s=e.getId();if(s!==void 0&&(n.id=s),!e.hasProperties())return n;const l=e.getProperties(),u=e.getGeometry();return u&&(n.geometry=Hh(u,t),delete l[e.getGeometryName()]),Ar(l)||(n.properties=l),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let s=0,l=e.length;s<l;++s)n.push(this.writeFeatureObject(e[s],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return Hh(e,this.adaptOptions(t))}}function Wd(r,e){if(!r)return null;let t;switch(r.type){case"Point":{t=wC(r);break}case"LineString":{t=CC(r);break}case"Polygon":{t=IC(r);break}case"MultiPoint":{t=RC(r);break}case"MultiLineString":{t=SC(r);break}case"MultiPolygon":{t=TC(r);break}case"GeometryCollection":{t=xC(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return t}function EC(r,e){const t=Wd(r);return jd(t,e)}function xC(r,e){return r.geometries.map(function(n){return Wd(n)})}function wC(r){const e=r.coordinates;return{type:"Point",flatCoordinates:e,layout:Or(e.length)}}function CC(r){var n;const e=r.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Or(((n=e[0])==null?void 0:n.length)||2)}}function SC(r){var l,u;const e=r.coordinates,t=((u=(l=e[0])==null?void 0:l[0])==null?void 0:u.length)||2,n=[],s=ol(n,0,e,t);return{type:"MultiLineString",flatCoordinates:n,ends:s,layout:Or(t)}}function RC(r){var t;const e=r.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Or(((t=e[0])==null?void 0:t.length)||2)}}function TC(r){var l,u;const e=r.coordinates,t=[],n=((u=(l=e[0])==null?void 0:l[0])==null?void 0:u[0].length)||2,s=u_(t,0,e,n);return{type:"MultiPolygon",flatCoordinates:t,ends:s,layout:Or(n)}}function IC(r){var l,u;const e=r.coordinates,t=[],n=(u=(l=e[0])==null?void 0:l[0])==null?void 0:u.length,s=ol(t,0,e,n);return{type:"Polygon",flatCoordinates:t,ends:s,layout:Or(n)}}function Hh(r,e){r=Ud(r,!0,e);const t=r.getType();let n;switch(t){case"Point":{n=FC(r);break}case"LineString":{n=MC(r);break}case"Polygon":{n=DC(r,e);break}case"MultiPoint":{n=PC(r);break}case"MultiLineString":{n=AC(r);break}case"MultiPolygon":{n=kC(r,e);break}case"GeometryCollection":{n=LC(r,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function LC(r,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(n){return Hh(n,e)})}}function MC(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function AC(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function PC(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function kC(r,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function FC(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function DC(r,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}const OC={SELECT:"select"};class NC extends Yn{constructor(e,t,n,s){super(e),this.selected=t,this.deselected=n,this.mapBrowserEvent=s}}const Pa={};class Xd extends Bs{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:rw,this.addCondition_=e.addCondition?e.addCondition:Pp,this.removeCondition_=e.removeCondition?e.removeCondition:Pp,this.toggleCondition_=e.toggleCondition?e.toggleCondition:i0,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Mr,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:zC(),this.features_=e.features||new Ln;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(s){return n.includes(s)}}else t=Mr;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[Te(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Te(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(dt.ADD,this.boundAddFeature_),this.features_.addEventListener(dt.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(dt.ADD,this.boundAddFeature_),this.features_.removeEventListener(dt.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const n=this.getMap().getAllLayers().find(function(s){if(s instanceof Wh&&s.getSource()&&s.getSource().hasFeature(t))return s});n&&this.addFeatureLayerAssociation_(t,n)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=Te(e);t in Pa||(Pa[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let s=t.length-1;s>=0;--s){const l=t[s];if(l!==this&&l instanceof Xd&&l.getStyle()&&l.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(l.getStyle());return}}const n=Te(e);e.setStyle(Pa[n]),delete Pa[n]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Te(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),n=this.removeCondition_(e),s=this.toggleCondition_(e),l=!t&&!n&&!s,u=e.map,c=this.getFeatures(),d=[],g=[];if(l){js(this.featureLayerAssociation_),u.forEachFeatureAtPixel(e.pixel,(m,_)=>{if(!(!(m instanceof ks)||!this.filter_(m,_)))return this.addFeatureLayerAssociation_(m,_),g.push(m),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let m=c.getLength()-1;m>=0;--m){const _=c.item(m),y=g.indexOf(_);y>-1?g.splice(y,1):(c.remove(_),d.push(_))}g.length!==0&&c.extend(g)}else{u.forEachFeatureAtPixel(e.pixel,(m,_)=>{if(!(!(m instanceof ks)||!this.filter_(m,_)))return(t||s)&&!c.getArray().includes(m)?(this.addFeatureLayerAssociation_(m,_),g.push(m)):(n||s)&&c.getArray().includes(m)&&(d.push(m),this.removeFeatureLayerAssociation_(m)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let m=d.length-1;m>=0;--m)c.remove(d[m]);c.extend(g)}return(g.length>0||d.length>0)&&this.dispatchEvent(new NC(OC.SELECT,g,d,e)),!0}}function zC(){const r=nE();return fn(r.Polygon,r.LineString),fn(r.GeometryCollection,r.LineString),function(e){return e.getGeometry()?r[e.getGeometry().getType()]:null}}const GC={A:{title:"영상 예술의 길",items:[{name:"오! 재미동",description:"충무로역에 위치한 충무로 영상센터이다. 모두를 위한 '문화 놀이터'라고 공간을 소개하며 다양한 서적과 DVD를 무료로 즐길 수 있는 아카이브, 작품 전시실, 극장, 사무실, 회의와 모임등을 할 수 있는 커뮤니티룸으로 구성되어 있다.",image:["A-1"]},{name:"이희승추모비",description:"딸깍발이라는 주제의 필수 요소. 수필 『딸깍발이』의 저자이자, 대한민국의 독립유공자인 이희승의 추모비가 한옥마을 내 위치해 있다.",image:[]}]},B:{title:"과거로(路), 딸깍발이 길 (1.5km)",items:[{name:"한옥마을",description:"'1989년 남산골의 제모습 찾기 사업에 의해 조성한 마을로 수도방위사령부 부지를 인수하여, 서울특별시 지정 민속자료 한옥 5개 동을 이전 복원하고 전통정원으로 구성하였다.  마을 안의 전통정원은 남산의 산세를 살려 전통수종을 심었으며, 계곡을 만들어 물이 자연스럽게 흐르도록 하였고 정자, 연못 등을 복원하여 꾸몄다.",image:["B-1"]},{name:"이희승추모비(한옥마을 내)",description:"딸깍발이라는 주제의 필수 요소. 수필 『딸깍발이』의 저자이자, 대한민국의 독립유공자인 이희승의 추모비가 한옥마을 내 위치해 있다.",image:["B-2"]},{name:"한옥마을 카페 달강",description:"한옥마을 내 남산 국악당 정원에 들어서면 나오는 아늑한 분위기의 한옥카페이다. 남산타워가 보이는 탁 트인 풍경과 아름답게 조성된 정원을 바라보며 음료를 즐길 수 있다. ",image:["B-3"]},{name:"스트리트 뮤지엄",description:"비영리 전시공간으로서 중구 필동과 한옥마을 일대를 문화공간으로 조성하고 있다. 쉽게 다가갈 수 있는 미술관으로 회화, 설치, 미디어 아트 뿐 아니라 디자인 어워드 수상장 득 다양하고 즐거운 생각들을 담고자 한다.",image:["B-4"]},{name:"카페허블+남산책방",description:"동아시아, 허블출판사에서 운영하는 북카페이다. 공간 대관도 이루어지고 있으며 일정표가 배치되어 있어 자세한 일정 확인이 가능하다. 열람용 책 전시 뿐만 아니라 책구매도 가능하며 특별 제작한 고양이 캐릭터가 곳곳에 붙어있어 이곳의 정체성을 드러낸다.",image:["B-5"]},{name:"어스돔",description:"오래된 주택 1층을 리모델링한 카페이다. 건물 자체가 크고 층고도 넓어 탁트인데다가 빈티지하고 아늑한 분위기가 인상적이다. 카페 장소 대관뿐 아니라 어스 돔을 무대로 선택해 연극을 펼치기도 하는 등 다양한 공연이 이루어지는 공간이다.",image:["B-6"]},{name:"한옥마을 가는 길 공예",description:"'한옥마을 가는 길'이라는 문구와 함께 12지신이 풍물놀이를 하는 모습이 그려진 벽화거리가 있다.",image:["B-7"]},{name:"딸깍발이 카페",description:"수필 『딸깍발이』의 이름을 따 지은 카페로, 한 달에 한 번씩 독서모임이 정기적으로 진행되며 지하 공간도 존재한다. '선비의 정신'이라는 커피 메뉴가 있다.",image:["B-8"]}]},C:{title:"미래로(路), 치유와 도약의 길 (2.7km)",items:[{name:"비주얼 마크",description:"'비주얼마크는 3D 조각 기술과 마이크로 박 인쇄 기술을 기반으로 고객의 디자인을 재해석하고 높은 퀄리티의 인쇄물을 제작하는 회사이다. 1층에 작은 전시실 보유하고 있다. 3D 프린터기, 엽서 밀랍 등 전시하고 있고, 회사 관계자 혹은 업체 방문 시 사용하는 공간이지만 일반인도 관란이 가능하다.",image:["C-1"]},{name:"소방센터(옛중정사무동)",description:"현재 서울특별시 소방재난본부로 활용되고 있지만 옛 중앙정보부 사무동이었던 곳이다. 중앙정보부가 위치해 있던 남산 자락은 민주화를 꿈꿨던 많은 이들이 고통을 받은 장소이다.",image:["C-2"]},{name:"예장공원",description:"'남산예장공원'은 조선시대에는 군사들의 훈련장이었고, 일제강점기에는 통감부가 들어섰으며, 군사독재 시절에는 고문 수사를 행하던 중앙정보부가 있던 자리이다. 역사적으로 오랜 시간 고립된 장소가 이제는 우리나라 근현대사의 아픈 역사를 품은 공원이 됐다. '남산예장공원'은 수목이 우거진 지상 공원과 건축미를 뽐내는 지하 공간으로 구성되어 있다. 지하에는 예장마당과 이회영 기념관 등이, 지상에는 중앙정보부의 고문실을 재현한 '기억6'과 조선총독부 관사 터를 그대로 보존한 '유구터' 등의 역사적 공간이 자리잡고 있다.",image:["C-3"]},{name:"문학의 집 서울 (옛중정공관)",description:"톨스토이 동상(한ㆍ러 친교)이 입구에 위치해 있다.  공관건물은 2층으로 지어져있고, 과거 중앙정보부장이 거주하던 건물이다. 현재는 서울미래유산 지정되어, 도심 속의 문화공간으로서 이용되고있다.  안쪽에 위치한 문학의 집은 대관 전시를 진행하고 있다. ",image:["C-4"]},{name:"위안부 기억의 터(인권의 숲)",description:"일본군 위안부 기억의 터는 서울특별시 중구 예장동 남산에 있는 공간으로 2016년 개장했다. '기억의 터'는 위안부 피해자 할머니들을 기리는 추모공원으로 그들의 증언록과 피해기록, 일제의 만행 등을 기록한 내용을 중심으로 조성되었고 인권과 평화의 의미를 담고 있는 공간이다.",image:["C-5-1","C-5-2"]},{name:"유스호스텔(옛중정본부)",description:"기억의 터를 지나서 걸어오다보면  길 한쪽에 세계인권선언문을 볼 수 있고, 옛중앙정보부의 지하 입구를 지나, 이곳에 도착할 수 있다. 현재 서울유스호스텔로 이용되고 있지만, 옛 중앙정보부 본관이 있던 곳이다. 당시의 인권 침해를 기억하며 세운 우체통 모양의 건물 표석이 위치해 있다.",image:["C-6"]},{name:"딸깍발이 후반길",description:"수필 『딸깍발이』의 이름을 따 지은 카페로, 한 달에 한 번씩 독서모임이 정기적으로 진행되며 지하 공간도 존재한다. '선비의 정신'이라는 커피 메뉴가 있다.",image:["C-7-1","C-7-2"]}]},D:{title:"동국의 불교와 역사의 길(2.2km)",items:[{name:"동국대 입구역 6번 출구",description:"'동국의 불교와 역사의 길'의 시작점으로, 3호선을 타고 도착할 수 있다.",image:[]},{name:"장충단공원 순회(시계방향)",description:"본래 을미사변, 임오군란, 갑신정변 당시에 순절한 문신들을 기리는 제사를 지냈다가, 일제강점기에 민족 말살의 정책으로 공원으로 바뀌었다. 광복 이후에는 정치유세를 위한 장소로 활용되다가, 2009년에 이르러 과거를 기억하며 장충단비, 수표교, 사명대사동상, 이준열사동상, 이한응선생기념비, 한국유림독립운동파리장서비 등 다양한 역사적 상징물이 위치하게 되었다.",image:["D-2"]},{name:"태극당",description:"1946년에 문을 연 빵집으로,  서울특별시의 가장 오래된 빵집이자 전라북도 군산시의 이성당, 전주시의 PNB풍년제과, 대전광역시의 성심당과 같이 지역을 대표하는 빵집으로 꼽힌다. 1945년 광복이후에 일본의 '미도리야'제과점과 제과기계를 인수하였고, 46년에 명동에 첫 제과점을 열었으며, 이후 1973년에 현재의 위치로 이전하였다.",image:["D-3"]},{name:"사명대사동상",description:"1968년에 만들어진 동상으로, 임진왜란때에 활약했던 승병장인 사명대사의 모습을 본떠 만든 동상이다.",image:["D-4"]},{name:"이해랑예술극장",description:"동국대학교 연극학과를 창설하고 후학을 양성해 왔던 이해랑 선생을 기리며 건설되었다. 한국연극 100주년이자 동국대 연극학부 창설 50주년을 맞아 이해랑연극재단으로부터 20억 원의 발전기금을 기부 받아 기존의 동국대 예술극장을 전면 리모델링하여 2008년 11월 29일 정식 개관하였다. 이해랑예술극장은 연극전용극장으로서 공연문화 발전에 기여했고, 현재에도 다양한 공원과 행사가 이루어지고 있다.",image:["D-5"]},{name:"동국대학교 박물관",description:"동국대학교 박물관은 고故 황수영 박사를 초대관장으로 하여 1963년 9월 1일에 개관하였다. 국내 유일 불교종립대학의 종합박물관으로서 개관 초반부터 불교미술을 중심으로 국내외 학술 조사와 문화유산 수집·연구를 꾸준히 진행하였다. 불교미술을 비롯한 여러 분야의 문화유산(국보 2점과 보물 8점 등)을 소유하고 있고, 상설전시에는 다채로운 불교문화유산을 관람할 수 있다.",image:["D-6"]},{name:"카페 ING",description:"동국대 내부에 위치한 카페이다.",image:["D-7"]},{name:"정각원",description:"본래 경희궁의 정전이었던 숭정전이고, 일제강점기에 동국대학교 북쪽으로 옮겨졌다가, 77년에 현재의 위치에서 법당으로 다시 개원하였다. 정각원은 조선후기의 건축양식을 잘 보여주고 있고, 현재 서울시 지방유형문화제 20호로 지정되어있다.“섭심, 도세, 자애, 신실”의 교훈을 사방에 새긴 “동국의 종”이 전통적 방식으로 주조되어 종각에 안치되어있고, 매일 아침과 저녁에 울며, 입학식과 졸업식 및 중요한 학교행사와 법요식 때에 타종된다.",image:["D-8"]},{name:"팔정도(명진관)",description:"故 송민구 건축가가 설계한 동국대학교의 가장 오래된 건축물로, 국가등록문화제 제734호로 등록되어 있다. 현재 동국대를 상징하는 대표 건축물이며, 동국대학교 최초의 교명인 '명인학교'에서 따왔다. 명진이라는 이름은 '개명진보'라는 “지혜를 개발해 문화가 발달되어 결과적으로 발전을 이룬다.”라는 뜻을 담고 있다. 전형적인 튜더풍 고딕양식으로 지어졌고, 그 보존상태와 건축미가 우수하다.",image:["D-9"]},{name:"수표교(장충단공원 내)",description:"본래 을미사변, 임오군란, 갑신정변 당시에 순절한 문신들을 기리는 제사를 지냈다가, 일제강점기에 민족 말살의 정책으로 공원으로 바뀌었다. 광복 이후에는 정치유세를 위한 장소로 활용되다가, 2009년에 이르러 과거를 기억하며 장충단비, 수표교, 사명대사동상, 이준열사동상, 이한응선생기념비, 한국유림독립운동파리장서비 등 다양한 역사적 상징물이 위치하게 되었다.",image:["D-10"]}]}},bC=(r,e)=>{const t=GC[r].items.find(n=>n.name===e);if(t){const n=t.image;return n.length>0?n.map(s=>`images/${s}.jpg`):[]}else return[]};function UC(){const[r,e]=ps.useState(null),[t,n]=ps.useState(!1),[s,l]=ps.useState("base"),[u,c]=ps.useState("all"),[d,g]=ps.useState(null),m={A:"#000000",B:"#D41C2B",C:"#467AB2",D:"#5BB453"},_=R=>{const k=R.get("level");return new kt({stroke:new Bn({color:m[k],width:3})})},y=new kt({image:new Pr({radius:7,fill:new mi({color:"#000000"}),stroke:new Bn({color:"#ffffff",width:2})})}),x=new mC({units:"metric",bar:!0,steps:4,text:!0,minWidth:140}),E=new kt({image:new Pr({radius:7,fill:new mi({color:"rgba(255, 255, 255, 0.8)"}),stroke:new Bn({color:"#0066ff",width:2})})}),w=R=>{l(R);const k=r.getLayers().getArray()[0].getLayers().getArray();R==="base"?(k[0].setVisible(!0),k[1].setVisible(!1)):(k[0].setVisible(!1),k[1].setVisible(!0))},C={art:"A",cross:"B",past:"C",future:"D"},I=R=>{var k,M,P;if(c(R),r){const U=r.getLayers().getArray()[1].getLayers().getArray()[0],Y=r.getLayers().getArray()[1].getLayers().getArray()[1];R==="all"?((k=U.getSource())==null||k.getFeatures().forEach(j=>{j.setStyle(_)}),(M=Y.getSource())==null||M.getFeatures().forEach(j=>{j.setStyle(y)})):r.getLayers().getArray()[1].getLayers().getArray().forEach((j,ie)=>{var te;const Z=(te=j.getSource())==null?void 0:te.getFeatures();Z==null||Z.forEach(J=>{if(J.getProperties().level!==C[R])J.setStyle(new kt({}));else{let ee;ie===0?ee=_:ee=y,J.setStyle(ee)}})});const b=Yt();let W;(P=U==null?void 0:U.getSource())==null||P.getFeatures().forEach(j=>{var ie,Z;R==="all"?W=Xo(b,(ie=j.getGeometry())==null?void 0:ie.getExtent()):C[R]===j.get("level")&&(W=Xo(b,(Z=j.getGeometry())==null?void 0:Z.getExtent()))}),W&&(r.getView().fit(W,{size:r.getSize()??void 0,padding:[50,50,50,50]}),r.getView().setZoom((r.getView().getZoom()??17)-1))}};return ps.useEffect(()=>{if(!r){const R=new jn({center:cd([126.996047,37.5595654],"EPSG:4326","EPSG:3857"),projection:"EPSG:3857",zoom:16,enableRotation:!1}),k=new Mp({url:"geojson/point.geojson",format:new Yp({dataProjection:"EPSG:4326"})}),M=new Mp({url:"geojson/road.geojson",format:new Yp({dataProjection:"EPSG:4326"})}),P=new Wh({visible:!0,source:M,style:_}),U=new Wh({visible:!0,source:k,style:y}),Y=new Xd({style:E,layers:[U]}),b=new yw({target:"map",view:R,layers:[new nr({layers:[new bp({visible:!0,source:new Up({url:"https://xdworld.vworld.kr/2d/Base/service/{z}/{x}/{y}.png",attributions:"공간정보오픈플랫폼 VWORLD 2019 | 국토교통부"})}),new bp({visible:!1,source:new Up({url:"https://xdworld.vworld.kr/2d/Satellite/service/{z}/{x}/{y}.jpeg",attributions:"공간정보오픈플랫폼 VWORLD 2019 | 국토교통부"})})]}),new nr({layers:[P,U]})],controls:J_().extend([new hC,x])});b.addInteraction(Y),Y.on("select",W=>{if(W.selected[0]){const j=W.selected[0].getProperties();g(j)}else g(null)}),e(b)}},[]),De.jsxs("div",{id:"map",children:[De.jsx("div",{className:`${d?"popup active":"popup"}`,children:d?De.jsxs(De.Fragment,{children:[De.jsx("div",{className:"popup-header",children:d.road}),De.jsx("div",{className:"popup-name",children:d.name}),De.jsx("div",{className:"popup-description",children:d.detail??"설명 없음"}),bC(d.level,d.name).map(R=>De.jsx("img",{className:"popup-image",src:R}))]}):De.jsx("p",{children:"선택된 포인트가 없습니다."})}),De.jsxs("div",{className:"btn-box",children:[De.jsx("div",{className:`btn ${u==="all"?"select":""}`,onClick:()=>I("all"),children:De.jsx("p",{children:"전체"})}),De.jsx("div",{className:`btn ${u==="art"?"select":""}`,onClick:()=>I("art"),children:De.jsx("p",{children:"영상 예술의 길"})}),De.jsx("div",{className:`btn ${u==="cross"?"select":""}`,onClick:()=>I("cross"),children:De.jsx("p",{children:"교차로"})}),De.jsx("div",{className:`btn ${u==="past"?"select":""}`,onClick:()=>I("past"),children:De.jsx("p",{children:"미래로"})}),De.jsx("div",{className:`btn ${u==="future"?"select":""}`,onClick:()=>I("future"),children:De.jsx("p",{children:"과거로"})}),De.jsx("div",{className:`btn ${t?"active":""}`,onClick:()=>n(!t),children:De.jsx("p",{children:"Map"})}),t&&De.jsxs("div",{className:"map-box",children:[De.jsxs("div",{className:s==="base"?"image-box active":"image-box",onClick:()=>w("base"),children:[De.jsx("img",{src:"/dgu/images/base.png",alt:"base"}),De.jsx("div",{className:"map-name",children:"Base"})]}),De.jsxs("div",{className:s==="satellite"?"image-box active":"image-box",onClick:()=>w("satellite"),children:[De.jsx("img",{src:"/dgu/images/satellite.png",alt:"satellite"}),De.jsx("div",{className:"map-name",children:"Satellite"})]})]})]})]})}y1.createRoot(document.getElementById("root")).render(De.jsx(UC,{}));
