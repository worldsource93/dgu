var o1=Object.defineProperty;var l1=(r,e,t)=>e in r?o1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var vp=(r,e,t)=>l1(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();var qc={exports:{}},To={},Qc={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function a1(){if(Ep)return Se;Ep=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=_&&R[_]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function C(R,N,re){this.props=R,this.context=N,this.refs=w,this.updater=re||x}C.prototype.isReactComponent={},C.prototype.setState=function(R,N){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,N,"setState")},C.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function I(){}I.prototype=C.prototype;function T(R,N,re){this.props=R,this.context=N,this.refs=w,this.updater=re||x}var D=T.prototype=new I;D.constructor=T,E(D,C.prototype),D.isPureReactComponent=!0;var M=Array.isArray,A=Object.prototype.hasOwnProperty,X={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function b(R,N,re){var z,ue={},he=null,me=null;if(N!=null)for(z in N.ref!==void 0&&(me=N.ref),N.key!==void 0&&(he=""+N.key),N)A.call(N,z)&&!K.hasOwnProperty(z)&&(ue[z]=N[z]);var xe=arguments.length-2;if(xe===1)ue.children=re;else if(1<xe){for(var Re=Array(xe),Ne=0;Ne<xe;Ne++)Re[Ne]=arguments[Ne+2];ue.children=Re}if(R&&R.defaultProps)for(z in xe=R.defaultProps,xe)ue[z]===void 0&&(ue[z]=xe[z]);return{$$typeof:r,type:R,key:he,ref:me,props:ue,_owner:X.current}}function W(R,N){return{$$typeof:r,type:R.type,key:N,ref:R.ref,props:R.props,_owner:R._owner}}function B(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function ie(R){var N={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(re){return N[re]})}var $=/\/+/g;function te(R,N){return typeof R=="object"&&R!==null&&R.key!=null?ie(""+R.key):N.toString(36)}function J(R,N,re,z,ue){var he=typeof R;(he==="undefined"||he==="boolean")&&(R=null);var me=!1;if(R===null)me=!0;else switch(he){case"string":case"number":me=!0;break;case"object":switch(R.$$typeof){case r:case e:me=!0}}if(me)return me=R,ue=ue(me),R=z===""?"."+te(me,0):z,M(ue)?(re="",R!=null&&(re=R.replace($,"$&/")+"/"),J(ue,N,re,"",function(Ne){return Ne})):ue!=null&&(B(ue)&&(ue=W(ue,re+(!ue.key||me&&me.key===ue.key?"":(""+ue.key).replace($,"$&/")+"/")+R)),N.push(ue)),1;if(me=0,z=z===""?".":z+":",M(R))for(var xe=0;xe<R.length;xe++){he=R[xe];var Re=z+te(he,xe);me+=J(he,N,re,Re,ue)}else if(Re=y(R),typeof Re=="function")for(R=Re.call(R),xe=0;!(he=R.next()).done;)he=he.value,Re=z+te(he,xe++),me+=J(he,N,re,Re,ue);else if(he==="object")throw N=String(R),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return me}function ee(R,N,re){if(R==null)return R;var z=[],ue=0;return J(R,z,"","",function(he){return N.call(re,he,ue++)}),z}function ne(R){if(R._status===-1){var N=R._result;N=N(),N.then(function(re){(R._status===0||R._status===-1)&&(R._status=1,R._result=re)},function(re){(R._status===0||R._status===-1)&&(R._status=2,R._result=re)}),R._status===-1&&(R._status=0,R._result=N)}if(R._status===1)return R._result.default;throw R._result}var Z={current:null},U={transition:null},q={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:U,ReactCurrentOwner:X};function G(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:ee,forEach:function(R,N,re){ee(R,function(){N.apply(this,arguments)},re)},count:function(R){var N=0;return ee(R,function(){N++}),N},toArray:function(R){return ee(R,function(N){return N})||[]},only:function(R){if(!B(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Se.Component=C,Se.Fragment=t,Se.Profiler=s,Se.PureComponent=T,Se.StrictMode=n,Se.Suspense=d,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,Se.act=G,Se.cloneElement=function(R,N,re){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var z=E({},R.props),ue=R.key,he=R.ref,me=R._owner;if(N!=null){if(N.ref!==void 0&&(he=N.ref,me=X.current),N.key!==void 0&&(ue=""+N.key),R.type&&R.type.defaultProps)var xe=R.type.defaultProps;for(Re in N)A.call(N,Re)&&!K.hasOwnProperty(Re)&&(z[Re]=N[Re]===void 0&&xe!==void 0?xe[Re]:N[Re])}var Re=arguments.length-2;if(Re===1)z.children=re;else if(1<Re){xe=Array(Re);for(var Ne=0;Ne<Re;Ne++)xe[Ne]=arguments[Ne+2];z.children=xe}return{$$typeof:r,type:R.type,key:ue,ref:he,props:z,_owner:me}},Se.createContext=function(R){return R={$$typeof:u,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:l,_context:R},R.Consumer=R},Se.createElement=b,Se.createFactory=function(R){var N=b.bind(null,R);return N.type=R,N},Se.createRef=function(){return{current:null}},Se.forwardRef=function(R){return{$$typeof:c,render:R}},Se.isValidElement=B,Se.lazy=function(R){return{$$typeof:p,_payload:{_status:-1,_result:R},_init:ne}},Se.memo=function(R,N){return{$$typeof:g,type:R,compare:N===void 0?null:N}},Se.startTransition=function(R){var N=U.transition;U.transition={};try{R()}finally{U.transition=N}},Se.unstable_act=G,Se.useCallback=function(R,N){return Z.current.useCallback(R,N)},Se.useContext=function(R){return Z.current.useContext(R)},Se.useDebugValue=function(){},Se.useDeferredValue=function(R){return Z.current.useDeferredValue(R)},Se.useEffect=function(R,N){return Z.current.useEffect(R,N)},Se.useId=function(){return Z.current.useId()},Se.useImperativeHandle=function(R,N,re){return Z.current.useImperativeHandle(R,N,re)},Se.useInsertionEffect=function(R,N){return Z.current.useInsertionEffect(R,N)},Se.useLayoutEffect=function(R,N){return Z.current.useLayoutEffect(R,N)},Se.useMemo=function(R,N){return Z.current.useMemo(R,N)},Se.useReducer=function(R,N,re){return Z.current.useReducer(R,N,re)},Se.useRef=function(R){return Z.current.useRef(R)},Se.useState=function(R){return Z.current.useState(R)},Se.useSyncExternalStore=function(R,N,re){return Z.current.useSyncExternalStore(R,N,re)},Se.useTransition=function(){return Z.current.useTransition()},Se.version="18.3.1",Se}var xp;function Yh(){return xp||(xp=1,Qc.exports=a1()),Qc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function u1(){if(wp)return To;wp=1;var r=Yh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(c,d,g){var p,_={},y=null,x=null;g!==void 0&&(y=""+g),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(p in d)n.call(d,p)&&!l.hasOwnProperty(p)&&(_[p]=d[p]);if(c&&c.defaultProps)for(p in d=c.defaultProps,d)_[p]===void 0&&(_[p]=d[p]);return{$$typeof:e,type:c,key:y,ref:x,props:_,_owner:s.current}}return To.Fragment=t,To.jsx=u,To.jsxs=u,To}var Cp;function c1(){return Cp||(Cp=1,qc.exports=u1()),qc.exports}var Ht=c1(),fa={},Jc={exports:{}},zt={},eh={exports:{}},th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function h1(){return Sp||(Sp=1,function(r){function e(U,q){var G=U.length;U.push(q);e:for(;0<G;){var R=G-1>>>1,N=U[R];if(0<s(N,q))U[R]=q,U[G]=N,G=R;else break e}}function t(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var q=U[0],G=U.pop();if(G!==q){U[0]=G;e:for(var R=0,N=U.length,re=N>>>1;R<re;){var z=2*(R+1)-1,ue=U[z],he=z+1,me=U[he];if(0>s(ue,G))he<N&&0>s(me,ue)?(U[R]=me,U[he]=G,R=he):(U[R]=ue,U[z]=G,R=z);else if(he<N&&0>s(me,G))U[R]=me,U[he]=G,R=he;else break e}}return q}function s(U,q){var G=U.sortIndex-q.sortIndex;return G!==0?G:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var d=[],g=[],p=1,_=null,y=3,x=!1,E=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(U){for(var q=t(g);q!==null;){if(q.callback===null)n(g);else if(q.startTime<=U)n(g),q.sortIndex=q.expirationTime,e(d,q);else break;q=t(g)}}function M(U){if(w=!1,D(U),!E)if(t(d)!==null)E=!0,ne(A);else{var q=t(g);q!==null&&Z(M,q.startTime-U)}}function A(U,q){E=!1,w&&(w=!1,I(b),b=-1),x=!0;var G=y;try{for(D(q),_=t(d);_!==null&&(!(_.expirationTime>q)||U&&!ie());){var R=_.callback;if(typeof R=="function"){_.callback=null,y=_.priorityLevel;var N=R(_.expirationTime<=q);q=r.unstable_now(),typeof N=="function"?_.callback=N:_===t(d)&&n(d),D(q)}else n(d);_=t(d)}if(_!==null)var re=!0;else{var z=t(g);z!==null&&Z(M,z.startTime-q),re=!1}return re}finally{_=null,y=G,x=!1}}var X=!1,K=null,b=-1,W=5,B=-1;function ie(){return!(r.unstable_now()-B<W)}function $(){if(K!==null){var U=r.unstable_now();B=U;var q=!0;try{q=K(!0,U)}finally{q?te():(X=!1,K=null)}}else X=!1}var te;if(typeof T=="function")te=function(){T($)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ee=J.port2;J.port1.onmessage=$,te=function(){ee.postMessage(null)}}else te=function(){C($,0)};function ne(U){K=U,X||(X=!0,te())}function Z(U,q){b=C(function(){U(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_continueExecution=function(){E||x||(E=!0,ne(A))},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return y},r.unstable_getFirstCallbackNode=function(){return t(d)},r.unstable_next=function(U){switch(y){case 1:case 2:case 3:var q=3;break;default:q=y}var G=y;y=q;try{return U()}finally{y=G}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=y;y=U;try{return q()}finally{y=G}},r.unstable_scheduleCallback=function(U,q,G){var R=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?R+G:R):G=R,U){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=G+N,U={id:p++,callback:q,priorityLevel:U,startTime:G,expirationTime:N,sortIndex:-1},G>R?(U.sortIndex=G,e(g,U),t(d)===null&&U===t(g)&&(w?(I(b),b=-1):w=!0,Z(M,G-R))):(U.sortIndex=N,e(d,U),E||x||(E=!0,ne(A))),U},r.unstable_shouldYield=ie,r.unstable_wrapCallback=function(U){var q=y;return function(){var G=y;y=q;try{return U.apply(this,arguments)}finally{y=G}}}}(th)),th}var Rp;function d1(){return Rp||(Rp=1,eh.exports=h1()),eh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function f1(){if(Tp)return zt;Tp=1;var r=Yh(),e=d1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,a=1;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function l(i,o){u(i,o),u(i+"Capture",o)}function u(i,o){for(s[i]=o,i=0;i<o.length;i++)n.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},_={};function y(i){return d.call(_,i)?!0:d.call(p,i)?!1:g.test(i)?_[i]=!0:(p[i]=!0,!1)}function x(i,o,a,h){if(a!==null&&a.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function E(i,o,a,h){if(o===null||typeof o>"u"||x(i,o,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function w(i,o,a,h,f,m,v){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=i,this.type=o,this.sanitizeURL=m,this.removeEmptyString=v}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new w(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new w(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new w(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new w(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new w(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new w(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new w(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new w(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new w(i,5,!1,i.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function T(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(I,T);C[o]=new w(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(I,T);C[o]=new w(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(I,T);C[o]=new w(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new w(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new w(i,1,!1,i.toLowerCase(),null,!0,!0)});function D(i,o,a,h){var f=C.hasOwnProperty(o)?C[o]:null;(f!==null?f.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(E(o,a,f,h)&&(a=null),h||f===null?y(o)&&(a===null?i.removeAttribute(o):i.setAttribute(o,""+a)):f.mustUseProperty?i[f.propertyName]=a===null?f.type===3?!1:"":a:(o=f.attributeName,h=f.attributeNamespace,a===null?i.removeAttribute(o):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?i.setAttributeNS(h,o,a):i.setAttribute(o,a))))}var M=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),X=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),ie=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),U=Symbol.iterator;function q(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var G=Object.assign,R;function N(i){if(R===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);R=o&&o[1]||""}return`
`+R+i}var re=!1;function z(i,o){if(!i||re)return"";re=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(O){var h=O}Reflect.construct(i,[],o)}else{try{o.call()}catch(O){h=O}i.call(o.prototype)}else{try{throw Error()}catch(O){h=O}i()}}catch(O){if(O&&h&&typeof O.stack=="string"){for(var f=O.stack.split(`
`),m=h.stack.split(`
`),v=f.length-1,S=m.length-1;1<=v&&0<=S&&f[v]!==m[S];)S--;for(;1<=v&&0<=S;v--,S--)if(f[v]!==m[S]){if(v!==1||S!==1)do if(v--,S--,0>S||f[v]!==m[S]){var L=`
`+f[v].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=v&&0<=S);break}}}finally{re=!1,Error.prepareStackTrace=a}return(i=i?i.displayName||i.name:"")?N(i):""}function ue(i){switch(i.tag){case 5:return N(i.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return i=z(i.type,!1),i;case 11:return i=z(i.type.render,!1),i;case 1:return i=z(i.type,!0),i;default:return""}}function he(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case K:return"Fragment";case X:return"Portal";case W:return"Profiler";case b:return"StrictMode";case te:return"Suspense";case J:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case ie:return(i.displayName||"Context")+".Consumer";case B:return(i._context.displayName||"Context")+".Provider";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case ee:return o=i.displayName||null,o!==null?o:he(i.type)||"Memo";case ne:o=i._payload,i=i._init;try{return he(i(o))}catch{}}return null}function me(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function xe(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Re(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ne(i){var o=Re(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return f.call(this)},set:function(v){h=""+v,m.call(this,v)}}),Object.defineProperty(i,o,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(v){h=""+v},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function St(i){i._valueTracker||(i._valueTracker=Ne(i))}function kn(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),h="";return i&&(h=Re(i)?i.checked?"true":"false":i.value),i=h,i!==a?(o.setValue(i),!0):!1}function pn(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Vn(i,o){var a=o.checked;return G({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??i._wrapperState.initialChecked})}function Fn(i,o){var a=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;a=xe(o.value!=null?o.value:a),i._wrapperState={initialChecked:h,initialValue:a,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Jt(i,o){o=o.checked,o!=null&&D(i,"checked",o,!1)}function mt(i,o){Jt(i,o);var a=xe(o.value),h=o.type;if(a!=null)h==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+a):i.value!==""+a&&(i.value=""+a);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Dn(i,o.type,a):o.hasOwnProperty("defaultValue")&&Dn(i,o.type,xe(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Bt(i,o,a){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,a||o===i.value||(i.value=o),i.defaultValue=o}a=i.name,a!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,a!==""&&(i.name=a)}function Dn(i,o,a){(o!=="number"||pn(i.ownerDocument)!==i)&&(a==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+a&&(i.defaultValue=""+a))}var en=Array.isArray;function tn(i,o,a,h){if(i=i.options,o){o={};for(var f=0;f<a.length;f++)o["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=o.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&h&&(i[a].defaultSelected=!0)}else{for(a=""+xe(a),o=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,h&&(i[f].defaultSelected=!0);return}o!==null||i[f].disabled||(o=i[f])}o!==null&&(o.selected=!0)}}function mn(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return G({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Kn(i,o){var a=o.value;if(a==null){if(a=o.children,o=o.defaultValue,a!=null){if(o!=null)throw Error(t(92));if(en(a)){if(1<a.length)throw Error(t(93));a=a[0]}o=a}o==null&&(o=""),a=o}i._wrapperState={initialValue:xe(a)}}function Zn(i,o){var a=xe(o.value),h=xe(o.defaultValue);a!=null&&(a=""+a,a!==i.value&&(i.value=a),o.defaultValue==null&&i.defaultValue!==a&&(i.defaultValue=a)),h!=null&&(i.defaultValue=""+h)}function He(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function zr(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rr(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?zr(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Hn,sr=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,a,h,f){MSApp.execUnsafeLocalFunction(function(){return i(o,a,h,f)})}:i}(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Hn=Hn||document.createElement("div"),Hn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Hn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function or(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var _i={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ol=["Webkit","ms","Moz","O"];Object.keys(_i).forEach(function(i){ol.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),_i[o]=_i[i]})});function Gr(i,o,a){return o==null||typeof o=="boolean"||o===""?"":a||typeof o!="number"||o===0||_i.hasOwnProperty(i)&&_i[i]?(""+o).trim():o+"px"}function ll(i,o){i=i.style;for(var a in o)if(o.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=Gr(a,o[a],h);a==="float"&&(a="cssFloat"),h?i.setProperty(a,f):i[a]=f}}var mu=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(i,o){if(o){if(mu[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ur(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lr=null;function jr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Xs=null,On=null,nn=null;function yi(i){if(i=co(i)){if(typeof Xs!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Ll(o),Xs(i.stateNode,i.type,o))}}function vi(i){On?nn?nn.push(i):nn=[i]:On=i}function Ws(){if(On){var i=On,o=nn;if(nn=On=null,yi(i),o)for(i=0;i<o.length;i++)yi(o[i])}}function Bs(i,o){return i(o)}function Rt(){}var _n=!1;function Tt(i,o,a){if(_n)return i(o,a);_n=!0;try{return Bs(i,o,a)}finally{_n=!1,(On!==null||nn!==null)&&(Rt(),Ws())}}function _t(i,o){var a=i.stateNode;if(a===null)return null;var h=Ll(a);if(h===null)return null;a=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(t(231,o,typeof a));return a}var yt=!1;if(c)try{var It={};Object.defineProperty(It,"passive",{get:function(){yt=!0}}),window.addEventListener("test",It,It),window.removeEventListener("test",It,It)}catch{yt=!1}function yn(i,o,a,h,f,m,v,S,L){var O=Array.prototype.slice.call(arguments,3);try{o.apply(a,O)}catch(V){this.onError(V)}}var ze=!1,Qe=null,At=!1,Ys=null,f0={onError:function(i){ze=!0,Qe=i}};function g0(i,o,a,h,f,m,v,S,L){ze=!1,Qe=null,yn.apply(f0,arguments)}function p0(i,o,a,h,f,m,v,S,L){if(g0.apply(this,arguments),ze){if(ze){var O=Qe;ze=!1,Qe=null}else throw Error(t(198));At||(At=!0,Ys=O)}}function ar(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,o.flags&4098&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function jd(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xd(i){if(ar(i)!==i)throw Error(t(188))}function m0(i){var o=i.alternate;if(!o){if(o=ar(i),o===null)throw Error(t(188));return o!==i?null:i}for(var a=i,h=o;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return Xd(f),i;if(m===h)return Xd(f),o;m=m.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=m;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,h=m;break}if(S===h){v=!0,h=f,a=m;break}S=S.sibling}if(!v){for(S=m.child;S;){if(S===a){v=!0,a=m,h=f;break}if(S===h){v=!0,h=m,a=f;break}S=S.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?i:o}function Wd(i){return i=m0(i),i!==null?Bd(i):null}function Bd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Bd(i);if(o!==null)return o;i=i.sibling}return null}var Yd=e.unstable_scheduleCallback,Vd=e.unstable_cancelCallback,_0=e.unstable_shouldYield,y0=e.unstable_requestPaint,$e=e.unstable_now,v0=e.unstable_getCurrentPriorityLevel,_u=e.unstable_ImmediatePriority,Kd=e.unstable_UserBlockingPriority,al=e.unstable_NormalPriority,E0=e.unstable_LowPriority,Zd=e.unstable_IdlePriority,ul=null,Nn=null;function x0(i){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(ul,i,void 0,(i.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:S0,w0=Math.log,C0=Math.LN2;function S0(i){return i>>>=0,i===0?32:31-(w0(i)/C0|0)|0}var cl=64,hl=4194304;function Vs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function dl(i,o){var a=i.pendingLanes;if(a===0)return 0;var h=0,f=i.suspendedLanes,m=i.pingedLanes,v=a&268435455;if(v!==0){var S=v&~f;S!==0?h=Vs(S):(m&=v,m!==0&&(h=Vs(m)))}else v=a&~f,v!==0?h=Vs(v):m!==0&&(h=Vs(m));if(h===0)return 0;if(o!==0&&o!==h&&!(o&f)&&(f=h&-h,m=o&-o,f>=m||f===16&&(m&4194240)!==0))return o;if(h&4&&(h|=a&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)a=31-vn(o),f=1<<a,h|=i[a],o&=~f;return h}function R0(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T0(i,o){for(var a=i.suspendedLanes,h=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes;0<m;){var v=31-vn(m),S=1<<v,L=f[v];L===-1?(!(S&a)||S&h)&&(f[v]=R0(S,o)):L<=o&&(i.expiredLanes|=S),m&=~S}}function yu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Hd(){var i=cl;return cl<<=1,!(cl&4194240)&&(cl=64),i}function vu(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function Ks(i,o,a){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-vn(o),i[o]=a}function I0(i,o){var a=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<a;){var f=31-vn(a),m=1<<f;o[f]=0,h[f]=-1,i[f]=-1,a&=~m}}function Eu(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var h=31-vn(a),f=1<<h;f&o|i[h]&o&&(i[h]|=o),a&=~f}}var De=0;function $d(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var qd,xu,Qd,Jd,ef,wu=!1,fl=[],Ei=null,xi=null,wi=null,Zs=new Map,Hs=new Map,Ci=[],L0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tf(i,o){switch(i){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":Zs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(o.pointerId)}}function $s(i,o,a,h,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:o,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[f]},o!==null&&(o=co(o),o!==null&&xu(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,f!==null&&o.indexOf(f)===-1&&o.push(f),i)}function M0(i,o,a,h,f){switch(o){case"focusin":return Ei=$s(Ei,i,o,a,h,f),!0;case"dragenter":return xi=$s(xi,i,o,a,h,f),!0;case"mouseover":return wi=$s(wi,i,o,a,h,f),!0;case"pointerover":var m=f.pointerId;return Zs.set(m,$s(Zs.get(m)||null,i,o,a,h,f)),!0;case"gotpointercapture":return m=f.pointerId,Hs.set(m,$s(Hs.get(m)||null,i,o,a,h,f)),!0}return!1}function nf(i){var o=ur(i.target);if(o!==null){var a=ar(o);if(a!==null){if(o=a.tag,o===13){if(o=jd(a),o!==null){i.blockedOn=o,ef(i.priority,function(){Qd(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function gl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=Su(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(a===null){a=i.nativeEvent;var h=new a.constructor(a.type,a);lr=h,a.target.dispatchEvent(h),lr=null}else return o=co(a),o!==null&&xu(o),i.blockedOn=a,!1;o.shift()}return!0}function rf(i,o,a){gl(i)&&a.delete(o)}function P0(){wu=!1,Ei!==null&&gl(Ei)&&(Ei=null),xi!==null&&gl(xi)&&(xi=null),wi!==null&&gl(wi)&&(wi=null),Zs.forEach(rf),Hs.forEach(rf)}function qs(i,o){i.blockedOn===o&&(i.blockedOn=null,wu||(wu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,P0)))}function Qs(i){function o(f){return qs(f,i)}if(0<fl.length){qs(fl[0],i);for(var a=1;a<fl.length;a++){var h=fl[a];h.blockedOn===i&&(h.blockedOn=null)}}for(Ei!==null&&qs(Ei,i),xi!==null&&qs(xi,i),wi!==null&&qs(wi,i),Zs.forEach(o),Hs.forEach(o),a=0;a<Ci.length;a++)h=Ci[a],h.blockedOn===i&&(h.blockedOn=null);for(;0<Ci.length&&(a=Ci[0],a.blockedOn===null);)nf(a),a.blockedOn===null&&Ci.shift()}var Xr=M.ReactCurrentBatchConfig,pl=!0;function A0(i,o,a,h){var f=De,m=Xr.transition;Xr.transition=null;try{De=1,Cu(i,o,a,h)}finally{De=f,Xr.transition=m}}function k0(i,o,a,h){var f=De,m=Xr.transition;Xr.transition=null;try{De=4,Cu(i,o,a,h)}finally{De=f,Xr.transition=m}}function Cu(i,o,a,h){if(pl){var f=Su(i,o,a,h);if(f===null)ju(i,o,h,ml,a),tf(i,h);else if(M0(f,i,o,a,h))h.stopPropagation();else if(tf(i,h),o&4&&-1<L0.indexOf(i)){for(;f!==null;){var m=co(f);if(m!==null&&qd(m),m=Su(i,o,a,h),m===null&&ju(i,o,h,ml,a),m===f)break;f=m}f!==null&&h.stopPropagation()}else ju(i,o,h,null,a)}}var ml=null;function Su(i,o,a,h){if(ml=null,i=jr(h),i=ur(i),i!==null)if(o=ar(i),o===null)i=null;else if(a=o.tag,a===13){if(i=jd(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ml=i,null}function sf(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v0()){case _u:return 1;case Kd:return 4;case al:case E0:return 16;case Zd:return 536870912;default:return 16}default:return 16}}var Si=null,Ru=null,_l=null;function of(){if(_l)return _l;var i,o=Ru,a=o.length,h,f="value"in Si?Si.value:Si.textContent,m=f.length;for(i=0;i<a&&o[i]===f[i];i++);var v=a-i;for(h=1;h<=v&&o[a-h]===f[m-h];h++);return _l=f.slice(i,1<h?1-h:void 0)}function yl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function vl(){return!0}function lf(){return!1}function Yt(i){function o(a,h,f,m,v){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(a=i[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?vl:lf,this.isPropagationStopped=lf,this}return G(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vl)},persist:function(){},isPersistent:vl}),o}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tu=Yt(Wr),Js=G({},Wr,{view:0,detail:0}),F0=Yt(Js),Iu,Lu,eo,El=G({},Js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==eo&&(eo&&i.type==="mousemove"?(Iu=i.screenX-eo.screenX,Lu=i.screenY-eo.screenY):Lu=Iu=0,eo=i),Iu)},movementY:function(i){return"movementY"in i?i.movementY:Lu}}),af=Yt(El),D0=G({},El,{dataTransfer:0}),O0=Yt(D0),N0=G({},Js,{relatedTarget:0}),Mu=Yt(N0),z0=G({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),G0=Yt(z0),b0=G({},Wr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),U0=Yt(b0),j0=G({},Wr,{data:0}),uf=Yt(j0),X0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y0(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=B0[i])?!!o[i]:!1}function Pu(){return Y0}var V0=G({},Js,{key:function(i){if(i.key){var o=X0[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=yl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?W0[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pu,charCode:function(i){return i.type==="keypress"?yl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?yl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),K0=Yt(V0),Z0=G({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cf=Yt(Z0),H0=G({},Js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pu}),$0=Yt(H0),q0=G({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q0=Yt(q0),J0=G({},El,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ey=Yt(J0),ty=[9,13,27,32],Au=c&&"CompositionEvent"in window,to=null;c&&"documentMode"in document&&(to=document.documentMode);var ny=c&&"TextEvent"in window&&!to,hf=c&&(!Au||to&&8<to&&11>=to),df=" ",ff=!1;function gf(i,o){switch(i){case"keyup":return ty.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pf(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Br=!1;function iy(i,o){switch(i){case"compositionend":return pf(o);case"keypress":return o.which!==32?null:(ff=!0,df);case"textInput":return i=o.data,i===df&&ff?null:i;default:return null}}function ry(i,o){if(Br)return i==="compositionend"||!Au&&gf(i,o)?(i=of(),_l=Ru=Si=null,Br=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return hf&&o.locale!=="ko"?null:o.data;default:return null}}var sy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!sy[i.type]:o==="textarea"}function _f(i,o,a,h){vi(h),o=Rl(o,"onChange"),0<o.length&&(a=new Tu("onChange","change",null,a,h),i.push({event:a,listeners:o}))}var no=null,io=null;function oy(i){Of(i,0)}function xl(i){var o=Hr(i);if(kn(o))return i}function ly(i,o){if(i==="change")return o}var yf=!1;if(c){var ku;if(c){var Fu="oninput"in document;if(!Fu){var vf=document.createElement("div");vf.setAttribute("oninput","return;"),Fu=typeof vf.oninput=="function"}ku=Fu}else ku=!1;yf=ku&&(!document.documentMode||9<document.documentMode)}function Ef(){no&&(no.detachEvent("onpropertychange",xf),io=no=null)}function xf(i){if(i.propertyName==="value"&&xl(io)){var o=[];_f(o,io,i,jr(i)),Tt(oy,o)}}function ay(i,o,a){i==="focusin"?(Ef(),no=o,io=a,no.attachEvent("onpropertychange",xf)):i==="focusout"&&Ef()}function uy(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return xl(io)}function cy(i,o){if(i==="click")return xl(o)}function hy(i,o){if(i==="input"||i==="change")return xl(o)}function dy(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var En=typeof Object.is=="function"?Object.is:dy;function ro(i,o){if(En(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),h=Object.keys(o);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!d.call(o,f)||!En(i[f],o[f]))return!1}return!0}function wf(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Cf(i,o){var a=wf(i);i=0;for(var h;a;){if(a.nodeType===3){if(h=i+a.textContent.length,i<=o&&h>=o)return{node:a,offset:o-i};i=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wf(a)}}function Sf(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Sf(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Rf(){for(var i=window,o=pn();o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=pn(i.document)}return o}function Du(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function fy(i){var o=Rf(),a=i.focusedElem,h=i.selectionRange;if(o!==a&&a&&a.ownerDocument&&Sf(a.ownerDocument.documentElement,a)){if(h!==null&&Du(a)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in a)a.selectionStart=o,a.selectionEnd=Math.min(i,a.value.length);else if(i=(o=a.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var f=a.textContent.length,m=Math.min(h.start,f);h=h.end===void 0?m:Math.min(h.end,f),!i.extend&&m>h&&(f=h,h=m,m=f),f=Cf(a,m);var v=Cf(a,h);f&&v&&(i.rangeCount!==1||i.anchorNode!==f.node||i.anchorOffset!==f.offset||i.focusNode!==v.node||i.focusOffset!==v.offset)&&(o=o.createRange(),o.setStart(f.node,f.offset),i.removeAllRanges(),m>h?(i.addRange(o),i.extend(v.node,v.offset)):(o.setEnd(v.node,v.offset),i.addRange(o)))}}for(o=[],i=a;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<o.length;a++)i=o[a],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var gy=c&&"documentMode"in document&&11>=document.documentMode,Yr=null,Ou=null,so=null,Nu=!1;function Tf(i,o,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Nu||Yr==null||Yr!==pn(h)||(h=Yr,"selectionStart"in h&&Du(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),so&&ro(so,h)||(so=h,h=Rl(Ou,"onSelect"),0<h.length&&(o=new Tu("onSelect","select",null,o,a),i.push({event:o,listeners:h}),o.target=Yr)))}function wl(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var Vr={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},zu={},If={};c&&(If=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function Cl(i){if(zu[i])return zu[i];if(!Vr[i])return i;var o=Vr[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in If)return zu[i]=o[a];return i}var Lf=Cl("animationend"),Mf=Cl("animationiteration"),Pf=Cl("animationstart"),Af=Cl("transitionend"),kf=new Map,Ff="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ri(i,o){kf.set(i,o),l(o,[i])}for(var Gu=0;Gu<Ff.length;Gu++){var bu=Ff[Gu],py=bu.toLowerCase(),my=bu[0].toUpperCase()+bu.slice(1);Ri(py,"on"+my)}Ri(Lf,"onAnimationEnd"),Ri(Mf,"onAnimationIteration"),Ri(Pf,"onAnimationStart"),Ri("dblclick","onDoubleClick"),Ri("focusin","onFocus"),Ri("focusout","onBlur"),Ri(Af,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_y=new Set("cancel close invalid load scroll toggle".split(" ").concat(oo));function Df(i,o,a){var h=i.type||"unknown-event";i.currentTarget=a,p0(h,o,void 0,i),i.currentTarget=null}function Of(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var h=i[a],f=h.event;h=h.listeners;e:{var m=void 0;if(o)for(var v=h.length-1;0<=v;v--){var S=h[v],L=S.instance,O=S.currentTarget;if(S=S.listener,L!==m&&f.isPropagationStopped())break e;Df(f,S,O),m=L}else for(v=0;v<h.length;v++){if(S=h[v],L=S.instance,O=S.currentTarget,S=S.listener,L!==m&&f.isPropagationStopped())break e;Df(f,S,O),m=L}}}if(At)throw i=Ys,At=!1,Ys=null,i}function Ue(i,o){var a=o[Ku];a===void 0&&(a=o[Ku]=new Set);var h=i+"__bubble";a.has(h)||(Nf(o,i,2,!1),a.add(h))}function Uu(i,o,a){var h=0;o&&(h|=4),Nf(a,i,h,o)}var Sl="_reactListening"+Math.random().toString(36).slice(2);function lo(i){if(!i[Sl]){i[Sl]=!0,n.forEach(function(a){a!=="selectionchange"&&(_y.has(a)||Uu(a,!1,i),Uu(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Sl]||(o[Sl]=!0,Uu("selectionchange",!1,o))}}function Nf(i,o,a,h){switch(sf(o)){case 1:var f=A0;break;case 4:f=k0;break;default:f=Cu}a=f.bind(null,o,a,i),f=void 0,!yt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(f=!0),h?f!==void 0?i.addEventListener(o,a,{capture:!0,passive:f}):i.addEventListener(o,a,!0):f!==void 0?i.addEventListener(o,a,{passive:f}):i.addEventListener(o,a,!1)}function ju(i,o,a,h,f){var m=h;if(!(o&1)&&!(o&2)&&h!==null)e:for(;;){if(h===null)return;var v=h.tag;if(v===3||v===4){var S=h.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(v===4)for(v=h.return;v!==null;){var L=v.tag;if((L===3||L===4)&&(L=v.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;v=v.return}for(;S!==null;){if(v=ur(S),v===null)return;if(L=v.tag,L===5||L===6){h=m=v;continue e}S=S.parentNode}}h=h.return}Tt(function(){var O=m,V=jr(a),H=[];e:{var Y=kf.get(i);if(Y!==void 0){var se=Tu,ae=i;switch(i){case"keypress":if(yl(a)===0)break e;case"keydown":case"keyup":se=K0;break;case"focusin":ae="focus",se=Mu;break;case"focusout":ae="blur",se=Mu;break;case"beforeblur":case"afterblur":se=Mu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=O0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=$0;break;case Lf:case Mf:case Pf:se=G0;break;case Af:se=Q0;break;case"scroll":se=F0;break;case"wheel":se=ey;break;case"copy":case"cut":case"paste":se=U0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=cf}var ce=(o&4)!==0,qe=!ce&&i==="scroll",k=ce?Y!==null?Y+"Capture":null:Y;ce=[];for(var P=O,F;P!==null;){F=P;var Q=F.stateNode;if(F.tag===5&&Q!==null&&(F=Q,k!==null&&(Q=_t(P,k),Q!=null&&ce.push(ao(P,Q,F)))),qe)break;P=P.return}0<ce.length&&(Y=new se(Y,ae,null,a,V),H.push({event:Y,listeners:ce}))}}if(!(o&7)){e:{if(Y=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",Y&&a!==lr&&(ae=a.relatedTarget||a.fromElement)&&(ur(ae)||ae[$n]))break e;if((se||Y)&&(Y=V.window===V?V:(Y=V.ownerDocument)?Y.defaultView||Y.parentWindow:window,se?(ae=a.relatedTarget||a.toElement,se=O,ae=ae?ur(ae):null,ae!==null&&(qe=ar(ae),ae!==qe||ae.tag!==5&&ae.tag!==6)&&(ae=null)):(se=null,ae=O),se!==ae)){if(ce=af,Q="onMouseLeave",k="onMouseEnter",P="mouse",(i==="pointerout"||i==="pointerover")&&(ce=cf,Q="onPointerLeave",k="onPointerEnter",P="pointer"),qe=se==null?Y:Hr(se),F=ae==null?Y:Hr(ae),Y=new ce(Q,P+"leave",se,a,V),Y.target=qe,Y.relatedTarget=F,Q=null,ur(V)===O&&(ce=new ce(k,P+"enter",ae,a,V),ce.target=F,ce.relatedTarget=qe,Q=ce),qe=Q,se&&ae)t:{for(ce=se,k=ae,P=0,F=ce;F;F=Kr(F))P++;for(F=0,Q=k;Q;Q=Kr(Q))F++;for(;0<P-F;)ce=Kr(ce),P--;for(;0<F-P;)k=Kr(k),F--;for(;P--;){if(ce===k||k!==null&&ce===k.alternate)break t;ce=Kr(ce),k=Kr(k)}ce=null}else ce=null;se!==null&&zf(H,Y,se,ce,!1),ae!==null&&qe!==null&&zf(H,qe,ae,ce,!0)}}e:{if(Y=O?Hr(O):window,se=Y.nodeName&&Y.nodeName.toLowerCase(),se==="select"||se==="input"&&Y.type==="file")var de=ly;else if(mf(Y))if(yf)de=hy;else{de=uy;var ge=ay}else(se=Y.nodeName)&&se.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(de=cy);if(de&&(de=de(i,O))){_f(H,de,a,V);break e}ge&&ge(i,Y,O),i==="focusout"&&(ge=Y._wrapperState)&&ge.controlled&&Y.type==="number"&&Dn(Y,"number",Y.value)}switch(ge=O?Hr(O):window,i){case"focusin":(mf(ge)||ge.contentEditable==="true")&&(Yr=ge,Ou=O,so=null);break;case"focusout":so=Ou=Yr=null;break;case"mousedown":Nu=!0;break;case"contextmenu":case"mouseup":case"dragend":Nu=!1,Tf(H,a,V);break;case"selectionchange":if(gy)break;case"keydown":case"keyup":Tf(H,a,V)}var pe;if(Au)e:{switch(i){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Br?gf(i,a)&&(_e="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(hf&&a.locale!=="ko"&&(Br||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Br&&(pe=of()):(Si=V,Ru="value"in Si?Si.value:Si.textContent,Br=!0)),ge=Rl(O,_e),0<ge.length&&(_e=new uf(_e,i,null,a,V),H.push({event:_e,listeners:ge}),pe?_e.data=pe:(pe=pf(a),pe!==null&&(_e.data=pe)))),(pe=ny?iy(i,a):ry(i,a))&&(O=Rl(O,"onBeforeInput"),0<O.length&&(V=new uf("onBeforeInput","beforeinput",null,a,V),H.push({event:V,listeners:O}),V.data=pe))}Of(H,o)})}function ao(i,o,a){return{instance:i,listener:o,currentTarget:a}}function Rl(i,o){for(var a=o+"Capture",h=[];i!==null;){var f=i,m=f.stateNode;f.tag===5&&m!==null&&(f=m,m=_t(i,a),m!=null&&h.unshift(ao(i,m,f)),m=_t(i,o),m!=null&&h.push(ao(i,m,f))),i=i.return}return h}function Kr(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function zf(i,o,a,h,f){for(var m=o._reactName,v=[];a!==null&&a!==h;){var S=a,L=S.alternate,O=S.stateNode;if(L!==null&&L===h)break;S.tag===5&&O!==null&&(S=O,f?(L=_t(a,m),L!=null&&v.unshift(ao(a,L,S))):f||(L=_t(a,m),L!=null&&v.push(ao(a,L,S)))),a=a.return}v.length!==0&&i.push({event:o,listeners:v})}var yy=/\r\n?/g,vy=/\u0000|\uFFFD/g;function Gf(i){return(typeof i=="string"?i:""+i).replace(yy,`
`).replace(vy,"")}function Tl(i,o,a){if(o=Gf(o),Gf(i)!==o&&a)throw Error(t(425))}function Il(){}var Xu=null,Wu=null;function Bu(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Yu=typeof setTimeout=="function"?setTimeout:void 0,Ey=typeof clearTimeout=="function"?clearTimeout:void 0,bf=typeof Promise=="function"?Promise:void 0,xy=typeof queueMicrotask=="function"?queueMicrotask:typeof bf<"u"?function(i){return bf.resolve(null).then(i).catch(wy)}:Yu;function wy(i){setTimeout(function(){throw i})}function Vu(i,o){var a=o,h=0;do{var f=a.nextSibling;if(i.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){i.removeChild(f),Qs(o);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Qs(o)}function Ti(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Uf(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(o===0)return i;o--}else a==="/$"&&o++}i=i.previousSibling}return null}var Zr=Math.random().toString(36).slice(2),zn="__reactFiber$"+Zr,uo="__reactProps$"+Zr,$n="__reactContainer$"+Zr,Ku="__reactEvents$"+Zr,Cy="__reactListeners$"+Zr,Sy="__reactHandles$"+Zr;function ur(i){var o=i[zn];if(o)return o;for(var a=i.parentNode;a;){if(o=a[$n]||a[zn]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=Uf(i);i!==null;){if(a=i[zn])return a;i=Uf(i)}return o}i=a,a=i.parentNode}return null}function co(i){return i=i[zn]||i[$n],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Hr(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Ll(i){return i[uo]||null}var Zu=[],$r=-1;function Ii(i){return{current:i}}function je(i){0>$r||(i.current=Zu[$r],Zu[$r]=null,$r--)}function be(i,o){$r++,Zu[$r]=i.current,i.current=o}var Li={},vt=Ii(Li),kt=Ii(!1),cr=Li;function qr(i,o){var a=i.type.contextTypes;if(!a)return Li;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var f={},m;for(m in a)f[m]=o[m];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=f),f}function Ft(i){return i=i.childContextTypes,i!=null}function Ml(){je(kt),je(vt)}function jf(i,o,a){if(vt.current!==Li)throw Error(t(168));be(vt,o),be(kt,a)}function Xf(i,o,a){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in o))throw Error(t(108,me(i)||"Unknown",f));return G({},a,h)}function Pl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Li,cr=vt.current,be(vt,i),be(kt,kt.current),!0}function Wf(i,o,a){var h=i.stateNode;if(!h)throw Error(t(169));a?(i=Xf(i,o,cr),h.__reactInternalMemoizedMergedChildContext=i,je(kt),je(vt),be(vt,i)):je(kt),be(kt,a)}var qn=null,Al=!1,Hu=!1;function Bf(i){qn===null?qn=[i]:qn.push(i)}function Ry(i){Al=!0,Bf(i)}function Mi(){if(!Hu&&qn!==null){Hu=!0;var i=0,o=De;try{var a=qn;for(De=1;i<a.length;i++){var h=a[i];do h=h(!0);while(h!==null)}qn=null,Al=!1}catch(f){throw qn!==null&&(qn=qn.slice(i+1)),Yd(_u,Mi),f}finally{De=o,Hu=!1}}return null}var Qr=[],Jr=0,kl=null,Fl=0,rn=[],sn=0,hr=null,Qn=1,Jn="";function dr(i,o){Qr[Jr++]=Fl,Qr[Jr++]=kl,kl=i,Fl=o}function Yf(i,o,a){rn[sn++]=Qn,rn[sn++]=Jn,rn[sn++]=hr,hr=i;var h=Qn;i=Jn;var f=32-vn(h)-1;h&=~(1<<f),a+=1;var m=32-vn(o)+f;if(30<m){var v=f-f%5;m=(h&(1<<v)-1).toString(32),h>>=v,f-=v,Qn=1<<32-vn(o)+f|a<<f|h,Jn=m+i}else Qn=1<<m|a<<f|h,Jn=i}function $u(i){i.return!==null&&(dr(i,1),Yf(i,1,0))}function qu(i){for(;i===kl;)kl=Qr[--Jr],Qr[Jr]=null,Fl=Qr[--Jr],Qr[Jr]=null;for(;i===hr;)hr=rn[--sn],rn[sn]=null,Jn=rn[--sn],rn[sn]=null,Qn=rn[--sn],rn[sn]=null}var Vt=null,Kt=null,Xe=!1,xn=null;function Vf(i,o){var a=un(5,null,null,0);a.elementType="DELETED",a.stateNode=o,a.return=i,o=i.deletions,o===null?(i.deletions=[a],i.flags|=16):o.push(a)}function Kf(i,o){switch(i.tag){case 5:var a=i.type;return o=o.nodeType!==1||a.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Vt=i,Kt=Ti(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Vt=i,Kt=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(a=hr!==null?{id:Qn,overflow:Jn}:null,i.memoizedState={dehydrated:o,treeContext:a,retryLane:1073741824},a=un(18,null,null,0),a.stateNode=o,a.return=i,i.child=a,Vt=i,Kt=null,!0):!1;default:return!1}}function Qu(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ju(i){if(Xe){var o=Kt;if(o){var a=o;if(!Kf(i,o)){if(Qu(i))throw Error(t(418));o=Ti(a.nextSibling);var h=Vt;o&&Kf(i,o)?Vf(h,a):(i.flags=i.flags&-4097|2,Xe=!1,Vt=i)}}else{if(Qu(i))throw Error(t(418));i.flags=i.flags&-4097|2,Xe=!1,Vt=i}}}function Zf(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Vt=i}function Dl(i){if(i!==Vt)return!1;if(!Xe)return Zf(i),Xe=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!Bu(i.type,i.memoizedProps)),o&&(o=Kt)){if(Qu(i))throw Hf(),Error(t(418));for(;o;)Vf(i,o),o=Ti(o.nextSibling)}if(Zf(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"){if(o===0){Kt=Ti(i.nextSibling);break e}o--}else a!=="$"&&a!=="$!"&&a!=="$?"||o++}i=i.nextSibling}Kt=null}}else Kt=Vt?Ti(i.stateNode.nextSibling):null;return!0}function Hf(){for(var i=Kt;i;)i=Ti(i.nextSibling)}function es(){Kt=Vt=null,Xe=!1}function ec(i){xn===null?xn=[i]:xn.push(i)}var Ty=M.ReactCurrentBatchConfig;function ho(i,o,a){if(i=a.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,i));var f=h,m=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===m?o.ref:(o=function(v){var S=f.refs;v===null?delete S[m]:S[m]=v},o._stringRef=m,o)}if(typeof i!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,i))}return i}function Ol(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function $f(i){var o=i._init;return o(i._payload)}function qf(i){function o(k,P){if(i){var F=k.deletions;F===null?(k.deletions=[P],k.flags|=16):F.push(P)}}function a(k,P){if(!i)return null;for(;P!==null;)o(k,P),P=P.sibling;return null}function h(k,P){for(k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function f(k,P){return k=zi(k,P),k.index=0,k.sibling=null,k}function m(k,P,F){return k.index=F,i?(F=k.alternate,F!==null?(F=F.index,F<P?(k.flags|=2,P):F):(k.flags|=2,P)):(k.flags|=1048576,P)}function v(k){return i&&k.alternate===null&&(k.flags|=2),k}function S(k,P,F,Q){return P===null||P.tag!==6?(P=Yc(F,k.mode,Q),P.return=k,P):(P=f(P,F),P.return=k,P)}function L(k,P,F,Q){var de=F.type;return de===K?V(k,P,F.props.children,Q,F.key):P!==null&&(P.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ne&&$f(de)===P.type)?(Q=f(P,F.props),Q.ref=ho(k,P,F),Q.return=k,Q):(Q=sa(F.type,F.key,F.props,null,k.mode,Q),Q.ref=ho(k,P,F),Q.return=k,Q)}function O(k,P,F,Q){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=Vc(F,k.mode,Q),P.return=k,P):(P=f(P,F.children||[]),P.return=k,P)}function V(k,P,F,Q,de){return P===null||P.tag!==7?(P=Er(F,k.mode,Q,de),P.return=k,P):(P=f(P,F),P.return=k,P)}function H(k,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Yc(""+P,k.mode,F),P.return=k,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return F=sa(P.type,P.key,P.props,null,k.mode,F),F.ref=ho(k,null,P),F.return=k,F;case X:return P=Vc(P,k.mode,F),P.return=k,P;case ne:var Q=P._init;return H(k,Q(P._payload),F)}if(en(P)||q(P))return P=Er(P,k.mode,F,null),P.return=k,P;Ol(k,P)}return null}function Y(k,P,F,Q){var de=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return de!==null?null:S(k,P,""+F,Q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===de?L(k,P,F,Q):null;case X:return F.key===de?O(k,P,F,Q):null;case ne:return de=F._init,Y(k,P,de(F._payload),Q)}if(en(F)||q(F))return de!==null?null:V(k,P,F,Q,null);Ol(k,F)}return null}function se(k,P,F,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return k=k.get(F)||null,S(P,k,""+Q,de);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return k=k.get(Q.key===null?F:Q.key)||null,L(P,k,Q,de);case X:return k=k.get(Q.key===null?F:Q.key)||null,O(P,k,Q,de);case ne:var ge=Q._init;return se(k,P,F,ge(Q._payload),de)}if(en(Q)||q(Q))return k=k.get(F)||null,V(P,k,Q,de,null);Ol(P,Q)}return null}function ae(k,P,F,Q){for(var de=null,ge=null,pe=P,_e=P=0,lt=null;pe!==null&&_e<F.length;_e++){pe.index>_e?(lt=pe,pe=null):lt=pe.sibling;var Ae=Y(k,pe,F[_e],Q);if(Ae===null){pe===null&&(pe=lt);break}i&&pe&&Ae.alternate===null&&o(k,pe),P=m(Ae,P,_e),ge===null?de=Ae:ge.sibling=Ae,ge=Ae,pe=lt}if(_e===F.length)return a(k,pe),Xe&&dr(k,_e),de;if(pe===null){for(;_e<F.length;_e++)pe=H(k,F[_e],Q),pe!==null&&(P=m(pe,P,_e),ge===null?de=pe:ge.sibling=pe,ge=pe);return Xe&&dr(k,_e),de}for(pe=h(k,pe);_e<F.length;_e++)lt=se(pe,k,_e,F[_e],Q),lt!==null&&(i&&lt.alternate!==null&&pe.delete(lt.key===null?_e:lt.key),P=m(lt,P,_e),ge===null?de=lt:ge.sibling=lt,ge=lt);return i&&pe.forEach(function(Gi){return o(k,Gi)}),Xe&&dr(k,_e),de}function ce(k,P,F,Q){var de=q(F);if(typeof de!="function")throw Error(t(150));if(F=de.call(F),F==null)throw Error(t(151));for(var ge=de=null,pe=P,_e=P=0,lt=null,Ae=F.next();pe!==null&&!Ae.done;_e++,Ae=F.next()){pe.index>_e?(lt=pe,pe=null):lt=pe.sibling;var Gi=Y(k,pe,Ae.value,Q);if(Gi===null){pe===null&&(pe=lt);break}i&&pe&&Gi.alternate===null&&o(k,pe),P=m(Gi,P,_e),ge===null?de=Gi:ge.sibling=Gi,ge=Gi,pe=lt}if(Ae.done)return a(k,pe),Xe&&dr(k,_e),de;if(pe===null){for(;!Ae.done;_e++,Ae=F.next())Ae=H(k,Ae.value,Q),Ae!==null&&(P=m(Ae,P,_e),ge===null?de=Ae:ge.sibling=Ae,ge=Ae);return Xe&&dr(k,_e),de}for(pe=h(k,pe);!Ae.done;_e++,Ae=F.next())Ae=se(pe,k,_e,Ae.value,Q),Ae!==null&&(i&&Ae.alternate!==null&&pe.delete(Ae.key===null?_e:Ae.key),P=m(Ae,P,_e),ge===null?de=Ae:ge.sibling=Ae,ge=Ae);return i&&pe.forEach(function(s1){return o(k,s1)}),Xe&&dr(k,_e),de}function qe(k,P,F,Q){if(typeof F=="object"&&F!==null&&F.type===K&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:e:{for(var de=F.key,ge=P;ge!==null;){if(ge.key===de){if(de=F.type,de===K){if(ge.tag===7){a(k,ge.sibling),P=f(ge,F.props.children),P.return=k,k=P;break e}}else if(ge.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ne&&$f(de)===ge.type){a(k,ge.sibling),P=f(ge,F.props),P.ref=ho(k,ge,F),P.return=k,k=P;break e}a(k,ge);break}else o(k,ge);ge=ge.sibling}F.type===K?(P=Er(F.props.children,k.mode,Q,F.key),P.return=k,k=P):(Q=sa(F.type,F.key,F.props,null,k.mode,Q),Q.ref=ho(k,P,F),Q.return=k,k=Q)}return v(k);case X:e:{for(ge=F.key;P!==null;){if(P.key===ge)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){a(k,P.sibling),P=f(P,F.children||[]),P.return=k,k=P;break e}else{a(k,P);break}else o(k,P);P=P.sibling}P=Vc(F,k.mode,Q),P.return=k,k=P}return v(k);case ne:return ge=F._init,qe(k,P,ge(F._payload),Q)}if(en(F))return ae(k,P,F,Q);if(q(F))return ce(k,P,F,Q);Ol(k,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,P!==null&&P.tag===6?(a(k,P.sibling),P=f(P,F),P.return=k,k=P):(a(k,P),P=Yc(F,k.mode,Q),P.return=k,k=P),v(k)):a(k,P)}return qe}var ts=qf(!0),Qf=qf(!1),Nl=Ii(null),zl=null,ns=null,tc=null;function nc(){tc=ns=zl=null}function ic(i){var o=Nl.current;je(Nl),i._currentValue=o}function rc(i,o,a){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===a)break;i=i.return}}function is(i,o){zl=i,tc=ns=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&o&&(Dt=!0),i.firstContext=null)}function on(i){var o=i._currentValue;if(tc!==i)if(i={context:i,memoizedValue:o,next:null},ns===null){if(zl===null)throw Error(t(308));ns=i,zl.dependencies={lanes:0,firstContext:i}}else ns=ns.next=i;return o}var fr=null;function sc(i){fr===null?fr=[i]:fr.push(i)}function Jf(i,o,a,h){var f=o.interleaved;return f===null?(a.next=a,sc(o)):(a.next=f.next,f.next=a),o.interleaved=a,ei(i,h)}function ei(i,o){i.lanes|=o;var a=i.alternate;for(a!==null&&(a.lanes|=o),a=i,i=i.return;i!==null;)i.childLanes|=o,a=i.alternate,a!==null&&(a.childLanes|=o),a=i,i=i.return;return a.tag===3?a.stateNode:null}var Pi=!1;function oc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eg(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ti(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ai(i,o,a){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,Pe&2){var f=h.pending;return f===null?o.next=o:(o.next=f.next,f.next=o),h.pending=o,ei(i,a)}return f=h.interleaved,f===null?(o.next=o,sc(h)):(o.next=f.next,f.next=o),h.interleaved=o,ei(i,a)}function Gl(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,a|=h,o.lanes=a,Eu(i,a)}}function tg(i,o){var a=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?f=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?f=m=o:m=m.next=o}else f=m=o;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:h.shared,effects:h.effects},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}function bl(i,o,a,h){var f=i.updateQueue;Pi=!1;var m=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var L=S,O=L.next;L.next=null,v===null?m=O:v.next=O,v=L;var V=i.alternate;V!==null&&(V=V.updateQueue,S=V.lastBaseUpdate,S!==v&&(S===null?V.firstBaseUpdate=O:S.next=O,V.lastBaseUpdate=L))}if(m!==null){var H=f.baseState;v=0,V=O=L=null,S=m;do{var Y=S.lane,se=S.eventTime;if((h&Y)===Y){V!==null&&(V=V.next={eventTime:se,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ae=i,ce=S;switch(Y=o,se=a,ce.tag){case 1:if(ae=ce.payload,typeof ae=="function"){H=ae.call(se,H,Y);break e}H=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=ce.payload,Y=typeof ae=="function"?ae.call(se,H,Y):ae,Y==null)break e;H=G({},H,Y);break e;case 2:Pi=!0}}S.callback!==null&&S.lane!==0&&(i.flags|=64,Y=f.effects,Y===null?f.effects=[S]:Y.push(S))}else se={eventTime:se,lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},V===null?(O=V=se,L=H):V=V.next=se,v|=Y;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Y=S,S=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(V===null&&(L=H),f.baseState=L,f.firstBaseUpdate=O,f.lastBaseUpdate=V,o=f.shared.interleaved,o!==null){f=o;do v|=f.lane,f=f.next;while(f!==o)}else m===null&&(f.shared.lanes=0);mr|=v,i.lanes=v,i.memoizedState=H}}function ng(i,o,a){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var fo={},Gn=Ii(fo),go=Ii(fo),po=Ii(fo);function gr(i){if(i===fo)throw Error(t(174));return i}function lc(i,o){switch(be(po,o),be(go,i),be(Gn,fo),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:rr(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=rr(o,i)}je(Gn),be(Gn,o)}function rs(){je(Gn),je(go),je(po)}function ig(i){gr(po.current);var o=gr(Gn.current),a=rr(o,i.type);o!==a&&(be(go,i),be(Gn,a))}function ac(i){go.current===i&&(je(Gn),je(go))}var We=Ii(0);function Ul(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if(o.flags&128)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var uc=[];function cc(){for(var i=0;i<uc.length;i++)uc[i]._workInProgressVersionPrimary=null;uc.length=0}var jl=M.ReactCurrentDispatcher,hc=M.ReactCurrentBatchConfig,pr=0,Be=null,tt=null,st=null,Xl=!1,mo=!1,_o=0,Iy=0;function Et(){throw Error(t(321))}function dc(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!En(i[a],o[a]))return!1;return!0}function fc(i,o,a,h,f,m){if(pr=m,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,jl.current=i===null||i.memoizedState===null?Ay:ky,i=a(h,f),mo){m=0;do{if(mo=!1,_o=0,25<=m)throw Error(t(301));m+=1,st=tt=null,o.updateQueue=null,jl.current=Fy,i=a(h,f)}while(mo)}if(jl.current=Yl,o=tt!==null&&tt.next!==null,pr=0,st=tt=Be=null,Xl=!1,o)throw Error(t(300));return i}function gc(){var i=_o!==0;return _o=0,i}function bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Be.memoizedState=st=i:st=st.next=i,st}function ln(){if(tt===null){var i=Be.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var o=st===null?Be.memoizedState:st.next;if(o!==null)st=o,tt=i;else{if(i===null)throw Error(t(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},st===null?Be.memoizedState=st=i:st=st.next=i}return st}function yo(i,o){return typeof o=="function"?o(i):o}function pc(i){var o=ln(),a=o.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=i;var h=tt,f=h.baseQueue,m=a.pending;if(m!==null){if(f!==null){var v=f.next;f.next=m.next,m.next=v}h.baseQueue=f=m,a.pending=null}if(f!==null){m=f.next,h=h.baseState;var S=v=null,L=null,O=m;do{var V=O.lane;if((pr&V)===V)L!==null&&(L=L.next={lane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),h=O.hasEagerState?O.eagerState:i(h,O.action);else{var H={lane:V,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null};L===null?(S=L=H,v=h):L=L.next=H,Be.lanes|=V,mr|=V}O=O.next}while(O!==null&&O!==m);L===null?v=h:L.next=S,En(h,o.memoizedState)||(Dt=!0),o.memoizedState=h,o.baseState=v,o.baseQueue=L,a.lastRenderedState=h}if(i=a.interleaved,i!==null){f=i;do m=f.lane,Be.lanes|=m,mr|=m,f=f.next;while(f!==i)}else f===null&&(a.lanes=0);return[o.memoizedState,a.dispatch]}function mc(i){var o=ln(),a=o.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=i;var h=a.dispatch,f=a.pending,m=o.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do m=i(m,v.action),v=v.next;while(v!==f);En(m,o.memoizedState)||(Dt=!0),o.memoizedState=m,o.baseQueue===null&&(o.baseState=m),a.lastRenderedState=m}return[m,h]}function rg(){}function sg(i,o){var a=Be,h=ln(),f=o(),m=!En(h.memoizedState,f);if(m&&(h.memoizedState=f,Dt=!0),h=h.queue,_c(ag.bind(null,a,h,i),[i]),h.getSnapshot!==o||m||st!==null&&st.memoizedState.tag&1){if(a.flags|=2048,vo(9,lg.bind(null,a,h,f,o),void 0,null),ot===null)throw Error(t(349));pr&30||og(a,o,f)}return f}function og(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Be.updateQueue,o===null?(o={lastEffect:null,stores:null},Be.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function lg(i,o,a,h){o.value=a,o.getSnapshot=h,ug(o)&&cg(i)}function ag(i,o,a){return a(function(){ug(o)&&cg(i)})}function ug(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!En(i,a)}catch{return!0}}function cg(i){var o=ei(i,1);o!==null&&Rn(o,i,1,-1)}function hg(i){var o=bn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:i},o.queue=i,i=i.dispatch=Py.bind(null,Be,i),[o.memoizedState,i]}function vo(i,o,a,h){return i={tag:i,create:o,destroy:a,deps:h,next:null},o=Be.updateQueue,o===null?(o={lastEffect:null,stores:null},Be.updateQueue=o,o.lastEffect=i.next=i):(a=o.lastEffect,a===null?o.lastEffect=i.next=i:(h=a.next,a.next=i,i.next=h,o.lastEffect=i)),i}function dg(){return ln().memoizedState}function Wl(i,o,a,h){var f=bn();Be.flags|=i,f.memoizedState=vo(1|o,a,void 0,h===void 0?null:h)}function Bl(i,o,a,h){var f=ln();h=h===void 0?null:h;var m=void 0;if(tt!==null){var v=tt.memoizedState;if(m=v.destroy,h!==null&&dc(h,v.deps)){f.memoizedState=vo(o,a,m,h);return}}Be.flags|=i,f.memoizedState=vo(1|o,a,m,h)}function fg(i,o){return Wl(8390656,8,i,o)}function _c(i,o){return Bl(2048,8,i,o)}function gg(i,o){return Bl(4,2,i,o)}function pg(i,o){return Bl(4,4,i,o)}function mg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function _g(i,o,a){return a=a!=null?a.concat([i]):null,Bl(4,4,mg.bind(null,o,i),a)}function yc(){}function yg(i,o){var a=ln();o=o===void 0?null:o;var h=a.memoizedState;return h!==null&&o!==null&&dc(o,h[1])?h[0]:(a.memoizedState=[i,o],i)}function vg(i,o){var a=ln();o=o===void 0?null:o;var h=a.memoizedState;return h!==null&&o!==null&&dc(o,h[1])?h[0]:(i=i(),a.memoizedState=[i,o],i)}function Eg(i,o,a){return pr&21?(En(a,o)||(a=Hd(),Be.lanes|=a,mr|=a,i.baseState=!0),o):(i.baseState&&(i.baseState=!1,Dt=!0),i.memoizedState=a)}function Ly(i,o){var a=De;De=a!==0&&4>a?a:4,i(!0);var h=hc.transition;hc.transition={};try{i(!1),o()}finally{De=a,hc.transition=h}}function xg(){return ln().memoizedState}function My(i,o,a){var h=Oi(i);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},wg(i))Cg(o,a);else if(a=Jf(i,o,a,h),a!==null){var f=Mt();Rn(a,i,h,f),Sg(a,o,h)}}function Py(i,o,a){var h=Oi(i),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(wg(i))Cg(o,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=o.lastRenderedReducer,m!==null))try{var v=o.lastRenderedState,S=m(v,a);if(f.hasEagerState=!0,f.eagerState=S,En(S,v)){var L=o.interleaved;L===null?(f.next=f,sc(o)):(f.next=L.next,L.next=f),o.interleaved=f;return}}catch{}finally{}a=Jf(i,o,f,h),a!==null&&(f=Mt(),Rn(a,i,h,f),Sg(a,o,h))}}function wg(i){var o=i.alternate;return i===Be||o!==null&&o===Be}function Cg(i,o){mo=Xl=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function Sg(i,o,a){if(a&4194240){var h=o.lanes;h&=i.pendingLanes,a|=h,o.lanes=a,Eu(i,a)}}var Yl={readContext:on,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},Ay={readContext:on,useCallback:function(i,o){return bn().memoizedState=[i,o===void 0?null:o],i},useContext:on,useEffect:fg,useImperativeHandle:function(i,o,a){return a=a!=null?a.concat([i]):null,Wl(4194308,4,mg.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Wl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Wl(4,2,i,o)},useMemo:function(i,o){var a=bn();return o=o===void 0?null:o,i=i(),a.memoizedState=[i,o],i},useReducer:function(i,o,a){var h=bn();return o=a!==void 0?a(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=My.bind(null,Be,i),[h.memoizedState,i]},useRef:function(i){var o=bn();return i={current:i},o.memoizedState=i},useState:hg,useDebugValue:yc,useDeferredValue:function(i){return bn().memoizedState=i},useTransition:function(){var i=hg(!1),o=i[0];return i=Ly.bind(null,i[1]),bn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,a){var h=Be,f=bn();if(Xe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=o(),ot===null)throw Error(t(349));pr&30||og(h,o,a)}f.memoizedState=a;var m={value:a,getSnapshot:o};return f.queue=m,fg(ag.bind(null,h,m,i),[i]),h.flags|=2048,vo(9,lg.bind(null,h,m,a,o),void 0,null),a},useId:function(){var i=bn(),o=ot.identifierPrefix;if(Xe){var a=Jn,h=Qn;a=(h&~(1<<32-vn(h)-1)).toString(32)+a,o=":"+o+"R"+a,a=_o++,0<a&&(o+="H"+a.toString(32)),o+=":"}else a=Iy++,o=":"+o+"r"+a.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},ky={readContext:on,useCallback:yg,useContext:on,useEffect:_c,useImperativeHandle:_g,useInsertionEffect:gg,useLayoutEffect:pg,useMemo:vg,useReducer:pc,useRef:dg,useState:function(){return pc(yo)},useDebugValue:yc,useDeferredValue:function(i){var o=ln();return Eg(o,tt.memoizedState,i)},useTransition:function(){var i=pc(yo)[0],o=ln().memoizedState;return[i,o]},useMutableSource:rg,useSyncExternalStore:sg,useId:xg,unstable_isNewReconciler:!1},Fy={readContext:on,useCallback:yg,useContext:on,useEffect:_c,useImperativeHandle:_g,useInsertionEffect:gg,useLayoutEffect:pg,useMemo:vg,useReducer:mc,useRef:dg,useState:function(){return mc(yo)},useDebugValue:yc,useDeferredValue:function(i){var o=ln();return tt===null?o.memoizedState=i:Eg(o,tt.memoizedState,i)},useTransition:function(){var i=mc(yo)[0],o=ln().memoizedState;return[i,o]},useMutableSource:rg,useSyncExternalStore:sg,useId:xg,unstable_isNewReconciler:!1};function wn(i,o){if(i&&i.defaultProps){o=G({},o),i=i.defaultProps;for(var a in i)o[a]===void 0&&(o[a]=i[a]);return o}return o}function vc(i,o,a,h){o=i.memoizedState,a=a(h,o),a=a==null?o:G({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Vl={isMounted:function(i){return(i=i._reactInternals)?ar(i)===i:!1},enqueueSetState:function(i,o,a){i=i._reactInternals;var h=Mt(),f=Oi(i),m=ti(h,f);m.payload=o,a!=null&&(m.callback=a),o=Ai(i,m,f),o!==null&&(Rn(o,i,f,h),Gl(o,i,f))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var h=Mt(),f=Oi(i),m=ti(h,f);m.tag=1,m.payload=o,a!=null&&(m.callback=a),o=Ai(i,m,f),o!==null&&(Rn(o,i,f,h),Gl(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=Mt(),h=Oi(i),f=ti(a,h);f.tag=2,o!=null&&(f.callback=o),o=Ai(i,f,h),o!==null&&(Rn(o,i,h,a),Gl(o,i,h))}};function Rg(i,o,a,h,f,m,v){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,m,v):o.prototype&&o.prototype.isPureReactComponent?!ro(a,h)||!ro(f,m):!0}function Tg(i,o,a){var h=!1,f=Li,m=o.contextType;return typeof m=="object"&&m!==null?m=on(m):(f=Ft(o)?cr:vt.current,h=o.contextTypes,m=(h=h!=null)?qr(i,f):Li),o=new o(a,m),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Vl,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=f,i.__reactInternalMemoizedMaskedChildContext=m),o}function Ig(i,o,a,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,h),o.state!==i&&Vl.enqueueReplaceState(o,o.state,null)}function Ec(i,o,a,h){var f=i.stateNode;f.props=a,f.state=i.memoizedState,f.refs={},oc(i);var m=o.contextType;typeof m=="object"&&m!==null?f.context=on(m):(m=Ft(o)?cr:vt.current,f.context=qr(i,m)),f.state=i.memoizedState,m=o.getDerivedStateFromProps,typeof m=="function"&&(vc(i,o,m,a),f.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(o=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),o!==f.state&&Vl.enqueueReplaceState(f,f.state,null),bl(i,a,f,h),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308)}function ss(i,o){try{var a="",h=o;do a+=ue(h),h=h.return;while(h);var f=a}catch(m){f=`
Error generating stack: `+m.message+`
`+m.stack}return{value:i,source:o,stack:f,digest:null}}function xc(i,o,a){return{value:i,source:null,stack:a??null,digest:o??null}}function wc(i,o){try{console.error(o.value)}catch(a){setTimeout(function(){throw a})}}var Dy=typeof WeakMap=="function"?WeakMap:Map;function Lg(i,o,a){a=ti(-1,a),a.tag=3,a.payload={element:null};var h=o.value;return a.callback=function(){Jl||(Jl=!0,zc=h),wc(i,o)},a}function Mg(i,o,a){a=ti(-1,a),a.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;a.payload=function(){return h(f)},a.callback=function(){wc(i,o)}}var m=i.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){wc(i,o),typeof h!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var v=o.stack;this.componentDidCatch(o.value,{componentStack:v!==null?v:""})}),a}function Pg(i,o,a){var h=i.pingCache;if(h===null){h=i.pingCache=new Dy;var f=new Set;h.set(o,f)}else f=h.get(o),f===void 0&&(f=new Set,h.set(o,f));f.has(a)||(f.add(a),i=Zy.bind(null,i,o,a),o.then(i,i))}function Ag(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function kg(i,o,a,h,f){return i.mode&1?(i.flags|=65536,i.lanes=f,i):(i===o?i.flags|=65536:(i.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(o=ti(-1,1),o.tag=2,Ai(a,o,1))),a.lanes|=1),i)}var Oy=M.ReactCurrentOwner,Dt=!1;function Lt(i,o,a,h){o.child=i===null?Qf(o,null,a,h):ts(o,i.child,a,h)}function Fg(i,o,a,h,f){a=a.render;var m=o.ref;return is(o,f),h=fc(i,o,a,h,m,f),a=gc(),i!==null&&!Dt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f,ni(i,o,f)):(Xe&&a&&$u(o),o.flags|=1,Lt(i,o,h,f),o.child)}function Dg(i,o,a,h,f){if(i===null){var m=a.type;return typeof m=="function"&&!Bc(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(o.tag=15,o.type=m,Og(i,o,m,h,f)):(i=sa(a.type,null,h,o,o.mode,f),i.ref=o.ref,i.return=o,o.child=i)}if(m=i.child,!(i.lanes&f)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:ro,a(v,h)&&i.ref===o.ref)return ni(i,o,f)}return o.flags|=1,i=zi(m,h),i.ref=o.ref,i.return=o,o.child=i}function Og(i,o,a,h,f){if(i!==null){var m=i.memoizedProps;if(ro(m,h)&&i.ref===o.ref)if(Dt=!1,o.pendingProps=h=m,(i.lanes&f)!==0)i.flags&131072&&(Dt=!0);else return o.lanes=i.lanes,ni(i,o,f)}return Cc(i,o,a,h,f)}function Ng(i,o,a){var h=o.pendingProps,f=h.children,m=i!==null?i.memoizedState:null;if(h.mode==="hidden")if(!(o.mode&1))o.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(ls,Zt),Zt|=a;else{if(!(a&1073741824))return i=m!==null?m.baseLanes|a:a,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,be(ls,Zt),Zt|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,be(ls,Zt),Zt|=h}else m!==null?(h=m.baseLanes|a,o.memoizedState=null):h=a,be(ls,Zt),Zt|=h;return Lt(i,o,f,a),o.child}function zg(i,o){var a=o.ref;(i===null&&a!==null||i!==null&&i.ref!==a)&&(o.flags|=512,o.flags|=2097152)}function Cc(i,o,a,h,f){var m=Ft(a)?cr:vt.current;return m=qr(o,m),is(o,f),a=fc(i,o,a,h,m,f),h=gc(),i!==null&&!Dt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~f,ni(i,o,f)):(Xe&&h&&$u(o),o.flags|=1,Lt(i,o,a,f),o.child)}function Gg(i,o,a,h,f){if(Ft(a)){var m=!0;Pl(o)}else m=!1;if(is(o,f),o.stateNode===null)Zl(i,o),Tg(o,a,h),Ec(o,a,h,f),h=!0;else if(i===null){var v=o.stateNode,S=o.memoizedProps;v.props=S;var L=v.context,O=a.contextType;typeof O=="object"&&O!==null?O=on(O):(O=Ft(a)?cr:vt.current,O=qr(o,O));var V=a.getDerivedStateFromProps,H=typeof V=="function"||typeof v.getSnapshotBeforeUpdate=="function";H||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==h||L!==O)&&Ig(o,v,h,O),Pi=!1;var Y=o.memoizedState;v.state=Y,bl(o,h,v,f),L=o.memoizedState,S!==h||Y!==L||kt.current||Pi?(typeof V=="function"&&(vc(o,a,V,h),L=o.memoizedState),(S=Pi||Rg(o,a,S,h,Y,L,O))?(H||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=L),v.props=h,v.state=L,v.context=O,h=S):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{v=o.stateNode,eg(i,o),S=o.memoizedProps,O=o.type===o.elementType?S:wn(o.type,S),v.props=O,H=o.pendingProps,Y=v.context,L=a.contextType,typeof L=="object"&&L!==null?L=on(L):(L=Ft(a)?cr:vt.current,L=qr(o,L));var se=a.getDerivedStateFromProps;(V=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==H||Y!==L)&&Ig(o,v,h,L),Pi=!1,Y=o.memoizedState,v.state=Y,bl(o,h,v,f);var ae=o.memoizedState;S!==H||Y!==ae||kt.current||Pi?(typeof se=="function"&&(vc(o,a,se,h),ae=o.memoizedState),(O=Pi||Rg(o,a,O,h,Y,ae,L)||!1)?(V||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(h,ae,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(h,ae,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ae),v.props=h,v.state=ae,v.context=L,h=O):(typeof v.componentDidUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===i.memoizedProps&&Y===i.memoizedState||(o.flags|=1024),h=!1)}return Sc(i,o,a,h,m,f)}function Sc(i,o,a,h,f,m){zg(i,o);var v=(o.flags&128)!==0;if(!h&&!v)return f&&Wf(o,a,!1),ni(i,o,m);h=o.stateNode,Oy.current=o;var S=v&&typeof a.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&v?(o.child=ts(o,i.child,null,m),o.child=ts(o,null,S,m)):Lt(i,o,S,m),o.memoizedState=h.state,f&&Wf(o,a,!0),o.child}function bg(i){var o=i.stateNode;o.pendingContext?jf(i,o.pendingContext,o.pendingContext!==o.context):o.context&&jf(i,o.context,!1),lc(i,o.containerInfo)}function Ug(i,o,a,h,f){return es(),ec(f),o.flags|=256,Lt(i,o,a,h),o.child}var Rc={dehydrated:null,treeContext:null,retryLane:0};function Tc(i){return{baseLanes:i,cachePool:null,transitions:null}}function jg(i,o,a){var h=o.pendingProps,f=We.current,m=!1,v=(o.flags&128)!==0,S;if((S=v)||(S=i!==null&&i.memoizedState===null?!1:(f&2)!==0),S?(m=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(f|=1),be(We,f&1),i===null)return Ju(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(o.mode&1?i.data==="$!"?o.lanes=8:o.lanes=1073741824:o.lanes=1,null):(v=h.children,i=h.fallback,m?(h=o.mode,m=o.child,v={mode:"hidden",children:v},!(h&1)&&m!==null?(m.childLanes=0,m.pendingProps=v):m=oa(v,h,0,null),i=Er(i,h,a,null),m.return=o,i.return=o,m.sibling=i,o.child=m,o.child.memoizedState=Tc(a),o.memoizedState=Rc,i):Ic(o,v));if(f=i.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return Ny(i,o,v,h,S,f,a);if(m){m=h.fallback,v=o.mode,f=i.child,S=f.sibling;var L={mode:"hidden",children:h.children};return!(v&1)&&o.child!==f?(h=o.child,h.childLanes=0,h.pendingProps=L,o.deletions=null):(h=zi(f,L),h.subtreeFlags=f.subtreeFlags&14680064),S!==null?m=zi(S,m):(m=Er(m,v,a,null),m.flags|=2),m.return=o,h.return=o,h.sibling=m,o.child=h,h=m,m=o.child,v=i.child.memoizedState,v=v===null?Tc(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=i.childLanes&~a,o.memoizedState=Rc,h}return m=i.child,i=m.sibling,h=zi(m,{mode:"visible",children:h.children}),!(o.mode&1)&&(h.lanes=a),h.return=o,h.sibling=null,i!==null&&(a=o.deletions,a===null?(o.deletions=[i],o.flags|=16):a.push(i)),o.child=h,o.memoizedState=null,h}function Ic(i,o){return o=oa({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Kl(i,o,a,h){return h!==null&&ec(h),ts(o,i.child,null,a),i=Ic(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Ny(i,o,a,h,f,m,v){if(a)return o.flags&256?(o.flags&=-257,h=xc(Error(t(422))),Kl(i,o,v,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(m=h.fallback,f=o.mode,h=oa({mode:"visible",children:h.children},f,0,null),m=Er(m,f,v,null),m.flags|=2,h.return=o,m.return=o,h.sibling=m,o.child=h,o.mode&1&&ts(o,i.child,null,v),o.child.memoizedState=Tc(v),o.memoizedState=Rc,m);if(!(o.mode&1))return Kl(i,o,v,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var S=h.dgst;return h=S,m=Error(t(419)),h=xc(m,h,void 0),Kl(i,o,v,h)}if(S=(v&i.childLanes)!==0,Dt||S){if(h=ot,h!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(h.suspendedLanes|v)?0:f,f!==0&&f!==m.retryLane&&(m.retryLane=f,ei(i,f),Rn(h,i,f,-1))}return Wc(),h=xc(Error(t(421))),Kl(i,o,v,h)}return f.data==="$?"?(o.flags|=128,o.child=i.child,o=Hy.bind(null,i),f._reactRetry=o,null):(i=m.treeContext,Kt=Ti(f.nextSibling),Vt=o,Xe=!0,xn=null,i!==null&&(rn[sn++]=Qn,rn[sn++]=Jn,rn[sn++]=hr,Qn=i.id,Jn=i.overflow,hr=o),o=Ic(o,h.children),o.flags|=4096,o)}function Xg(i,o,a){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),rc(i.return,o,a)}function Lc(i,o,a,h,f){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(m.isBackwards=o,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=f)}function Wg(i,o,a){var h=o.pendingProps,f=h.revealOrder,m=h.tail;if(Lt(i,o,h.children,a),h=We.current,h&2)h=h&1|2,o.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Xg(i,a,o);else if(i.tag===19)Xg(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(be(We,h),!(o.mode&1))o.memoizedState=null;else switch(f){case"forwards":for(a=o.child,f=null;a!==null;)i=a.alternate,i!==null&&Ul(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=o.child,o.child=null):(f=a.sibling,a.sibling=null),Lc(o,!1,f,a,m);break;case"backwards":for(a=null,f=o.child,o.child=null;f!==null;){if(i=f.alternate,i!==null&&Ul(i)===null){o.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}Lc(o,!0,a,null,m);break;case"together":Lc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Zl(i,o){!(o.mode&1)&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function ni(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),mr|=o.lanes,!(a&o.childLanes))return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,a=zi(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=zi(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function zy(i,o,a){switch(o.tag){case 3:bg(o),es();break;case 5:ig(o);break;case 1:Ft(o.type)&&Pl(o);break;case 4:lc(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,f=o.memoizedProps.value;be(Nl,h._currentValue),h._currentValue=f;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(be(We,We.current&1),o.flags|=128,null):a&o.child.childLanes?jg(i,o,a):(be(We,We.current&1),i=ni(i,o,a),i!==null?i.sibling:null);be(We,We.current&1);break;case 19:if(h=(a&o.childLanes)!==0,i.flags&128){if(h)return Wg(i,o,a);o.flags|=128}if(f=o.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),be(We,We.current),h)break;return null;case 22:case 23:return o.lanes=0,Ng(i,o,a)}return ni(i,o,a)}var Bg,Mc,Yg,Vg;Bg=function(i,o){for(var a=o.child;a!==null;){if(a.tag===5||a.tag===6)i.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Mc=function(){},Yg=function(i,o,a,h){var f=i.memoizedProps;if(f!==h){i=o.stateNode,gr(Gn.current);var m=null;switch(a){case"input":f=Vn(i,f),h=Vn(i,h),m=[];break;case"select":f=G({},f,{value:void 0}),h=G({},h,{value:void 0}),m=[];break;case"textarea":f=mn(i,f),h=mn(i,h),m=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=Il)}br(a,h);var v;a=null;for(O in f)if(!h.hasOwnProperty(O)&&f.hasOwnProperty(O)&&f[O]!=null)if(O==="style"){var S=f[O];for(v in S)S.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else O!=="dangerouslySetInnerHTML"&&O!=="children"&&O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&O!=="autoFocus"&&(s.hasOwnProperty(O)?m||(m=[]):(m=m||[]).push(O,null));for(O in h){var L=h[O];if(S=f!=null?f[O]:void 0,h.hasOwnProperty(O)&&L!==S&&(L!=null||S!=null))if(O==="style")if(S){for(v in S)!S.hasOwnProperty(v)||L&&L.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in L)L.hasOwnProperty(v)&&S[v]!==L[v]&&(a||(a={}),a[v]=L[v])}else a||(m||(m=[]),m.push(O,a)),a=L;else O==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,S=S?S.__html:void 0,L!=null&&S!==L&&(m=m||[]).push(O,L)):O==="children"?typeof L!="string"&&typeof L!="number"||(m=m||[]).push(O,""+L):O!=="suppressContentEditableWarning"&&O!=="suppressHydrationWarning"&&(s.hasOwnProperty(O)?(L!=null&&O==="onScroll"&&Ue("scroll",i),m||S===L||(m=[])):(m=m||[]).push(O,L))}a&&(m=m||[]).push("style",a);var O=m;(o.updateQueue=O)&&(o.flags|=4)}},Vg=function(i,o,a,h){a!==h&&(o.flags|=4)};function Eo(i,o){if(!Xe)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function xt(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,h=0;if(o)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=h,i.childLanes=a,o}function Gy(i,o,a){var h=o.pendingProps;switch(qu(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(o),null;case 1:return Ft(o.type)&&Ml(),xt(o),null;case 3:return h=o.stateNode,rs(),je(kt),je(vt),cc(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Dl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&!(o.flags&256)||(o.flags|=1024,xn!==null&&(Uc(xn),xn=null))),Mc(i,o),xt(o),null;case 5:ac(o);var f=gr(po.current);if(a=o.type,i!==null&&o.stateNode!=null)Yg(i,o,a,h,f),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return xt(o),null}if(i=gr(Gn.current),Dl(o)){h=o.stateNode,a=o.type;var m=o.memoizedProps;switch(h[zn]=o,h[uo]=m,i=(o.mode&1)!==0,a){case"dialog":Ue("cancel",h),Ue("close",h);break;case"iframe":case"object":case"embed":Ue("load",h);break;case"video":case"audio":for(f=0;f<oo.length;f++)Ue(oo[f],h);break;case"source":Ue("error",h);break;case"img":case"image":case"link":Ue("error",h),Ue("load",h);break;case"details":Ue("toggle",h);break;case"input":Fn(h,m),Ue("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},Ue("invalid",h);break;case"textarea":Kn(h,m),Ue("invalid",h)}br(a,m),f=null;for(var v in m)if(m.hasOwnProperty(v)){var S=m[v];v==="children"?typeof S=="string"?h.textContent!==S&&(m.suppressHydrationWarning!==!0&&Tl(h.textContent,S,i),f=["children",S]):typeof S=="number"&&h.textContent!==""+S&&(m.suppressHydrationWarning!==!0&&Tl(h.textContent,S,i),f=["children",""+S]):s.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Ue("scroll",h)}switch(a){case"input":St(h),Bt(h,m,!0);break;case"textarea":St(h),He(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=Il)}h=f,o.updateQueue=h,h!==null&&(o.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=zr(a)),i==="http://www.w3.org/1999/xhtml"?a==="script"?(i=v.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=v.createElement(a,{is:h.is}):(i=v.createElement(a),a==="select"&&(v=i,h.multiple?v.multiple=!0:h.size&&(v.size=h.size))):i=v.createElementNS(i,a),i[zn]=o,i[uo]=h,Bg(i,o,!1,!1),o.stateNode=i;e:{switch(v=Ur(a,h),a){case"dialog":Ue("cancel",i),Ue("close",i),f=h;break;case"iframe":case"object":case"embed":Ue("load",i),f=h;break;case"video":case"audio":for(f=0;f<oo.length;f++)Ue(oo[f],i);f=h;break;case"source":Ue("error",i),f=h;break;case"img":case"image":case"link":Ue("error",i),Ue("load",i),f=h;break;case"details":Ue("toggle",i),f=h;break;case"input":Fn(i,h),f=Vn(i,h),Ue("invalid",i);break;case"option":f=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},f=G({},h,{value:void 0}),Ue("invalid",i);break;case"textarea":Kn(i,h),f=mn(i,h),Ue("invalid",i);break;default:f=h}br(a,f),S=f;for(m in S)if(S.hasOwnProperty(m)){var L=S[m];m==="style"?ll(i,L):m==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&sr(i,L)):m==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&or(i,L):typeof L=="number"&&or(i,""+L):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(s.hasOwnProperty(m)?L!=null&&m==="onScroll"&&Ue("scroll",i):L!=null&&D(i,m,L,v))}switch(a){case"input":St(i),Bt(i,h,!1);break;case"textarea":St(i),He(i);break;case"option":h.value!=null&&i.setAttribute("value",""+xe(h.value));break;case"select":i.multiple=!!h.multiple,m=h.value,m!=null?tn(i,!!h.multiple,m,!1):h.defaultValue!=null&&tn(i,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(i.onclick=Il)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return xt(o),null;case 6:if(i&&o.stateNode!=null)Vg(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(a=gr(po.current),gr(Gn.current),Dl(o)){if(h=o.stateNode,a=o.memoizedProps,h[zn]=o,(m=h.nodeValue!==a)&&(i=Vt,i!==null))switch(i.tag){case 3:Tl(h.nodeValue,a,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Tl(h.nodeValue,a,(i.mode&1)!==0)}m&&(o.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[zn]=o,o.stateNode=h}return xt(o),null;case 13:if(je(We),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xe&&Kt!==null&&o.mode&1&&!(o.flags&128))Hf(),es(),o.flags|=98560,m=!1;else if(m=Dl(o),h!==null&&h.dehydrated!==null){if(i===null){if(!m)throw Error(t(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[zn]=o}else es(),!(o.flags&128)&&(o.memoizedState=null),o.flags|=4;xt(o),m=!1}else xn!==null&&(Uc(xn),xn=null),m=!0;if(!m)return o.flags&65536?o:null}return o.flags&128?(o.lanes=a,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,o.mode&1&&(i===null||We.current&1?nt===0&&(nt=3):Wc())),o.updateQueue!==null&&(o.flags|=4),xt(o),null);case 4:return rs(),Mc(i,o),i===null&&lo(o.stateNode.containerInfo),xt(o),null;case 10:return ic(o.type._context),xt(o),null;case 17:return Ft(o.type)&&Ml(),xt(o),null;case 19:if(je(We),m=o.memoizedState,m===null)return xt(o),null;if(h=(o.flags&128)!==0,v=m.rendering,v===null)if(h)Eo(m,!1);else{if(nt!==0||i!==null&&i.flags&128)for(i=o.child;i!==null;){if(v=Ul(i),v!==null){for(o.flags|=128,Eo(m,!1),h=v.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=a,a=o.child;a!==null;)m=a,i=h,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=i,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,i=v.dependencies,m.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),a=a.sibling;return be(We,We.current&1|2),o.child}i=i.sibling}m.tail!==null&&$e()>as&&(o.flags|=128,h=!0,Eo(m,!1),o.lanes=4194304)}else{if(!h)if(i=Ul(v),i!==null){if(o.flags|=128,h=!0,a=i.updateQueue,a!==null&&(o.updateQueue=a,o.flags|=4),Eo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Xe)return xt(o),null}else 2*$e()-m.renderingStartTime>as&&a!==1073741824&&(o.flags|=128,h=!0,Eo(m,!1),o.lanes=4194304);m.isBackwards?(v.sibling=o.child,o.child=v):(a=m.last,a!==null?a.sibling=v:o.child=v,m.last=v)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=$e(),o.sibling=null,a=We.current,be(We,h?a&1|2:a&1),o):(xt(o),null);case 22:case 23:return Xc(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&o.mode&1?Zt&1073741824&&(xt(o),o.subtreeFlags&6&&(o.flags|=8192)):xt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function by(i,o){switch(qu(o),o.tag){case 1:return Ft(o.type)&&Ml(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return rs(),je(kt),je(vt),cc(),i=o.flags,i&65536&&!(i&128)?(o.flags=i&-65537|128,o):null;case 5:return ac(o),null;case 13:if(je(We),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));es()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return je(We),null;case 4:return rs(),null;case 10:return ic(o.type._context),null;case 22:case 23:return Xc(),null;case 24:return null;default:return null}}var Hl=!1,wt=!1,Uy=typeof WeakSet=="function"?WeakSet:Set,le=null;function os(i,o){var a=i.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Ve(i,o,h)}else a.current=null}function Pc(i,o,a){try{a()}catch(h){Ve(i,o,h)}}var Kg=!1;function jy(i,o){if(Xu=pl,i=Rf(),Du(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,S=-1,L=-1,O=0,V=0,H=i,Y=null;t:for(;;){for(var se;H!==a||f!==0&&H.nodeType!==3||(S=v+f),H!==m||h!==0&&H.nodeType!==3||(L=v+h),H.nodeType===3&&(v+=H.nodeValue.length),(se=H.firstChild)!==null;)Y=H,H=se;for(;;){if(H===i)break t;if(Y===a&&++O===f&&(S=v),Y===m&&++V===h&&(L=v),(se=H.nextSibling)!==null)break;H=Y,Y=H.parentNode}H=se}a=S===-1||L===-1?null:{start:S,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Wu={focusedElem:i,selectionRange:a},pl=!1,le=o;le!==null;)if(o=le,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,le=i;else for(;le!==null;){o=le;try{var ae=o.alternate;if(o.flags&1024)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ae!==null){var ce=ae.memoizedProps,qe=ae.memoizedState,k=o.stateNode,P=k.getSnapshotBeforeUpdate(o.elementType===o.type?ce:wn(o.type,ce),qe);k.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var F=o.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Q){Ve(o,o.return,Q)}if(i=o.sibling,i!==null){i.return=o.return,le=i;break}le=o.return}return ae=Kg,Kg=!1,ae}function xo(i,o,a){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&i)===i){var m=f.destroy;f.destroy=void 0,m!==void 0&&Pc(o,a,m)}f=f.next}while(f!==h)}}function $l(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&i)===i){var h=a.create;a.destroy=h()}a=a.next}while(a!==o)}}function Ac(i){var o=i.ref;if(o!==null){var a=i.stateNode;switch(i.tag){case 5:i=a;break;default:i=a}typeof o=="function"?o(i):o.current=i}}function Zg(i){var o=i.alternate;o!==null&&(i.alternate=null,Zg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[zn],delete o[uo],delete o[Ku],delete o[Cy],delete o[Sy])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Hg(i){return i.tag===5||i.tag===3||i.tag===4}function $g(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Hg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function kc(i,o,a){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?a.nodeType===8?a.parentNode.insertBefore(i,o):a.insertBefore(i,o):(a.nodeType===8?(o=a.parentNode,o.insertBefore(i,a)):(o=a,o.appendChild(i)),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Il));else if(h!==4&&(i=i.child,i!==null))for(kc(i,o,a),i=i.sibling;i!==null;)kc(i,o,a),i=i.sibling}function Fc(i,o,a){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(Fc(i,o,a),i=i.sibling;i!==null;)Fc(i,o,a),i=i.sibling}var dt=null,Cn=!1;function ki(i,o,a){for(a=a.child;a!==null;)qg(i,o,a),a=a.sibling}function qg(i,o,a){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(ul,a)}catch{}switch(a.tag){case 5:wt||os(a,o);case 6:var h=dt,f=Cn;dt=null,ki(i,o,a),dt=h,Cn=f,dt!==null&&(Cn?(i=dt,a=a.stateNode,i.nodeType===8?i.parentNode.removeChild(a):i.removeChild(a)):dt.removeChild(a.stateNode));break;case 18:dt!==null&&(Cn?(i=dt,a=a.stateNode,i.nodeType===8?Vu(i.parentNode,a):i.nodeType===1&&Vu(i,a),Qs(i)):Vu(dt,a.stateNode));break;case 4:h=dt,f=Cn,dt=a.stateNode.containerInfo,Cn=!0,ki(i,o,a),dt=h,Cn=f;break;case 0:case 11:case 14:case 15:if(!wt&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var m=f,v=m.destroy;m=m.tag,v!==void 0&&(m&2||m&4)&&Pc(a,o,v),f=f.next}while(f!==h)}ki(i,o,a);break;case 1:if(!wt&&(os(a,o),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(S){Ve(a,o,S)}ki(i,o,a);break;case 21:ki(i,o,a);break;case 22:a.mode&1?(wt=(h=wt)||a.memoizedState!==null,ki(i,o,a),wt=h):ki(i,o,a);break;default:ki(i,o,a)}}function Qg(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var a=i.stateNode;a===null&&(a=i.stateNode=new Uy),o.forEach(function(h){var f=$y.bind(null,i,h);a.has(h)||(a.add(h),h.then(f,f))})}}function Sn(i,o){var a=o.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var m=i,v=o,S=v;e:for(;S!==null;){switch(S.tag){case 5:dt=S.stateNode,Cn=!1;break e;case 3:dt=S.stateNode.containerInfo,Cn=!0;break e;case 4:dt=S.stateNode.containerInfo,Cn=!0;break e}S=S.return}if(dt===null)throw Error(t(160));qg(m,v,f),dt=null,Cn=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(O){Ve(f,o,O)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Jg(o,i),o=o.sibling}function Jg(i,o){var a=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Sn(o,i),Un(i),h&4){try{xo(3,i,i.return),$l(3,i)}catch(ce){Ve(i,i.return,ce)}try{xo(5,i,i.return)}catch(ce){Ve(i,i.return,ce)}}break;case 1:Sn(o,i),Un(i),h&512&&a!==null&&os(a,a.return);break;case 5:if(Sn(o,i),Un(i),h&512&&a!==null&&os(a,a.return),i.flags&32){var f=i.stateNode;try{or(f,"")}catch(ce){Ve(i,i.return,ce)}}if(h&4&&(f=i.stateNode,f!=null)){var m=i.memoizedProps,v=a!==null?a.memoizedProps:m,S=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{S==="input"&&m.type==="radio"&&m.name!=null&&Jt(f,m),Ur(S,v);var O=Ur(S,m);for(v=0;v<L.length;v+=2){var V=L[v],H=L[v+1];V==="style"?ll(f,H):V==="dangerouslySetInnerHTML"?sr(f,H):V==="children"?or(f,H):D(f,V,H,O)}switch(S){case"input":mt(f,m);break;case"textarea":Zn(f,m);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!m.multiple;var se=m.value;se!=null?tn(f,!!m.multiple,se,!1):Y!==!!m.multiple&&(m.defaultValue!=null?tn(f,!!m.multiple,m.defaultValue,!0):tn(f,!!m.multiple,m.multiple?[]:"",!1))}f[uo]=m}catch(ce){Ve(i,i.return,ce)}}break;case 6:if(Sn(o,i),Un(i),h&4){if(i.stateNode===null)throw Error(t(162));f=i.stateNode,m=i.memoizedProps;try{f.nodeValue=m}catch(ce){Ve(i,i.return,ce)}}break;case 3:if(Sn(o,i),Un(i),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Qs(o.containerInfo)}catch(ce){Ve(i,i.return,ce)}break;case 4:Sn(o,i),Un(i);break;case 13:Sn(o,i),Un(i),f=i.child,f.flags&8192&&(m=f.memoizedState!==null,f.stateNode.isHidden=m,!m||f.alternate!==null&&f.alternate.memoizedState!==null||(Nc=$e())),h&4&&Qg(i);break;case 22:if(V=a!==null&&a.memoizedState!==null,i.mode&1?(wt=(O=wt)||V,Sn(o,i),wt=O):Sn(o,i),Un(i),h&8192){if(O=i.memoizedState!==null,(i.stateNode.isHidden=O)&&!V&&i.mode&1)for(le=i,V=i.child;V!==null;){for(H=le=V;le!==null;){switch(Y=le,se=Y.child,Y.tag){case 0:case 11:case 14:case 15:xo(4,Y,Y.return);break;case 1:os(Y,Y.return);var ae=Y.stateNode;if(typeof ae.componentWillUnmount=="function"){h=Y,a=Y.return;try{o=h,ae.props=o.memoizedProps,ae.state=o.memoizedState,ae.componentWillUnmount()}catch(ce){Ve(h,a,ce)}}break;case 5:os(Y,Y.return);break;case 22:if(Y.memoizedState!==null){np(H);continue}}se!==null?(se.return=Y,le=se):np(H)}V=V.sibling}e:for(V=null,H=i;;){if(H.tag===5){if(V===null){V=H;try{f=H.stateNode,O?(m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(S=H.stateNode,L=H.memoizedProps.style,v=L!=null&&L.hasOwnProperty("display")?L.display:null,S.style.display=Gr("display",v))}catch(ce){Ve(i,i.return,ce)}}}else if(H.tag===6){if(V===null)try{H.stateNode.nodeValue=O?"":H.memoizedProps}catch(ce){Ve(i,i.return,ce)}}else if((H.tag!==22&&H.tag!==23||H.memoizedState===null||H===i)&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===i)break e;for(;H.sibling===null;){if(H.return===null||H.return===i)break e;V===H&&(V=null),H=H.return}V===H&&(V=null),H.sibling.return=H.return,H=H.sibling}}break;case 19:Sn(o,i),Un(i),h&4&&Qg(i);break;case 21:break;default:Sn(o,i),Un(i)}}function Un(i){var o=i.flags;if(o&2){try{e:{for(var a=i.return;a!==null;){if(Hg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(or(f,""),h.flags&=-33);var m=$g(i);Fc(i,m,f);break;case 3:case 4:var v=h.stateNode.containerInfo,S=$g(i);kc(i,S,v);break;default:throw Error(t(161))}}catch(L){Ve(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Xy(i,o,a){le=i,ep(i)}function ep(i,o,a){for(var h=(i.mode&1)!==0;le!==null;){var f=le,m=f.child;if(f.tag===22&&h){var v=f.memoizedState!==null||Hl;if(!v){var S=f.alternate,L=S!==null&&S.memoizedState!==null||wt;S=Hl;var O=wt;if(Hl=v,(wt=L)&&!O)for(le=f;le!==null;)v=le,L=v.child,v.tag===22&&v.memoizedState!==null?ip(f):L!==null?(L.return=v,le=L):ip(f);for(;m!==null;)le=m,ep(m),m=m.sibling;le=f,Hl=S,wt=O}tp(i)}else f.subtreeFlags&8772&&m!==null?(m.return=f,le=m):tp(i)}}function tp(i){for(;le!==null;){var o=le;if(o.flags&8772){var a=o.alternate;try{if(o.flags&8772)switch(o.tag){case 0:case 11:case 15:wt||$l(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!wt)if(a===null)h.componentDidMount();else{var f=o.elementType===o.type?a.memoizedProps:wn(o.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=o.updateQueue;m!==null&&ng(o,m,h);break;case 3:var v=o.updateQueue;if(v!==null){if(a=null,o.child!==null)switch(o.child.tag){case 5:a=o.child.stateNode;break;case 1:a=o.child.stateNode}ng(o,v,a)}break;case 5:var S=o.stateNode;if(a===null&&o.flags&4){a=S;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var O=o.alternate;if(O!==null){var V=O.memoizedState;if(V!==null){var H=V.dehydrated;H!==null&&Qs(H)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}wt||o.flags&512&&Ac(o)}catch(Y){Ve(o,o.return,Y)}}if(o===i){le=null;break}if(a=o.sibling,a!==null){a.return=o.return,le=a;break}le=o.return}}function np(i){for(;le!==null;){var o=le;if(o===i){le=null;break}var a=o.sibling;if(a!==null){a.return=o.return,le=a;break}le=o.return}}function ip(i){for(;le!==null;){var o=le;try{switch(o.tag){case 0:case 11:case 15:var a=o.return;try{$l(4,o)}catch(L){Ve(o,a,L)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var f=o.return;try{h.componentDidMount()}catch(L){Ve(o,f,L)}}var m=o.return;try{Ac(o)}catch(L){Ve(o,m,L)}break;case 5:var v=o.return;try{Ac(o)}catch(L){Ve(o,v,L)}}}catch(L){Ve(o,o.return,L)}if(o===i){le=null;break}var S=o.sibling;if(S!==null){S.return=o.return,le=S;break}le=o.return}}var Wy=Math.ceil,ql=M.ReactCurrentDispatcher,Dc=M.ReactCurrentOwner,an=M.ReactCurrentBatchConfig,Pe=0,ot=null,Je=null,ft=0,Zt=0,ls=Ii(0),nt=0,wo=null,mr=0,Ql=0,Oc=0,Co=null,Ot=null,Nc=0,as=1/0,ii=null,Jl=!1,zc=null,Fi=null,ea=!1,Di=null,ta=0,So=0,Gc=null,na=-1,ia=0;function Mt(){return Pe&6?$e():na!==-1?na:na=$e()}function Oi(i){return i.mode&1?Pe&2&&ft!==0?ft&-ft:Ty.transition!==null?(ia===0&&(ia=Hd()),ia):(i=De,i!==0||(i=window.event,i=i===void 0?16:sf(i.type)),i):1}function Rn(i,o,a,h){if(50<So)throw So=0,Gc=null,Error(t(185));Ks(i,a,h),(!(Pe&2)||i!==ot)&&(i===ot&&(!(Pe&2)&&(Ql|=a),nt===4&&Ni(i,ft)),Nt(i,h),a===1&&Pe===0&&!(o.mode&1)&&(as=$e()+500,Al&&Mi()))}function Nt(i,o){var a=i.callbackNode;T0(i,o);var h=dl(i,i===ot?ft:0);if(h===0)a!==null&&Vd(a),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(a!=null&&Vd(a),o===1)i.tag===0?Ry(sp.bind(null,i)):Bf(sp.bind(null,i)),xy(function(){!(Pe&6)&&Mi()}),a=null;else{switch($d(h)){case 1:a=_u;break;case 4:a=Kd;break;case 16:a=al;break;case 536870912:a=Zd;break;default:a=al}a=fp(a,rp.bind(null,i))}i.callbackPriority=o,i.callbackNode=a}}function rp(i,o){if(na=-1,ia=0,Pe&6)throw Error(t(327));var a=i.callbackNode;if(us()&&i.callbackNode!==a)return null;var h=dl(i,i===ot?ft:0);if(h===0)return null;if(h&30||h&i.expiredLanes||o)o=ra(i,h);else{o=h;var f=Pe;Pe|=2;var m=lp();(ot!==i||ft!==o)&&(ii=null,as=$e()+500,yr(i,o));do try{Vy();break}catch(S){op(i,S)}while(!0);nc(),ql.current=m,Pe=f,Je!==null?o=0:(ot=null,ft=0,o=nt)}if(o!==0){if(o===2&&(f=yu(i),f!==0&&(h=f,o=bc(i,f))),o===1)throw a=wo,yr(i,0),Ni(i,h),Nt(i,$e()),a;if(o===6)Ni(i,h);else{if(f=i.current.alternate,!(h&30)&&!By(f)&&(o=ra(i,h),o===2&&(m=yu(i),m!==0&&(h=m,o=bc(i,m))),o===1))throw a=wo,yr(i,0),Ni(i,h),Nt(i,$e()),a;switch(i.finishedWork=f,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:vr(i,Ot,ii);break;case 3:if(Ni(i,h),(h&130023424)===h&&(o=Nc+500-$e(),10<o)){if(dl(i,0)!==0)break;if(f=i.suspendedLanes,(f&h)!==h){Mt(),i.pingedLanes|=i.suspendedLanes&f;break}i.timeoutHandle=Yu(vr.bind(null,i,Ot,ii),o);break}vr(i,Ot,ii);break;case 4:if(Ni(i,h),(h&4194240)===h)break;for(o=i.eventTimes,f=-1;0<h;){var v=31-vn(h);m=1<<v,v=o[v],v>f&&(f=v),h&=~m}if(h=f,h=$e()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*Wy(h/1960))-h,10<h){i.timeoutHandle=Yu(vr.bind(null,i,Ot,ii),h);break}vr(i,Ot,ii);break;case 5:vr(i,Ot,ii);break;default:throw Error(t(329))}}}return Nt(i,$e()),i.callbackNode===a?rp.bind(null,i):null}function bc(i,o){var a=Co;return i.current.memoizedState.isDehydrated&&(yr(i,o).flags|=256),i=ra(i,o),i!==2&&(o=Ot,Ot=a,o!==null&&Uc(o)),i}function Uc(i){Ot===null?Ot=i:Ot.push.apply(Ot,i)}function By(i){for(var o=i;;){if(o.flags&16384){var a=o.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],m=f.getSnapshot;f=f.value;try{if(!En(m(),f))return!1}catch{return!1}}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ni(i,o){for(o&=~Oc,o&=~Ql,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var a=31-vn(o),h=1<<a;i[a]=-1,o&=~h}}function sp(i){if(Pe&6)throw Error(t(327));us();var o=dl(i,0);if(!(o&1))return Nt(i,$e()),null;var a=ra(i,o);if(i.tag!==0&&a===2){var h=yu(i);h!==0&&(o=h,a=bc(i,h))}if(a===1)throw a=wo,yr(i,0),Ni(i,o),Nt(i,$e()),a;if(a===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,vr(i,Ot,ii),Nt(i,$e()),null}function jc(i,o){var a=Pe;Pe|=1;try{return i(o)}finally{Pe=a,Pe===0&&(as=$e()+500,Al&&Mi())}}function _r(i){Di!==null&&Di.tag===0&&!(Pe&6)&&us();var o=Pe;Pe|=1;var a=an.transition,h=De;try{if(an.transition=null,De=1,i)return i()}finally{De=h,an.transition=a,Pe=o,!(Pe&6)&&Mi()}}function Xc(){Zt=ls.current,je(ls)}function yr(i,o){i.finishedWork=null,i.finishedLanes=0;var a=i.timeoutHandle;if(a!==-1&&(i.timeoutHandle=-1,Ey(a)),Je!==null)for(a=Je.return;a!==null;){var h=a;switch(qu(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Ml();break;case 3:rs(),je(kt),je(vt),cc();break;case 5:ac(h);break;case 4:rs();break;case 13:je(We);break;case 19:je(We);break;case 10:ic(h.type._context);break;case 22:case 23:Xc()}a=a.return}if(ot=i,Je=i=zi(i.current,null),ft=Zt=o,nt=0,wo=null,Oc=Ql=mr=0,Ot=Co=null,fr!==null){for(o=0;o<fr.length;o++)if(a=fr[o],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,m=a.pending;if(m!==null){var v=m.next;m.next=f,h.next=v}a.pending=h}fr=null}return i}function op(i,o){do{var a=Je;try{if(nc(),jl.current=Yl,Xl){for(var h=Be.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}Xl=!1}if(pr=0,st=tt=Be=null,mo=!1,_o=0,Dc.current=null,a===null||a.return===null){nt=1,wo=o,Je=null;break}e:{var m=i,v=a.return,S=a,L=o;if(o=ft,S.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var O=L,V=S,H=V.tag;if(!(V.mode&1)&&(H===0||H===11||H===15)){var Y=V.alternate;Y?(V.updateQueue=Y.updateQueue,V.memoizedState=Y.memoizedState,V.lanes=Y.lanes):(V.updateQueue=null,V.memoizedState=null)}var se=Ag(v);if(se!==null){se.flags&=-257,kg(se,v,S,m,o),se.mode&1&&Pg(m,O,o),o=se,L=O;var ae=o.updateQueue;if(ae===null){var ce=new Set;ce.add(L),o.updateQueue=ce}else ae.add(L);break e}else{if(!(o&1)){Pg(m,O,o),Wc();break e}L=Error(t(426))}}else if(Xe&&S.mode&1){var qe=Ag(v);if(qe!==null){!(qe.flags&65536)&&(qe.flags|=256),kg(qe,v,S,m,o),ec(ss(L,S));break e}}m=L=ss(L,S),nt!==4&&(nt=2),Co===null?Co=[m]:Co.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,o&=-o,m.lanes|=o;var k=Lg(m,L,o);tg(m,k);break e;case 1:S=L;var P=m.type,F=m.stateNode;if(!(m.flags&128)&&(typeof P.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Fi===null||!Fi.has(F)))){m.flags|=65536,o&=-o,m.lanes|=o;var Q=Mg(m,S,o);tg(m,Q);break e}}m=m.return}while(m!==null)}up(a)}catch(de){o=de,Je===a&&a!==null&&(Je=a=a.return);continue}break}while(!0)}function lp(){var i=ql.current;return ql.current=Yl,i===null?Yl:i}function Wc(){(nt===0||nt===3||nt===2)&&(nt=4),ot===null||!(mr&268435455)&&!(Ql&268435455)||Ni(ot,ft)}function ra(i,o){var a=Pe;Pe|=2;var h=lp();(ot!==i||ft!==o)&&(ii=null,yr(i,o));do try{Yy();break}catch(f){op(i,f)}while(!0);if(nc(),Pe=a,ql.current=h,Je!==null)throw Error(t(261));return ot=null,ft=0,nt}function Yy(){for(;Je!==null;)ap(Je)}function Vy(){for(;Je!==null&&!_0();)ap(Je)}function ap(i){var o=dp(i.alternate,i,Zt);i.memoizedProps=i.pendingProps,o===null?up(i):Je=o,Dc.current=null}function up(i){var o=i;do{var a=o.alternate;if(i=o.return,o.flags&32768){if(a=by(a,o),a!==null){a.flags&=32767,Je=a;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{nt=6,Je=null;return}}else if(a=Gy(a,o,Zt),a!==null){Je=a;return}if(o=o.sibling,o!==null){Je=o;return}Je=o=i}while(o!==null);nt===0&&(nt=5)}function vr(i,o,a){var h=De,f=an.transition;try{an.transition=null,De=1,Ky(i,o,a,h)}finally{an.transition=f,De=h}return null}function Ky(i,o,a,h){do us();while(Di!==null);if(Pe&6)throw Error(t(327));a=i.finishedWork;var f=i.finishedLanes;if(a===null)return null;if(i.finishedWork=null,i.finishedLanes=0,a===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var m=a.lanes|a.childLanes;if(I0(i,m),i===ot&&(Je=ot=null,ft=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||ea||(ea=!0,fp(al,function(){return us(),null})),m=(a.flags&15990)!==0,a.subtreeFlags&15990||m){m=an.transition,an.transition=null;var v=De;De=1;var S=Pe;Pe|=4,Dc.current=null,jy(i,a),Jg(a,i),fy(Wu),pl=!!Xu,Wu=Xu=null,i.current=a,Xy(a),y0(),Pe=S,De=v,an.transition=m}else i.current=a;if(ea&&(ea=!1,Di=i,ta=f),m=i.pendingLanes,m===0&&(Fi=null),x0(a.stateNode),Nt(i,$e()),o!==null)for(h=i.onRecoverableError,a=0;a<o.length;a++)f=o[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(Jl)throw Jl=!1,i=zc,zc=null,i;return ta&1&&i.tag!==0&&us(),m=i.pendingLanes,m&1?i===Gc?So++:(So=0,Gc=i):So=0,Mi(),null}function us(){if(Di!==null){var i=$d(ta),o=an.transition,a=De;try{if(an.transition=null,De=16>i?16:i,Di===null)var h=!1;else{if(i=Di,Di=null,ta=0,Pe&6)throw Error(t(331));var f=Pe;for(Pe|=4,le=i.current;le!==null;){var m=le,v=m.child;if(le.flags&16){var S=m.deletions;if(S!==null){for(var L=0;L<S.length;L++){var O=S[L];for(le=O;le!==null;){var V=le;switch(V.tag){case 0:case 11:case 15:xo(8,V,m)}var H=V.child;if(H!==null)H.return=V,le=H;else for(;le!==null;){V=le;var Y=V.sibling,se=V.return;if(Zg(V),V===O){le=null;break}if(Y!==null){Y.return=se,le=Y;break}le=se}}}var ae=m.alternate;if(ae!==null){var ce=ae.child;if(ce!==null){ae.child=null;do{var qe=ce.sibling;ce.sibling=null,ce=qe}while(ce!==null)}}le=m}}if(m.subtreeFlags&2064&&v!==null)v.return=m,le=v;else e:for(;le!==null;){if(m=le,m.flags&2048)switch(m.tag){case 0:case 11:case 15:xo(9,m,m.return)}var k=m.sibling;if(k!==null){k.return=m.return,le=k;break e}le=m.return}}var P=i.current;for(le=P;le!==null;){v=le;var F=v.child;if(v.subtreeFlags&2064&&F!==null)F.return=v,le=F;else e:for(v=P;le!==null;){if(S=le,S.flags&2048)try{switch(S.tag){case 0:case 11:case 15:$l(9,S)}}catch(de){Ve(S,S.return,de)}if(S===v){le=null;break e}var Q=S.sibling;if(Q!==null){Q.return=S.return,le=Q;break e}le=S.return}}if(Pe=f,Mi(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(ul,i)}catch{}h=!0}return h}finally{De=a,an.transition=o}}return!1}function cp(i,o,a){o=ss(a,o),o=Lg(i,o,1),i=Ai(i,o,1),o=Mt(),i!==null&&(Ks(i,1,o),Nt(i,o))}function Ve(i,o,a){if(i.tag===3)cp(i,i,a);else for(;o!==null;){if(o.tag===3){cp(o,i,a);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Fi===null||!Fi.has(h))){i=ss(a,i),i=Mg(o,i,1),o=Ai(o,i,1),i=Mt(),o!==null&&(Ks(o,1,i),Nt(o,i));break}}o=o.return}}function Zy(i,o,a){var h=i.pingCache;h!==null&&h.delete(o),o=Mt(),i.pingedLanes|=i.suspendedLanes&a,ot===i&&(ft&a)===a&&(nt===4||nt===3&&(ft&130023424)===ft&&500>$e()-Nc?yr(i,0):Oc|=a),Nt(i,o)}function hp(i,o){o===0&&(i.mode&1?(o=hl,hl<<=1,!(hl&130023424)&&(hl=4194304)):o=1);var a=Mt();i=ei(i,o),i!==null&&(Ks(i,o,a),Nt(i,a))}function Hy(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),hp(i,a)}function $y(i,o){var a=0;switch(i.tag){case 13:var h=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),hp(i,a)}var dp;dp=function(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps||kt.current)Dt=!0;else{if(!(i.lanes&a)&&!(o.flags&128))return Dt=!1,zy(i,o,a);Dt=!!(i.flags&131072)}else Dt=!1,Xe&&o.flags&1048576&&Yf(o,Fl,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Zl(i,o),i=o.pendingProps;var f=qr(o,vt.current);is(o,a),f=fc(null,o,h,i,f,a);var m=gc();return o.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Ft(h)?(m=!0,Pl(o)):m=!1,o.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,oc(o),f.updater=Vl,o.stateNode=f,f._reactInternals=o,Ec(o,h,i,a),o=Sc(null,o,h,!0,m,a)):(o.tag=0,Xe&&m&&$u(o),Lt(null,o,f,a),o=o.child),o;case 16:h=o.elementType;e:{switch(Zl(i,o),i=o.pendingProps,f=h._init,h=f(h._payload),o.type=h,f=o.tag=Qy(h),i=wn(h,i),f){case 0:o=Cc(null,o,h,i,a);break e;case 1:o=Gg(null,o,h,i,a);break e;case 11:o=Fg(null,o,h,i,a);break e;case 14:o=Dg(null,o,h,wn(h.type,i),a);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,f=o.pendingProps,f=o.elementType===h?f:wn(h,f),Cc(i,o,h,f,a);case 1:return h=o.type,f=o.pendingProps,f=o.elementType===h?f:wn(h,f),Gg(i,o,h,f,a);case 3:e:{if(bg(o),i===null)throw Error(t(387));h=o.pendingProps,m=o.memoizedState,f=m.element,eg(i,o),bl(o,h,null,a);var v=o.memoizedState;if(h=v.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},o.updateQueue.baseState=m,o.memoizedState=m,o.flags&256){f=ss(Error(t(423)),o),o=Ug(i,o,h,a,f);break e}else if(h!==f){f=ss(Error(t(424)),o),o=Ug(i,o,h,a,f);break e}else for(Kt=Ti(o.stateNode.containerInfo.firstChild),Vt=o,Xe=!0,xn=null,a=Qf(o,null,h,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(es(),h===f){o=ni(i,o,a);break e}Lt(i,o,h,a)}o=o.child}return o;case 5:return ig(o),i===null&&Ju(o),h=o.type,f=o.pendingProps,m=i!==null?i.memoizedProps:null,v=f.children,Bu(h,f)?v=null:m!==null&&Bu(h,m)&&(o.flags|=32),zg(i,o),Lt(i,o,v,a),o.child;case 6:return i===null&&Ju(o),null;case 13:return jg(i,o,a);case 4:return lc(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=ts(o,null,h,a):Lt(i,o,h,a),o.child;case 11:return h=o.type,f=o.pendingProps,f=o.elementType===h?f:wn(h,f),Fg(i,o,h,f,a);case 7:return Lt(i,o,o.pendingProps,a),o.child;case 8:return Lt(i,o,o.pendingProps.children,a),o.child;case 12:return Lt(i,o,o.pendingProps.children,a),o.child;case 10:e:{if(h=o.type._context,f=o.pendingProps,m=o.memoizedProps,v=f.value,be(Nl,h._currentValue),h._currentValue=v,m!==null)if(En(m.value,v)){if(m.children===f.children&&!kt.current){o=ni(i,o,a);break e}}else for(m=o.child,m!==null&&(m.return=o);m!==null;){var S=m.dependencies;if(S!==null){v=m.child;for(var L=S.firstContext;L!==null;){if(L.context===h){if(m.tag===1){L=ti(-1,a&-a),L.tag=2;var O=m.updateQueue;if(O!==null){O=O.shared;var V=O.pending;V===null?L.next=L:(L.next=V.next,V.next=L),O.pending=L}}m.lanes|=a,L=m.alternate,L!==null&&(L.lanes|=a),rc(m.return,a,o),S.lanes|=a;break}L=L.next}}else if(m.tag===10)v=m.type===o.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(t(341));v.lanes|=a,S=v.alternate,S!==null&&(S.lanes|=a),rc(v,a,o),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===o){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}Lt(i,o,f.children,a),o=o.child}return o;case 9:return f=o.type,h=o.pendingProps.children,is(o,a),f=on(f),h=h(f),o.flags|=1,Lt(i,o,h,a),o.child;case 14:return h=o.type,f=wn(h,o.pendingProps),f=wn(h.type,f),Dg(i,o,h,f,a);case 15:return Og(i,o,o.type,o.pendingProps,a);case 17:return h=o.type,f=o.pendingProps,f=o.elementType===h?f:wn(h,f),Zl(i,o),o.tag=1,Ft(h)?(i=!0,Pl(o)):i=!1,is(o,a),Tg(o,h,f),Ec(o,h,f,a),Sc(null,o,h,!0,i,a);case 19:return Wg(i,o,a);case 22:return Ng(i,o,a)}throw Error(t(156,o.tag))};function fp(i,o){return Yd(i,o)}function qy(i,o,a,h){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(i,o,a,h){return new qy(i,o,a,h)}function Bc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Qy(i){if(typeof i=="function")return Bc(i)?1:0;if(i!=null){if(i=i.$$typeof,i===$)return 11;if(i===ee)return 14}return 2}function zi(i,o){var a=i.alternate;return a===null?(a=un(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&14680064,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a}function sa(i,o,a,h,f,m){var v=2;if(h=i,typeof i=="function")Bc(i)&&(v=1);else if(typeof i=="string")v=5;else e:switch(i){case K:return Er(a.children,f,m,o);case b:v=8,f|=8;break;case W:return i=un(12,a,o,f|2),i.elementType=W,i.lanes=m,i;case te:return i=un(13,a,o,f),i.elementType=te,i.lanes=m,i;case J:return i=un(19,a,o,f),i.elementType=J,i.lanes=m,i;case Z:return oa(a,f,m,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:v=10;break e;case ie:v=9;break e;case $:v=11;break e;case ee:v=14;break e;case ne:v=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=un(v,a,o,f),o.elementType=i,o.type=h,o.lanes=m,o}function Er(i,o,a,h){return i=un(7,i,h,o),i.lanes=a,i}function oa(i,o,a,h){return i=un(22,i,h,o),i.elementType=Z,i.lanes=a,i.stateNode={isHidden:!1},i}function Yc(i,o,a){return i=un(6,i,null,o),i.lanes=a,i}function Vc(i,o,a){return o=un(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Jy(i,o,a,h,f){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vu(0),this.expirationTimes=vu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vu(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Kc(i,o,a,h,f,m,v,S,L){return i=new Jy(i,o,a,S,L),o===1?(o=1,m===!0&&(o|=8)):o=0,m=un(3,null,null,o),i.current=m,m.stateNode=i,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},oc(m),i}function e1(i,o,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:h==null?null:""+h,children:i,containerInfo:o,implementation:a}}function gp(i){if(!i)return Li;i=i._reactInternals;e:{if(ar(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Ft(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var a=i.type;if(Ft(a))return Xf(i,a,o)}return o}function pp(i,o,a,h,f,m,v,S,L){return i=Kc(a,h,!0,i,f,m,v,S,L),i.context=gp(null),a=i.current,h=Mt(),f=Oi(a),m=ti(h,f),m.callback=o??null,Ai(a,m,f),i.current.lanes=f,Ks(i,f,h),Nt(i,h),i}function la(i,o,a,h){var f=o.current,m=Mt(),v=Oi(f);return a=gp(a),o.context===null?o.context=a:o.pendingContext=a,o=ti(m,v),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Ai(f,o,v),i!==null&&(Rn(i,f,v,m),Gl(i,f,v)),v}function aa(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function mp(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function Zc(i,o){mp(i,o),(i=i.alternate)&&mp(i,o)}function t1(){return null}var _p=typeof reportError=="function"?reportError:function(i){console.error(i)};function Hc(i){this._internalRoot=i}ua.prototype.render=Hc.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));la(i,o,null,null)},ua.prototype.unmount=Hc.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;_r(function(){la(null,i,null,null)}),o[$n]=null}};function ua(i){this._internalRoot=i}ua.prototype.unstable_scheduleHydration=function(i){if(i){var o=Jd();i={blockedOn:null,target:i,priority:o};for(var a=0;a<Ci.length&&o!==0&&o<Ci[a].priority;a++);Ci.splice(a,0,i),a===0&&nf(i)}};function $c(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ca(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function yp(){}function n1(i,o,a,h,f){if(f){if(typeof h=="function"){var m=h;h=function(){var O=aa(v);m.call(O)}}var v=pp(o,h,i,0,null,!1,!1,"",yp);return i._reactRootContainer=v,i[$n]=v.current,lo(i.nodeType===8?i.parentNode:i),_r(),v}for(;f=i.lastChild;)i.removeChild(f);if(typeof h=="function"){var S=h;h=function(){var O=aa(L);S.call(O)}}var L=Kc(i,0,!1,null,null,!1,!1,"",yp);return i._reactRootContainer=L,i[$n]=L.current,lo(i.nodeType===8?i.parentNode:i),_r(function(){la(o,L,a,h)}),L}function ha(i,o,a,h,f){var m=a._reactRootContainer;if(m){var v=m;if(typeof f=="function"){var S=f;f=function(){var L=aa(v);S.call(L)}}la(o,v,i,f)}else v=n1(a,o,i,f,h);return aa(v)}qd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var a=Vs(o.pendingLanes);a!==0&&(Eu(o,a|1),Nt(o,$e()),!(Pe&6)&&(as=$e()+500,Mi()))}break;case 13:_r(function(){var h=ei(i,1);if(h!==null){var f=Mt();Rn(h,i,1,f)}}),Zc(i,1)}},xu=function(i){if(i.tag===13){var o=ei(i,134217728);if(o!==null){var a=Mt();Rn(o,i,134217728,a)}Zc(i,134217728)}},Qd=function(i){if(i.tag===13){var o=Oi(i),a=ei(i,o);if(a!==null){var h=Mt();Rn(a,i,o,h)}Zc(i,o)}},Jd=function(){return De},ef=function(i,o){var a=De;try{return De=i,o()}finally{De=a}},Xs=function(i,o,a){switch(o){case"input":if(mt(i,a),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<a.length;o++){var h=a[o];if(h!==i&&h.form===i.form){var f=Ll(h);if(!f)throw Error(t(90));kn(h),mt(h,f)}}}break;case"textarea":Zn(i,a);break;case"select":o=a.value,o!=null&&tn(i,!!a.multiple,o,!1)}},Bs=jc,Rt=_r;var i1={usingClientEntryPoint:!1,Events:[co,Hr,Ll,vi,Ws,jc]},Ro={findFiberByHostInstance:ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r1={bundleType:Ro.bundleType,version:Ro.version,rendererPackageName:Ro.rendererPackageName,rendererConfig:Ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Wd(i),i===null?null:i.stateNode},findFiberByHostInstance:Ro.findFiberByHostInstance||t1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{ul=da.inject(r1),Nn=da}catch{}}return zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i1,zt.createPortal=function(i,o){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(o))throw Error(t(200));return e1(i,o,null,a)},zt.createRoot=function(i,o){if(!$c(i))throw Error(t(299));var a=!1,h="",f=_p;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(f=o.onRecoverableError)),o=Kc(i,1,!1,null,null,a,!1,h,f),i[$n]=o.current,lo(i.nodeType===8?i.parentNode:i),new Hc(o)},zt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Wd(o),i=i===null?null:i.stateNode,i},zt.flushSync=function(i){return _r(i)},zt.hydrate=function(i,o,a){if(!ca(o))throw Error(t(200));return ha(null,i,o,!0,a)},zt.hydrateRoot=function(i,o,a){if(!$c(i))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,m="",v=_p;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),o=pp(o,null,i,1,a??null,f,!1,m,v),i[$n]=o.current,lo(i),h)for(i=0;i<h.length;i++)a=h[i],f=a._getVersion,f=f(a._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[a,f]:o.mutableSourceEagerHydrationData.push(a,f);return new ua(o)},zt.render=function(i,o,a){if(!ca(o))throw Error(t(200));return ha(null,i,o,!1,a)},zt.unmountComponentAtNode=function(i){if(!ca(i))throw Error(t(40));return i._reactRootContainer?(_r(function(){ha(null,null,i,!1,function(){i._reactRootContainer=null,i[$n]=null})}),!0):!1},zt.unstable_batchedUpdates=jc,zt.unstable_renderSubtreeIntoContainer=function(i,o,a,h){if(!ca(a))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ha(i,o,a,!1,h)},zt.version="18.3.1-next-f1338f8080-20240426",zt}var Ip;function g1(){if(Ip)return Jc.exports;Ip=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Jc.exports=f1(),Jc.exports}var Lp;function p1(){if(Lp)return fa;Lp=1;var r=g1();return fa.createRoot=r.createRoot,fa.hydrateRoot=r.hydrateRoot,fa}var m1=p1();class Bn{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const Ms={PROPERTYCHANGE:"propertychange"};class Za{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function _1(r,e,t){let n,s;t=t||ui;let l=0,u=r.length,c=!1;for(;l<u;)n=l+(u-l>>1),s=+t(r[n],e),s<0?l=n+1:(u=n,c=!s);return c?l:~l}function ui(r,e){return r>e?1:r<e?-1:0}function y1(r,e){return r<e?1:r>e?-1:0}function Vh(r,e,t){if(r[0]<=e)return 0;const n=r.length;if(e<=r[n-1])return n-1;if(typeof t=="function"){for(let s=1;s<n;++s){const l=r[s];if(l===e)return s;if(l<e)return t(e,r[s-1],l)>0?s-1:s}return n-1}if(t>0){for(let s=1;s<n;++s)if(r[s]<e)return s-1;return n-1}if(t<0){for(let s=1;s<n;++s)if(r[s]<=e)return s;return n-1}for(let s=1;s<n;++s){if(r[s]==e)return s;if(r[s]<e)return r[s-1]-e<e-r[s]?s-1:s}return n-1}function v1(r,e,t){for(;e<t;){const n=r[e];r[e]=r[t],r[t]=n,++e,--t}}function fn(r,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let s=0;s<n;s++)r[r.length]=t[s]}function ir(r,e){const t=r.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(r[n]!==e[n])return!1;return!0}function E1(r,e,t){const n=e||ui;return r.every(function(s,l){if(l===0)return!0;const u=n(r[l-1],s);return!(u>0||u===0)})}function Mr(){return!0}function qo(){return!1}function Ps(){}function Bm(r){let e,t,n;return function(){const s=Array.prototype.slice.call(arguments);return(!t||this!==n||!ir(s,t))&&(n=this,t=s,e=r.apply(this,arguments)),e}}function x1(r){function e(){let t;try{t=r()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function bs(r){for(const e in r)delete r[e]}function Pr(r){let e;for(e in r)return!1;return!e}class Ha extends Za{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),s=n[e]||(n[e]=[]);s.includes(t)||s.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,s=this.listeners_&&this.listeners_[n];if(!s)return;const l=t?new Bn(e):e;l.target||(l.target=this.eventTarget_||this);const u=this.dispatching_||(this.dispatching_={}),c=this.pendingRemovals_||(this.pendingRemovals_={});n in u||(u[n]=0,c[n]=0),++u[n];let d;for(let g=0,p=s.length;g<p;++g)if("handleEvent"in s[g]?d=s[g].handleEvent(l):d=s[g].call(this,l),d===!1||l.propagationStopped){d=!1;break}if(--u[n]===0){let g=c[n];for(delete c[n];g--;)this.removeEventListener(n,Ps);delete u[n]}return d}disposeInternal(){this.listeners_&&bs(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const s=n.indexOf(t);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[s]=Ps,++this.pendingRemovals_[e]):(n.splice(s,1),n.length===0&&delete this.listeners_[e]))}}const Ee={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Le(r,e,t,n,s){if(s){const u=t;t=function(){r.removeEventListener(e,t),u.apply(n??this,arguments)}}else n&&n!==r&&(t=t.bind(n));const l={target:r,type:e,listener:t};return r.addEventListener(e,t),l}function Ma(r,e,t,n){return Le(r,e,t,n,!0)}function Ge(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),bs(r))}class Qo extends Ha{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ee.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=Le(this,e[l],t);return s}return Le(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const s=e.length;n=new Array(s);for(let l=0;l<s;++l)n[l]=Ma(this,e[l],t)}else n=Ma(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)w1(n);else if(Array.isArray(e))for(let s=0,l=e.length;s<l;++s)this.removeEventListener(e[s],t);else this.removeEventListener(e,t)}}Qo.prototype.on;Qo.prototype.once;Qo.prototype.un;function w1(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)Ge(r[e]);else Ge(r)}function ve(){throw new Error("Unimplemented abstract method.")}let C1=0;function Te(r){return r.ol_uid||(r.ol_uid=String(++C1))}class Mp extends Bn{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class Yn extends Qo{constructor(e){super(),this.on,this.once,this.un,Te(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new Mp(n,e,t)),n=Ms.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new Mp(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const s=this.values_||(this.values_={});if(n)s[e]=t;else{const l=s[e];s[e]=t,l!==t&&this.notify(e,l)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],Pr(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}const ht={ADD:"add",REMOVE:"remove"},Pp={LENGTH:"length"};class ga extends Bn{constructor(e,t,n){super(e),this.element=t,this.index=n}}class Ln extends Yn{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,s=this.array_.length;n<s;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Pp.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new ga(ht.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,s=t.length;n<s;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new ga(ht.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const s=this.array_[e];this.array_[e]=t,this.dispatchEvent(new ga(ht.REMOVE,s,e)),this.dispatchEvent(new ga(ht.ADD,t,e))}updateLength_(){this.set(Pp.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,s=this.array_.length;n<s;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}function ke(r,e){if(!r)throw new Error(e)}class As extends Yn{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new As(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ge(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=Le(e,Ee.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?S1(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function S1(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(ke(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}new Array(6);function Pn(){return[1,0,0,1,0,0]}function R1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function ct(r,e){const t=e[0],n=e[1];return e[0]=r[0]*t+r[2]*n+r[4],e[1]=r[1]*t+r[3]*n+r[5],e}function fi(r,e,t,n,s,l,u,c){const d=Math.sin(l),g=Math.cos(l);return r[0]=n*g,r[1]=s*d,r[2]=-n*d,r[3]=s*g,r[4]=u*n*g-c*n*d+e,r[5]=u*s*d+c*s*g+t,r}function Ym(r,e){const t=T1(e);ke(t!==0,"Transformation matrix cannot be inverted");const n=e[0],s=e[1],l=e[2],u=e[3],c=e[4],d=e[5];return r[0]=u/t,r[1]=-s/t,r[2]=-l/t,r[3]=n/t,r[4]=(l*d-u*c)/t,r[5]=-(n*d-s*c)/t,r}function T1(r){return r[0]*r[3]-r[1]*r[2]}const Ap=[1e6,1e6,1e6,1e6,2,2];function I1(r){return"matrix("+r.map((t,n)=>Math.round(t*Ap[n])/Ap[n]).join(", ")+")"}const ut={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function kp(r){const e=Qt();for(let t=0,n=r.length;t<n;++t)zo(e,r[t]);return e}function Kh(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function Vm(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function Fr(r,e,t){let n,s;return e<r[0]?n=r[0]-e:r[2]<e?n=e-r[2]:n=0,t<r[1]?s=r[1]-t:r[3]<t?s=t-r[3]:s=0,n*n+s*s}function ks(r,e){return Zh(r,e[0],e[1])}function ws(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function Zh(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function Ch(r,e){const t=r[0],n=r[1],s=r[2],l=r[3],u=e[0],c=e[1];let d=ut.UNKNOWN;return u<t?d=d|ut.LEFT:u>s&&(d=d|ut.RIGHT),c<n?d=d|ut.BELOW:c>l&&(d=d|ut.ABOVE),d===ut.UNKNOWN&&(d=ut.INTERSECTING),d}function Qt(){return[1/0,1/0,-1/0,-1/0]}function Qi(r,e,t,n,s){return s?(s[0]=r,s[1]=e,s[2]=t,s[3]=n,s):[r,e,t,n]}function Jo(r){return Qi(1/0,1/0,-1/0,-1/0,r)}function Km(r,e){const t=r[0],n=r[1];return Qi(t,n,t,n,e)}function Hh(r,e,t,n,s){const l=Jo(s);return Zm(l,r,e,t,n)}function Go(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function $h(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function zo(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function Zm(r,e,t,n,s){for(;t<n;t+=s)L1(r,e[t],e[t+1]);return r}function L1(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function Hm(r,e){let t;return t=e($a(r)),t||(t=e(qa(r)),t)||(t=e(Qa(r)),t)||(t=e(gi(r)),t)?t:!1}function bo(r){let e=0;return Ja(r)||(e=Me(r)*rt(r)),e}function $a(r){return[r[0],r[1]]}function qa(r){return[r[2],r[1]]}function Ji(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function M1(r,e){let t;if(e==="bottom-left")t=$a(r);else if(e==="bottom-right")t=qa(r);else if(e==="top-left")t=gi(r);else if(e==="top-right")t=Qa(r);else throw new Error("Invalid corner");return t}function Sh(r,e,t,n,s){const[l,u,c,d,g,p,_,y]=P1(r,e,t,n);return Qi(Math.min(l,c,g,_),Math.min(u,d,p,y),Math.max(l,c,g,_),Math.max(u,d,p,y),s)}function P1(r,e,t,n){const s=e*n[0]/2,l=e*n[1]/2,u=Math.cos(t),c=Math.sin(t),d=s*u,g=s*c,p=l*u,_=l*c,y=r[0],x=r[1];return[y-d+_,x-g-p,y-d-_,x-g+p,y+d-_,x+g+p,y+d+_,x+g-p,y-d+_,x-g-p]}function rt(r){return r[3]-r[1]}function Mn(r,e,t){const n=t||Qt();return Ut(r,e)?(r[0]>e[0]?n[0]=r[0]:n[0]=e[0],r[1]>e[1]?n[1]=r[1]:n[1]=e[1],r[2]<e[2]?n[2]=r[2]:n[2]=e[2],r[3]<e[3]?n[3]=r[3]:n[3]=e[3]):Jo(n),n}function gi(r){return[r[0],r[3]]}function Qa(r){return[r[2],r[3]]}function Me(r){return r[2]-r[0]}function Ut(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function Ja(r){return r[2]<r[0]||r[3]<r[1]}function A1(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function k1(r,e,t){let n=!1;const s=Ch(r,e),l=Ch(r,t);if(s===ut.INTERSECTING||l===ut.INTERSECTING)n=!0;else{const u=r[0],c=r[1],d=r[2],g=r[3],p=e[0],_=e[1],y=t[0],x=t[1],E=(x-_)/(y-p);let w,C;l&ut.ABOVE&&!(s&ut.ABOVE)&&(w=y-(x-g)/E,n=w>=u&&w<=d),!n&&l&ut.RIGHT&&!(s&ut.RIGHT)&&(C=x-(y-d)*E,n=C>=c&&C<=g),!n&&l&ut.BELOW&&!(s&ut.BELOW)&&(w=y-(x-c)/E,n=w>=u&&w<=d),!n&&l&ut.LEFT&&!(s&ut.LEFT)&&(C=x-(y-u)*E,n=C>=c&&C<=g)}return n}function $m(r,e){const t=e.getExtent(),n=Ji(r);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const s=Me(t),u=Math.floor((n[0]-t[0])/s)*s;r[0]-=u,r[2]-=u}return r}function qh(r,e,t){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[n[0],r[1],n[2],r[3]]];$m(r,e);const s=Me(n);if(Me(r)>s&&!t)return[[n[0],r[1],n[2],r[3]]];if(r[0]<n[0])return[[r[0]+s,r[1],n[2],r[3]],[n[0],r[1],r[2],r[3]]];if(r[2]>n[2])return[[r[0],r[1],n[2],r[3]],[n[0],r[1],r[2]-s,r[3]]]}return[r]}const Qh={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Jh{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Qh[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const el=6378137,Cs=Math.PI*el,F1=[-Cs,-Cs,Cs,Cs],D1=[-180,-85,180,85],pa=el*Math.log(Math.tan(Math.PI/2));class cs extends Jh{constructor(e){super({code:e,units:"m",extent:F1,global:!0,worldExtent:D1,getPointResolution:function(t,n){return t/Math.cosh(n[1]/el)}})}}const Fp=[new cs("EPSG:3857"),new cs("EPSG:102100"),new cs("EPSG:102113"),new cs("EPSG:900913"),new cs("http://www.opengis.net/def/crs/EPSG/0/3857"),new cs("http://www.opengis.net/gml/srs/epsg.xml#3857")];function O1(r,e,t,n){const s=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(s));for(let l=0;l<s;l+=n){e[l]=Cs*r[l]/180;let u=el*Math.log(Math.tan(Math.PI*(+r[l+1]+90)/360));u>pa?u=pa:u<-pa&&(u=-pa),e[l+1]=u}return e}function N1(r,e,t,n){const s=r.length;t=t>1?t:2,n=n??t,e===void 0&&(t>2?e=r.slice():e=new Array(s));for(let l=0;l<s;l+=n)e[l]=180*r[l]/Cs,e[l+1]=360*Math.atan(Math.exp(r[l+1]/el))/Math.PI-90;return e}const z1=6378137,Dp=[-180,-90,180,90],G1=Math.PI*z1/180;class xr extends Jh{constructor(e,t){super({code:e,units:"degrees",extent:Dp,axisOrientation:t,global:!0,metersPerUnit:G1,worldExtent:Dp})}}const Op=[new xr("CRS:84"),new xr("EPSG:4326","neu"),new xr("urn:ogc:def:crs:OGC:1.3:CRS84"),new xr("urn:ogc:def:crs:OGC:2:84"),new xr("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new xr("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new xr("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Rh={};function b1(r){return Rh[r]||Rh[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function U1(r,e){Rh[r]=e}let Rs={};function Uo(r,e,t){const n=r.getCode(),s=e.getCode();n in Rs||(Rs[n]={}),Rs[n][s]=t}function nh(r,e){return r in Rs&&e in Rs[r]?Rs[r][e]:null}function Ke(r,e,t){return Math.min(Math.max(r,e),t)}function j1(r,e,t,n,s,l){const u=s-t,c=l-n;if(u!==0||c!==0){const d=((r-t)*u+(e-n)*c)/(u*u+c*c);d>1?(t=s,n=l):d>0&&(t+=u*d,n+=c*d)}return Lr(r,e,t,n)}function Lr(r,e,t,n){const s=t-r,l=n-e;return s*s+l*l}function X1(r){const e=r.length;for(let n=0;n<e;n++){let s=n,l=Math.abs(r[n][n]);for(let c=n+1;c<e;c++){const d=Math.abs(r[c][n]);d>l&&(l=d,s=c)}if(l===0)return null;const u=r[s];r[s]=r[n],r[n]=u;for(let c=n+1;c<e;c++){const d=-r[c][n]/r[n][n];for(let g=n;g<e+1;g++)n==g?r[c][g]=0:r[c][g]+=d*r[n][g]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=r[n][e]/r[n][n];for(let s=n-1;s>=0;s--)r[s][e]-=r[s][n]*t[n]}return t}function Np(r){return r*180/Math.PI}function $i(r){return r*Math.PI/180}function Ts(r,e){const t=r%e;return t*e<0?t+e:t}function $t(r,e,t){return r+t*(e-r)}function ed(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function ma(r,e){return Math.floor(ed(r,e))}function _a(r,e){return Math.ceil(ed(r,e))}function Th(r,e,t){if(r>=e&&r<t)return r;const n=t-e;return((r-e)%n+n)%n+e}function W1(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function Pa(r,e){let t=!0;for(let n=r.length-1;n>=0;--n)if(r[n]!=e[n]){t=!1;break}return t}function td(r,e){const t=Math.cos(e),n=Math.sin(e),s=r[0]*t-r[1]*n,l=r[1]*t+r[0]*n;return r[0]=s,r[1]=l,r}function B1(r,e){return r[0]*=e,r[1]*=e,r}function qm(r,e){if(e.canWrapX()){const t=Me(e.getExtent()),n=Y1(r,e,t);n&&(r[0]-=n*t)}return r}function Y1(r,e,t){const n=e.getExtent();let s=0;return e.canWrapX()&&(r[0]<n[0]||r[0]>n[2])&&(t=t||Me(n),s=Math.floor((r[0]-n[0])/t)),s}const V1=63710088e-1;function zp(r,e,t){t=t||V1;const n=$i(r[1]),s=$i(e[1]),l=(s-n)/2,u=$i(e[0]-r[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(n)*Math.cos(s);return 2*t*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}const Aa=.9996,gn=.00669438,eu=gn*gn,tu=eu*gn,Sr=gn/(1-gn),Gp=Math.sqrt(1-gn),Fs=(1-Gp)/(1+Gp),Qm=Fs*Fs,nd=Qm*Fs,id=nd*Fs,Jm=id*Fs,e_=1-gn/4-3*eu/64-5*tu/256,K1=3*gn/8+3*eu/32+45*tu/1024,Z1=15*eu/256+45*tu/1024,H1=35*tu/3072,$1=3/2*Fs-27/32*nd+269/512*Jm,q1=21/16*Qm-55/32*id,Q1=151/96*nd-417/128*Jm,J1=1097/512*id,ka=6378137;function ev(r,e,t){const n=r-5e5,u=(t.north?e:e-1e7)/Aa/(ka*e_),c=u+$1*Math.sin(2*u)+q1*Math.sin(4*u)+Q1*Math.sin(6*u)+J1*Math.sin(8*u),d=Math.sin(c),g=d*d,p=Math.cos(c),_=d/p,y=_*_,x=y*y,E=1-gn*g,w=Math.sqrt(1-gn*g),C=ka/w,I=(1-gn)/E,T=Sr*p**2,D=T*T,M=n/(C*Aa),A=M*M,X=A*M,K=X*M,b=K*M,W=b*M,B=c-_/I*(A/2-K/24*(5+3*y+10*T-4*D-9*Sr))+W/720*(61+90*y+298*T+45*x-252*Sr-3*D);let ie=(M-X/6*(1+2*y+T)+b/120*(5-2*T+28*y-3*D+8*Sr+24*x))/p;return ie=Th(ie+$i(t_(t.number)),-Math.PI,Math.PI),[Np(ie),Np(B)]}const bp=-80,Up=84,tv=-180,nv=180;function iv(r,e,t){r=Th(r,tv,nv),e<bp?e=bp:e>Up&&(e=Up);const n=$i(e),s=Math.sin(n),l=Math.cos(n),u=s/l,c=u*u,d=c*c,g=$i(r),p=t_(t.number),_=$i(p),y=ka/Math.sqrt(1-gn*s**2),x=Sr*l**2,E=l*Th(g-_,-Math.PI,Math.PI),w=E*E,C=w*E,I=C*E,T=I*E,D=T*E,M=ka*(e_*n-K1*Math.sin(2*n)+Z1*Math.sin(4*n)-H1*Math.sin(6*n)),A=Aa*y*(E+C/6*(1-c+x)+T/120*(5-18*c+d+72*x-58*Sr))+5e5;let X=Aa*(M+y*u*(w/2+I/24*(5-c+9*x+4*x**2)+D/720*(61-58*c+d+600*x-330*Sr)));return t.north||(X+=1e7),[A,X]}function t_(r){return(r-1)*6-180+3}const rv=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function n_(r){let e=0;for(const s of rv){const l=r.match(s);if(l){e=parseInt(l[1]);break}}if(!e)return null;let t=0,n=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(n=!0,t=e-32600),t?{number:t,north:n}:null}function jp(r,e){return function(t,n,s,l){const u=t.length;s=s>1?s:2,l=l??s,n||(s>2?n=t.slice():n=new Array(u));for(let c=0;c<u;c+=l){const d=t[c],g=t[c+1],p=r(d,g,e);n[c]=p[0],n[c+1]=p[1]}return n}}function sv(r){return n_(r)?new Jh({code:r,units:"m"}):null}function ov(r){const e=n_(r.getCode());return e?{forward:jp(iv,e),inverse:jp(ev,e)}:null}function i_(...r){console.warn(...r)}const lv=[ov],av=[sv];let Ih=!0;function uv(r){Ih=!1}function rd(r,e){if(e!==void 0){for(let t=0,n=r.length;t<n;++t)e[t]=r[t];e=e}else e=r.slice();return e}function Lh(r){U1(r.getCode(),r),Uo(r,r,rd)}function cv(r){r.forEach(Lh)}function Ze(r){if(typeof r!="string")return r;const e=b1(r);if(e)return e;for(const t of av){const n=t(r);if(n)return n}return null}function Xp(r,e,t,n){r=Ze(r);let s;const l=r.getPointResolutionFunc();if(l)s=l(e,t);else{const u=r.getUnits();if(u=="degrees"&&!n||n=="degrees")s=e;else{const c=od(r,Ze("EPSG:4326"));if(!c&&u!=="degrees")s=e*r.getMetersPerUnit();else{let g=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];g=c(g,g,2);const p=zp(g.slice(0,2),g.slice(2,4)),_=zp(g.slice(4,6),g.slice(6,8));s=(p+_)/2}const d=r.getMetersPerUnit();d!==void 0&&(s/=d)}}return s}function Wp(r){cv(r),r.forEach(function(e){r.forEach(function(t){e!==t&&Uo(e,t,rd)})})}function hv(r,e,t,n){r.forEach(function(s){e.forEach(function(l){Uo(s,l,t),Uo(l,s,n)})})}function sd(r,e){return r?typeof r=="string"?Ze(r):r:Ze(e)}function dv(r){return function(e,t,n,s){const l=e.length;n=n!==void 0?n:2,s=s??n,t=t!==void 0?t:new Array(l);for(let u=0;u<l;u+=s){const c=r(e.slice(u,u+n)),d=c.length;for(let g=0,p=s;g<p;++g)t[u+g]=g>=d?e[u+g]:c[g]}return t}}function La(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||od(r,e)===rd)&&t}function od(r,e){const t=r.getCode(),n=e.getCode();let s=nh(t,n);if(s)return s;let l=null,u=null;for(const d of lv)l||(l=d(r)),u||(u=d(e));if(!l&&!u)return null;const c="EPSG:4326";if(u)if(l)s=ih(l.inverse,u.forward);else{const d=nh(t,c);d&&(s=ih(d,u.forward))}else{const d=nh(c,n);d&&(s=ih(l.inverse,d))}return s&&(Lh(r),Lh(e),Uo(r,e,s)),s}function ih(r,e){return function(t,n,s,l){return n=r(t,n,s,l),e(n,n,s,l)}}function jo(r,e){const t=Ze(r),n=Ze(e);return od(t,n)}function ld(r,e,t){const n=jo(e,t);if(!n){const s=Ze(e).getCode(),l=Ze(t).getCode();throw new Error(`No transform available between ${s} and ${l}`)}return n(r,void 0,r.length)}function Mh(r,e){return r}function oi(r,e){return Ih&&!Pa(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(Ih=!1,i_("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function r_(r,e){return r}function Ki(r,e){return r}function fv(){Wp(Fp),Wp(Op),hv(Op,Fp,O1,N1)}fv();function qi(r,e,t,n,s,l,u){l=l||[],u=u||2;let c=0;for(let d=e;d<t;d+=n){const g=r[d],p=r[d+1];l[c++]=s[0]*g+s[2]*p+s[4],l[c++]=s[1]*g+s[3]*p+s[5];for(let _=2;_<u;_++)l[c++]=r[d+_]}return l&&l.length!=c&&(l.length=c),l}function s_(r,e,t,n,s,l,u){u=u||[];const c=Math.cos(s),d=Math.sin(s),g=l[0],p=l[1];let _=0;for(let y=e;y<t;y+=n){const x=r[y]-g,E=r[y+1]-p;u[_++]=g+x*c-E*d,u[_++]=p+x*d+E*c;for(let w=y+2;w<y+n;++w)u[_++]=r[w]}return u&&u.length!=_&&(u.length=_),u}function gv(r,e,t,n,s,l,u,c){c=c||[];const d=u[0],g=u[1];let p=0;for(let _=e;_<t;_+=n){const y=r[_]-d,x=r[_+1]-g;c[p++]=d+s*y,c[p++]=g+l*x;for(let E=_+2;E<_+n;++E)c[p++]=r[E]}return c&&c.length!=p&&(c.length=p),c}function pv(r,e,t,n,s,l,u){u=u||[];let c=0;for(let d=e;d<t;d+=n){u[c++]=r[d]+s,u[c++]=r[d+1]+l;for(let g=d+2;g<d+n;++g)u[c++]=r[g]}return u&&u.length!=c&&(u.length=c),u}const Bp=Pn();class o_ extends Yn{constructor(){super(),this.extent_=Qt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Bm((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return ve()}closestPointXY(e,t,n,s){return ve()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ve()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Jo(t),this.extentRevision_=this.getRevision()}return A1(this.extent_,e)}rotate(e,t){ve()}scale(e,t,n){ve()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ve()}getType(){return ve()}applyTransform(e){ve()}intersectsExtent(e){return ve()}translate(e,t){ve()}transform(e,t){const n=Ze(e),s=n.getUnits()=="tile-pixels"?function(l,u,c){const d=n.getExtent(),g=n.getWorldExtent(),p=rt(g)/rt(d);fi(Bp,g[0],g[3],p,-p,0,0,0);const _=qi(l,0,l.length,c,Bp,u),y=jo(n,t);return y?y(_,_,c):_}:jo(n,t);return this.applyTransform(s),this}}class Dr extends o_{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Hh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ve()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=Yp(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){ve()}setLayout(e,t,n){let s;if(e)s=Yp(e);else{for(let l=0;l<n;++l){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}s=t.length,e=Or(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();s_(n,0,n.length,s,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=Ji(this.getExtent()));const s=this.getFlatCoordinates();if(s){const l=this.getStride();gv(s,0,s.length,l,e,t,n,s),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const s=this.getStride();pv(n,0,n.length,s,e,t,n),this.changed()}}}function Or(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function Yp(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function mv(r,e,t){const n=r.getFlatCoordinates();if(!n)return null;const s=r.getStride();return qi(n,0,n.length,s,e,t)}function Vp(r,e,t,n,s,l,u){const c=r[e],d=r[e+1],g=r[t]-c,p=r[t+1]-d;let _;if(g===0&&p===0)_=e;else{const y=((s-c)*g+(l-d)*p)/(g*g+p*p);if(y>1)_=t;else if(y>0){for(let x=0;x<n;++x)u[x]=$t(r[e+x],r[t+x],y);u.length=n;return}else _=e}for(let y=0;y<n;++y)u[y]=r[_+y];u.length=n}function ad(r,e,t,n,s){let l=r[e],u=r[e+1];for(e+=n;e<t;e+=n){const c=r[e],d=r[e+1],g=Lr(l,u,c,d);g>s&&(s=g),l=c,u=d}return s}function ud(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];s=ad(r,e,c,n,s),e=c}return s}function _v(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];s=ud(r,e,c,n,s),e=c[c.length-1]}return s}function cd(r,e,t,n,s,l,u,c,d,g,p){if(e==t)return g;let _,y;if(s===0){if(y=Lr(u,c,r[e],r[e+1]),y<g){for(_=0;_<n;++_)d[_]=r[e+_];return d.length=n,y}return g}p=p||[NaN,NaN];let x=e+n;for(;x<t;)if(Vp(r,x-n,x,n,u,c,p),y=Lr(u,c,p[0],p[1]),y<g){for(g=y,_=0;_<n;++_)d[_]=p[_];d.length=n,x+=n}else x+=n*Math.max((Math.sqrt(y)-Math.sqrt(g))/s|0,1);if(l&&(Vp(r,t-n,e,n,u,c,p),y=Lr(u,c,p[0],p[1]),y<g)){for(g=y,_=0;_<n;++_)d[_]=p[_];d.length=n}return g}function hd(r,e,t,n,s,l,u,c,d,g,p){p=p||[NaN,NaN];for(let _=0,y=t.length;_<y;++_){const x=t[_];g=cd(r,e,x,n,s,l,u,c,d,g,p),e=x}return g}function yv(r,e,t,n,s,l,u,c,d,g,p){p=p||[NaN,NaN];for(let _=0,y=t.length;_<y;++_){const x=t[_];g=hd(r,e,x,n,s,l,u,c,d,g,p),e=x[x.length-1]}return g}function vv(r,e,t,n){for(let s=0,l=t.length;s<l;++s)r[e++]=t[s];return e}function nu(r,e,t,n){for(let s=0,l=t.length;s<l;++s){const u=t[s];for(let c=0;c<n;++c)r[e++]=u[c]}return e}function tl(r,e,t,n,s){s=s||[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=nu(r,e,t[u],n);s[l++]=d,e=d}return s.length=l,s}function l_(r,e,t,n,s){s=s||[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=tl(r,e,t[u],n,s[l]);d.length===0&&(d[0]=e),s[l++]=d,e=d[d.length-1]}return s.length=l,s}function iu(r,e,t,n,s,l,u){const c=(t-e)/n;if(c<3){for(;e<t;e+=n)l[u++]=r[e],l[u++]=r[e+1];return u}const d=new Array(c);d[0]=1,d[c-1]=1;const g=[e,t-n];let p=0;for(;g.length>0;){const _=g.pop(),y=g.pop();let x=0;const E=r[y],w=r[y+1],C=r[_],I=r[_+1];for(let T=y+n;T<_;T+=n){const D=r[T],M=r[T+1],A=j1(D,M,E,w,C,I);A>x&&(p=T,x=A)}x>s&&(d[(p-e)/n]=1,y+n<p&&g.push(y,p),p+n<_&&g.push(p,_))}for(let _=0;_<c;++_)d[_]&&(l[u++]=r[e+_*n],l[u++]=r[e+_*n+1]);return u}function a_(r,e,t,n,s,l,u,c){for(let d=0,g=t.length;d<g;++d){const p=t[d];u=iu(r,e,p,n,s,l,u),c.push(u),e=p}return u}function Cr(r,e){return e*Math.round(r/e)}function Ev(r,e,t,n,s,l,u){if(e==t)return u;let c=Cr(r[e],s),d=Cr(r[e+1],s);e+=n,l[u++]=c,l[u++]=d;let g,p;do if(g=Cr(r[e],s),p=Cr(r[e+1],s),e+=n,e==t)return l[u++]=g,l[u++]=p,u;while(g==c&&p==d);for(;e<t;){const _=Cr(r[e],s),y=Cr(r[e+1],s);if(e+=n,_==g&&y==p)continue;const x=g-c,E=p-d,w=_-c,C=y-d;if(x*C==E*w&&(x<0&&w<x||x==w||x>0&&w>x)&&(E<0&&C<E||E==C||E>0&&C>E)){g=_,p=y;continue}l[u++]=g,l[u++]=p,c=g,d=p,g=_,p=y}return l[u++]=g,l[u++]=p,u}function dd(r,e,t,n,s,l,u,c){for(let d=0,g=t.length;d<g;++d){const p=t[d];u=Ev(r,e,p,n,s,l,u),c.push(u),e=p}return u}function xv(r,e,t,n,s,l,u,c){for(let d=0,g=t.length;d<g;++d){const p=t[d],_=[];u=dd(r,e,p,n,s,l,u,_),c.push(_),e=p[p.length-1]}return u}function Zi(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let u=e;u<t;u+=n)s[l++]=r.slice(u,u+n);return s.length=l,s}function Xo(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u];s[l++]=Zi(r,e,d,n,s[l]),e=d}return s.length=l,s}function Ph(r,e,t,n,s){s=s!==void 0?s:[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u];s[l++]=d.length===1&&d[0]===e?[]:Xo(r,e,d,n,s[l]),e=d[d.length-1]}return s.length=l,s}function u_(r,e,t,n){let s=0;const l=r[t-n],u=r[t-n+1];let c=0,d=0;for(;e<t;e+=n){const g=r[e]-l,p=r[e+1]-u;s+=d*g-c*p,c=g,d=p}return s/2}function c_(r,e,t,n){let s=0;for(let l=0,u=t.length;l<u;++l){const c=t[l];s+=u_(r,e,c,n),e=c}return s}function wv(r,e,t,n){let s=0;for(let l=0,u=t.length;l<u;++l){const c=t[l];s+=c_(r,e,c,n),e=c[c.length-1]}return s}class Wo extends Dr{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new Wo(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,s))}getArea(){return u_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Zi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=iu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Wo(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=nu(this.flatCoordinates,0,e,this.stride),this.changed()}}class Ds extends Dr{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Ds(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){const l=this.flatCoordinates,u=Lr(e,t,l[0],l[1]);if(u<s){const c=this.stride;for(let d=0;d<c;++d)n[d]=l[d];return n.length=c,u}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Km(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Zh(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vv(this.flatCoordinates,0,e,this.stride),this.changed()}}function Cv(r,e,t,n,s){return!Hm(s,function(u){return!Rr(r,e,t,n,u[0],u[1])})}function Rr(r,e,t,n,s,l){let u=0,c=r[t-n],d=r[t-n+1];for(;e<t;e+=n){const g=r[e],p=r[e+1];d<=l?p>l&&(g-c)*(l-d)-(s-c)*(p-d)>0&&u++:p<=l&&(g-c)*(l-d)-(s-c)*(p-d)<0&&u--,c=g,d=p}return u!==0}function fd(r,e,t,n,s,l){if(t.length===0||!Rr(r,e,t[0],n,s,l))return!1;for(let u=1,c=t.length;u<c;++u)if(Rr(r,t[u-1],t[u],n,s,l))return!1;return!0}function Sv(r,e,t,n,s,l){if(t.length===0)return!1;for(let u=0,c=t.length;u<c;++u){const d=t[u];if(fd(r,e,d,n,s,l))return!0;e=d[d.length-1]}return!1}function gd(r,e,t,n,s,l,u){let c,d,g,p,_,y,x;const E=s[l+1],w=[];for(let T=0,D=t.length;T<D;++T){const M=t[T];for(p=r[M-n],y=r[M-n+1],c=e;c<M;c+=n)_=r[c],x=r[c+1],(E<=y&&x<=E||y<=E&&E<=x)&&(g=(E-y)/(x-y)*(_-p)+p,w.push(g)),p=_,y=x}let C=NaN,I=-1/0;for(w.sort(ui),p=w[0],c=1,d=w.length;c<d;++c){_=w[c];const T=Math.abs(_-p);T>I&&(g=(p+_)/2,fd(r,e,t,n,g,E)&&(C=g,I=T)),p=_}return isNaN(C)&&(C=s[l]),u?(u.push(C,E,I),u):[C,E,I]}function h_(r,e,t,n,s){let l=[];for(let u=0,c=t.length;u<c;++u){const d=t[u];l=gd(r,e,d,n,s,2*u,l),e=d[d.length-1]}return l}function d_(r,e,t,n,s){let l;for(e+=n;e<t;e+=n)if(l=s(r.slice(e-n,e),r.slice(e,e+n)),l)return l;return!1}function ru(r,e,t,n,s){const l=Zm(Qt(),r,e,t,n);return Ut(s,l)?ws(s,l)||l[0]>=s[0]&&l[2]<=s[2]||l[1]>=s[1]&&l[3]<=s[3]?!0:d_(r,e,t,n,function(u,c){return k1(s,u,c)}):!1}function Rv(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){if(ru(r,e,t[l],n,s))return!0;e=t[l]}return!1}function f_(r,e,t,n,s){return!!(ru(r,e,t,n,s)||Rr(r,e,t,n,s[0],s[1])||Rr(r,e,t,n,s[0],s[3])||Rr(r,e,t,n,s[2],s[1])||Rr(r,e,t,n,s[2],s[3]))}function g_(r,e,t,n,s){if(!f_(r,e,t[0],n,s))return!1;if(t.length===1)return!0;for(let l=1,u=t.length;l<u;++l)if(Cv(r,t[l-1],t[l],n,s)&&!ru(r,t[l-1],t[l],n,s))return!1;return!0}function Tv(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];if(g_(r,e,c,n,s))return!0;e=c[c.length-1]}return!1}function Iv(r,e,t,n){for(;e<t-n;){for(let s=0;s<n;++s){const l=r[e+s];r[e+s]=r[t-n+s],r[t-n+s]=l}e+=n,t-=n}}function pd(r,e,t,n){let s=0,l=r[t-n],u=r[t-n+1];for(;e<t;e+=n){const c=r[e],d=r[e+1];s+=(c-l)*(d+u),l=c,u=d}return s===0?void 0:s>0}function md(r,e,t,n,s){s=s!==void 0?s:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],d=pd(r,e,c,n);if(l===0){if(s&&d||!s&&!d)return!1}else if(s&&!d||!s&&d)return!1;e=c}return!0}function p_(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l){const c=t[l];if(!md(r,e,c,n,s))return!1;c.length&&(e=c[c.length-1])}return!0}function Fa(r,e,t,n,s){s=s!==void 0?s:!1;for(let l=0,u=t.length;l<u;++l){const c=t[l],d=pd(r,e,c,n);(l===0?s&&d||!s&&!d:s&&!d||!s&&d)&&Iv(r,e,c,n),e=c}return e}function Ah(r,e,t,n,s){for(let l=0,u=t.length;l<u;++l)e=Fa(r,e,t[l],n,s);return e}function Lv(r,e){const t=[];let n=0,s=0,l;for(let u=0,c=e.length;u<c;++u){const d=e[u],g=pd(r,n,d,2);if(l===void 0&&(l=g),g===l)t.push(e.slice(s,u+1));else{if(t.length===0)continue;t[t.length-1].push(e[s])}s=u+1,n=d}return t}class er extends Dr{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?fn(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new er(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ud(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return fd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return c_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Fa(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,Xo(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=Ji(this.getExtent());this.flatInteriorPoint_=gd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ds(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Wo(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,s=[];let l=0;for(let u=0,c=n.length;u<c;++u){const d=n[u],g=new Wo(t.slice(l,d),e);s.push(g),l=d}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;md(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Fa(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=dd(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new er(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return g_(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=tl(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function Kp(r){if(Ja(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],n=r[2],s=r[3],l=[e,t,e,s,n,s,n,t,e,t];return new er(l,"XY",[l.length])}const hn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Ce={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4},Bo={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var gt={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};gt.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};gt.max=gt.whitepoint[2].D65;gt.rgb=function(r,e){e=e||gt.whitepoint[2].E;var t=r[0]/e[0],n=r[1]/e[1],s=r[2]/e[2],l,u,c;return l=t*3.240969941904521+n*-1.537383177570093+s*-.498610760293,u=t*-.96924363628087+n*1.87596750150772+s*.041555057407175,c=t*.055630079696993+n*-.20397695888897+s*1.056971514242878,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l=l*12.92,u=u>.0031308?1.055*Math.pow(u,1/2.4)-.055:u=u*12.92,c=c>.0031308?1.055*Math.pow(c,1/2.4)-.055:c=c*12.92,l=Math.min(Math.max(0,l),1),u=Math.min(Math.max(0,u),1),c=Math.min(Math.max(0,c),1),[l*255,u*255,c*255]};Bo.xyz=function(r,e){var t=r[0]/255,n=r[1]/255,s=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var l=t*.41239079926595+n*.35758433938387+s*.18048078840183,u=t*.21263900587151+n*.71516867876775+s*.072192315360733,c=t*.019330818715591+n*.11919477979462+s*.95053215224966;return e=e||gt.whitepoint[2].E,[l*e[0],u*e[1],c*e[2]]};const _d={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var n,s,l,u,c,d,g,p,_,y,x,E,w;if(l=r[0],u=r[1],c=r[2],l===0)return[0,0,0];var C=.0011070564598794539;return e=e||"D65",t=t||2,_=gt.whitepoint[t][e][0],y=gt.whitepoint[t][e][1],x=gt.whitepoint[t][e][2],E=4*_/(_+15*y+3*x),w=9*y/(_+15*y+3*x),n=u/(13*l)+E||0,s=c/(13*l)+w||0,g=l>8?y*Math.pow((l+16)/116,3):y*l*C,d=g*9*n/(4*s)||0,p=g*(12-3*n-20*s)/(4*s)||0,[d,g,p]}};gt.luv=function(r,e,t){var n,s,l,u,c,d,g,p,_,y,x,E,w,C=.008856451679035631,I=903.2962962962961;e=e||"D65",t=t||2,_=gt.whitepoint[t][e][0],y=gt.whitepoint[t][e][1],x=gt.whitepoint[t][e][2],E=4*_/(_+15*y+3*x),w=9*y/(_+15*y+3*x),d=r[0],g=r[1],p=r[2],n=4*d/(d+15*g+3*p)||0,s=9*g/(d+15*g+3*p)||0;var T=g/y;return l=T<=C?I*T:116*Math.pow(T,1/3)-16,u=13*l*(n-E),c=13*l*(s-w),[l,u,c]};var m_={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],n=r[2],s,l,u;return u=n/360*2*Math.PI,s=t*Math.cos(u),l=t*Math.sin(u),[e,s,l]},xyz:function(r){return _d.xyz(m_.luv(r))}};_d.lchuv=function(r){var e=r[0],t=r[1],n=r[2],s=Math.sqrt(t*t+n*n),l=Math.atan2(n,t),u=l*360/2/Math.PI;return u<0&&(u+=360),[e,s,u]};gt.lchuv=function(r){return _d.lchuv(gt.luv(r))};const Zp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var Hp={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Mv(r){var p,_;var e,t=[],n=1,s;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),Zp[r])t=Zp[r].slice(),s="rgb";else if(r==="transparent")n=0,s="rgb",t=[0,0,0];else if(r[0]==="#"){var l=r.slice(1),u=l.length,c=u<=4;n=1,c?(t=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],u===4&&(n=parseInt(l[3]+l[3],16)/255)):(t=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],u===8&&(n=parseInt(l[6]+l[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var d=e[1];s=d.replace(/a$/,"");var g=s==="cmyk"?4:s==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=t.shift()),t=t.map(function(y,x){if(y[y.length-1]==="%")return y=parseFloat(y)/100,x===3?y:s==="rgb"?y*255:s[0]==="h"||s[0]==="l"&&!x?y*100:s==="lab"?y*125:s==="lch"?x<2?y*150:y*360:s[0]==="o"&&!x?y:s==="oklab"?y*.4:s==="oklch"?x<2?y*.4:y*360:y;if(s[x]==="h"||x===2&&s[s.length-1]==="h"){if(Hp[y]!==void 0)return Hp[y];if(y.endsWith("deg"))return parseFloat(y);if(y.endsWith("turn"))return parseFloat(y)*360;if(y.endsWith("grad"))return parseFloat(y)*360/400;if(y.endsWith("rad"))return parseFloat(y)*180/Math.PI}return y==="none"?0:parseFloat(y)}),n=t.length>g?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(y){return parseFloat(y)}),s=((_=(p=r.match(/([a-z])/ig))==null?void 0:p.join(""))==null?void 0:_.toLowerCase())||"rgb");return{space:s,values:t,alpha:n}}const rh={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,n=r[2]/100,s,l,u,c,d,g=0;if(t===0)return d=n*255,[d,d,d];for(l=n<.5?n*(1+t):n+t-n*t,s=2*n-l,c=[0,0,0];g<3;)u=e+1/3*-(g-1),u<0?u++:u>1&&u--,d=6*u<1?s+(l-s)*6*u:2*u<1?l:3*u<2?s+(l-s)*(2/3-u)*6:s,c[g++]=d*255;return c}};Bo.hsl=function(r){var e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(e,t,n),l=Math.max(e,t,n),u=l-s,c,d,g;return l===s?c=0:e===l?c=(t-n)/u:t===l?c=2+(n-e)/u:n===l&&(c=4+(e-t)/u),c=Math.min(c*60,360),c<0&&(c+=360),g=(s+l)/2,l===s?d=0:g<=.5?d=u/(l+s):d=u/(2-l-s),[c,d*100,g*100]};function Pv(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=Mv(r);if(!t.space)return[];const n=t.space[0]==="h"?rh.min:Bo.min,s=t.space[0]==="h"?rh.max:Bo.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),s[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),s[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),s[2]),t.space[0]==="h"&&(e=rh.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const yd=[NaN,NaN,NaN,0];function Av(r){return typeof r=="string"?r:Ed(r)}const kv=1024,Io={};let sh=0;function Fv(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function $p(r){const e=gt.lchuv(Bo.xyz(r));return e[3]=r[3],e}function Dv(r){const e=gt.rgb(m_.xyz(r));return e[3]=r[3],e}function vd(r){if(r==="none")return yd;if(Io.hasOwnProperty(r))return Io[r];if(sh>=kv){let t=0;for(const n in Io)t++&3||(delete Io[n],--sh)}const e=Pv(r);if(e.length!==4)throw new Error('failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+r+'" as color');return __(e),Io[r]=e,++sh,e}function Os(r){return Array.isArray(r)?r:vd(r)}function __(r){return r[0]=Ke(r[0]+.5|0,0,255),r[1]=Ke(r[1]+.5|0,0,255),r[2]=Ke(r[2]+.5|0,0,255),r[3]=Ke(r[3],0,1),r}function Ed(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let n=r[2];n!=(n|0)&&(n=n+.5|0);const s=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+e+","+t+","+n+","+s+")"}const tr=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Ov=tr.includes("firefox"),Nv=tr.includes("safari")&&!tr.includes("chrom");Nv&&(tr.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(tr));const zv=tr.includes("webkit")&&!tr.includes("edge"),y_=tr.includes("macintosh"),v_=typeof devicePixelRatio<"u"?devicePixelRatio:1,xd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,E_=typeof Image<"u"&&Image.prototype.decode,x_=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function et(r,e,t,n){let s;return t&&t.length?s=t.shift():xd?s=new OffscreenCanvas(r||300,e||300):s=document.createElement("canvas"),r&&(s.width=r),e&&(s.height=e),s.getContext("2d",n)}let oh;function Da(){return oh||(oh=et(1,1)),oh}function su(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function Oa(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function Gv(r){for(;r.lastChild;)r.lastChild.remove()}function bv(r,e){const t=r.childNodes;for(let n=0;;++n){const s=t[n],l=e[n];if(!s&&!l)break;if(s!==l){if(!s){r.appendChild(l);continue}if(!l){r.removeChild(s),--n;continue}r.insertBefore(l,s)}}}function Uv(r,e,t){const n=r;let s=!0,l=!1,u=!1;const c=[Ma(n,Ee.LOAD,function(){u=!0,l||e()})];return n.src&&E_?(l=!0,n.decode().then(function(){s&&e()}).catch(function(d){s&&(u?e():t())})):c.push(Ma(n,Ee.ERROR,t)),function(){s=!1,c.forEach(Ge)}}function jv(r,e){return new Promise((t,n)=>{function s(){u(),t(r)}function l(){u(),n(new Error("Image load error"))}function u(){r.removeEventListener("load",s),r.removeEventListener("error",l)}r.addEventListener("load",s),r.addEventListener("error",l)})}function Xv(r,e){return e&&(r.src=e),r.src&&E_?new Promise((t,n)=>r.decode().then(()=>t(r)).catch(s=>r.complete&&r.width?t(r):n(s))):jv(r)}class Wv{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,n){const s=lh(e,t,n);return s in this.cache_?this.cache_[s]:null}getPattern(e,t,n){const s=lh(e,t,n);return s in this.patternCache_?this.patternCache_[s]:null}set(e,t,n,s,l){const u=lh(e,t,n),c=u in this.cache_;this.cache_[u]=s,l&&(s.getImageState()===Ce.IDLE&&s.load(),s.getImageState()===Ce.LOADING?s.ready().then(()=>{this.patternCache_[u]=Da().createPattern(s.getImage(1),"repeat")}):this.patternCache_[u]=Da().createPattern(s.getImage(1),"repeat")),c||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function lh(r,e,t){const n=t?Os(t):"null";return e+":"+r+":"+n}const dn=new Wv;let Lo=null;class w_ extends Ha{constructor(e,t,n,s,l){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=l,this.imageState_=s===void 0?Ce.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ce.LOADED){Lo||(Lo=et(1,1,void 0,{willReadFrequently:!0})),Lo.drawImage(this.image_,0,0);try{Lo.getImageData(0,0,1,1),this.tainted_=!1}catch{Lo=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ee.CHANGE)}handleImageError_(){this.imageState_=Ce.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ce.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=et(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ce.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ce.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Xv(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ce.LOADED)return;const t=this.image_,n=et(Math.ceil(t.width*e),Math.ceil(t.height*e)),s=n.canvas;n.scale(e,e),n.drawImage(t,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Av(this.color_),n.fillRect(0,0,s.width/e,s.height/e),n.globalCompositeOperation="destination-in",n.drawImage(t,0,0),this.canvas_[e]=s}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)e();else{const t=()=>{(this.imageState_===Ce.LOADED||this.imageState_===Ce.ERROR)&&(this.removeEventListener(Ee.CHANGE,t),e())};this.addEventListener(Ee.CHANGE,t)}})),this.ready_}}function wd(r,e,t,n,s,l){let u=e===void 0?void 0:dn.get(e,t,s);return u||(u=new w_(r,r&&"src"in r?r.src||void 0:e,t,n,s),dn.set(e,t,s,u,l)),l&&u&&!dn.getPattern(e,t,s)&&dn.set(e,t,s,u,l),u}class pi{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new pi({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=wd(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===Ce.IDLE&&t.load(),t.getImageState()===Ce.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Te(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Os(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function Na(r,e,t,n,s,l,u){let c,d;const g=(t-e)/n;if(g===1)c=e;else if(g===2)c=e,d=s;else if(g!==0){let p=r[e],_=r[e+1],y=0;const x=[0];for(let C=e+n;C<t;C+=n){const I=r[C],T=r[C+1];y+=Math.sqrt((I-p)*(I-p)+(T-_)*(T-_)),x.push(y),p=I,_=T}const E=s*y,w=_1(x,E);w<0?(d=(E-x[-w-2])/(x[-w-1]-x[-w-2]),c=e+(-w-2)*n):c=e+w*n}u=u>1?u:2,l=l||new Array(u);for(let p=0;p<u;++p)l[p]=c===void 0?NaN:d===void 0?r[c+p]:$t(r[c+p],r[c+n+p],d);return l}function kh(r,e,t,n,s,l){if(t==e)return null;let u;if(s<r[e+n-1])return l?(u=r.slice(e,e+n),u[n-1]=s,u):null;if(r[t-1]<s)return l?(u=r.slice(t-n,t),u[n-1]=s,u):null;if(s==r[e+n-1])return r.slice(e,e+n);let c=e/n,d=t/n;for(;c<d;){const y=c+d>>1;s<r[(y+1)*n-1]?d=y:c=y+1}const g=r[c*n-1];if(s==g)return r.slice((c-1)*n,(c-1)*n+n);const p=r[(c+1)*n-1],_=(s-g)/(p-g);u=[];for(let y=0;y<n-1;++y)u.push($t(r[(c-1)*n+y],r[c*n+y],_));return u.push(s),u}function Bv(r,e,t,n,s,l,u){if(u)return kh(r,e,t[t.length-1],n,s,l);let c;if(s<r[n-1])return l?(c=r.slice(0,n),c[n-1]=s,c):null;if(r[r.length-1]<s)return l?(c=r.slice(r.length-n),c[n-1]=s,c):null;for(let d=0,g=t.length;d<g;++d){const p=t[d];if(e!=p){if(s<r[e+n-1])return null;if(s<=r[p-1])return kh(r,e,p,n,s,!1);e=p}}return null}function C_(r,e,t,n){let s=r[e],l=r[e+1],u=0;for(let c=e+n;c<t;c+=n){const d=r[c],g=r[c+1];u+=Math.sqrt((d-s)*(d-s)+(g-l)*(g-l)),s=d,l=g}return u}class Ns extends Dr{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){fn(this.flatCoordinates,e),this.changed()}clone(){const e=new Ns(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ad(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),cd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,s))}forEachSegment(e){return d_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,kh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return Zi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Na(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return C_(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=iu(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ns(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return ru(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=nu(this.flatCoordinates,0,e,this.stride),this.changed()}}class ci{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new ci({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}function qp(r){return r[0]>0&&r[1]>0}function Yv(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function Xt(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}class ou{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Xt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ou({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ve()}getImage(e){return ve()}getHitDetectionImage(){return ve()}getPixelRatio(e){return 1}getImageState(){return ve()}getImageSize(){return ve()}getOrigin(){return ve()}getSize(){return ve()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Xt(e)}listenImageChange(e){ve()}load(){ve()}unlistenImageChange(e){ve()}ready(){return Promise.resolve()}}function Wn(r){return r?Array.isArray(r)?Ed(r):typeof r=="object"&&"src"in r?Vv(r):r:null}function Vv(r){if(!r.offset||!r.size)return dn.getPattern(r.src,"anonymous",r.color);const e=r.src+":"+r.offset,t=dn.getPattern(e,void 0,r.color);if(t)return t;const n=dn.get(r.src,"anonymous",null);if(n.getImageState()!==Ce.LOADED)return null;const s=et(r.size[0],r.size[1]);return s.drawImage(n.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),wd(s.canvas,e,void 0,Ce.LOADED,r.color,!0),dn.getPattern(e,void 0,r.color)}const ya="ol-hidden",nl="ol-unselectable",Qp="ol-unsupported",lu="ol-control",Jp="ol-collapsed",Kv=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),em=["style","variant","weight","size","lineHeight","family"],S_=function(r){const e=r.match(Kv);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,s=em.length;n<s;++n){const l=e[n+1];l!==void 0&&(t[em[n]]=l)}return t.families=t.family.split(/,\s?/),t},R_="10px sans-serif",Gt="#000",zs="round",hi=[],di=0,Gs="round",Yo=10,Vo="#000",Ko="center",za="middle",Tr=[0,0,0,0],Zo=1,li=new Yn;let ys=null,Fh;const Dh={},Zv=function(){const e="32px ",t=["monospace","serif"],n=t.length,s="wmytzilWMYTZIL@#/&?$%10";let l,u;function c(g,p,_){let y=!0;for(let x=0;x<n;++x){const E=t[x];if(u=Ga(g+" "+p+" "+e+E,s),_!=E){const w=Ga(g+" "+p+" "+e+_+","+E,s);y=y&&w!=u}}return!!y}function d(){let g=!0;const p=li.getKeys();for(let _=0,y=p.length;_<y;++_){const x=p[_];if(li.get(x)<100){const[E,w,C]=x.split(`
`);c(E,w,C)?(bs(Dh),ys=null,Fh=void 0,li.set(x,100)):(li.set(x,li.get(x)+1,!0),g=!1)}}g&&(clearInterval(l),l=void 0)}return function(g){const p=S_(g);if(!p)return;const _=p.families;for(let y=0,x=_.length;y<x;++y){const E=_[y],w=p.style+`
`+p.weight+`
`+E;li.get(w)===void 0&&(li.set(w,100,!0),c(p.style,p.weight,E)||(li.set(w,0,!0),l===void 0&&(l=setInterval(d,32))))}}}(),Hv=function(){let r;return function(e){let t=Dh[e];if(t==null){if(xd){const n=S_(e),s=T_(e,"g");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);Dh[e]=t}return t}}();function T_(r,e){return ys||(ys=et(1,1)),r!=Fh&&(ys.font=r,Fh=ys.font),ys.measureText(e)}function Ga(r,e){return T_(r,e).width}function tm(r,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((s,l)=>Math.max(s,Ga(r,l)),0);return t[e]=n,n}function $v(r,e){const t=[],n=[],s=[];let l=0,u=0,c=0,d=0;for(let g=0,p=e.length;g<=p;g+=2){const _=e[g];if(_===`
`||g===p){l=Math.max(l,u),s.push(u),u=0,c+=d,d=0;continue}const y=e[g+1]||r.font,x=Ga(y,_);t.push(x),u+=x;const E=Hv(y);n.push(E),d=Math.max(d,E)}return{width:l,height:c,widths:t,heights:n,lineWidths:s}}function qv(r,e,t,n,s,l,u,c,d,g,p){r.save(),t!==1&&(r.globalAlpha===void 0?r.globalAlpha=_=>_.globalAlpha*=t:r.globalAlpha*=t),e&&r.transform.apply(r,e),n.contextInstructions?(r.translate(d,g),r.scale(p[0],p[1]),Qv(n,r)):p[0]<0||p[1]<0?(r.translate(d,g),r.scale(p[0],p[1]),r.drawImage(n,s,l,u,c,0,0,u,c)):r.drawImage(n,s,l,u,c,d,g,u*p[0],c*p[1]),r.restore()}function Qv(r,e){const t=r.contextInstructions;for(let n=0,s=t.length;n<s;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class au extends ou{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ce.LOADING:Ce.LOADED,this.imageState_===Ce.LOADING&&this.ready().then(()=>this.imageState_=Ce.LOADED),this.render()}clone(){const e=this.getScale(),t=new au({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var l,u;const t=(l=this.fill_)==null?void 0:l.getKey(),n=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let s=(u=dn.get(n,null,null))==null?void 0:u.getImage(1);if(!s){const c=this.renderOptions_,d=Math.ceil(c.size*e),g=et(d,d);this.draw_(c,g,e),s=g.canvas,dn.set(n,null,null,new w_(s,void 0,null,Ce.LOADED,null))}return s}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let s=this.radius,l=this.radius2_===void 0?s:this.radius2_;if(s<l){const X=s;s=l,l=X}const u=this.radius2_===void 0?this.points_:this.points_*2,c=2*Math.PI/u,d=l*Math.sin(c),g=Math.sqrt(l*l-d*d),p=s-g,_=Math.sqrt(d*d+p*p),y=_/d;if(e==="miter"&&y<=n)return y*t;const x=t/2/y,E=t/2*(p/_),C=Math.sqrt((s+x)*(s+x)+E*E)-s;if(this.radius2_===void 0||e==="bevel")return C*2;const I=s*Math.sin(c),T=Math.sqrt(s*s-I*I),D=l-T,A=Math.sqrt(I*I+D*D)/I;if(A<=n){const X=A*t/2-l-s;return 2*Math.max(C,X)}return C*2}createRenderOptions(){let e=zs,t=Gs,n=0,s=null,l=0,u,c=0;this.stroke_&&(u=Wn(this.stroke_.getColor()??Vo),c=this.stroke_.getWidth()??Zo,s=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Gs,e=this.stroke_.getLineCap()??zs,n=this.stroke_.getMiterLimit()??Yo);const d=this.calculateLineJoinSize_(t,c,n),g=Math.max(this.radius,this.radius2_||0),p=Math.ceil(2*g+d);return{strokeStyle:u,strokeWidth:c,size:p,lineCap:e,lineDash:s,lineDashOffset:l,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let s=this.fill_.getColor();s===null&&(s=Gt),t.fillStyle=Wn(s),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),s=0;typeof n=="string"&&(n=Os(n)),n===null?s=1:Array.isArray(n)&&(s=n.length===4?n[3]:1),s===0&&(t=et(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const s=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const l=this.angle_-Math.PI/2,u=2*Math.PI/t;for(let c=0;c<t;c++){const d=l+c*u,g=c%2===0?n:s;e.lineTo(g*Math.cos(d),g*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Gt,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class Ar extends au{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new Ar({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Wt{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=nm,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Wt({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=nm,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function Jv(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(ke(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let ah=null;function I_(r,e){if(!ah){const t=new pi({color:"rgba(255,255,255,0.4)"}),n=new ci({color:"#3399CC",width:1.25});ah=[new Wt({image:new Ar({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return ah}function eE(){const r={},e=[255,255,255,1],t=[0,153,255,1],n=3;return r.Polygon=[new Wt({fill:new pi({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new Wt({stroke:new ci({color:e,width:n+2})}),new Wt({stroke:new ci({color:t,width:n})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new Wt({image:new Ar({radius:n*2,fill:new pi({color:t}),stroke:new ci({color:e,width:n/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function nm(r){return r.getGeometry()}const tE="#333";class Cd{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Xt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new pi({color:tE}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Cd({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Xt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Oe={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class L_ extends Yn{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[Oe.OPACITY]=e.opacity!==void 0?e.opacity:1,ke(typeof t[Oe.OPACITY]=="number","Layer opacity must be a number"),t[Oe.VISIBLE]=e.visible!==void 0?e.visible:!0,t[Oe.Z_INDEX]=e.zIndex,t[Oe.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[Oe.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[Oe.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[Oe.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=Ke(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return ve()}getLayerStatesArray(e){return ve()}getExtent(){return this.get(Oe.EXTENT)}getMaxResolution(){return this.get(Oe.MAX_RESOLUTION)}getMinResolution(){return this.get(Oe.MIN_RESOLUTION)}getMinZoom(){return this.get(Oe.MIN_ZOOM)}getMaxZoom(){return this.get(Oe.MAX_ZOOM)}getOpacity(){return this.get(Oe.OPACITY)}getSourceState(){return ve()}getVisible(){return this.get(Oe.VISIBLE)}getZIndex(){return this.get(Oe.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Oe.EXTENT,e)}setMaxResolution(e){this.set(Oe.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Oe.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Oe.MAX_ZOOM,e)}setMinZoom(e){this.set(Oe.MIN_ZOOM,e)}setOpacity(e){ke(typeof e=="number","Layer opacity must be a number"),this.set(Oe.OPACITY,e)}setVisible(e){this.set(Oe.VISIBLE,e)}setZIndex(e){this.set(Oe.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const Ct={ANIMATING:0,INTERACTING:1},Tn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},nE=42,Sd=256;function im(r,e,t){return function(n,s,l,u,c){if(!n)return;if(!s&&!e)return n;const d=e?0:l[0]*s,g=e?0:l[1]*s,p=c?c[0]:0,_=c?c[1]:0;let y=r[0]+d/2+p,x=r[2]-d/2+p,E=r[1]+g/2+_,w=r[3]-g/2+_;y>x&&(y=(x+y)/2,x=y),E>w&&(E=(w+E)/2,w=E);let C=Ke(n[0],y,x),I=Ke(n[1],E,w);if(u&&t&&s){const T=30*s;C+=-T*Math.log(1+Math.max(0,y-n[0])/T)+T*Math.log(1+Math.max(0,n[0]-x)/T),I+=-T*Math.log(1+Math.max(0,E-n[1])/T)+T*Math.log(1+Math.max(0,n[1]-w)/T)}return[C,I]}}function iE(r){return r}function Rd(r,e,t,n){const s=Me(e)/t[0],l=rt(e)/t[1];return n?Math.min(r,Math.max(s,l)):Math.min(r,Math.min(s,l))}function Td(r,e,t){let n=Math.min(r,e);const s=50;return n*=Math.log(1+s*Math.max(0,r/e-1))/s+1,t&&(n=Math.max(n,t),n/=Math.log(1+s*Math.max(0,t/r-1))/s+1),Ke(n,t/2,e*2)}function rE(r,e,t,n){return e=e!==void 0?e:!0,function(s,l,u,c){if(s!==void 0){const d=r[0],g=r[r.length-1],p=t?Rd(d,t,u,n):d;if(c)return e?Td(s,p,g):Ke(s,g,p);const _=Math.min(p,s),y=Math.floor(Vh(r,_,l));return r[y]>p&&y<r.length-1?r[y+1]:r[y]}}}function sE(r,e,t,n,s,l){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(u,c,d,g){if(u!==void 0){const p=s?Rd(e,s,d,l):e;if(g)return n?Td(u,p,t):Ke(u,t,p);const _=1e-9,y=Math.ceil(Math.log(e/p)/Math.log(r)-_),x=-c*(.5-_)+.5,E=Math.min(p,u),w=Math.floor(Math.log(e/E)/Math.log(r)+x),C=Math.max(y,w),I=e/Math.pow(r,C);return Ke(I,t,p)}}}function rm(r,e,t,n,s){return t=t!==void 0?t:!0,function(l,u,c,d){if(l!==void 0){const g=n?Rd(r,n,c,s):r;return!t||!d?Ke(l,e,g):Td(l,g,e)}}}function Id(r){if(r!==void 0)return 0}function sm(r){if(r!==void 0)return r}function oE(r){const e=2*Math.PI/r;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function lE(r){const e=$i(5);return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}function M_(r){return Math.pow(r,3)}function Us(r){return 1-M_(1-r)}function aE(r){return 3*r*r-2*r*r*r}function uE(r){return r}const uh=0;class jn extends Yn{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=sd(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&uv(),e.center&&(e.center=oi(e.center,this.projection_)),e.extent&&(e.extent=Ki(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const c in Tn)delete t[c];this.setProperties(t,!0);const n=hE(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const s=cE(e),l=n.constraint,u=dE(e);this.constraints_={center:s,resolution:l,rotation:u},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const s=e||[0,0,0,0];t=t||[0,0,0,0];const l=this.getResolution(),u=l/2*(s[3]-t[3]+t[1]-s[1]),c=l/2*(s[0]-t[0]+t[2]-s[2]);this.setCenterInternal([n[0]+u,n[1]-c])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let s=arguments[n];s.center&&(s=Object.assign({},s),s.center=oi(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=oi(s.anchor,this.getProjection())),t[n]=s}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let s=0;for(;s<t&&!this.isDef();++s){const p=arguments[s];p.center&&this.setCenterInternal(p.center),p.zoom!==void 0?this.setZoom(p.zoom):p.resolution&&this.setResolution(p.resolution),p.rotation!==void 0&&this.setRotation(p.rotation)}if(s===t){n&&va(n,!0);return}let l=Date.now(),u=this.targetCenter_.slice(),c=this.targetResolution_,d=this.targetRotation_;const g=[];for(;s<t;++s){const p=arguments[s],_={start:l,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||aE,callback:n};if(p.center&&(_.sourceCenter=u,_.targetCenter=p.center.slice(),u=_.targetCenter),p.zoom!==void 0?(_.sourceResolution=c,_.targetResolution=this.getResolutionForZoom(p.zoom),c=_.targetResolution):p.resolution&&(_.sourceResolution=c,_.targetResolution=p.resolution,c=_.targetResolution),p.rotation!==void 0){_.sourceRotation=d;const y=Ts(p.rotation-d+Math.PI,2*Math.PI)-Math.PI;_.targetRotation=d+y,d=_.targetRotation}fE(_)?_.complete=!0:l+=_.duration,g.push(_)}this.animations_.push(g),this.setHint(Ct.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Ct.ANIMATING]>0}getInteracting(){return this.hints_[Ct.INTERACTING]>0}cancelAnimations(){this.setHint(Ct.ANIMATING,-this.hints_[Ct.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const s=this.animations_[t];if(s[0].callback&&va(s[0].callback,!1),!e)for(let l=0,u=s.length;l<u;++l){const c=s[l];if(!c.complete){e=c.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const s=this.animations_[n];let l=!0;for(let u=0,c=s.length;u<c;++u){const d=s[u];if(d.complete)continue;const g=e-d.start;let p=d.duration>0?g/d.duration:1;p>=1?(d.complete=!0,p=1):l=!1;const _=d.easing(p);if(d.sourceCenter){const y=d.sourceCenter[0],x=d.sourceCenter[1],E=d.targetCenter[0],w=d.targetCenter[1];this.nextCenter_=d.targetCenter;const C=y+_*(E-y),I=x+_*(w-x);this.targetCenter_=[C,I]}if(d.sourceResolution&&d.targetResolution){const y=_===1?d.targetResolution:d.sourceResolution+_*(d.targetResolution-d.sourceResolution);if(d.anchor){const x=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(y,0,x,!0);this.targetCenter_=this.calculateCenterZoom(E,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=y,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const y=_===1?Ts(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+_*(d.targetRotation-d.sourceRotation);if(d.anchor){const x=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(x,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=y}if(this.applyTargetState_(!0),t=!0,!d.complete)break}if(l){this.animations_[n]=null,this.setHint(Ct.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const u=s[0].callback;u&&va(u,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const s=this.getCenterInternal();return s!==void 0&&(n=[s[0]-t[0],s[1]-t[1]],td(n,e-this.getRotation()),W1(n,t)),n}calculateCenterZoom(e,t){let n;const s=this.getCenterInternal(),l=this.getResolution();if(s!==void 0&&l!==void 0){const u=t[0]-e*(t[0]-s[0])/l,c=t[1]-e*(t[1]-s[1])/l;n=[u,c]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],s=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(s*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&Mh(e,this.getProjection())}getCenterInternal(){return this.get(Tn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return r_(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ke(t,"The view center is not defined");const n=this.getResolution();ke(n!==void 0,"The view resolution is not defined");const s=this.getRotation();return ke(s!==void 0,"The view rotation is not defined"),Sh(t,n,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Tn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(Ki(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Me(e)/t[0],s=rt(e)/t[1];return Math.max(n,s)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(t/n)/Math.log(e);return function(l){return t/Math.pow(e,l*s)}}getRotation(){return this.get(Tn.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,l=Math.log(n/s)/t;return function(u){return Math.log(n/u)/t/l}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let s=this.getCenterInternal();const l=this.padding_;if(l){const u=this.getViewportSizeMinusPadding_();s=ch(s,this.getViewportSize_(),[u[0]/2+l[3],u[1]/2+l[0]],t,n)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,s;if(this.resolutions_){const l=Vh(this.resolutions_,e,1);t=l,n=this.resolutions_[l],l==this.resolutions_.length-1?s=2:s=n/this.resolutions_[l+1]}else n=this.maxResolution_,s=this.zoomFactor_;return t+Math.log(n/e)/Math.log(s)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const n=Ke(Math.floor(e),0,this.resolutions_.length-2),s=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(s,Ke(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(ke(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ke(!Ja(e),"Cannot fit empty extent provided as `geometry`");const s=Ki(e,this.getProjection());n=Kp(s)}else if(e.getType()==="Circle"){const s=Ki(e.getExtent(),this.getProjection());n=Kp(s),n.rotate(this.getRotation(),Ji(s))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),s=Math.sin(-t),l=e.getFlatCoordinates(),u=e.getStride();let c=1/0,d=1/0,g=-1/0,p=-1/0;for(let _=0,y=l.length;_<y;_+=u){const x=l[_]*n-l[_+1]*s,E=l[_]*s+l[_+1]*n;c=Math.min(c,x),d=Math.min(d,E),g=Math.max(g,x),p=Math.max(p,E)}return[c,d,g,p]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const s=t.padding!==void 0?t.padding:[0,0,0,0],l=t.nearest!==void 0?t.nearest:!1;let u;t.minResolution!==void 0?u=t.minResolution:t.maxZoom!==void 0?u=this.getResolutionForZoom(t.maxZoom):u=0;const c=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(c,[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);d=isNaN(d)?u:Math.max(d,u),d=this.getConstrainedResolution(d,l?0:1);const g=this.getRotation(),p=Math.sin(g),_=Math.cos(g),y=Ji(c);y[0]+=(s[1]-s[3])/2*d,y[1]+=(s[0]-s[2])/2*d;const x=y[0]*_-y[1]*p,E=y[1]*_+y[0]*p,w=this.getConstrainedCenter([x,E],d),C=t.callback?t.callback:Ps;t.duration!==void 0?this.animateInternal({resolution:d,center:w,duration:t.duration,easing:t.easing},C):(this.targetResolution_=d,this.targetCenter_=w,this.applyTargetState_(!1,!0),va(C,!0))}centerOn(e,t,n){this.centerOnInternal(oi(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(ch(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,s){let l;const u=this.padding_;if(u&&e){const c=this.getViewportSizeMinusPadding_(-n),d=ch(e,s,[c[0]/2+u[3],c[1]/2+u[0]],t,n);l=[e[0]-d[0],e[1]-d[1]]}return l}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=Mh(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&oi(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),l=this.constraints_.resolution(this.targetResolution_*e,0,s,n);t&&(this.targetCenter_=this.calculateCenterZoom(l,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=oi(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(s,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&oi(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,s=this.constraints_.rotation(this.targetRotation_,n),l=this.getViewportSize_(s),u=this.constraints_.resolution(this.targetResolution_,0,l,n),c=this.constraints_.center(this.targetCenter_,u,l,n,this.calculateCenterShift(this.targetCenter_,u,s,l));this.get(Tn.ROTATION)!==s&&this.set(Tn.ROTATION,s),this.get(Tn.RESOLUTION)!==u&&(this.set(Tn.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!c||!this.get(Tn.CENTER)||!Pa(this.get(Tn.CENTER),c))&&this.set(Tn.CENTER,c),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const s=t||0,l=this.constraints_.rotation(this.targetRotation_),u=this.getViewportSize_(l),c=this.constraints_.resolution(this.targetResolution_,s,u),d=this.constraints_.center(this.targetCenter_,c,u,!1,this.calculateCenterShift(this.targetCenter_,c,l,u));if(e===0&&!this.cancelAnchor_){this.targetResolution_=c,this.targetRotation_=l,this.targetCenter_=d,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==c||this.getRotation()!==l||!this.getCenterInternal()||!Pa(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:l,center:d,resolution:c,duration:e,easing:Us,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Ct.INTERACTING,1)}endInteraction(e,t,n){n=n&&oi(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(Ct.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function va(r,e){setTimeout(function(){r(e)},0)}function cE(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return im(r.extent,r.constrainOnlyCenter,t)}const e=sd(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,im(t,!1,!1)}return iE}function hE(r){let e,t,n,u=r.minZoom!==void 0?r.minZoom:uh,c=r.maxZoom!==void 0?r.maxZoom:28;const d=r.zoomFactor!==void 0?r.zoomFactor:2,g=r.multiWorld!==void 0?r.multiWorld:!1,p=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,_=r.showFullExtent!==void 0?r.showFullExtent:!1,y=sd(r.projection,"EPSG:3857"),x=y.getExtent();let E=r.constrainOnlyCenter,w=r.extent;if(!g&&!w&&y.isGlobal()&&(E=!1,w=x),r.resolutions!==void 0){const C=r.resolutions;t=C[u],n=C[c]!==void 0?C[c]:C[C.length-1],r.constrainResolution?e=rE(C,p,!E&&w,_):e=rm(t,n,p,!E&&w,_)}else{const I=(x?Math.max(Me(x),rt(x)):360*Qh.degrees/y.getMetersPerUnit())/Sd/Math.pow(2,uh),T=I/Math.pow(2,28-uh);t=r.maxResolution,t!==void 0?u=0:t=I/Math.pow(d,u),n=r.minResolution,n===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?n=t/Math.pow(d,c):n=I/Math.pow(d,c):n=T),c=u+Math.floor(Math.log(t/n)/Math.log(d)),n=t/Math.pow(d,c-u),r.constrainResolution?e=sE(d,t,n,p,!E&&w,_):e=rm(t,n,p,!E&&w,_)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:u,zoomFactor:d}}function dE(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?lE():t===!1?sm:typeof t=="number"?oE(t):sm}return Id}function fE(r){return!(r.sourceCenter&&r.targetCenter&&!Pa(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function ch(r,e,t,n,s){const l=Math.cos(-s);let u=Math.sin(-s),c=r[0]*l-r[1]*u,d=r[1]*l+r[0]*u;c+=(e[0]/2-t[0])*n,d+=(t[1]-e[1]/2)*n,u=-u;const g=c*l-d*u,p=d*l+c*u;return[g,p]}class uu extends L_{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Oe.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Oe.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ge(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=Le(e,Ee.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof jn?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let s;if(t.layerStatesArray){if(s=t.layerStatesArray.find(u=>u.layer===this),!s)return!1}else s=this.getLayerState();const l=this.getExtent();return Ld(s,t.viewState)&&(!l||Ut(l,t.extent))}getAttributions(e){var l;if(!this.isVisible(e))return[];const t=(l=this.getSource())==null?void 0:l.getAttributions();if(!t)return[];const n=e instanceof jn?e.getViewStateAndExtent():e;let s=t(n);return Array.isArray(s)||(s=[s]),s}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Oe.MAP,e)}getMapInternal(){return this.get(Oe.MAP)}setMap(e){this.mapPrecomposeKey_&&(Ge(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(Ge(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=Le(e,hn.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=Le(this,Ee.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,n=this.getLayerState(!1);ke(!t.some(s=>s.layer===n.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(n)}setSource(e){this.set(Oe.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Ld(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const n=e.zoom;return n>r.minZoom&&n<=r.maxZoom}function P_(r,e,t=0,n=r.length-1,s=gE){for(;n>t;){if(n-t>600){const d=n-t+1,g=e-t+1,p=Math.log(d),_=.5*Math.exp(2*p/3),y=.5*Math.sqrt(p*_*(d-_)/d)*(g-d/2<0?-1:1),x=Math.max(t,Math.floor(e-g*_/d+y)),E=Math.min(n,Math.floor(e+(d-g)*_/d+y));P_(r,e,x,E,s)}const l=r[e];let u=t,c=n;for(Mo(r,t,e),s(r[n],l)>0&&Mo(r,t,n);u<c;){for(Mo(r,u,c),u++,c--;s(r[u],l)<0;)u++;for(;s(r[c],l)>0;)c--}s(r[t],l)===0?Mo(r,t,c):(c++,Mo(r,c,n)),c<=e&&(t=c+1),e<=c&&(n=c-1)}}function Mo(r,e,t){const n=r[e];r[e]=r[t],r[t]=n}function gE(r,e){return r<e?-1:r>e?1:0}let A_=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!xa(e,t))return n;const s=this.toBBox,l=[];for(;t;){for(let u=0;u<t.children.length;u++){const c=t.children[u],d=t.leaf?s(c):c;xa(e,d)&&(t.leaf?n.push(c):dh(e,d)?this._all(c,n):l.push(c))}t=l.pop()}return n}collides(e){let t=this.data;if(!xa(e,t))return!1;const n=[];for(;t;){for(let s=0;s<t.children.length;s++){const l=t.children[s],u=t.leaf?this.toBBox(l):l;if(xa(e,u)){if(t.leaf||dh(e,u))return!0;n.push(l)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=vs([]),this}remove(e,t){if(!e)return this;let n=this.data;const s=this.toBBox(e),l=[],u=[];let c,d,g;for(;n||l.length;){if(n||(n=l.pop(),d=l[l.length-1],c=u.pop(),g=!0),n.leaf){const p=pE(e,n.children,t);if(p!==-1)return n.children.splice(p,1),l.push(n),this._condense(l),this}!g&&!n.leaf&&dh(n,s)?(l.push(n),u.push(c),c=0,d=n,n=n.children[0]):d?(c++,n=d.children[c],g=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,s){const l=n-t+1;let u=this._maxEntries,c;if(l<=u)return c=vs(e.slice(t,n+1)),hs(c,this.toBBox),c;s||(s=Math.ceil(Math.log(l)/Math.log(u)),u=Math.ceil(l/Math.pow(u,s-1))),c=vs([]),c.leaf=!1,c.height=s;const d=Math.ceil(l/u),g=d*Math.ceil(Math.sqrt(u));om(e,t,n,g,this.compareMinX);for(let p=t;p<=n;p+=g){const _=Math.min(p+g-1,n);om(e,p,_,d,this.compareMinY);for(let y=p;y<=_;y+=d){const x=Math.min(y+d-1,_);c.children.push(this._build(e,y,x,s-1))}}return hs(c,this.toBBox),c}_chooseSubtree(e,t,n,s){for(;s.push(t),!(t.leaf||s.length-1===n);){let l=1/0,u=1/0,c;for(let d=0;d<t.children.length;d++){const g=t.children[d],p=hh(g),_=yE(e,g)-p;_<u?(u=_,l=p<l?p:l,c=g):_===u&&p<l&&(l=p,c=g)}t=c||t.children[0]}return t}_insert(e,t,n){const s=n?e:this.toBBox(e),l=[],u=this._chooseSubtree(s,this.data,t,l);for(u.children.push(e),ko(u,s);t>=0&&l[t].children.length>this._maxEntries;)this._split(l,t),t--;this._adjustParentBBoxes(s,l,t)}_split(e,t){const n=e[t],s=n.children.length,l=this._minEntries;this._chooseSplitAxis(n,l,s);const u=this._chooseSplitIndex(n,l,s),c=vs(n.children.splice(u,n.children.length-u));c.height=n.height,c.leaf=n.leaf,hs(n,this.toBBox),hs(c,this.toBBox),t?e[t-1].children.push(c):this._splitRoot(n,c)}_splitRoot(e,t){this.data=vs([e,t]),this.data.height=e.height+1,this.data.leaf=!1,hs(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let s,l=1/0,u=1/0;for(let c=t;c<=n-t;c++){const d=Ao(e,0,c,this.toBBox),g=Ao(e,c,n,this.toBBox),p=vE(d,g),_=hh(d)+hh(g);p<l?(l=p,s=c,u=_<u?_:u):p===l&&_<u&&(u=_,s=c)}return s||n-t}_chooseSplitAxis(e,t,n){const s=e.leaf?this.compareMinX:mE,l=e.leaf?this.compareMinY:_E,u=this._allDistMargin(e,t,n,s),c=this._allDistMargin(e,t,n,l);u<c&&e.children.sort(s)}_allDistMargin(e,t,n,s){e.children.sort(s);const l=this.toBBox,u=Ao(e,0,t,l),c=Ao(e,n-t,n,l);let d=Ea(u)+Ea(c);for(let g=t;g<n-t;g++){const p=e.children[g];ko(u,e.leaf?l(p):p),d+=Ea(u)}for(let g=n-t-1;g>=t;g--){const p=e.children[g];ko(c,e.leaf?l(p):p),d+=Ea(c)}return d}_adjustParentBBoxes(e,t,n){for(let s=n;s>=0;s--)ko(t[s],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():hs(e[t],this.toBBox)}};function pE(r,e,t){if(!t)return e.indexOf(r);for(let n=0;n<e.length;n++)if(t(r,e[n]))return n;return-1}function hs(r,e){Ao(r,0,r.children.length,e,r)}function Ao(r,e,t,n,s){s||(s=vs(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let l=e;l<t;l++){const u=r.children[l];ko(s,r.leaf?n(u):u)}return s}function ko(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function mE(r,e){return r.minX-e.minX}function _E(r,e){return r.minY-e.minY}function hh(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Ea(r){return r.maxX-r.minX+(r.maxY-r.minY)}function yE(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function vE(r,e){const t=Math.max(r.minX,e.minX),n=Math.max(r.minY,e.minY),s=Math.min(r.maxX,e.maxX),l=Math.min(r.maxY,e.maxY);return Math.max(0,s-t)*Math.max(0,l-n)}function dh(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function xa(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function vs(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function om(r,e,t,n,s){const l=[e,t];for(;l.length;){if(t=l.pop(),e=l.pop(),t-e<=n)continue;const u=e+Math.ceil((t-e)/n/2)*n;P_(r,u,e,t,s),l.push(e,u,u,t)}}function lm(r,e,t,n){return t!==void 0&&n!==void 0?[t/r,n/e]:t!==void 0?t/r:n!==void 0?n/e:1}class cu extends ou{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,l=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:l,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const u=e.img!==void 0?e.img:null;let c=e.src;ke(!(c!==void 0&&u),"`image` and `src` cannot be provided at the same time"),(c===void 0||c.length===0)&&u&&(c=u.src||Te(u)),ke(c!==void 0&&c.length>0,"A defined and non-empty `src` or `image` must be provided"),ke(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=Ce.IDLE:u!==void 0&&("complete"in u?u.complete?d=u.src?Ce.LOADED:Ce.IDLE:d=Ce.LOADING:d=Ce.LOADED),this.color_=e.color!==void 0?Os(e.color):null,this.iconImage_=wd(u,c,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let g,p;if(e.size)[g,p]=e.size;else{const _=this.getImage(1);if(_.width&&_.height)g=_.width,p=_.height;else if(_ instanceof HTMLImageElement){this.initialOptions_=e;const y=()=>{if(this.unlistenImageChange(y),!this.initialOptions_)return;const x=this.iconImage_.getSize();this.setScale(lm(x[0],x[1],e.width,e.height))};this.listenImageChange(y);return}}g!==void 0&&this.setScale(lm(g,p,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new cu({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ce.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ee.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ee.CHANGE,e)}ready(){return this.iconImage_.ready()}}let Nr=0;const Pt=1<<Nr++,Ie=1<<Nr++,bt=1<<Nr++,In=1<<Nr++,kr=1<<Nr++,Fo=1<<Nr++,wa=Math.pow(2,Nr)-1,Md={[Pt]:"boolean",[Ie]:"number",[bt]:"string",[In]:"color",[kr]:"number[]",[Fo]:"size"},EE=Object.keys(Md).map(Number).sort(ui);function xE(r){return r in Md}function Do(r){const e=[];for(const t of EE)Oo(r,t)&&e.push(Md[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Oo(r,e){return(r&e)===e}function bi(r,e){return r===e}class it{constructor(e,t){if(!xE(e))throw new Error(`literal expressions must have a specific type, got ${Do(e)}`);this.type=e,this.value=t}}class wE{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function k_(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function pt(r,e,t){switch(typeof r){case"boolean":{if(bi(e,bt))return new it(bt,r?"true":"false");if(!Oo(e,Pt))throw new Error(`got a boolean, but expected ${Do(e)}`);return new it(Pt,r)}case"number":{if(bi(e,Fo))return new it(Fo,Xt(r));if(bi(e,Pt))return new it(Pt,!!r);if(bi(e,bt))return new it(bt,r.toString());if(!Oo(e,Ie))throw new Error(`got a number, but expected ${Do(e)}`);return new it(Ie,r)}case"string":{if(bi(e,In))return new it(In,vd(r));if(bi(e,Pt))return new it(Pt,!!r);if(!Oo(e,bt))throw new Error(`got a string, but expected ${Do(e)}`);return new it(bt,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return FE(r,e,t);for(const n of r)if(typeof n!="number")throw new Error("expected an array of numbers");if(bi(e,Fo)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new it(Fo,r)}if(bi(e,In)){if(r.length===3)return new it(In,[...r,1]);if(r.length===4)return new it(In,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!Oo(e,kr))throw new Error(`got an array of numbers, but expected ${Do(e)}`);return new it(kr,r)}const j={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},CE={[j.Get]:ye(we(1,1/0),am),[j.Var]:ye(we(1,1),SE),[j.Has]:ye(we(1,1/0),am),[j.Id]:ye(RE,ds),[j.Concat]:ye(we(2,1/0),Fe(bt)),[j.GeometryType]:ye(TE,ds),[j.LineMetric]:ye(ds),[j.Resolution]:ye(ds),[j.Zoom]:ye(ds),[j.Time]:ye(ds),[j.Any]:ye(we(2,1/0),Fe(Pt)),[j.All]:ye(we(2,1/0),Fe(Pt)),[j.Not]:ye(we(1,1),Fe(Pt)),[j.Equal]:ye(we(2,2),Fe(wa)),[j.NotEqual]:ye(we(2,2),Fe(wa)),[j.GreaterThan]:ye(we(2,2),Fe(Ie)),[j.GreaterThanOrEqualTo]:ye(we(2,2),Fe(Ie)),[j.LessThan]:ye(we(2,2),Fe(Ie)),[j.LessThanOrEqualTo]:ye(we(2,2),Fe(Ie)),[j.Multiply]:ye(we(2,1/0),um),[j.Coalesce]:ye(we(2,1/0),um),[j.Divide]:ye(we(2,2),Fe(Ie)),[j.Add]:ye(we(2,1/0),Fe(Ie)),[j.Subtract]:ye(we(2,2),Fe(Ie)),[j.Clamp]:ye(we(3,3),Fe(Ie)),[j.Mod]:ye(we(2,2),Fe(Ie)),[j.Pow]:ye(we(2,2),Fe(Ie)),[j.Abs]:ye(we(1,1),Fe(Ie)),[j.Floor]:ye(we(1,1),Fe(Ie)),[j.Ceil]:ye(we(1,1),Fe(Ie)),[j.Round]:ye(we(1,1),Fe(Ie)),[j.Sin]:ye(we(1,1),Fe(Ie)),[j.Cos]:ye(we(1,1),Fe(Ie)),[j.Atan]:ye(we(1,2),Fe(Ie)),[j.Sqrt]:ye(we(1,1),Fe(Ie)),[j.Match]:ye(we(4,1/0),cm,LE),[j.Between]:ye(we(3,3),Fe(Ie)),[j.Interpolate]:ye(we(6,1/0),cm,ME),[j.Case]:ye(we(3,1/0),IE,PE),[j.In]:ye(we(2,2),AE),[j.Number]:ye(we(1,1/0),Fe(wa)),[j.String]:ye(we(1,1/0),Fe(wa)),[j.Array]:ye(we(1,1/0),Fe(Ie)),[j.Color]:ye(we(1,4),Fe(Ie)),[j.Band]:ye(we(1,3),Fe(Ie)),[j.Palette]:ye(we(2,2),kE),[j.ToString]:ye(we(1,1),Fe(Pt|Ie|bt|In))};function am(r,e,t){const n=r.length-1,s=new Array(n);for(let l=0;l<n;++l){const u=r[l+1];switch(typeof u){case"number":{s[l]=new it(Ie,u);break}case"string":{s[l]=new it(bt,u);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${u}`)}l===0&&t.properties.add(String(u))}return s}function SE(r,e,t){const n=r[1];if(typeof n!="string")throw new Error("expected a string argument for var operation");return t.variables.add(n),[new it(bt,n)]}function RE(r,e,t){t.featureId=!0}function TE(r,e,t){t.geometryType=!0}function ds(r,e,t){const n=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${n} operation`);return[]}function we(r,e){return function(t,n,s){const l=t[0],u=t.length-1;if(r===e){if(u!==r){const c=r===1?"":"s";throw new Error(`expected ${r} argument${c} for ${l}, got ${u}`)}}else if(u<r||u>e){const c=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`expected ${c} arguments for ${l}, got ${u}`)}}}function um(r,e,t){const n=r.length-1,s=new Array(n);for(let l=0;l<n;++l){const u=pt(r[l+1],e,t);s[l]=u}return s}function Fe(r){return function(e,t,n){const s=e.length-1,l=new Array(s);for(let u=0;u<s;++u){const c=pt(e[u+1],r,n);l[u]=c}return l}}function IE(r,e,t){const n=r[0],s=r.length-1;if(s%2===0)throw new Error(`expected an odd number of arguments for ${n}, got ${s} instead`)}function cm(r,e,t){const n=r[0],s=r.length-1;if(s%2===1)throw new Error(`expected an even number of arguments for operation ${n}, got ${s} instead`)}function LE(r,e,t){const n=r.length-1,s=bt|Ie|Pt,l=pt(r[1],s,t),u=pt(r[r.length-1],e,t),c=new Array(n-2);for(let d=0;d<n-2;d+=2){try{const g=pt(r[d+2],l.type,t);c[d]=g}catch(g){throw new Error(`failed to parse argument ${d+1} of match expression: ${g.message}`)}try{const g=pt(r[d+3],u.type,t);c[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+2} of match expression: ${g.message}`)}}return[l,...c,u]}function ME(r,e,t){const n=r[1];let s;switch(n[0]){case"linear":s=1;break;case"exponential":const d=n[1];if(typeof d!="number"||d<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(d)} instead`);s=d;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(n)}`)}const l=new it(Ie,s);let u;try{u=pt(r[2],Ie,t)}catch(d){throw new Error(`failed to parse argument 1 in interpolate expression: ${d.message}`)}const c=new Array(r.length-3);for(let d=0;d<c.length;d+=2){try{const g=pt(r[d+3],Ie,t);c[d]=g}catch(g){throw new Error(`failed to parse argument ${d+2} for interpolate expression: ${g.message}`)}try{const g=pt(r[d+4],e,t);c[d+1]=g}catch(g){throw new Error(`failed to parse argument ${d+3} for interpolate expression: ${g.message}`)}}return[l,u,...c]}function PE(r,e,t){const n=pt(r[r.length-1],e,t),s=new Array(r.length-1);for(let l=0;l<s.length-1;l+=2){try{const u=pt(r[l+1],Pt,t);s[l]=u}catch(u){throw new Error(`failed to parse argument ${l} of case expression: ${u.message}`)}try{const u=pt(r[l+2],n.type,t);s[l+1]=u}catch(u){throw new Error(`failed to parse argument ${l+1} of case expression: ${u.message}`)}}return s[s.length-1]=n,s}function AE(r,e,t){let n=r[2];if(!Array.isArray(n))throw new Error('the second argument for the "in" operator must be an array');let s;if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(n[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');n=n[1],s=bt}else s=Ie;const l=new Array(n.length);for(let c=0;c<l.length;c++)try{const d=pt(n[c],s,t);l[c]=d}catch(d){throw new Error(`failed to parse haystack item ${c} for "in" expression: ${d.message}`)}return[pt(r[1],s,t),...l]}function kE(r,e,t){let n;try{n=pt(r[1],Ie,t)}catch(u){throw new Error(`failed to parse first argument in palette expression: ${u.message}`)}const s=r[2];if(!Array.isArray(s))throw new Error("the second argument of palette must be an array");const l=new Array(s.length);for(let u=0;u<l.length;u++){let c;try{c=pt(s[u],In,t)}catch(d){throw new Error(`failed to parse color at index ${u} in palette expression: ${d.message}`)}if(!(c instanceof it))throw new Error(`the palette color at index ${u} must be a literal value`);l[u]=c}return[n,...l]}function ye(...r){return function(e,t,n){const s=e[0];let l;for(let u=0;u<r.length;u++){const c=r[u](e,t,n);if(u==r.length-1){if(!c)throw new Error("expected last argument validator to return the parsed args");l=c}}return new wE(t,s,...l)}}function FE(r,e,t){const n=r[0],s=CE[n];if(!s)throw new Error(`unknown operator: ${n}`);return s(r,e,t)}function F_(r){if(!r)return"";const e=r.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return F_(r.getGeometries()[0]);default:return""}}function D_(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function mi(r,e,t){const n=pt(r,e,t);return An(n)}function An(r,e){if(r instanceof it){if(r.type===In&&typeof r.value=="string"){const n=vd(r.value);return function(){return n}}return function(){return r.value}}const t=r.operator;switch(t){case j.Number:case j.String:case j.Coalesce:return DE(r);case j.Get:case j.Var:case j.Has:return OE(r);case j.Id:return n=>n.featureId;case j.GeometryType:return n=>n.geometryType;case j.Concat:{const n=r.args.map(s=>An(s));return s=>"".concat(...n.map(l=>l(s).toString()))}case j.Resolution:return n=>n.resolution;case j.Any:case j.All:case j.Between:case j.In:case j.Not:return zE(r);case j.Equal:case j.NotEqual:case j.LessThan:case j.LessThanOrEqualTo:case j.GreaterThan:case j.GreaterThanOrEqualTo:return NE(r);case j.Multiply:case j.Divide:case j.Add:case j.Subtract:case j.Clamp:case j.Mod:case j.Pow:case j.Abs:case j.Floor:case j.Ceil:case j.Round:case j.Sin:case j.Cos:case j.Atan:case j.Sqrt:return GE(r);case j.Case:return bE(r);case j.Match:return UE(r);case j.Interpolate:return jE(r);case j.ToString:return XE(r);default:throw new Error(`Unsupported operator ${t}`)}}function DE(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=An(r.args[l]);switch(t){case j.Coalesce:return l=>{for(let u=0;u<n;++u){const c=s[u](l);if(typeof c<"u"&&c!==null)return c}throw new Error("Expected one of the values to be non-null")};case j.Number:case j.String:return l=>{for(let u=0;u<n;++u){const c=s[u](l);if(typeof c===t)return c}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function OE(r,e){const n=r.args[0].value;switch(r.operator){case j.Get:return s=>{const l=r.args;let u=s.properties[n];for(let c=1,d=l.length;c<d;++c){const p=l[c].value;u=u[p]}return u};case j.Var:return s=>s.variables[n];case j.Has:return s=>{const l=r.args;if(!(n in s.properties))return!1;let u=s.properties[n];for(let c=1,d=l.length;c<d;++c){const p=l[c].value;if(!u||!Object.hasOwn(u,p))return!1;u=u[p]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function NE(r,e){const t=r.operator,n=An(r.args[0]),s=An(r.args[1]);switch(t){case j.Equal:return l=>n(l)===s(l);case j.NotEqual:return l=>n(l)!==s(l);case j.LessThan:return l=>n(l)<s(l);case j.LessThanOrEqualTo:return l=>n(l)<=s(l);case j.GreaterThan:return l=>n(l)>s(l);case j.GreaterThanOrEqualTo:return l=>n(l)>=s(l);default:throw new Error(`Unsupported comparison operator ${t}`)}}function zE(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=An(r.args[l]);switch(t){case j.Any:return l=>{for(let u=0;u<n;++u)if(s[u](l))return!0;return!1};case j.All:return l=>{for(let u=0;u<n;++u)if(!s[u](l))return!1;return!0};case j.Between:return l=>{const u=s[0](l),c=s[1](l),d=s[2](l);return u>=c&&u<=d};case j.In:return l=>{const u=s[0](l);for(let c=1;c<n;++c)if(u===s[c](l))return!0;return!1};case j.Not:return l=>!s[0](l);default:throw new Error(`Unsupported logical operator ${t}`)}}function GE(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=An(r.args[l]);switch(t){case j.Multiply:return l=>{let u=1;for(let c=0;c<n;++c)u*=s[c](l);return u};case j.Divide:return l=>s[0](l)/s[1](l);case j.Add:return l=>{let u=0;for(let c=0;c<n;++c)u+=s[c](l);return u};case j.Subtract:return l=>s[0](l)-s[1](l);case j.Clamp:return l=>{const u=s[0](l),c=s[1](l);if(u<c)return c;const d=s[2](l);return u>d?d:u};case j.Mod:return l=>s[0](l)%s[1](l);case j.Pow:return l=>Math.pow(s[0](l),s[1](l));case j.Abs:return l=>Math.abs(s[0](l));case j.Floor:return l=>Math.floor(s[0](l));case j.Ceil:return l=>Math.ceil(s[0](l));case j.Round:return l=>Math.round(s[0](l));case j.Sin:return l=>Math.sin(s[0](l));case j.Cos:return l=>Math.cos(s[0](l));case j.Atan:return n===2?l=>Math.atan2(s[0](l),s[1](l)):l=>Math.atan(s[0](l));case j.Sqrt:return l=>Math.sqrt(s[0](l));default:throw new Error(`Unsupported numeric operator ${t}`)}}function bE(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=An(r.args[s]);return s=>{for(let l=0;l<t-1;l+=2)if(n[l](s))return n[l+1](s);return n[t-1](s)}}function UE(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=An(r.args[s]);return s=>{const l=n[0](s);for(let u=1;u<t;u+=2)if(l===n[u](s))return n[u+1](s);return n[t-1](s)}}function jE(r,e){const t=r.args.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=An(r.args[s]);return s=>{const l=n[0](s),u=n[1](s);let c,d;for(let g=2;g<t;g+=2){const p=n[g](s);let _=n[g+1](s);const y=Array.isArray(_);if(y&&(_=Fv(_)),p>=u)return g===2?_:y?WE(l,u,c,d,p,_):No(l,u,c,d,p,_);c=p,d=_}return d}}function XE(r,e){const t=r.operator,n=r.args.length,s=new Array(n);for(let l=0;l<n;++l)s[l]=An(r.args[l]);switch(t){case j.ToString:return l=>{const u=s[0](l);return r.args[0].type===In?Ed(u):u.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function No(r,e,t,n,s,l){const u=s-t;if(u===0)return n;const c=e-t,d=r===1?c/u:(Math.pow(r,c)-1)/(Math.pow(r,u)-1);return n+d*(l-n)}function WE(r,e,t,n,s,l){if(s-t===0)return n;const c=$p(n),d=$p(l);let g=d[2]-c[2];g>180?g-=360:g<-180&&(g+=360);const p=[No(r,e,t,c[0],s,d[0]),No(r,e,t,c[1],s,d[1]),c[2]+No(r,e,t,0,s,g),No(r,e,t,n[3],s,l[3])];return __(Dv(p))}function BE(r){return!0}function YE(r){const e=k_(),t=VE(r,e),n=D_();return function(s,l){if(n.properties=s.getPropertiesInternal(),n.resolution=l,e.featureId){const u=s.getId();u!==void 0?n.featureId=u:n.featureId=null}return e.geometryType&&(n.geometryType=F_(s.getGeometry())),t(n)}}function hm(r){const e=k_(),t=r.length,n=new Array(t);for(let u=0;u<t;++u)n[u]=Oh(r[u],e);const s=D_(),l=new Array(t);return function(u,c){if(s.properties=u.getPropertiesInternal(),s.resolution=c,e.featureId){const g=u.getId();g!==void 0?s.featureId=g:s.featureId=null}let d=0;for(let g=0;g<t;++g){const p=n[g](s);p&&(l[d]=p,d+=1)}return l.length=d,l}}function VE(r,e){const t=r.length,n=new Array(t);for(let s=0;s<t;++s){const l=r[s],u="filter"in l?mi(l.filter,Pt,e):BE;let c;if(Array.isArray(l.style)){const d=l.style.length;c=new Array(d);for(let g=0;g<d;++g)c[g]=Oh(l.style[g],e)}else c=[Oh(l.style,e)];n[s]={filter:u,styles:c}}return function(s){const l=[];let u=!1;for(let c=0;c<t;++c){const d=n[c].filter;if(d(s)&&!(r[c].else&&u)){u=!0;for(const g of n[c].styles){const p=g(s);p&&l.push(p)}}}return l}}function Oh(r,e){const t=Ho(r,"",e),n=$o(r,"",e),s=KE(r,e),l=ZE(r,e),u=jt(r,"z-index",e);if(!t&&!n&&!s&&!l&&!Pr(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const c=new Wt;return function(d){let g=!0;if(t){const p=t(d);p&&(g=!1),c.setFill(p)}if(n){const p=n(d);p&&(g=!1),c.setStroke(p)}if(s){const p=s(d);p&&(g=!1),c.setText(p)}if(l){const p=l(d);p&&(g=!1),c.setImage(p)}return u&&c.setZIndex(u(d)),g?null:c}}function Ho(r,e,t){let n;if(e+"fill-pattern-src"in r)n=QE(r,e+"fill-",t);else{if(r[e+"fill-color"]==="none")return l=>null;n=Pd(r,e+"fill-color",t)}if(!n)return null;const s=new pi;return function(l){const u=n(l);return u===yd?null:(s.setColor(u),s)}}function $o(r,e,t){const n=jt(r,e+"stroke-width",t),s=Pd(r,e+"stroke-color",t);if(!n&&!s)return null;const l=ai(r,e+"stroke-line-cap",t),u=ai(r,e+"stroke-line-join",t),c=O_(r,e+"stroke-line-dash",t),d=jt(r,e+"stroke-line-dash-offset",t),g=jt(r,e+"stroke-miter-limit",t),p=new ci;return function(_){if(s){const y=s(_);if(y===yd)return null;p.setColor(y)}if(n&&p.setWidth(n(_)),l){const y=l(_);if(y!=="butt"&&y!=="round"&&y!=="square")throw new Error("Expected butt, round, or square line cap");p.setLineCap(y)}if(u){const y=u(_);if(y!=="bevel"&&y!=="round"&&y!=="miter")throw new Error("Expected bevel, round, or miter line join");p.setLineJoin(y)}return c&&p.setLineDash(c(_)),d&&p.setLineDashOffset(d(_)),g&&p.setMiterLimit(g(_)),p}}function KE(r,e){const t="text-",n=ai(r,t+"value",e);if(!n)return null;const s=Ho(r,t,e),l=Ho(r,t+"background-",e),u=$o(r,t,e),c=$o(r,t+"background-",e),d=ai(r,t+"font",e),g=jt(r,t+"max-angle",e),p=jt(r,t+"offset-x",e),_=jt(r,t+"offset-y",e),y=Is(r,t+"overflow",e),x=ai(r,t+"placement",e),E=jt(r,t+"repeat",e),w=hu(r,t+"scale",e),C=Is(r,t+"rotate-with-view",e),I=jt(r,t+"rotation",e),T=ai(r,t+"align",e),D=ai(r,t+"justify",e),M=ai(r,t+"baseline",e),A=Is(r,t+"keep-upright",e),X=O_(r,t+"padding",e),K=du(r,t+"declutter-mode"),b=new Cd({declutterMode:K});return function(W){if(b.setText(n(W)),s&&b.setFill(s(W)),l&&b.setBackgroundFill(l(W)),u&&b.setStroke(u(W)),c&&b.setBackgroundStroke(c(W)),d&&b.setFont(d(W)),g&&b.setMaxAngle(g(W)),p&&b.setOffsetX(p(W)),_&&b.setOffsetY(_(W)),y&&b.setOverflow(y(W)),x){const B=x(W);if(B!=="point"&&B!=="line")throw new Error("Expected point or line for text-placement");b.setPlacement(B)}if(E&&b.setRepeat(E(W)),w&&b.setScale(w(W)),C&&b.setRotateWithView(C(W)),I&&b.setRotation(I(W)),T){const B=T(W);if(B!=="left"&&B!=="center"&&B!=="right"&&B!=="end"&&B!=="start")throw new Error("Expected left, right, center, start, or end for text-align");b.setTextAlign(B)}if(D){const B=D(W);if(B!=="left"&&B!=="right"&&B!=="center")throw new Error("Expected left, right, or center for text-justify");b.setJustify(B)}if(M){const B=M(W);if(B!=="bottom"&&B!=="top"&&B!=="middle"&&B!=="alphabetic"&&B!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");b.setTextBaseline(B)}return X&&b.setPadding(X(W)),A&&b.setKeepUpright(A(W)),b}}function ZE(r,e){return"icon-src"in r?HE(r,e):"shape-points"in r?$E(r,e):"circle-radius"in r?qE(r,e):null}function HE(r,e){const t="icon-",n=t+"src",s=N_(r[n],n),l=ba(r,t+"anchor",e),u=hu(r,t+"scale",e),c=jt(r,t+"opacity",e),d=ba(r,t+"displacement",e),g=jt(r,t+"rotation",e),p=Is(r,t+"rotate-with-view",e),_=fm(r,t+"anchor-origin"),y=gm(r,t+"anchor-x-units"),x=gm(r,t+"anchor-y-units"),E=nx(r,t+"color"),w=ex(r,t+"cross-origin"),C=tx(r,t+"offset"),I=fm(r,t+"offset-origin"),T=Ua(r,t+"width"),D=Ua(r,t+"height"),M=JE(r,t+"size"),A=du(r,t+"declutter-mode"),X=new cu({src:s,anchorOrigin:_,anchorXUnits:y,anchorYUnits:x,color:E,crossOrigin:w,offset:C,offsetOrigin:I,height:D,width:T,size:M,declutterMode:A});return function(K){return c&&X.setOpacity(c(K)),d&&X.setDisplacement(d(K)),g&&X.setRotation(g(K)),p&&X.setRotateWithView(p(K)),u&&X.setScale(u(K)),l&&X.setAnchor(l(K)),X}}function $E(r,e){const t="shape-",n=t+"points",s=t+"radius",l=Nh(r[n],n),u=Nh(r[s],s),c=Ho(r,t,e),d=$o(r,t,e),g=hu(r,t+"scale",e),p=ba(r,t+"displacement",e),_=jt(r,t+"rotation",e),y=Is(r,t+"rotate-with-view",e),x=Ua(r,t+"radius2"),E=Ua(r,t+"angle"),w=du(r,t+"declutter-mode"),C=new au({points:l,radius:u,radius2:x,angle:E,declutterMode:w});return function(I){return c&&C.setFill(c(I)),d&&C.setStroke(d(I)),p&&C.setDisplacement(p(I)),_&&C.setRotation(_(I)),y&&C.setRotateWithView(y(I)),g&&C.setScale(g(I)),C}}function qE(r,e){const t="circle-",n=Ho(r,t,e),s=$o(r,t,e),l=jt(r,t+"radius",e),u=hu(r,t+"scale",e),c=ba(r,t+"displacement",e),d=jt(r,t+"rotation",e),g=Is(r,t+"rotate-with-view",e),p=du(r,t+"declutter-mode"),_=new Ar({radius:5,declutterMode:p});return function(y){return l&&_.setRadius(l(y)),n&&_.setFill(n(y)),s&&_.setStroke(s(y)),c&&_.setDisplacement(c(y)),d&&_.setRotation(d(y)),g&&_.setRotateWithView(g(y)),u&&_.setScale(u(y)),_}}function jt(r,e,t){if(!(e in r))return;const n=mi(r[e],Ie,t);return function(s){return Nh(n(s),e)}}function ai(r,e,t){if(!(e in r))return null;const n=mi(r[e],bt,t);return function(s){return N_(n(s),e)}}function QE(r,e,t){const n=ai(r,e+"pattern-src",t),s=dm(r,e+"pattern-offset",t),l=dm(r,e+"pattern-size",t),u=Pd(r,e+"color",t);return function(c){return{src:n(c),offset:s&&s(c),size:l&&l(c),color:u&&u(c)}}}function Is(r,e,t){if(!(e in r))return null;const n=mi(r[e],Pt,t);return function(s){const l=n(s);if(typeof l!="boolean")throw new Error(`Expected a boolean for ${e}`);return l}}function Pd(r,e,t){if(!(e in r))return null;const n=mi(r[e],In,t);return function(s){return z_(n(s),e)}}function O_(r,e,t){if(!(e in r))return null;const n=mi(r[e],kr,t);return function(s){return il(n(s),e)}}function ba(r,e,t){if(!(e in r))return null;const n=mi(r[e],kr,t);return function(s){const l=il(n(s),e);if(l.length!==2)throw new Error(`Expected two numbers for ${e}`);return l}}function dm(r,e,t){if(!(e in r))return null;const n=mi(r[e],kr,t);return function(s){return G_(n(s),e)}}function hu(r,e,t){if(!(e in r))return null;const n=mi(r[e],kr|Ie,t);return function(s){return ix(n(s),e)}}function Ua(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function JE(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return Xt(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function ex(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function fm(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function gm(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function tx(r,e){const t=r[e];if(t!==void 0)return il(t,e)}function du(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function nx(r,e){const t=r[e];if(t!==void 0)return z_(t,e)}function il(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let n=0;n<t;++n)if(typeof r[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function N_(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function Nh(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function z_(r,e){if(typeof r=="string")return r;const t=il(r,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function G_(r,e){const t=il(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function ix(r,e){return typeof r=="number"?r:G_(r,e)}const pm={RENDER_ORDER:"renderOrder"};class b_ extends uu{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(pm.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const n=this.getDeclutter();n in e.declutter||(e.declutter[n]=new A_(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(pm.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?I_:e;const t=rx(e);this.styleFunction_=e===null?void 0:Jv(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function rx(r){if(r===void 0)return I_;if(!r)return null;if(typeof r=="function"||r instanceof Wt)return r;if(!Array.isArray(r))return hm([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof Wt){const s=new Array(e);for(let l=0;l<e;++l){const u=r[l];if(!(u instanceof Wt))throw new Error("Expected a list of style instances");s[l]=u}return s}if("style"in t){const s=new Array(e);for(let l=0;l<e;++l){const u=r[l];if(!("style"in u))throw new Error("Expected a list of rules with a style property");s[l]=u}return YE(s)}return hm(r)}const fe={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ca=[fe.FILL],Hi=[fe.STROKE],Ir=[fe.BEGIN_PATH],mm=[fe.CLOSE_PATH];class U_{drawCustom(e,t,n,s,l){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,n){}drawFeature(e,t,n){}drawGeometryCollection(e,t,n){}drawLineString(e,t,n){}drawMultiLineString(e,t,n){}drawMultiPoint(e,t,n){}drawMultiPolygon(e,t,n){}drawPoint(e,t,n){}drawPolygon(e,t,n){}drawText(e,t,n){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class rl extends U_{constructor(e,t,n,s){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,l=this.coordinates;let u=l.length;for(let c=0,d=e.length;c<d;c+=t)s[0]=e[c],s[1]=e[c+1],ks(n,s)&&(l[u++]=s[0],l[u++]=s[1]);return u}appendFlatLineCoordinates(e,t,n,s,l,u){const c=this.coordinates;let d=c.length;const g=this.getBufferedMaxExtent();u&&(t+=s);let p=e[t],_=e[t+1];const y=this.tmpCoordinate_;let x=!0,E,w,C;for(E=t+s;E<n;E+=s)y[0]=e[E],y[1]=e[E+1],C=Ch(g,y),C!==w?(x&&(c[d++]=p,c[d++]=_,x=!1),c[d++]=y[0],c[d++]=y[1]):C===ut.INTERSECTING?(c[d++]=y[0],c[d++]=y[1],x=!1):x=!0,p=y[0],_=y[1],w=C;return(l&&x||E===t+s)&&(c[d++]=p,c[d++]=_),d}drawCustomCoordinates_(e,t,n,s,l){for(let u=0,c=n.length;u<c;++u){const d=n[u],g=this.appendFlatLineCoordinates(e,t,d,s,!1,!1);l.push(g),t=d}return t}drawCustom(e,t,n,s,l){this.beginGeometry(e,t,l);const u=e.getType(),c=e.getStride(),d=this.coordinates.length;let g,p,_,y,x;switch(u){case"MultiPolygon":g=e.getOrientedFlatCoordinates(),y=[];const E=e.getEndss();x=0;for(let w=0,C=E.length;w<C;++w){const I=[];x=this.drawCustomCoordinates_(g,x,E[w],c,I),y.push(I)}this.instructions.push([fe.CUSTOM,d,y,e,n,Ph,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,y,e,s||n,Ph,l]);break;case"Polygon":case"MultiLineString":_=[],g=u=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),x=this.drawCustomCoordinates_(g,0,e.getEnds(),c,_),this.instructions.push([fe.CUSTOM,d,_,e,n,Xo,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,_,e,s||n,Xo,l]);break;case"LineString":case"Circle":g=e.getFlatCoordinates(),p=this.appendFlatLineCoordinates(g,0,g.length,c,!1,!1),this.instructions.push([fe.CUSTOM,d,p,e,n,Zi,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,s||n,Zi,l]);break;case"MultiPoint":g=e.getFlatCoordinates(),p=this.appendFlatPointCoordinates(g,c),p>d&&(this.instructions.push([fe.CUSTOM,d,p,e,n,Zi,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,s||n,Zi,l]));break;case"Point":g=e.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),p=this.coordinates.length,this.instructions.push([fe.CUSTOM,d,p,e,n,void 0,l]),this.hitDetectionInstructions.push([fe.CUSTOM,d,p,e,s||n,void 0,l]);break}this.endGeometry(t)}beginGeometry(e,t,n){this.beginGeometryInstruction1_=[fe.BEGIN_GEOMETRY,t,0,e,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[fe.BEGIN_GEOMETRY,t,0,e,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let s,l,u=-1;for(t=0;t<n;++t)s=e[t],l=s[0],l==fe.END_GEOMETRY?u=t:l==fe.BEGIN_GEOMETRY&&(s[2]=t,v1(this.hitDetectionInstructions,u,t),u=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const s=e.getColor();n.fillPatternScale=s&&typeof s=="object"&&"src"in s?this.pixelRatio:1,n.fillStyle=Wn(s||Gt)}else n.fillStyle=void 0;if(t){const s=t.getColor();n.strokeStyle=Wn(s||Vo);const l=t.getLineCap();n.lineCap=l!==void 0?l:zs;const u=t.getLineDash();n.lineDash=u?u.slice():hi;const c=t.getLineDashOffset();n.lineDashOffset=c||di;const d=t.getLineJoin();n.lineJoin=d!==void 0?d:Gs;const g=t.getWidth();n.lineWidth=g!==void 0?g:Zo;const p=t.getMiterLimit();n.miterLimit=p!==void 0?p:Yo,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[fe.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(e.fillPatternScale),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[fe.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,s=e.lineCap,l=e.lineDash,u=e.lineDashOffset,c=e.lineJoin,d=e.lineWidth,g=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=s||l!=e.currentLineDash&&!ir(e.currentLineDash,l)||e.currentLineDashOffset!=u||e.currentLineJoin!=c||e.currentLineWidth!=d||e.currentMiterLimit!=g)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=s,e.currentLineDash=l,e.currentLineDashOffset=u,e.currentLineJoin=c,e.currentLineWidth=d,e.currentMiterLimit=g)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[fe.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Vm(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Kh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class sx extends rl{constructor(e,t,n,s){super(e,t,n,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,n){if(!this.image_||this.maxExtent&&!ks(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),l=e.getStride(),u=this.coordinates.length,c=this.appendFlatPointCoordinates(s,l);this.instructions.push([fe.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,n){if(!this.image_)return;this.beginGeometry(e,t,n);const s=e.getFlatCoordinates(),l=[];for(let d=0,g=s.length;d<g;d+=e.getStride())(!this.maxExtent||ks(this.maxExtent,s.slice(d,d+2)))&&l.push(s[d],s[d+1]);const u=this.coordinates.length,c=this.appendFlatPointCoordinates(l,2);this.instructions.push([fe.DRAW_IMAGE,u,c,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,u,c,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),s=e.getSize(),l=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=l[0],this.originY_=l[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class ox extends rl{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinates_(e,t,n,s){const l=this.coordinates.length,u=this.appendFlatLineCoordinates(e,t,n,s,!1,!1),c=[fe.MOVE_TO_LINE_TO,l,u];return this.instructions.push(c),this.hitDetectionInstructions.push(c),n}drawLineString(e,t,n){const s=this.state,l=s.strokeStyle,u=s.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di],Ir);const c=e.getFlatCoordinates(),d=e.getStride();this.drawFlatCoordinates_(c,0,c.length,d),this.hitDetectionInstructions.push(Hi),this.endGeometry(t)}drawMultiLineString(e,t,n){const s=this.state,l=s.strokeStyle,u=s.lineWidth;if(l===void 0||u===void 0)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(e,t,n),this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di],Ir);const c=e.getEnds(),d=e.getFlatCoordinates(),g=e.getStride();let p=0;for(let _=0,y=c.length;_<y;++_)p=this.drawFlatCoordinates_(d,p,c[_],g);this.hitDetectionInstructions.push(Hi),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Hi),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Hi),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ir)}}class _m extends rl{constructor(e,t,n,s){super(e,t,n,s)}drawFlatCoordinatess_(e,t,n,s){const l=this.state,u=l.fillStyle!==void 0,c=l.strokeStyle!==void 0,d=n.length;this.instructions.push(Ir),this.hitDetectionInstructions.push(Ir);for(let g=0;g<d;++g){const p=n[g],_=this.coordinates.length,y=this.appendFlatLineCoordinates(e,t,p,s,!0,!c),x=[fe.MOVE_TO_LINE_TO,_,y];this.instructions.push(x),this.hitDetectionInstructions.push(x),c&&(this.instructions.push(mm),this.hitDetectionInstructions.push(mm)),t=p}return u&&(this.instructions.push(Ca),this.hitDetectionInstructions.push(Ca)),c&&(this.instructions.push(Hi),this.hitDetectionInstructions.push(Hi)),t}drawCircle(e,t,n){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Gt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di]);const c=e.getFlatCoordinates(),d=e.getStride(),g=this.coordinates.length;this.appendFlatLineCoordinates(c,0,c.length,d,!1,!1);const p=[fe.CIRCLE,g];this.instructions.push(Ir,p),this.hitDetectionInstructions.push(Ir,p),s.fillStyle!==void 0&&(this.instructions.push(Ca),this.hitDetectionInstructions.push(Ca)),s.strokeStyle!==void 0&&(this.instructions.push(Hi),this.hitDetectionInstructions.push(Hi)),this.endGeometry(t)}drawPolygon(e,t,n){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Gt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di]);const c=e.getEnds(),d=e.getOrientedFlatCoordinates(),g=e.getStride();this.drawFlatCoordinatess_(d,0,c,g),this.endGeometry(t)}drawMultiPolygon(e,t,n){const s=this.state,l=s.fillStyle,u=s.strokeStyle;if(l===void 0&&u===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,n),s.fillStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_FILL_STYLE,Gt]),s.strokeStyle!==void 0&&this.hitDetectionInstructions.push([fe.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,hi,di]);const c=e.getEndss(),d=e.getOrientedFlatCoordinates(),g=e.getStride();let p=0;for(let _=0,y=c.length;_<y;++_)p=this.drawFlatCoordinatess_(d,p,c[_],g);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,s=t.length;n<s;++n)t[n]=Cr(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lx(r,e,t,n,s){const l=[];let u=t,c=0,d=e.slice(t,2);for(;c<r&&u+s<n;){const[g,p]=d.slice(-2),_=e[u+s],y=e[u+s+1],x=Math.sqrt((_-g)*(_-g)+(y-p)*(y-p));if(c+=x,c>=r){const E=(r-c+x)/x,w=$t(g,_,E),C=$t(p,y,E);d.push(w,C),l.push(d),d=[w,C],c==r&&(u+=s),c=0}else if(c<r)d.push(e[u+s],e[u+s+1]),u+=s;else{const E=x-c,w=$t(g,_,E/x),C=$t(p,y,E/x);d.push(w,C),l.push(d),d=[w,C],c=0,u+=s}}return c>0&&l.push(d),l}function ax(r,e,t,n,s){let l=t,u=t,c=0,d=0,g=t,p,_,y,x,E,w,C,I,T,D;for(_=t;_<n;_+=s){const M=e[_],A=e[_+1];E!==void 0&&(T=M-E,D=A-w,x=Math.sqrt(T*T+D*D),C!==void 0&&(d+=y,p=Math.acos((C*T+I*D)/(y*x)),p>r&&(d>c&&(c=d,l=g,u=_),d=0,g=_-s)),y=x,C=T,I=D),E=M,w=A}return d+=x,d>c?[g,_]:[l,u]}const ja={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class ux extends rl{constructor(e,t,n,s){super(e,t,n,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Gt]={fillStyle:Gt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,n){const s=this.textFillState_,l=this.textStrokeState_,u=this.textState_;if(this.text_===""||!u||!s&&!l)return;const c=this.coordinates;let d=c.length;const g=e.getType();let p=null,_=e.getStride();if(u.placement==="line"&&(g=="LineString"||g=="MultiLineString"||g=="Polygon"||g=="MultiPolygon")){if(!Ut(this.maxExtent,e.getExtent()))return;let y;if(p=e.getFlatCoordinates(),g=="LineString")y=[p.length];else if(g=="MultiLineString")y=e.getEnds();else if(g=="Polygon")y=e.getEnds().slice(0,1);else if(g=="MultiPolygon"){const C=e.getEndss();y=[];for(let I=0,T=C.length;I<T;++I)y.push(C[I][0])}this.beginGeometry(e,t,n);const x=u.repeat,E=x?void 0:u.textAlign;let w=0;for(let C=0,I=y.length;C<I;++C){let T;x?T=lx(x*this.resolution,p,w,y[C],_):T=[p.slice(w,y[C])];for(let D=0,M=T.length;D<M;++D){const A=T[D];let X=0,K=A.length;if(E==null){const W=ax(u.maxAngle,A,0,A.length,2);X=W[0],K=W[1]}for(let W=X;W<K;W+=_)c.push(A[W],A[W+1]);const b=c.length;w=y[C],this.drawChars_(d,b),d=b}}this.endGeometry(t)}else{let y=u.overflow?null:[];switch(g){case"Point":case"MultiPoint":p=e.getFlatCoordinates();break;case"LineString":p=e.getFlatMidpoint();break;case"Circle":p=e.getCenter();break;case"MultiLineString":p=e.getFlatMidpoints(),_=2;break;case"Polygon":p=e.getFlatInteriorPoint(),u.overflow||y.push(p[2]/this.resolution),_=3;break;case"MultiPolygon":const T=e.getFlatInteriorPoints();p=[];for(let D=0,M=T.length;D<M;D+=3)u.overflow||y.push(T[D+2]/this.resolution),p.push(T[D],T[D+1]);if(p.length===0)return;_=2;break}const x=this.appendFlatPointCoordinates(p,_);if(x===d)return;if(y&&(x-d)/2!==p.length/_){let T=d/2;y=y.filter((D,M)=>{const A=c[(T+M)*2]===p[M*_]&&c[(T+M)*2+1]===p[M*_+1];return A||--T,A})}this.saveTextStates_(),(u.backgroundFill||u.backgroundStroke)&&(this.setFillStrokeStyle(u.backgroundFill,u.backgroundStroke),u.backgroundFill&&this.updateFillStyle(this.state,this.createFill),u.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,n);let E=u.padding;if(E!=Tr&&(u.scale[0]<0||u.scale[1]<0)){let T=u.padding[0],D=u.padding[1],M=u.padding[2],A=u.padding[3];u.scale[0]<0&&(D=-D,A=-A),u.scale[1]<0&&(T=-T,M=-M),E=[T,D,M,A]}const w=this.pixelRatio;this.instructions.push([fe.DRAW_IMAGE,d,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,E==Tr?Tr:E.map(function(T){return T*w}),!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const C=1/w,I=this.state.fillStyle;u.backgroundFill&&(this.state.fillStyle=Gt,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([fe.DRAW_IMAGE,d,x,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[C,C],NaN,this.declutterMode_,this.declutterImageWithText_,E,!!u.backgroundFill,!!u.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Gt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),u.backgroundFill&&(this.state.fillStyle=I,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const l=this.textKey_;l in this.textStates||(this.textStates[l]={font:t.font,textAlign:t.textAlign||Ko,justify:t.justify,textBaseline:t.textBaseline||za,scale:t.scale});const u=this.fillKey_;n&&(u in this.fillStates||(this.fillStates[u]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,s=this.textState_,l=this.strokeKey_,u=this.textKey_,c=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,g=ja[s.textBaseline],p=this.textOffsetY_*d,_=this.text_,y=n?n.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([fe.DRAW_CHARS,e,t,g,s.overflow,c,s.maxAngle,d,p,l,y*d,_,u,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([fe.DRAW_CHARS,e,t,g,s.overflow,c&&Gt,s.maxAngle,d,p,l,y*d,_,u,1/d,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let n,s,l;if(!e)this.text_="";else{const u=e.getFill();u?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=Wn(u.getColor()||Gt)):(s=null,this.textFillState_=s);const c=e.getStroke();if(!c)l=null,this.textStrokeState_=l;else{l=this.textStrokeState_,l||(l={},this.textStrokeState_=l);const w=c.getLineDash(),C=c.getLineDashOffset(),I=c.getWidth(),T=c.getMiterLimit();l.lineCap=c.getLineCap()||zs,l.lineDash=w?w.slice():hi,l.lineDashOffset=C===void 0?di:C,l.lineJoin=c.getLineJoin()||Gs,l.lineWidth=I===void 0?Zo:I,l.miterLimit=T===void 0?Yo:T,l.strokeStyle=Wn(c.getColor()||Vo)}n=this.textState_;const d=e.getFont()||R_;Zv(d);const g=e.getScaleArray();n.overflow=e.getOverflow(),n.font=d,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||za,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||Tr,n.scale=g===void 0?[1,1]:g;const p=e.getOffsetX(),_=e.getOffsetY(),y=e.getRotateWithView(),x=e.getKeepUpright(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=_===void 0?0:_,this.textRotateWithView_=y===void 0?!1:y,this.textKeepUpright_=x===void 0?!0:x,this.textRotation_=E===void 0?0:E,this.strokeKey_=l?(typeof l.strokeStyle=="string"?l.strokeStyle:Te(l.strokeStyle))+l.lineCap+l.lineDashOffset+"|"+l.lineWidth+l.lineJoin+l.miterLimit+"["+l.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=s&&s.fillStyle?typeof s.fillStyle=="string"?s.fillStyle:"|"+Te(s.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const cx={Circle:_m,Default:rl,Image:sx,LineString:ox,Polygon:_m,Text:ux};class hx{constructor(e,t,n,s){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=s,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const s in n){const l=n[s].finish();e[t][s]=l}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[n];s===void 0&&(s={},this.buildersByZIndex_[n]=s);let l=s[t];if(l===void 0){const u=cx[t];l=new u(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[t]=l}return l}}const dx=5;class fx extends Qo{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=dx}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return ve()}getData(e){return null}prepareFrame(e){return ve()}renderFrame(e,t){return ve()}forEachFeatureAtCoordinate(e,t,n,s,l){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ce.LOADED||t.getState()===Ce.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ce.LOADED&&t!=Ce.ERROR&&e.addEventListener(Ee.CHANGE,this.boundHandleImageChange_),t==Ce.IDLE&&(e.load(),t=e.getState()),t==Ce.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class j_ extends Bn{constructor(e,t,n,s){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=s}}class X_{constructor(){vp(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Da(),{get:(e,t)=>{if(typeof Da()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,n),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let n=0,s=t.length;n<s;++n){const l=t[n];if(typeof l=="function"){l(e);continue}const u=t[++n];if(typeof e[l]=="function")e[l](...u);else{if(typeof u=="function"){e[l]=u(e);continue}e[l]=u}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const ym=[];let Es=null;function gx(){Es=et(1,1,void 0,{willReadFrequently:!0})}class W_ extends fx{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Pn(),this.pixelTransform=Pn(),this.inversePixelTransform=Pn(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,n){Es||gx(),Es.clearRect(0,0,1,1);let s;try{Es.drawImage(e,t,n,1,1,0,0,1,1),s=Es.getImageData(0,0,1,1).data}catch{return Es=null,null}return s}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const s=this.getLayer().getClassName();let l,u;if(e&&e.className===s&&(!n||e&&e.style.backgroundColor&&ir(Os(e.style.backgroundColor),Os(n)))){const c=e.firstElementChild;c instanceof HTMLCanvasElement&&(u=c.getContext("2d"))}if(u&&u.canvas.style.transform===t?(this.container=e,this.context=u,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){l=document.createElement("div"),l.className=s;let c=l.style;c.position="absolute",c.width="100%",c.height="100%",u=et();const d=u.canvas;l.appendChild(d),c=d.style,c.position="absolute",c.left="0",c.transformOrigin="top left",this.container=l,this.context=u}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const s=gi(n),l=Qa(n),u=qa(n),c=$a(n);ct(t.coordinateToPixelTransform,s),ct(t.coordinateToPixelTransform,l),ct(t.coordinateToPixelTransform,u),ct(t.coordinateToPixelTransform,c);const d=this.inversePixelTransform;ct(d,s),ct(d,l),ct(d,u),ct(d,c),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.lineTo(Math.round(u[0]),Math.round(u[1])),e.lineTo(Math.round(c[0]),Math.round(c[1])),e.clip()}prepareContainer(e,t){const n=e.extent,s=e.viewState.resolution,l=e.viewState.rotation,u=e.pixelRatio,c=Math.round(Me(n)/s*u),d=Math.round(rt(n)/s*u);fi(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/u,1/u,l,-c/2,-d/2),Ym(this.inversePixelTransform,this.pixelTransform);const g=I1(this.pixelTransform);if(this.useContainer(t,g,this.getBackground(e)),!this.containerReused){const p=this.context.canvas;p.width!=c||p.height!=d?(p.width=c,p.height=d):this.context.clearRect(0,0,c,d),g!==p.style.transform&&(p.style.transform=g)}}dispatchRenderEvent_(e,t,n){const s=this.getLayer();if(s.hasListener(e)){const l=new j_(e,this.inversePixelTransform,n,t);s.dispatchEvent(l)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(hn.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(hn.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new X_),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(hn.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(hn.POSTRENDER,this.context,e))}getRenderTransform(e,t,n,s,l,u,c){const d=l/2,g=u/2,p=s/t,_=-p,y=-e[0]+c,x=-e[1];return fi(this.tempTransform,d,g,p,_,-n,y,x)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function px(r,e,t,n,s,l,u,c,d,g,p,_,y=!0){let x=r[e],E=r[e+1],w=0,C=0,I=0,T=0;function D(){w=x,C=E,e+=n,x=r[e],E=r[e+1],T+=I,I=Math.sqrt((x-w)*(x-w)+(E-C)*(E-C))}do D();while(e<t-n&&T+I<l);let M=I===0?0:(l-T)/I;const A=$t(w,x,M),X=$t(C,E,M),K=e-n,b=T,W=l+c*d(g,s,p);for(;e<t-n&&T+I<W;)D();M=I===0?0:(W-T)/I;const B=$t(w,x,M),ie=$t(C,E,M);let $=!1;if(y)if(_){const Z=[A,X,B,ie];s_(Z,0,4,2,_,Z,Z),$=Z[0]>Z[2]}else $=A>B;const te=Math.PI,J=[],ee=K+n===e;e=K,I=0,T=b,x=r[e],E=r[e+1];let ne;if(ee){D(),ne=Math.atan2(E-C,x-w),$&&(ne+=ne>0?-te:te);const Z=(B+A)/2,U=(ie+X)/2;return J[0]=[Z,U,(W-l)/2,ne,s],J}s=s.replace(/\n/g," ");for(let Z=0,U=s.length;Z<U;){D();let q=Math.atan2(E-C,x-w);if($&&(q+=q>0?-te:te),ne!==void 0){let ue=q-ne;if(ue+=ue>te?-2*te:ue<-te?2*te:0,Math.abs(ue)>u)return null}ne=q;const G=Z;let R=0;for(;Z<U;++Z){const ue=$?U-Z-1:Z,he=c*d(g,s[ue],p);if(e+n<t&&T+I<l+R+he/2)break;R+=he}if(Z===G)continue;const N=$?s.substring(U-G,U-Z):s.substring(G,Z);M=I===0?0:(l+R/2-T)/I;const re=$t(w,x,M),z=$t(C,E,M);J.push([re,z,R/2,q,N]),l+=R}return J}const fs=Qt(),Ui=[],ri=[],si=[],ji=[];function vm(r){return r[3].declutterBox}const Em=new RegExp("[-----]");function fh(r,e){return e==="start"?e=Em.test(r)?"right":"left":e==="end"&&(e=Em.test(r)?"left":"right"),ja[e]}function mx(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class _x{constructor(e,t,n,s,l){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=Pn(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=l?new X_:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,n,s){const l=e+t+n+s;if(this.labels_[l])return this.labels_[l];const u=s?this.strokeStates[s]:null,c=n?this.fillStates[n]:null,d=this.textStates[t],g=this.pixelRatio,p=[d.scale[0]*g,d.scale[1]*g],_=d.justify?ja[d.justify]:fh(Array.isArray(e)?e[0]:e,d.textAlign||Ko),y=s&&u.lineWidth?u.lineWidth:0,x=Array.isArray(e)?e:String(e).split(`
`).reduce(mx,[]),{width:E,height:w,widths:C,heights:I,lineWidths:T}=$v(d,x),D=E+y,M=[],A=(D+2)*p[0],X=(w+y)*p[1],K={width:A<0?Math.floor(A):Math.ceil(A),height:X<0?Math.floor(X):Math.ceil(X),contextInstructions:M};(p[0]!=1||p[1]!=1)&&M.push("scale",p),s&&(M.push("strokeStyle",u.strokeStyle),M.push("lineWidth",y),M.push("lineCap",u.lineCap),M.push("lineJoin",u.lineJoin),M.push("miterLimit",u.miterLimit),M.push("setLineDash",[u.lineDash]),M.push("lineDashOffset",u.lineDashOffset)),n&&M.push("fillStyle",c.fillStyle),M.push("textBaseline","middle"),M.push("textAlign","center");const b=.5-_;let W=_*D+b*y;const B=[],ie=[];let $=0,te=0,J=0,ee=0,ne;for(let Z=0,U=x.length;Z<U;Z+=2){const q=x[Z];if(q===`
`){te+=$,$=0,W=_*D+b*y,++ee;continue}const G=x[Z+1]||d.font;G!==ne&&(s&&B.push("font",G),n&&ie.push("font",G),ne=G),$=Math.max($,I[J]);const R=[q,W+b*C[J]+_*(C[J]-T[ee]),.5*(y+$)+te];W+=C[J],s&&B.push("strokeText",R),n&&ie.push("fillText",R),++J}return Array.prototype.push.apply(M,B),Array.prototype.push.apply(M,ie),this.labels_[l]=K,K}replayTextBackground_(e,t,n,s,l,u,c){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,l),e.lineTo.apply(e,t),u&&(this.alignAndScaleFill_=u[2],this.fill_(e)),c&&(this.setStrokeStyle_(e,c),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,s,l,u,c,d,g,p,_,y,x,E,w,C){c*=y[0],d*=y[1];let I=n-c,T=s-d;const D=l+g>e?e-g:l,M=u+p>t?t-p:u,A=E[3]+D*y[0]+E[1],X=E[0]+M*y[1]+E[2],K=I-E[3],b=T-E[0];(w||_!==0)&&(Ui[0]=K,ji[0]=K,Ui[1]=b,ri[1]=b,ri[0]=K+A,si[0]=ri[0],si[1]=b+X,ji[1]=si[1]);let W;return _!==0?(W=fi(Pn(),n,s,1,1,_,-n,-s),ct(W,Ui),ct(W,ri),ct(W,si),ct(W,ji),Qi(Math.min(Ui[0],ri[0],si[0],ji[0]),Math.min(Ui[1],ri[1],si[1],ji[1]),Math.max(Ui[0],ri[0],si[0],ji[0]),Math.max(Ui[1],ri[1],si[1],ji[1]),fs)):Qi(Math.min(K,K+A),Math.min(b,b+X),Math.max(K,K+A),Math.max(b,b+X),fs),x&&(I=Math.round(I),T=Math.round(T)),{drawImageX:I,drawImageY:T,drawImageW:D,drawImageH:M,originX:g,originY:p,declutterBox:{minX:fs[0],minY:fs[1],maxX:fs[2],maxY:fs[3],value:C},canvasTransform:W,scale:y}}replayImageOrLabel_(e,t,n,s,l,u,c){const d=!!(u||c),g=s.declutterBox,p=c?c[2]*s.scale[0]/2:0;return g.minX-p<=t[0]&&g.maxX+p>=0&&g.minY-p<=t[1]&&g.maxY+p>=0&&(d&&this.replayTextBackground_(e,Ui,ri,si,ji,u,c),qv(e,s.canvasTransform,l,n,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const n=ct(this.renderedTransform_,[0,0]),s=512*this.pixelRatio;e.save(),e.translate(n[0]%s,n[1]%s),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,s){const l=this.textStates[t],u=this.createLabel(e,t,s,n),c=this.strokeStates[n],d=this.pixelRatio,g=fh(Array.isArray(e)?e[0]:e,l.textAlign||Ko),p=ja[l.textBaseline||za],_=c&&c.lineWidth?c.lineWidth:0,y=u.width/d-2*l.scale[0],x=g*y+2*(.5-g)*_,E=p*u.height/d+2*(.5-p)*_;return{label:u,anchorX:x,anchorY:E}}execute_(e,t,n,s,l,u,c,d){const g=this.zIndexContext_;let p;this.pixelCoordinates_&&ir(n,this.renderedTransform_)?p=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),p=qi(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),R1(this.renderedTransform_,n));let _=0;const y=s.length;let x=0,E,w,C,I,T,D,M,A,X,K,b,W,B,ie=0,$=0,te=null,J=null;const ee=this.coordinateCache_,ne=this.viewRotation_,Z=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,U={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ne},q=this.instructions!=s||this.overlaps?0:200;let G,R,N,re;for(;_<y;){const z=s[_];switch(z[0]){case fe.BEGIN_GEOMETRY:G=z[1],re=z[3],G.getGeometry()?c!==void 0&&!Ut(c,re.getExtent())?_=z[2]+1:++_:_=z[2],g&&(g.zIndex=z[4]);break;case fe.BEGIN_PATH:ie>q&&(this.fill_(e),ie=0),$>q&&(e.stroke(),$=0),!ie&&!$&&(e.beginPath(),T=NaN,D=NaN),++_;break;case fe.CIRCLE:x=z[1];const he=p[x],me=p[x+1],xe=p[x+2],Re=p[x+3],Ne=xe-he,St=Re-me,kn=Math.sqrt(Ne*Ne+St*St);e.moveTo(he+kn,me),e.arc(he,me,kn,0,2*Math.PI,!0),++_;break;case fe.CLOSE_PATH:e.closePath(),++_;break;case fe.CUSTOM:x=z[1],E=z[2];const pn=z[3],Vn=z[4],Fn=z[5];U.geometry=pn,U.feature=G,_ in ee||(ee[_]=[]);const Jt=ee[_];Fn?Fn(p,x,E,2,Jt):(Jt[0]=p[x],Jt[1]=p[x+1],Jt.length=2),g&&(g.zIndex=z[6]),Vn(Jt,U),++_;break;case fe.DRAW_IMAGE:x=z[1],E=z[2],X=z[3],w=z[4],C=z[5];let mt=z[6];const Bt=z[7],Dn=z[8],en=z[9],tn=z[10];let mn=z[11];const Kn=z[12];let Zn=z[13];I=z[14]||"declutter";const He=z[15];if(!X&&z.length>=20){K=z[19],b=z[20],W=z[21],B=z[22];const Rt=this.drawLabelWithPointPlacement_(K,b,W,B);X=Rt.label,z[3]=X;const _n=z[23];w=(Rt.anchorX-_n)*this.pixelRatio,z[4]=w;const Tt=z[24];C=(Rt.anchorY-Tt)*this.pixelRatio,z[5]=C,mt=X.height,z[6]=mt,Zn=X.width,z[13]=Zn}let zr;z.length>25&&(zr=z[25]);let rr,Hn,sr;z.length>17?(rr=z[16],Hn=z[17],sr=z[18]):(rr=Tr,Hn=!1,sr=!1),tn&&Z?mn+=ne:!tn&&!Z&&(mn-=ne);let or=0;for(;x<E;x+=2){if(zr&&zr[or++]<Zn/this.pixelRatio)continue;const Rt=this.calculateImageOrLabelDimensions_(X.width,X.height,p[x],p[x+1],Zn,mt,w,C,Dn,en,mn,Kn,l,rr,Hn||sr,G),_n=[e,t,X,Rt,Bt,Hn?te:null,sr?J:null];if(d){let Tt,_t,yt;if(He){const ze=E-x;if(!He[ze]){He[ze]={args:_n,declutterMode:I};continue}const Qe=He[ze];Tt=Qe.args,_t=Qe.declutterMode,delete He[ze],yt=vm(Tt)}let It,yn;if(Tt&&(_t!=="declutter"||!d.collides(yt))&&(It=!0),(I!=="declutter"||!d.collides(Rt.declutterBox))&&(yn=!0),_t==="declutter"&&I==="declutter"){const ze=It&&yn;It=ze,yn=ze}It&&(_t!=="none"&&d.insert(yt),this.replayImageOrLabel_.apply(this,Tt)),yn&&(I!=="none"&&d.insert(Rt.declutterBox),this.replayImageOrLabel_.apply(this,_n))}else this.replayImageOrLabel_.apply(this,_n)}++_;break;case fe.DRAW_CHARS:const _i=z[1],ol=z[2],Gr=z[3],ll=z[4];B=z[5];const mu=z[6],br=z[7],Ur=z[8];W=z[9];const lr=z[10];K=z[11],b=z[12];const jr=[z[13],z[13]];I=z[14]||"declutter";const Xs=z[15],On=this.textStates[b],nn=On.font,yi=[On.scale[0]*br,On.scale[1]*br];let vi;nn in this.widths_?vi=this.widths_[nn]:(vi={},this.widths_[nn]=vi);const Ws=C_(p,_i,ol,2),Bs=Math.abs(yi[0])*tm(nn,K,vi);if(ll||Bs<=Ws){const Rt=this.textStates[b].textAlign,_n=(Ws-Bs)*fh(K,Rt),Tt=px(p,_i,ol,2,K,_n,mu,Math.abs(yi[0]),tm,nn,vi,Z?0:this.viewRotation_,Xs);e:if(Tt){const _t=[];let yt,It,yn,ze,Qe;if(W)for(yt=0,It=Tt.length;yt<It;++yt){Qe=Tt[yt],yn=Qe[4],ze=this.createLabel(yn,b,"",W),w=Qe[2]+(yi[0]<0?-lr:lr),C=Gr*ze.height+(.5-Gr)*2*lr*yi[1]/yi[0]-Ur;const At=this.calculateImageOrLabelDimensions_(ze.width,ze.height,Qe[0],Qe[1],ze.width,ze.height,w,C,0,0,Qe[3],jr,!1,Tr,!1,G);if(d&&I==="declutter"&&d.collides(At.declutterBox))break e;_t.push([e,t,ze,At,1,null,null])}if(B)for(yt=0,It=Tt.length;yt<It;++yt){Qe=Tt[yt],yn=Qe[4],ze=this.createLabel(yn,b,B,""),w=Qe[2],C=Gr*ze.height-Ur;const At=this.calculateImageOrLabelDimensions_(ze.width,ze.height,Qe[0],Qe[1],ze.width,ze.height,w,C,0,0,Qe[3],jr,!1,Tr,!1,G);if(d&&I==="declutter"&&d.collides(At.declutterBox))break e;_t.push([e,t,ze,At,1,null,null])}d&&I!=="none"&&d.load(_t.map(vm));for(let At=0,Ys=_t.length;At<Ys;++At)this.replayImageOrLabel_.apply(this,_t[At])}}++_;break;case fe.END_GEOMETRY:if(u!==void 0){G=z[1];const Rt=u(G,re,I);if(Rt)return Rt}++_;break;case fe.FILL:q?ie++:this.fill_(e),++_;break;case fe.MOVE_TO_LINE_TO:for(x=z[1],E=z[2],R=p[x],N=p[x+1],e.moveTo(R,N),T=R+.5|0,D=N+.5|0,x+=2;x<E;x+=2)R=p[x],N=p[x+1],M=R+.5|0,A=N+.5|0,(x==E-2||M!==T||A!==D)&&(e.lineTo(R,N),T=M,D=A);++_;break;case fe.SET_FILL_STYLE:te=z,this.alignAndScaleFill_=z[2],ie&&(this.fill_(e),ie=0,$&&(e.stroke(),$=0)),e.fillStyle=z[1],++_;break;case fe.SET_STROKE_STYLE:J=z,$&&(e.stroke(),$=0),this.setStrokeStyle_(e,z),++_;break;case fe.STROKE:q?$++:e.stroke(),++_;break;default:++_;break}}ie&&this.fill_(e),$&&e.stroke()}execute(e,t,n,s,l,u){this.viewRotation_=s,this.execute_(e,t,n,this.instructions,l,void 0,void 0,u)}executeHitDetection(e,t,n,s,l){return this.viewRotation_=n,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,s,l)}}const Ss=["Polygon","Circle","LineString","Image","Text","Default"],B_=["Image","Text"],yx=Ss.filter(r=>!B_.includes(r));class vx{constructor(e,t,n,s,l,u,c){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=u,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Pn(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(l,c)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e,t){for(const n in e){let s=this.executorsByZIndex_[n];s===void 0&&(s={},this.executorsByZIndex_[n]=s);const l=e[n];for(const u in l){const c=l[u];s[u]=new _x(this.resolution_,this.pixelRatio_,this.overlaps_,c,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let s=0,l=e.length;s<l;++s)if(e[s]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,s,l,u){s=Math.round(s);const c=s*2+1,d=fi(this.hitDetectionTransform_,s+.5,s+.5,1/t,-1/t,-n,-e[0],-e[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=et(c,c,void 0,{willReadFrequently:!0}));const p=this.hitDetectionContext_;p.canvas.width!==c||p.canvas.height!==c?(p.canvas.width=c,p.canvas.height=c):g||p.clearRect(0,0,c,c);let _;this.renderBuffer_!==void 0&&(_=Qt(),zo(_,e),Kh(_,t*(this.renderBuffer_+s),_));const y=Ex(s);let x;function E(A,X,K){const b=p.getImageData(0,0,c,c).data;for(let W=0,B=y.length;W<B;W++)if(b[y[W]]>0){if(!u||K==="none"||x!=="Image"&&x!=="Text"||u.includes(A)){const ie=(y[W]-3)/4,$=s-ie%c,te=s-(ie/c|0),J=l(A,X,$*$+te*te);if(J)return J}p.clearRect(0,0,c,c);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(ui);let C,I,T,D,M;for(C=w.length-1;C>=0;--C){const A=w[C].toString();for(T=this.executorsByZIndex_[A],I=Ss.length-1;I>=0;--I)if(x=Ss[I],D=T[x],D!==void 0&&(M=D.executeHitDetection(p,d,n,E,_),M))return M}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],s=t[1],l=t[2],u=t[3],c=[n,s,n,u,l,u,l,s];return qi(c,0,8,2,e,c),c}isEmpty(){return Pr(this.executorsByZIndex_)}execute(e,t,n,s,l,u,c){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(c?y1:ui),u=u||Ss;const g=Ss.length;for(let p=0,_=d.length;p<_;++p){const y=d[p].toString(),x=this.executorsByZIndex_[y];for(let E=0,w=u.length;E<w;++E){const C=u[E],I=x[C];if(I!==void 0){const T=c===null?void 0:I.getZIndexContext(),D=T?T.getContext():e,M=this.maxExtent_&&C!=="Image"&&C!=="Text";if(M&&(D.save(),this.clip(D,n)),!T||C==="Text"||C==="Image"?I.execute(D,t,n,s,l,c):T.pushFunction(A=>I.execute(A,t,n,s,l,c)),M&&D.restore(),T){T.offset();const A=d[p]*g+E;this.deferredZIndexContexts_[A]||(this.deferredZIndexContexts_[A]=[]),this.deferredZIndexContexts_[A].push(T)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ui);for(let n=0,s=t.length;n<s;++n)e[t[n]].forEach(l=>{l.draw(this.renderedContext_),l.clear()}),e[t[n]].length=0}}const gh={};function Ex(r){if(gh[r]!==void 0)return gh[r];const e=r*2+1,t=r*r,n=new Array(t+1);for(let l=0;l<=r;++l)for(let u=0;u<=r;++u){const c=l*l+u*u;if(c>t)break;let d=n[c];d||(d=[],n[c]=d),d.push(((r+l)*e+(r+u))*4+3),l>0&&d.push(((r-l)*e+(r+u))*4+3),u>0&&(d.push(((r+l)*e+(r-u))*4+3),l>0&&d.push(((r-l)*e+(r-u))*4+3))}const s=[];for(let l=0,u=n.length;l<u;++l)n[l]&&s.push(...n[l]);return gh[r]=s,s}class xx extends U_{constructor(e,t,n,s,l,u,c){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=s,this.transformRotation_=s?ed(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=l,this.squaredTolerance_=u,this.userTransform_=c,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Pn()}drawImages_(e,t,n,s){if(!this.image_)return;const l=qi(e,t,n,s,this.transform_,this.pixelCoordinates_),u=this.context_,c=this.tmpLocalTransform_,d=u.globalAlpha;this.imageOpacity_!=1&&(u.globalAlpha=d*this.imageOpacity_);let g=this.imageRotation_;this.transformRotation_===0&&(g-=this.viewRotation_),this.imageRotateWithView_&&(g+=this.viewRotation_);for(let p=0,_=l.length;p<_;p+=2){const y=l[p]-this.imageAnchorX_,x=l[p+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=y+this.imageAnchorX_,w=x+this.imageAnchorY_;fi(c,E,w,1,1,g,-E,-w),u.save(),u.transform.apply(u,c),u.translate(E,w),u.scale(this.imageScale_[0],this.imageScale_[1]),u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),u.restore()}else u.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,y,x,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(u.globalAlpha=d)}drawText_(e,t,n,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const l=qi(e,t,n,s,this.transform_,this.pixelCoordinates_),u=this.context_;let c=this.textRotation_;for(this.transformRotation_===0&&(c-=this.viewRotation_),this.textRotateWithView_&&(c+=this.viewRotation_);t<n;t+=s){const d=l[t]+this.textOffsetX_,g=l[t+1]+this.textOffsetY_;c!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(u.save(),u.translate(d-this.textOffsetX_,g-this.textOffsetY_),u.rotate(c),u.translate(this.textOffsetX_,this.textOffsetY_),u.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&u.strokeText(this.text_,0,0),this.textFillState_&&u.fillText(this.text_,0,0),u.restore()):(this.textStrokeState_&&u.strokeText(this.text_,d,g),this.textFillState_&&u.fillText(this.text_,d,g))}}moveToLineTo_(e,t,n,s,l){const u=this.context_,c=qi(e,t,n,s,this.transform_,this.pixelCoordinates_);u.moveTo(c[0],c[1]);let d=c.length;l&&(d-=2);for(let g=2;g<d;g+=2)u.lineTo(c[g],c[g+1]);return l&&u.closePath(),n}drawRings_(e,t,n,s){for(let l=0,u=n.length;l<u;++l)t=this.moveToLineTo_(e,t,n[l],s,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ut(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=mv(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],s=t[3]-t[1],l=Math.sqrt(n*n+s*s),u=this.context_;u.beginPath(),u.arc(t[0],t[1],l,0,2*Math.PI),this.fillState_&&u.fill(),this.strokeState_&&u.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,s=t.length;n<s;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ut(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Ut(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,s=e.getFlatCoordinates();let l=0;const u=e.getEnds(),c=e.getStride();n.beginPath();for(let d=0,g=u.length;d<g;++d)l=this.moveToLineTo_(s,l,u[d],c,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ut(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ut(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let s=0;const l=e.getEndss(),u=e.getStride();t.beginPath();for(let c=0,d=l.length;c<d;++c){const g=l[c];s=this.drawRings_(n,s,g,u)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),ir(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,s=e.textAlign?e.textAlign:Ko;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=s&&(n.textAlign=s,t.textAlign=s),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=s,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:Wn(n||Gt)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),s=t.getLineCap(),l=t.getLineDash(),u=t.getLineDashOffset(),c=t.getLineJoin(),d=t.getWidth(),g=t.getMiterLimit(),p=l||hi;this.strokeState_={lineCap:s!==void 0?s:zs,lineDash:this.pixelRatio_===1?p:p.map(_=>_*this.pixelRatio_),lineDashOffset:(u||di)*this.pixelRatio_,lineJoin:c!==void 0?c:Gs,lineWidth:(d!==void 0?d:Zo)*this.pixelRatio_,miterLimit:g!==void 0?g:Yo,strokeStyle:Wn(n||Vo)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),l=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*n,this.imageAnchorY_=s[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=l[0],this.imageOriginY_=l[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const u=e.getScaleArray();this.imageScale_=[u[0]*this.pixelRatio_/n,u[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const x=t.getColor();this.textFillState_={fillStyle:Wn(x||Gt)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const x=n.getColor(),E=n.getLineCap(),w=n.getLineDash(),C=n.getLineDashOffset(),I=n.getLineJoin(),T=n.getWidth(),D=n.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:zs,lineDash:w||hi,lineDashOffset:C||di,lineJoin:I!==void 0?I:Gs,lineWidth:T!==void 0?T:Zo,miterLimit:D!==void 0?D:Yo,strokeStyle:Wn(x||Vo)}}const s=e.getFont(),l=e.getOffsetX(),u=e.getOffsetY(),c=e.getRotateWithView(),d=e.getRotation(),g=e.getScaleArray(),p=e.getText(),_=e.getTextAlign(),y=e.getTextBaseline();this.textState_={font:s!==void 0?s:R_,textAlign:_!==void 0?_:Ko,textBaseline:y!==void 0?y:za},this.text_=p!==void 0?Array.isArray(p)?p.reduce((x,E,w)=>x+=w%2?" ":E,""):p:"",this.textOffsetX_=l!==void 0?this.pixelRatio_*l:0,this.textOffsetY_=u!==void 0?this.pixelRatio_*u:0,this.textRotateWithView_=c!==void 0?c:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const Xn=.5;function wx(r,e,t,n,s,l,u,c,d){const g=s,p=r[0]*Xn,_=r[1]*Xn,y=et(p,_);y.imageSmoothingEnabled=!1;const x=y.canvas,E=new xx(y,Xn,s,null,u,c,null),w=t.length,C=Math.floor((256*256*256-1)/w),I={};for(let D=1;D<=w;++D){const M=t[D-1],A=M.getStyleFunction()||n;if(!A)continue;let X=A(M,l);if(!X)continue;Array.isArray(X)||(X=[X]);const b=(D*C).toString(16).padStart(7,"#00000");for(let W=0,B=X.length;W<B;++W){const ie=X[W],$=ie.getGeometryFunction()(M);if(!$||!Ut(g,$.getExtent()))continue;const te=ie.clone(),J=te.getFill();J&&J.setColor(b);const ee=te.getStroke();ee&&(ee.setColor(b),ee.setLineDash(null)),te.setText(void 0);const ne=ie.getImage();if(ne){const G=ne.getImageSize();if(!G)continue;const R=et(G[0],G[1],void 0,{alpha:!1}),N=R.canvas;R.fillStyle=b,R.fillRect(0,0,N.width,N.height),te.setImage(new cu({img:N,anchor:ne.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ne.getOrigin(),opacity:1,size:ne.getSize(),scale:ne.getScale(),rotation:ne.getRotation(),rotateWithView:ne.getRotateWithView()}))}const Z=te.getZIndex()||0;let U=I[Z];U||(U={},I[Z]=U,U.Polygon=[],U.Circle=[],U.LineString=[],U.Point=[]);const q=$.getType();if(q==="GeometryCollection"){const G=$.getGeometriesArrayRecursive();for(let R=0,N=G.length;R<N;++R){const re=G[R];U[re.getType().replace("Multi","")].push(re,te)}}else U[q.replace("Multi","")].push($,te)}}const T=Object.keys(I).map(Number).sort(ui);for(let D=0,M=T.length;D<M;++D){const A=I[T[D]];for(const X in A){const K=A[X];for(let b=0,W=K.length;b<W;b+=2){E.setStyle(K[b+1]);for(let B=0,ie=e.length;B<ie;++B)E.setTransform(e[B]),E.drawGeometry(K[b])}}}return y.getImageData(0,0,x.width,x.height)}function Cx(r,e,t){const n=[];if(t){const s=Math.floor(Math.round(r[0])*Xn),l=Math.floor(Math.round(r[1])*Xn),u=(Ke(s,0,t.width-1)+Ke(l,0,t.height-1)*t.width)*4,c=t.data[u],d=t.data[u+1],p=t.data[u+2]+256*(d+256*c),_=Math.floor((256*256*256-1)/e.length);p&&p%_===0&&n.push(e[p/_-1])}return n}const Sx=.5,Y_={Point:kx,LineString:Mx,Polygon:Dx,MultiPoint:Fx,MultiLineString:Px,MultiPolygon:Ax,GeometryCollection:Lx,Circle:Tx};function Rx(r,e){return parseInt(Te(r),10)-parseInt(Te(e),10)}function xm(r,e){const t=V_(r,e);return t*t}function V_(r,e){return Sx*r/e}function Tx(r,e,t,n,s){const l=t.getFill(),u=t.getStroke();if(l||u){const d=r.getBuilder(t.getZIndex(),"Circle");d.setFillStrokeStyle(l,u),d.drawCircle(e,n,s)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,n)}}function wm(r,e,t,n,s,l,u,c){const d=[],g=t.getImage();if(g){let y=!0;const x=g.getImageState();x==Ce.LOADED||x==Ce.ERROR?y=!1:x==Ce.IDLE&&g.load(),y&&d.push(g.ready())}const p=t.getFill();p&&p.loading()&&d.push(p.ready());const _=d.length>0;return _&&Promise.all(d).then(()=>s(null)),Ix(r,e,t,n,l,u,c),_}function Ix(r,e,t,n,s,l,u){const c=t.getGeometryFunction()(e);if(!c)return;const d=c.simplifyTransformed(n,s);if(t.getRenderer())K_(r,d,t,e,u);else{const p=Y_[d.getType()];p(r,d,t,e,u,l)}}function K_(r,e,t,n,s){if(e.getType()=="GeometryCollection"){const u=e.getGeometries();for(let c=0,d=u.length;c<d;++c)K_(r,u[c],t,n,s);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer(),s)}function Lx(r,e,t,n,s,l){const u=e.getGeometriesArray();let c,d;for(c=0,d=u.length;c<d;++c){const g=Y_[u[c].getType()];g(r,u[c],t,n,s,l)}}function Mx(r,e,t,n,s){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawLineString(e,n,s)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n,s)}}function Px(r,e,t,n,s){const l=t.getStroke();if(l){const c=r.getBuilder(t.getZIndex(),"LineString");c.setFillStrokeStyle(null,l),c.drawMultiLineString(e,n,s)}const u=t.getText();if(u&&u.getText()){const c=r.getBuilder(t.getZIndex(),"Text");c.setTextStyle(u),c.drawText(e,n,s)}}function Ax(r,e,t,n,s){const l=t.getFill(),u=t.getStroke();if(u||l){const d=r.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(l,u),d.drawMultiPolygon(e,n,s)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,n,s)}}function kx(r,e,t,n,s,l){const u=t.getImage(),c=t.getText(),d=c&&c.getText(),g=l&&u&&d?{}:void 0;if(u){if(u.getImageState()!=Ce.LOADED)return;const p=r.getBuilder(t.getZIndex(),"Image");p.setImageStyle(u,g),p.drawPoint(e,n,s)}if(d){const p=r.getBuilder(t.getZIndex(),"Text");p.setTextStyle(c,g),p.drawText(e,n,s)}}function Fx(r,e,t,n,s,l){const u=t.getImage(),c=u&&u.getOpacity()!==0,d=t.getText(),g=d&&d.getText(),p=l&&c&&g?{}:void 0;if(c){if(u.getImageState()!=Ce.LOADED)return;const _=r.getBuilder(t.getZIndex(),"Image");_.setImageStyle(u,p),_.drawMultiPoint(e,n,s)}if(g){const _=r.getBuilder(t.getZIndex(),"Text");_.setTextStyle(d,p),_.drawText(e,n,s)}}function Dx(r,e,t,n,s){const l=t.getFill(),u=t.getStroke();if(l||u){const d=r.getBuilder(t.getZIndex(),"Polygon");d.setFillStrokeStyle(l,u),d.drawPolygon(e,n,s)}const c=t.getText();if(c&&c.getText()){const d=r.getBuilder(t.getZIndex(),"Text");d.setTextStyle(c),d.drawText(e,n,s)}}class Ox extends W_{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Qt(),this.wrappedRenderedExtent_=Qt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,n){const s=t.extent,l=t.viewState,u=l.center,c=l.resolution,d=l.projection,g=l.rotation,p=d.getExtent(),_=this.getLayer().getSource(),y=this.getLayer().getDeclutter(),x=t.pixelRatio,E=t.viewHints,w=!(E[Ct.ANIMATING]||E[Ct.INTERACTING]),C=this.context,I=Math.round(Me(s)/c*x),T=Math.round(rt(s)/c*x),D=_.getWrapX()&&d.canWrapX(),M=D?Me(p):null,A=D?Math.ceil((s[2]-p[2])/M)+1:1;let X=D?Math.floor((s[0]-p[0])/M):0;do{let K=this.getRenderTransform(u,c,0,x,I,T,X*M);t.declutter&&(K=K.slice(0)),e.execute(C,[C.canvas.width,C.canvas.height],K,g,w,n===void 0?Ss:n?B_:yx,n?y&&t.declutter[y]:void 0)}while(++X<A)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=et(this.context.canvas.width,this.context.canvas.height,ym))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,su(this.context),ym.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex];this.opacity_=n.opacity;const s=e.viewState;this.prepareContainer(e,t);const l=this.context,u=this.replayGroup_;let c=u&&!u.isEmpty();if(!c&&!(this.getLayer().hasListener(hn.PRERENDER)||this.getLayer().hasListener(hn.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(l,e),s.projection,this.clipped_=!1,c&&n.extent&&this.clipping){const d=Ki(n.extent);c=Ut(d,e.extent),this.clipped_=c&&!ws(d,e.extent),this.clipped_&&this.clipUnrotated(l,e,d)}return c&&this.renderWorlds(u,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&l.restore(),this.postRender(l,e),this.renderedRotation_!==s.rotation&&(this.renderedRotation_=s.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=this.frameState.size.slice(),s=this.renderedCenter_,l=this.renderedResolution_,u=this.renderedRotation_,c=this.renderedProjection_,d=this.wrappedRenderedExtent_,g=this.getLayer(),p=[],_=n[0]*Xn,y=n[1]*Xn;p.push(this.getRenderTransform(s,l,u,Xn,_,y,0).slice());const x=g.getSource(),E=c.getExtent();if(x.getWrapX()&&c.canWrapX()&&!ws(E,d)){let w=d[0];const C=Me(E);let I=0,T;for(;w<E[0];)--I,T=C*I,p.push(this.getRenderTransform(s,l,u,Xn,_,y,T).slice()),w+=C;for(I=0,w=d[2];w>E[2];)++I,T=C*I,p.push(this.getRenderTransform(s,l,u,Xn,_,y,T).slice()),w-=C}this.hitDetectionImageData_=wx(n,p,this.renderedFeatures_,g.getStyleFunction(),d,l,u,xm(l,this.renderedPixelRatio_))}t(Cx(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,s,l){if(!this.replayGroup_)return;const u=t.viewState.resolution,c=t.viewState.rotation,d=this.getLayer(),g={},p=function(y,x,E){const w=Te(y),C=g[w];if(C){if(C!==!0&&E<C.distanceSq){if(E===0)return g[w]=!0,l.splice(l.lastIndexOf(C),1),s(y,d,x);C.geometry=x,C.distanceSq=E}}else{if(E===0)return g[w]=!0,s(y,d,x);l.push(g[w]={feature:y,layer:d,geometry:x,distanceSq:E,callback:s})}},_=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,u,c,n,p,_?t.declutter[_].all().map(y=>y.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const s=e.viewHints[Ct.ANIMATING],l=e.viewHints[Ct.INTERACTING],u=t.getUpdateWhileAnimating(),c=t.getUpdateWhileInteracting();if(this.ready&&!u&&s||!c&&l)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,g=e.viewState,p=g.projection,_=g.resolution,y=e.pixelRatio,x=t.getRevision(),E=t.getRenderBuffer();let w=t.getRenderOrder();w===void 0&&(w=Rx);const C=g.center.slice(),I=Kh(d,E*_),T=I.slice(),D=[I.slice()],M=p.getExtent();if(n.getWrapX()&&p.canWrapX()&&!ws(M,e.extent)){const J=Me(M),ee=Math.max(Me(I)/2,J);I[0]=M[0]-ee,I[2]=M[2]+ee,qm(C,p);const ne=$m(D[0],p);ne[0]<M[0]&&ne[2]<M[2]?D.push([ne[0]+J,ne[1],ne[2]+J,ne[3]]):ne[0]>M[0]&&ne[2]>M[2]&&D.push([ne[0]-J,ne[1],ne[2]-J,ne[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==x&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!e.declutter&&ws(this.wrappedRenderedExtent_,I))return ir(this.renderedExtent_,T)||(this.hitDetectionImageData_=null,this.renderedExtent_=T),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const A=new hx(V_(_,y),I,_,y);let X;for(let J=0,ee=D.length;J<ee;++J)n.loadFeatures(D[J],_,p);const K=xm(_,y);let b=!0;const W=(J,ee)=>{let ne;const Z=J.getStyleFunction()||t.getStyleFunction();if(Z&&(ne=Z(J,_)),ne){const U=this.renderFeature(J,K,ne,A,X,this.getLayer().getDeclutter(),ee);b=b&&!U}},B=r_(I),ie=n.getFeaturesInExtent(B);w&&ie.sort(w);for(let J=0,ee=ie.length;J<ee;++J)W(ie[J],J);this.renderedFeatures_=ie,this.ready=b;const $=A.finish(),te=new vx(I,_,y,n.getOverlaps(),$,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=_,this.renderedRevision_=x,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=T,this.wrappedRenderedExtent_=I,this.renderedCenter_=C,this.renderedProjection_=p,this.renderedPixelRatio_=y,this.replayGroup_=te,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,s,l,u,c){if(!n)return!1;let d=!1;if(Array.isArray(n))for(let g=0,p=n.length;g<p;++g)d=wm(s,e,n[g],t,this.boundHandleStyleImageChange_,l,u,c)||d;else d=wm(s,e,n,t,this.boundHandleStyleImageChange_,l,u,c);return d}}class zh extends b_{constructor(e){super(e)}createRenderer(){return new Ox(this)}}class Cm{constructor(e){this.rbush_=new A_(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[Te(t)]=n}load(e,t){const n=new Array(t.length);for(let s=0,l=t.length;s<l;s++){const u=e[s],c=t[s],d={minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:c};n[s]=d,this.items_[Te(c)]=d}this.rbush_.load(n)}remove(e){const t=Te(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[Te(t)],s=[n.minX,n.minY,n.maxX,n.maxY];Go(s,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let s=0,l=e.length;s<l;s++)if(n=t(e[s]),n)return n;return n}isEmpty(){return Pr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return Qi(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Xa extends o_{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ge),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,n=e.length;t<n;++t)this.changeEventsKeys_.push(Le(e[t],Ee.CHANGE,this.changed,this))}clone(){const e=new Xa(ph(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Fr(this.getExtent(),e,t))return s;const l=this.geometries_;for(let u=0,c=l.length;u<c;++u)s=l[u].closestPointXY(e,t,n,s);return s}containsXY(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)if(n[s].containsXY(e,t))return!0;return!1}computeExtent(e){Jo(e);const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)$h(e,t[n].getExtent());return e}getGeometries(){return ph(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let s=!1;for(let l=0,u=n.length;l<u;++l){const c=n[l],d=c.getSimplifiedGeometry(e);t.push(d),d!==c&&(s=!0)}return s?new Xa(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)n[s].rotate(e,t);this.changed()}scale(e,t,n){n||(n=Ji(this.getExtent()));const s=this.geometries_;for(let l=0,u=s.length;l<u;++l)s[l].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(ph(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,s=t.length;n<s;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let s=0,l=n.length;s<l;++s)n[s].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ph(r){return r.map(e=>e.clone())}class Wa extends Dr{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const s=e,l=[],u=[];for(let d=0,g=s.length;d<g;++d){const p=s[d];fn(l,p.getFlatCoordinates()),u.push(l.length)}const c=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(c,l),this.ends_=u}}appendLineString(e){fn(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Wa(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ud(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hd(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,s))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,Bv(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return Xo(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Ns(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,s=[];let l=0;for(let u=0,c=t.length;u<c;++u){const d=t[u],g=new Ns(e.slice(l,d),n);s.push(g),l=d}return s}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const s=this.ends_,l=this.stride;for(let u=0,c=s.length;u<c;++u){const d=s[u],g=Na(t,n,d,l,.5);fn(e,g),n=d}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=a_(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new Wa(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return Rv(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=tl(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class fu extends Dr{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){fn(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new fu(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,s){if(s<Fr(this.getExtent(),e,t))return s;const l=this.flatCoordinates,u=this.stride;for(let c=0,d=l.length;c<d;c+=u){const g=Lr(e,t,l[c],l[c+1]);if(g<s){s=g;for(let p=0;p<u;++p)n[p]=l[c+p];n.length=u}}return s}getCoordinates(){return Zi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ds(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,s=[];for(let l=0,u=e.length;l<u;l+=n){const c=new Ds(e.slice(l,l+n),t);s.push(c)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let s=0,l=t.length;s<l;s+=n){const u=t[s],c=t[s+1];if(Zh(e,u,c))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=nu(this.flatCoordinates,0,e,this.stride),this.changed()}}function Z_(r,e,t,n){const s=[];let l=Qt();for(let u=0,c=t.length;u<c;++u){const d=t[u];l=Hh(r,e,d[0],n),s.push((l[0]+l[2])/2,(l[1]+l[3])/2),e=d[d.length-1]}return s}class Ba extends Dr{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const s=e,l=[],u=[];for(let c=0,d=s.length;c<d;++c){const g=s[c],p=l.length,_=g.getEnds();for(let y=0,x=_.length;y<x;++y)_[y]+=p;fn(l,g.getFlatCoordinates()),u.push(_)}t=s.length===0?this.getLayout():s[0].getLayout(),e=l,n=u}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;fn(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let s=0,l=t.length;s<l;++s)t[s]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let s=0;s<e;++s)t[s]=this.endss_[s].slice();const n=new Ba(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,s){return s<Fr(this.getExtent(),e,t)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(_v(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),yv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,s))}containsXY(e,t){return Sv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return wv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Ah(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,Ph(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Z_(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=h_(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new fu(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;p_(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Ah(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=xv(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new Ba(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const l=this.endss_[e-1];t=l[l.length-1]}const n=this.endss_[e].slice(),s=n[n.length-1];if(t!==0)for(let l=0,u=n.length;l<u;++l)n[l]-=t;return new er(this.flatCoordinates.slice(t,s),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,s=[];let l=0;for(let u=0,c=n.length;u<c;++u){const d=n[u].slice(),g=d[d.length-1];if(l!==0)for(let _=0,y=d.length;_<y;++_)d[_]-=l;const p=new er(t.slice(l,g),e,d);s.push(p),l=g}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return Tv(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=l_(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const Sm=Pn();class qt{constructor(e,t,n,s,l,u){this.styleFunction,this.extent_,this.id_=u,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=l,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Km(this.flatCoordinates_):Hh(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=Ji(this.getExtent());this.flatInteriorPoints_=gd(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=Lv(this.flatCoordinates_,this.ends_),t=Z_(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=h_(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Na(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let s=0,l=n.length;s<l;++s){const u=n[s],c=Na(e,t,u,2,.5);fn(this.flatMidpoints_,c),t=u}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Ze(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const s=rt(n)/rt(t);fi(Sm,n[0],n[3],s,-s,0,0,0),qi(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Sm,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new qt(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Bm((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":n.length=iu(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),s=[n.length];break;case"MultiLineString":s=[],n.length=a_(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,s);break;case"Polygon":s=[],n.length=dd(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,s);break}return s&&(this.simplifiedGeometry_=new qt(this.type_,n,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}qt.prototype.getFlatCoordinates=qt.prototype.getOrientedFlatCoordinates;class H_ extends Yn{constructor(e){super(),this.projection=Ze(e.projection),this.attributions_=Rm(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,s){t.viewResolver=n,t.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=Rm(e),this.changed()}setState(e){this.state_=e,this.changed()}}function Rm(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),e=>r):null}const cn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function Nx(r,e){return[[-1/0,-1/0,1/0,1/0]]}let zx=!1;function Gx(r,e,t,n,s,l,u){const c=new XMLHttpRequest;c.open("GET",typeof r=="function"?r(t,n,s):r,!0),e.getType()=="arraybuffer"&&(c.responseType="arraybuffer"),c.withCredentials=zx,c.onload=function(d){if(!c.status||c.status>=200&&c.status<300){const g=e.getType();try{let p;g=="text"||g=="json"?p=c.responseText:g=="xml"?p=c.responseXML||c.responseText:g=="arraybuffer"&&(p=c.response),p?l(e.readFeatures(p,{extent:t,featureProjection:s}),e.readProjection(p)):u()}catch{u()}}else u()},c.onerror=u,c.send()}function Tm(r,e){return function(t,n,s,l,u){const c=this;Gx(r,e,t,n,s,function(d,g){c.addFeatures(d),l!==void 0&&l(d)},u||Ps)}}class Xi extends Bn{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class Im extends H_{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=Ps,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ke(this.format_,"`format` must be set when `url` is set"),this.loader_=Tm(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:Nx;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new Cm:null,this.loadedExtentsRtree_=new Cm,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,s;Array.isArray(e.features)?s=e.features:e.features&&(n=e.features,s=n.getArray()),!t&&n===void 0&&(n=new Ln(s)),s!==void 0&&this.addFeaturesInternal(s),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Te(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const s=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new Xi(cn.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof qt||(this.featureChangeKeys_[e]=[Le(t,Ee.CHANGE,this.handleFeatureChange_,this),Le(t,Ms.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const s=String(t.getId());if(!(s in this.idIndex_))this.idIndex_[s]=t;else if(t instanceof qt){const l=this.idIndex_[s];l instanceof qt?Array.isArray(l)?l.push(t):this.idIndex_[s]=[l,t]:n=!1}else n=!1}return n&&(ke(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],s=[];for(let l=0,u=e.length;l<u;l++){const c=e[l],d=Te(c);this.addToIndex_(d,c)&&n.push(c)}for(let l=0,u=n.length;l<u;l++){const c=n[l],d=Te(c);this.setupChangeEvents_(d,c);const g=c.getGeometry();if(g){const p=g.getExtent();t.push(p),s.push(c)}else this.nullGeometryFeatures_[d]=c}if(this.featuresRtree_&&this.featuresRtree_.load(t,s),this.hasListener(cn.ADDFEATURE))for(let l=0,u=n.length;l<u;l++)this.dispatchEvent(new Xi(cn.ADDFEATURE,n[l]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(cn.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(cn.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(ht.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(ht.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(Ge);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(n=>{this.removeFeatureInternal(n)});for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new Xi(cn.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(s){const l=s.getGeometry();if(l instanceof qt||l.intersectsCoordinate(e))return t(s)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const s=n.getGeometry();if(s instanceof qt||s.intersectsExtent(e)){const l=t(n);if(l)return l}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),Pr(this.nullGeometryFeatures_)||fn(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=qh(e,t);return[].concat(...s.map(l=>this.featuresRtree_.getInExtent(l)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],s=e[1];let l=null;const u=[NaN,NaN];let c=1/0;const d=[-1/0,-1/0,1/0,1/0];return t=t||Mr,this.featuresRtree_.forEachInExtent(d,function(g){if(t(g)){const p=g.getGeometry(),_=c;if(c=p instanceof qt?0:p.closestPointXY(n,s,u,c),c<_){l=g;const y=Math.sqrt(c);d[0]=n-y,d[1]=s-y,d[2]=n+y,d[3]=s+y}}}),l}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=Te(t),s=t.getGeometry();if(!s)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const u=s.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(u,t)):this.featuresRtree_&&this.featuresRtree_.update(u,t)}const l=t.getId();if(l!==void 0){const u=l.toString();this.idIndex_[u]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[u]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new Xi(cn.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Te(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Pr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const s=this.loadedExtentsRtree_,l=this.strategy_(e,t,n);for(let u=0,c=l.length;u<c;++u){const d=l[u];s.forEachInExtent(d,function(p){return ws(p.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Xi(cn.FEATURESLOADSTART)),this.loader_.call(this,d,t,n,p=>{--this.loadingExtentsCount_,this.dispatchEvent(new Xi(cn.FEATURESLOADEND,void 0,p))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Xi(cn.FEATURESLOADERROR))}),s.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,n=t.forEachInExtent(e,function(s){if(Go(s.extent,e))return s});n&&t.remove(n)}removeFeatures(e){let t=!1;for(let n=0,s=e.length;n<s;++n)t=this.removeFeatureInternal(e[n])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Te(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const n=this.featureChangeKeys_[t];n==null||n.forEach(Ge),delete this.featureChangeKeys_[t];const s=e.getId();if(s!==void 0){const l=s.toString(),u=this.idIndex_[l];u===e?delete this.idIndex_[l]:Array.isArray(u)&&(u.splice(u.indexOf(e),1),u.length===1&&(this.idIndex_[l]=u[0]))}return delete this.uidIndex_[t],this.hasListener(cn.REMOVEFEATURE)&&this.dispatchEvent(new Xi(cn.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ke(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Tm(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const oe={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Ad extends Ha{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(Ee.CHANGE)}release(){this.state===oe.ERROR&&this.setState(oe.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==oe.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ve()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const s=t-n+1e3/60;return s>=this.transition_?1:M_(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}class $_ extends Ad{constructor(e,t,n,s,l,u){super(e,t,u),this.crossOrigin_=s,this.src_=n,this.key=n,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=l}getImage(){return this.image_}setImage(e){this.image_=e,this.state=oe.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=oe.ERROR,this.unlistenImage_(),this.image_=bx(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=oe.LOADED:this.state=oe.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==oe.ERROR&&(this.state=oe.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==oe.IDLE&&(this.state=oe.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Uv(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function bx(){const r=et(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class Ux{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const s=this.points_[t+2]-this.points_[n+2];if(s<1e3/60)return!1;const l=this.points_[t]-this.points_[n],u=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(u,l),this.initialVelocity_=Math.sqrt(l*l+u*u)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class jx extends Za{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){ve()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;fi(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Ym(s,n)}forEachFeatureAtCoordinate(e,t,n,s,l,u,c,d){let g;const p=t.viewState;function _(M,A,X,K){return l.call(u,A,M?X:null,K)}const y=p.projection,x=qm(e.slice(),y),E=[[0,0]];if(y.canWrapX()&&s){const M=y.getExtent(),A=Me(M);E.push([-A,0],[A,0])}const w=t.layerStatesArray,C=w.length,I=[],T=[];for(let M=0;M<E.length;M++)for(let A=C-1;A>=0;--A){const X=w[A],K=X.layer;if(K.hasRenderer()&&Ld(X,p)&&c.call(d,K)){const b=K.getRenderer(),W=K.getSource();if(b&&W){const B=W.getWrapX()?x:e,ie=_.bind(null,X.managed);T[0]=B[0]+E[M][0],T[1]=B[1]+E[M][1],g=b.forEachFeatureAtCoordinate(T,t,n,ie,I)}if(g)return g}}if(I.length===0)return;const D=1/I.length;return I.forEach((M,A)=>M.distanceSq+=A*D),I.sort((M,A)=>M.distanceSq-A.distanceSq),I.some(M=>g=M.callback(M.feature,M.layer,M.geometry)),g}hasFeatureAtCoordinate(e,t,n,s,l,u){return this.forEachFeatureAtCoordinate(e,t,n,s,Mr,this,l,u)!==void 0}getMap(){return this.map_}renderFrame(e){ve()}scheduleExpireIconCache(e){dn.canExpireCache()&&e.postRenderFunctions.push(Xx)}}function Xx(r,e){dn.expire()}class Wx extends jx{constructor(e){super(e),this.fontChangeListenerKey_=Le(li,Ms.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=nl+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const s=new j_(e,void 0,t);n.dispatchEvent(s)}}disposeInternal(){Ge(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(hn.PRECOMPOSE,e);const t=e.layerStatesArray.sort((c,d)=>c.zIndex-d.zIndex);t.some(c=>c.layer instanceof b_&&c.layer.getDeclutter())&&(e.declutter={});const s=e.viewState;this.children_.length=0;const l=[];let u=null;for(let c=0,d=t.length;c<d;++c){const g=t[c];e.layerIndex=c;const p=g.layer,_=p.getSourceState();if(!Ld(g,s)||_!="ready"&&_!="undefined"){p.unrender();continue}const y=p.render(e,u);y&&(y!==u&&(this.children_.push(y),u=y),l.push(g))}this.declutter(e,l),bv(this.element_,this.children_),this.dispatchRenderEvent(hn.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let n=t.length-1;n>=0;--n){const s=t[n],l=s.layer;l.getDeclutter()&&l.renderDeclutter(e,s)}t.forEach(n=>n.layer.renderDeferred(e))}}}class Vi extends Bn{constructor(e,t){super(e),this.layer=t}}const mh={LAYERS:"layers"};class nr extends L_{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(mh.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Ln(n.slice(),{unique:!0}):ke(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new Ln(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ge),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(Le(e,ht.ADD,this.handleLayersAdd_,this),Le(e,ht.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(Ge);bs(this.listenerKeys_);const t=e.getArray();for(let n=0,s=t.length;n<s;n++){const l=t[n];this.registerLayerListeners_(l),this.dispatchEvent(new Vi("addlayer",l))}this.changed()}registerLayerListeners_(e){const t=[Le(e,Ms.PROPERTYCHANGE,this.handleLayerChange_,this),Le(e,Ee.CHANGE,this.handleLayerChange_,this)];e instanceof nr&&t.push(Le(e,"addlayer",this.handleLayerGroupAdd_,this),Le(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Te(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new Vi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new Vi("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new Vi("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=Te(t);this.listenerKeys_[n].forEach(Ge),delete this.listenerKeys_[n],this.dispatchEvent(new Vi("removelayer",t)),this.changed()}getLayers(){return this.get(mh.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let s=0,l=n.length;s<l;++s)this.dispatchEvent(new Vi("removelayer",n[s]))}this.set(mh.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(u){u.getLayerStatesArray(t)});const s=this.getLayerState();let l=s.zIndex;!e&&s.zIndex===void 0&&(l=0);for(let u=n,c=t.length;u<c;u++){const d=t[u];d.opacity*=s.opacity,d.visible=d.visible&&s.visible,d.maxResolution=Math.min(d.maxResolution,s.maxResolution),d.minResolution=Math.max(d.minResolution,s.minResolution),d.minZoom=Math.max(d.minZoom,s.minZoom),d.maxZoom=Math.min(d.maxZoom,s.maxZoom),s.extent!==void 0&&(d.extent!==void 0?d.extent=Mn(d.extent,s.extent):d.extent=s.extent),d.zIndex===void 0&&(d.zIndex=l)}return t}getSourceState(){return"ready"}}class xs extends Bn{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Bi extends xs{constructor(e,t,n,s,l,u){super(e,t,l),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=u}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Ye={SINGLECLICK:"singleclick",CLICK:Ee.CLICK,DBLCLICK:Ee.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Gh={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Bx extends Ha{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=Le(n,Gh.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Le(n,Gh.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ee.TOUCHMOVE,this.boundHandleTouchMove_,x_?{passive:!1}:!1)}emulateClick_(e){let t=new Bi(Ye.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Bi(Ye.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Bi(Ye.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==Ye.POINTERUP||t.type==Ye.POINTERCANCEL){delete this.trackedTouches_[n];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==t.target){delete this.trackedTouches_[s];break}}else(t.type==Ye.POINTERDOWN||t.type==Ye.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Bi(Ye.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ge),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Bi(Ye.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Le(n,Ye.POINTERMOVE,this.handlePointerMove_,this),Le(n,Ye.POINTERUP,this.handlePointerUp_,this),Le(this.element_,Ye.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(Le(this.element_.getRootNode(),Ye.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Bi(Ye.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Bi(Ye.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ge(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ee.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ge(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ge),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Yi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},at={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ya=1/0;class Yx{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,bs(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const s=this.keyFunction_(n);return delete this.queuedElements_[s],n}enqueue(e){ke(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Ya?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,s=t.length,l=t[e],u=n[e],c=e;for(;e<s>>1;){const d=this.getLeftChildIndex_(e),g=this.getRightChildIndex_(e),p=g<s&&n[g]<n[d]?g:d;t[e]=t[p],n[e]=n[p],e=p}t[e]=l,n[e]=u,this.siftDown_(c,e)}siftDown_(e,t){const n=this.elements_,s=this.priorities_,l=n[t],u=s[t];for(;t>e;){const c=this.getParentIndex_(t);if(s[c]>u)n[t]=n[c],s[t]=s[c],t=c;else break}n[t]=l,s[t]=u}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let s=0;const l=t.length;let u,c,d;for(c=0;c<l;++c)u=t[c],d=e(u),d==Ya?delete this.queuedElements_[this.keyFunction_(u)]:(n[s]=d,t[s++]=u);t.length=s,n.length=s,this.heapify_()}}class Vx extends Yx{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ee.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===oe.LOADED||n===oe.ERROR||n===oe.EMPTY){n!==oe.ERROR&&t.removeEventListener(Ee.CHANGE,this.boundHandleTileChange_);const s=t.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;){const s=this.dequeue()[0],l=s.getKey();s.getState()===oe.IDLE&&!(l in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[l]=!0,++this.tilesLoading_,++n,s.load())}}}function Kx(r,e,t,n,s){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return Ya;const l=r.viewState.center,u=n[0]-l[0],c=n[1]-l[1];return 65536*Math.log(s)+Math.sqrt(u*u+c*c)/s}class gu extends Yn{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let n=0,s=this.listenerKeys.length;n<s;++n)Ge(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=e,e){const n=this.target_??e.getOverlayContainerStopEvent();this.element&&n.appendChild(this.element),this.render!==Ps&&this.listenerKeys.push(Le(e,Yi.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Zx extends gu{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:t+"-expand",l=e.collapseLabel!==void 0?e.collapseLabel:"",u=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof l=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=l,this.collapseLabel_.className=u):this.collapseLabel_=l;const c=e.label!==void 0?e.label:"i";typeof c=="string"?(this.label_=document.createElement("span"),this.label_.textContent=c,this.label_.className=s):this.label_=c;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1);const g=t+" "+nl+" "+lu+(this.collapsed_&&this.collapsible_?" "+Jp:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=g,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),n=new Set(t.flatMap(s=>s.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(s=>n.add(s)):n.add(this.attributions_)),!this.overrideCollapsible_){const s=!t.some(l=>{var u;return((u=l.getSource())==null?void 0:u.getAttributionsCollapsible())===!1});this.setCollapsible(s)}return Array.from(n)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(s=>x1(()=>s))),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!ir(t,this.renderedAttributions_)){Gv(this.ulElement_);for(let s=0,l=t.length;s<l;++s){const u=document.createElement("li");u.innerHTML=t[s],this.ulElement_.appendChild(u)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Jp),this.collapsed_?Oa(this.collapseLabel_,this.label_):Oa(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Hx extends gu{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(s));const l=e.tipLabel?e.tipLabel:"Reset rotation",u=document.createElement("button");u.className=t+"-reset",u.setAttribute("type","button"),u.title=l,u.appendChild(this.label_),u.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+nl+" "+lu,d=this.element;d.className=c,d.appendChild(u),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ya)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Us}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const s="rotate("+n+"rad)";if(this.autoHide_){const l=this.element.classList.contains(ya);!l&&n===0?this.element.classList.add(ya):l&&n!==0&&this.element.classList.remove(ya)}this.label_.style.transform=s}this.rotation_=n}}class $x extends gu{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",l=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",u=e.zoomInLabel!==void 0?e.zoomInLabel:"+",c=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",g=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=d,p.appendChild(typeof u=="string"?document.createTextNode(u):u),p.addEventListener(Ee.CLICK,this.handleClick_.bind(this,n),!1);const _=document.createElement("button");_.className=l,_.setAttribute("type","button"),_.title=g,_.appendChild(typeof c=="string"?document.createTextNode(c):c),_.addEventListener(Ee.CLICK,this.handleClick_.bind(this,-n),!1);const y=t+" "+nl+" "+lu,x=this.element;x.className=y,x.appendChild(p),x.appendChild(_),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const s=n.getZoom();if(s!==void 0){const l=n.getConstrainedZoom(s+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:l,duration:this.duration_,easing:Us})):n.setZoom(l)}}}function q_(r){r=r||{};const e=new Ln;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new $x(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new Hx(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new Zx(r.attributionOptions)),e}const Lm={ACTIVE:"active"};class js extends Yn{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Lm.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(Lm.ACTIVE,e)}setMap(e){this.map_=e}}function qx(r,e,t){const n=r.getCenterInternal();if(n){const s=[n[0]+e[0],n[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:uE,center:r.getConstrainedCenter(s)})}}function kd(r,e,t,n){const s=r.getZoom();if(s===void 0)return;const l=r.getConstrainedZoom(s+e),u=r.getResolutionForZoom(l);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:u,anchor:t,duration:n!==void 0?n:250,easing:Us})}class Qx extends js{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ye.DBLCLICK){const n=e.originalEvent,s=e.map,l=e.coordinate,u=n.shiftKey?-this.delta_:this.delta_,c=s.getView();kd(c,u,l,this.duration_),n.preventDefault(),t=!0}return!t}}class sl extends js{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ye.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ye.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==Ye.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==Ye.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function Fd(r){const e=r.length;let t=0,n=0;for(let s=0;s<e;s++)t+=r[s].clientX,n+=r[s].clientY;return{clientX:t/e,clientY:n/e}}function bh(r){const e=arguments;return function(t){let n=!0;for(let s=0,l=e.length;s<l&&(n=n&&e[s](t),!!n);++s);return n}}const Jx=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ew=function(r){const e=r.map.getTargetElement(),t=e.getRootNode(),n=r.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(n):e.contains(n)},Q_=function(r){const e=r.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?ew(r):!0},tw=Mr,J_=function(r){const e=r.originalEvent;return e.button==0&&!(zv&&y_&&e.ctrlKey)},Mm=qo,nw=function(r){return r.type==Ye.SINGLECLICK},e0=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},iw=function(r){const e=r.originalEvent;return y_?e.metaKey:e.ctrlKey},t0=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},n0=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},_h=function(r){const e=r.originalEvent;return ke(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},rw=function(r){const e=r.originalEvent;return ke(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class sw extends sl{constructor(e){super({stopDown:qo}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:bh(e0,rw);this.condition_=e.onFocusOnly?bh(Q_,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,s=t.getEventPixel(Fd(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const l=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],c=e.map.getView();B1(l,c.getResolution()),td(l,c.getRotation()),c.adjustCenterInternal(l)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),l=this.kinetic_.getAngle(),u=n.getCenterInternal(),c=t.getPixelFromCoordinateInternal(u),d=t.getCoordinateFromPixelInternal([c[0]-s*Math.cos(l),c[1]-s*Math.sin(l)]);n.animateInternal({center:n.getConstrainedCenter(d),duration:500,easing:Us})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class ow extends sl{constructor(e){e=e||{},super({stopDown:qo}),this.condition_=e.condition?e.condition:Jx,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!_h(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Id)return;const s=t.getSize(),l=e.pixel,u=Math.atan2(s[1]/2-l[1],l[0]-s[0]/2);if(this.lastAngle_!==void 0){const c=u-this.lastAngle_;n.adjustRotationInternal(-c)}this.lastAngle_=u}handleUpEvent(e){return _h(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return _h(e)&&J_(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class lw extends Za{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",s=this.element_.style;s.left=Math.min(e[0],t[0])+n,s.top=Math.min(e[1],t[1])+n,s.width=Math.abs(t[0]-e[0])+n,s.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,s=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new er([s])}getGeometry(){return this.geometry_}}const gs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Po extends Bn{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class aw extends sl{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new lw(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??J_,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const s=n[0]-t[0],l=n[1]-t[1];return s*s+l*l>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new Po(gs.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new Po(t?gs.BOXEND:gs.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Po(gs.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Po(gs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Po(gs.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class uw extends aw{constructor(e){e=e||{};const t=e.condition?e.condition:t0;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let s=this.getGeometry();if(this.out_){const l=n.rotatedExtentForGeometry(s),u=n.getResolutionForExtentInternal(l),c=n.getResolution()/u;s=s.clone(),s.scale(c*c)}n.fitInternal(s,{duration:this.duration_,easing:Us})}}const wr={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class cw extends js{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return e0(t)&&n0(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ee.KEYDOWN){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==wr.DOWN||s==wr.LEFT||s==wr.RIGHT||s==wr.UP)){const u=e.map.getView(),c=u.getResolution()*this.pixelDelta_;let d=0,g=0;s==wr.DOWN?g=-c:s==wr.LEFT?d=-c:s==wr.RIGHT?d=c:g=c;const p=[d,g];td(p,u.getRotation()),qx(u,p,this.duration_),n.preventDefault(),t=!0}}return!t}}class hw extends js{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!iw(t)&&n0(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ee.KEYDOWN||e.type==Ee.KEYPRESS){const n=e.originalEvent,s=n.key;if(this.condition_(e)&&(s==="+"||s==="-")){const l=e.map,u=s==="+"?this.delta_:-this.delta_,c=l.getView();kd(c,u,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}class dw extends js{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:tw;this.condition_=e.onFocusOnly?bh(Q_,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ee.WHEEL)return!0;const n=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let l;if(e.type==Ee.WHEEL&&(l=s.deltaY,Ov&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(l/=v_),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(l*=40)),l===0)return!1;this.lastDelta_=l;const u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(l)<4?"trackpad":"wheel");const c=n.getView();if(this.mode_==="trackpad"&&!(c.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(c.getAnimating()&&c.cancelAnimations(),c.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),c.adjustZoom(-l/this.deltaPerZoom_,this.lastAnchor_?n.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=u,!1;this.totalDelta_+=l;const d=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),d),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-Ke(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),kd(t,n,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class fw extends sl{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=qo),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],s=this.targetPointers[1],l=Math.atan2(s.clientY-n.clientY,s.clientX-n.clientX);if(this.lastAngle_!==void 0){const d=l-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=d}this.lastAngle_=l;const u=e.map,c=u.getView();c.getConstraints().rotation!==Id&&(this.anchor_=u.getCoordinateFromPixelInternal(u.getEventPixel(Fd(this.targetPointers))),this.rotating_&&(u.render(),c.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class gw extends sl{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=qo),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],s=this.targetPointers[1],l=n.clientX-s.clientX,u=n.clientY-s.clientY,c=Math.sqrt(l*l+u*u);this.lastDistance_!==void 0&&(t=this.lastDistance_/c),this.lastDistance_=c;const d=e.map,g=d.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(Fd(this.targetPointers))),d.render(),g.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}function pw(r){r=r||{};const e=new Ln,t=new Ux(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new ow),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new Qx({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new sw({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new fw),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new gw({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new cw),e.push(new hw({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new dw({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new uw({duration:r.zoomDuration})),e}function i0(r){if(r instanceof uu){r.setMapInternal(null);return}r instanceof nr&&r.getLayers().forEach(i0)}function r0(r,e){if(r instanceof uu){r.setMapInternal(e);return}if(r instanceof nr){const t=r.getLayers().getArray();for(let n=0,s=t.length;n<s;++n)r0(t[n],e)}}let mw=class extends Yn{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=_w(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:v_,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Pn(),this.pixelToCoordinateTransform_=Pn(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||q_(),this.interactions=t.interactions||pw({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Vx(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(at.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(at.VIEW,this.handleViewChanged_),this.addChangeListener(at.SIZE,this.handleSizeChanged_),this.addChangeListener(at.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof jn)&&e.view.then(function(s){n.setView(new jn(s))}),this.controls.addEventListener(ht.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(ht.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(ht.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(ht.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(ht.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(ht.REMOVE,s=>{const l=s.element.getId();l!==void 0&&delete this.overlayIdIndex_[l.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){r0(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const l=n.hitTolerance!==void 0?n.hitTolerance:0,u=n.layerFilter!==void 0?n.layerFilter:Mr,c=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,l,c,t,null,u,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(s){n.push(s)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(s){s instanceof nr?t(s.getLayers()):e.push(s)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const s=t.layerFilter!==void 0?t.layerFilter:Mr,l=t.hitTolerance!==void 0?t.hitTolerance:0,u=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,l,u,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),s=this.getSize(),l=n.width/s[0],u=n.height/s[1],c="changedTouches"in e?e.changedTouches[0]:e;return[(c.clientX-n.left)/l,(c.clientY-n.top)/u]}getTarget(){return this.get(at.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Mh(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?ct(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(at.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Ln){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t];if(!s.visible)continue;const l=s.layer.getRenderer();if(l&&!l.ready)return!0;const u=s.layer.getSource();if(u&&u.loading)return!0}return!1}getPixelFromCoordinate(e){const t=oi(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?ct(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(at.SIZE)}getView(){return this.get(at.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,s){return Kx(this.frameState_,e,t,n,s)}handleBrowserEvent(e,t){t=t||e.type;const n=new Bi(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===Gh.POINTERDOWN||n===Ee.WHEEL||n===Ee.KEYDOWN){const s=this.getOwnerDocument(),l=this.viewport_.getRootNode?this.viewport_.getRootNode():s,u=t.target,c=l instanceof ShadowRoot?l.host===u?l.host.ownerDocument:l:l===s?s.documentElement:l;if(this.overlayContainerStopEvent_.contains(u)||!c.contains(u))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let l=s.length-1;l>=0;l--){const u=s[l];if(u.getMap()!==this||!u.getActive()||!this.getTargetElement())continue;if(!u.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let s=this.maxTilesLoading_,l=s;if(e){const u=e.viewHints;if(u[Ct.ANIMATING]||u[Ct.INTERACTING]){const c=Date.now()-e.time>8;s=c?0:8,l=c?0:2}}t.getTilesLoading()<s&&(t.reprioritize(),t.loadMoreTiles(s,l))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(hn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(hn.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new xs(Yi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new xs(Yi.LOADSTART,this,e))));const n=this.postRenderFunctions_;if(e)for(let s=0,l=n.length;s<l;++s)n[s](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,s=this.targetChangeHandlerKeys_.length;n<s;++n)Ge(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ee.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ee.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Wx(this)),this.mapBrowserEventHandler_=new Bx(this,this.moveTolerance_);for(const l in Ye)this.mapBrowserEventHandler_.addEventListener(Ye[l],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ee.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ee.WHEEL,this.boundHandleBrowserEvent_,x_?{passive:!1}:!1);let n;if(this.keyboardEventTarget_)n=this.keyboardEventTarget_;else{const l=t.getRootNode();n=l instanceof ShadowRoot?l.host:t}this.targetChangeHandlerKeys_=[Le(n,Ee.KEYDOWN,this.handleBrowserEvent,this),Le(n,Ee.KEYPRESS,this.handleBrowserEvent,this)];const s=t.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ge(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ge(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=Le(e,Ms.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Le(e,Ee.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ge),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new Vi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[Le(e,Ms.PROPERTYCHANGE,this.render,this),Le(e,Ee.CHANGE,this.render,this),Le(e,"addlayer",this.handleLayerAdd_,this),Le(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const s=e[t].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){i0(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),s=this.frameState_;let l=null;if(t!==void 0&&qp(t)&&n&&n.isDef()){const u=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),c=n.getState();if(l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Sh(c.center,c.resolution,c.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:c,viewHints:u,wantedTiles:{},mapId:Te(this),renderTargets:{}},c.nextCenter&&c.nextResolution){const d=isNaN(c.nextRotation)?c.rotation:c.nextRotation;l.nextExtent=Sh(c.nextCenter,c.nextResolution,d,t)}}this.frameState_=l,this.renderer_.renderFrame(l),l&&(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),s&&(!this.previousExtent_||!Ja(this.previousExtent_)&&!Go(l.extent,this.previousExtent_))&&(this.dispatchEvent(new xs(Yi.MOVESTART,this,s)),this.previousExtent_=Jo(this.previousExtent_)),this.previousExtent_&&!l.viewHints[Ct.ANIMATING]&&!l.viewHints[Ct.INTERACTING]&&!Go(l.extent,this.previousExtent_)&&(this.dispatchEvent(new xs(Yi.MOVEEND,this,l)),Vm(l.extent,this.previousExtent_))),this.dispatchEvent(new xs(Yi.POSTRENDER,this,l)),this.renderComplete_=(this.hasListener(Yi.LOADSTART)||this.hasListener(Yi.LOADEND)||this.hasListener(hn.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new Vi("removelayer",t)),this.set(at.LAYERGROUP,e)}setSize(e){this.set(at.SIZE,e)}setTarget(e){this.set(at.TARGET,e)}setView(e){if(!e||e instanceof jn){this.set(at.VIEW,e);return}this.set(at.VIEW,new jn);const t=this;e.then(function(n){t.setView(new jn(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const s=getComputedStyle(e),l=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),u=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(l)&&!isNaN(u)&&(t=[Math.max(0,l),Math.max(0,u)],!qp(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&i_("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!ir(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function _w(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},n=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new nr({layers:r.layers});t[at.LAYERGROUP]=n,t[at.TARGET]=r.target,t[at.VIEW]=r.view instanceof jn?r.view:new jn;let s;r.controls!==void 0&&(Array.isArray(r.controls)?s=new Ln(r.controls.slice()):(ke(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=r.controls));let l;r.interactions!==void 0&&(Array.isArray(r.interactions)?l=new Ln(r.interactions.slice()):(ke(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),l=r.interactions));let u;return r.overlays!==void 0?Array.isArray(r.overlays)?u=new Ln(r.overlays.slice()):(ke(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),u=r.overlays):u=new Ln,{controls:s,interactions:l,keyboardEventTarget:e,overlays:u,values:t}}class yw{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Za&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return ke(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return ke(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ke(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function Va(r,e,t,n){return n!==void 0?(n[0]=r,n[1]=e,n[2]=t,n):[r,e,t]}function vw(r,e,t){return r+"/"+e+"/"+t}function Ew(r){return xw(r[0],r[1],r[2])}function xw(r,e,t){return(e<<r)+t}function ww(r,e){const t=r[0],n=r[1],s=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const l=e.getFullTileRange(t);return l?l.containsXY(n,s):!0}class Dd{constructor(e,t,n,s){this.minX=e,this.maxX=t,this.minY=n,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ps(r,e,t,n,s){return s!==void 0?(s.minX=r,s.maxX=e,s.minY=t,s.maxY=n,s):new Dd(r,e,t,n)}var Sa=Yh();const Ra={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Cw extends uu{constructor(e){e=e||{};const t=Object.assign({},e),n=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Ra.PRELOAD)}setPreload(e){this.set(Ra.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Ra.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Ra.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function Ka(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}function Sw(r){return r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Float32Array||r instanceof DataView?r:null}const Rw=new Error("disposed");let ms=null;function Tw(r){ms||(ms=et(r.width,r.height,void 0,{willReadFrequently:!0}));const e=ms.canvas,t=r.width;e.width!==t&&(e.width=t);const n=r.height;return e.height!==n&&(e.height=n),ms.clearRect(0,0,t,n),ms.drawImage(r,0,0),ms.getImageData(0,0,t,n).data}const Iw=[256,256];class Uh extends Ad{constructor(e){const t=oe.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=Ka(this.data_);return e?[e.width,e.height]:Iw}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=oe.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=oe.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(Rw),this.controller_=null),super.disposeInternal()}}const s0=.5,Lw=10,Pm=.25;class o0{constructor(e,t,n,s,l,u,c){this.sourceProj_=e,this.targetProj_=t;let d={};const g=c?dv(D=>ct(c,ld(D,this.targetProj_,this.sourceProj_))):jo(this.targetProj_,this.sourceProj_);this.transformInv_=function(D){const M=D[0]+"/"+D[1];return d[M]||(d[M]=g(D)),d[M]},this.maxSourceExtent_=s,this.errorThresholdSquared_=l*l,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&Me(s)>=Me(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Me(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Me(this.targetProj_.getExtent()):null;const p=gi(n),_=Qa(n),y=qa(n),x=$a(n),E=this.transformInv_(p),w=this.transformInv_(_),C=this.transformInv_(y),I=this.transformInv_(x),T=Lw+(u?Math.max(0,Math.ceil(Math.log2(bo(n)/(u*u*256*256)))):0);if(this.addQuad_(p,_,y,x,E,w,C,I,T),this.wrapsXInSource_){let D=1/0;this.triangles_.forEach(function(M,A,X){D=Math.min(D,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(M=>{if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-D>this.sourceWorldWidth_/2){const A=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];A[0][0]-D>this.sourceWorldWidth_/2&&(A[0][0]-=this.sourceWorldWidth_),A[1][0]-D>this.sourceWorldWidth_/2&&(A[1][0]-=this.sourceWorldWidth_),A[2][0]-D>this.sourceWorldWidth_/2&&(A[2][0]-=this.sourceWorldWidth_);const X=Math.min(A[0][0],A[1][0],A[2][0]);Math.max(A[0][0],A[1][0],A[2][0])-X<this.sourceWorldWidth_/2&&(M.source=A)}})}d={}}addTriangle_(e,t,n,s,l,u){this.triangles_.push({source:[s,l,u],target:[e,t,n]})}addQuad_(e,t,n,s,l,u,c,d,g){const p=kp([l,u,c,d]),_=this.sourceWorldWidth_?Me(p)/this.sourceWorldWidth_:null,y=this.sourceWorldWidth_,x=this.sourceProj_.canWrapX()&&_>.5&&_<1;let E=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const C=kp([e,t,n,s]);E=Me(C)/this.targetWorldWidth_>Pm||E}!x&&this.sourceProj_.isGlobal()&&_&&(E=_>Pm||E)}if(!E&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!Ut(p,this.maxSourceExtent_))return;let w=0;if(!E&&(!isFinite(l[0])||!isFinite(l[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(d[0])||!isFinite(d[1]))){if(g>0)E=!0;else if(w=(!isFinite(l[0])||!isFinite(l[1])?8:0)+(!isFinite(u[0])||!isFinite(u[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!E){const C=[(e[0]+n[0])/2,(e[1]+n[1])/2],I=this.transformInv_(C);let T;x?T=(Ts(l[0],y)+Ts(c[0],y))/2-Ts(I[0],y):T=(l[0]+c[0])/2-I[0];const D=(l[1]+c[1])/2-I[1];E=T*T+D*D>this.errorThresholdSquared_}if(E){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const C=[(t[0]+n[0])/2,(t[1]+n[1])/2],I=this.transformInv_(C),T=[(s[0]+e[0])/2,(s[1]+e[1])/2],D=this.transformInv_(T);this.addQuad_(e,t,C,T,l,u,I,D,g-1),this.addQuad_(T,C,n,s,D,I,c,d,g-1)}else{const C=[(e[0]+t[0])/2,(e[1]+t[1])/2],I=this.transformInv_(C),T=[(n[0]+s[0])/2,(n[1]+s[1])/2],D=this.transformInv_(T);this.addQuad_(e,C,T,s,l,I,D,d,g-1),this.addQuad_(C,t,n,T,I,u,c,D,g-1)}return}}if(x){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(e,n,s,l,c,d),w&14||this.addTriangle_(e,n,t,l,c,u),w&&(w&13||this.addTriangle_(t,s,e,u,d,l),w&7||this.addTriangle_(t,s,n,u,d,c))}calculateSourceExtent(){const e=Qt();return this.triangles_.forEach(function(t,n,s){const l=t.source;zo(e,l[0]),zo(e,l[1]),zo(e,l[2])}),e}getTriangles(){return this.triangles_}}let yh;const Ls=[];function Am(r,e,t,n,s){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(n,s),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,n)+1,Math.max(t,s)),r.restore()}function vh(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function Mw(){if(yh===void 0){const r=et(6,6,Ls);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Am(r,4,5,4,0),Am(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;yh=vh(e,0)||vh(e,4)||vh(e,8),su(r),Ls.push(r.canvas)}return yh}function km(r,e,t,n){const s=ld(t,e,r);let l=Xp(e,n,t);const u=e.getMetersPerUnit();u!==void 0&&(l*=u);const c=r.getMetersPerUnit();c!==void 0&&(l/=c);const d=r.getExtent();if(!d||ks(d,s)){const g=Xp(r,l,s)/l;isFinite(g)&&g>0&&(l/=g)}return l}function l0(r,e,t,n){const s=Ji(t);let l=km(r,e,s,n);return(!isFinite(l)||l<=0)&&Hm(t,function(u){return l=km(r,e,u,n),isFinite(l)&&l>0}),l}function Pw(r,e,t,n,s,l,u,c,d,g,p,_,y,x){const E=et(Math.round(t*r),Math.round(t*e),Ls);if(_||(E.imageSmoothingEnabled=!1),d.length===0)return E.canvas;E.scale(t,t);function w(A){return Math.round(A*t)/t}E.globalCompositeOperation="lighter";const C=Qt();d.forEach(function(A,X,K){$h(C,A.extent)});let I;const T=t/n,D=(_?1:1+Math.pow(2,-24))/T;{if(I=et(Math.round(Me(C)*T),Math.round(rt(C)*T),Ls),_||(I.imageSmoothingEnabled=!1),s&&x){const A=(s[0]-C[0])*T,X=-(s[3]-C[3])*T,K=Me(s)*T,b=rt(s)*T;I.rect(A,X,K,b),I.clip()}d.forEach(function(A,X,K){if(A.image.width>0&&A.image.height>0){if(A.clipExtent){I.save();const $=(A.clipExtent[0]-C[0])*T,te=-(A.clipExtent[3]-C[3])*T,J=Me(A.clipExtent)*T,ee=rt(A.clipExtent)*T;I.rect(_?$:Math.round($),_?te:Math.round(te),_?J:Math.round($+J)-Math.round($),_?ee:Math.round(te+ee)-Math.round(te)),I.clip()}const b=(A.extent[0]-C[0])*T,W=-(A.extent[3]-C[3])*T,B=Me(A.extent)*T,ie=rt(A.extent)*T;I.drawImage(A.image,g,g,A.image.width-2*g,A.image.height-2*g,_?b:Math.round(b),_?W:Math.round(W),_?B:Math.round(b+B)-Math.round(b),_?ie:Math.round(W+ie)-Math.round(W)),A.clipExtent&&I.restore()}})}const M=gi(u);return c.getTriangles().forEach(function(A,X,K){const b=A.source,W=A.target;let B=b[0][0],ie=b[0][1],$=b[1][0],te=b[1][1],J=b[2][0],ee=b[2][1];const ne=w((W[0][0]-M[0])/l),Z=w(-(W[0][1]-M[1])/l),U=w((W[1][0]-M[0])/l),q=w(-(W[1][1]-M[1])/l),G=w((W[2][0]-M[0])/l),R=w(-(W[2][1]-M[1])/l),N=B,re=ie;B=0,ie=0,$-=N,te-=re,J-=N,ee-=re;const z=[[$,te,0,0,U-ne],[J,ee,0,0,G-ne],[0,0,$,te,q-Z],[0,0,J,ee,R-Z]],ue=X1(z);if(!ue)return;if(E.save(),E.beginPath(),Mw()||!_){E.moveTo(U,q);const me=4,xe=ne-U,Re=Z-q;for(let Ne=0;Ne<me;Ne++)E.lineTo(U+w((Ne+1)*xe/me),q+w(Ne*Re/(me-1))),Ne!=me-1&&E.lineTo(U+w((Ne+1)*xe/me),q+w((Ne+1)*Re/(me-1)));E.lineTo(G,R)}else E.moveTo(U,q),E.lineTo(ne,Z),E.lineTo(G,R);E.clip(),E.transform(ue[0],ue[2],ue[1],ue[3],ne,Z),E.translate(C[0]-N,C[3]-re);let he;if(I)he=I.canvas,E.scale(D,-D);else{const me=d[0],xe=me.extent;he=me.image,E.scale(Me(xe)/he.width,-rt(xe)/he.height)}E.drawImage(he,0,0),E.restore()}),I&&(su(I),Ls.push(I.canvas)),p&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,c.getTriangles().forEach(function(A,X,K){const b=A.target,W=(b[0][0]-M[0])/l,B=-(b[0][1]-M[1])/l,ie=(b[1][0]-M[0])/l,$=-(b[1][1]-M[1])/l,te=(b[2][0]-M[0])/l,J=-(b[2][1]-M[1])/l;E.beginPath(),E.moveTo(ie,$),E.lineTo(W,B),E.lineTo(te,J),E.closePath(),E.stroke()}),E.restore()),E.canvas}function pu(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function jh(r,e,t,n,s,l,u){u=u??pu();const c=1/(r-e),d=1/(t-n),g=1/(s-l);return u[0]=-2*c,u[1]=0,u[2]=0,u[3]=0,u[4]=0,u[5]=-2*d,u[6]=0,u[7]=0,u[8]=0,u[9]=0,u[10]=2*g,u[11]=0,u[12]=(r+e)*c,u[13]=(n+t)*d,u[14]=(l+s)*g,u[15]=1,u}function Fm(r,e,t,n,s){return s=s??pu(),s[0]=r[0]*e,s[1]=r[1]*e,s[2]=r[2]*e,s[3]=r[3]*e,s[4]=r[4]*t,s[5]=r[5]*t,s[6]=r[6]*t,s[7]=r[7]*t,s[8]=r[8]*n,s[9]=r[9]*n,s[10]=r[10]*n,s[11]=r[11]*n,s[12]=r[12],s[13]=r[13],s[14]=r[14],s[15]=r[15],s}function Aw(r,e,t,n,s){s=s??pu();let l,u,c,d,g,p,_,y,x,E,w,C;return r===s?(s[12]=r[0]*e+r[4]*t+r[8]*n+r[12],s[13]=r[1]*e+r[5]*t+r[9]*n+r[13],s[14]=r[2]*e+r[6]*t+r[10]*n+r[14],s[15]=r[3]*e+r[7]*t+r[11]*n+r[15]):(l=r[0],u=r[1],c=r[2],d=r[3],g=r[4],p=r[5],_=r[6],y=r[7],x=r[8],E=r[9],w=r[10],C=r[11],s[0]=l,s[1]=u,s[2]=c,s[3]=d,s[4]=g,s[5]=p,s[6]=_,s[7]=y,s[8]=x,s[9]=E,s[10]=w,s[11]=C,s[12]=l*e+g*t+x*n+r[12],s[13]=u*e+p*t+E*n+r[13],s[14]=c*e+_*t+w*n+r[14],s[15]=d*e+y*t+C*n+r[15]),s}function kw(r,e,t,n){return n=n??pu(),n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r,n[13]=e,n[14]=t,n[15]=1,n}const Fw=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,Dw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Ow{constructor(e){this.gl_=e,this.program_=Xh(e,Dw,Fw),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,n,s,l,u,c,d,g,p,_,y,x){const E=this.gl_;d===void 0&&(d=s),g===void 0&&(g=l),u===void 0&&(u=t),c===void 0&&(c=n),p===void 0&&(p=u),_===void 0&&(_=c),y===void 0&&(y=E.canvas.width),x===void 0&&(x=E.canvas.height),E.bindTexture(E.TEXTURE_2D,e),E.useProgram(this.program_),E.bindBuffer(E.ARRAY_BUFFER,this.positionBuffer),E.enableVertexAttribArray(this.positionLocation),E.vertexAttribPointer(this.positionLocation,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,this.texcoordBuffer),E.enableVertexAttribArray(this.texcoordLocation),E.vertexAttribPointer(this.texcoordLocation,2,E.FLOAT,!1,0,0);let w=jh(0,y,0,x,-1,1);w=Aw(w,d,g,0),w=Fm(w,p,_,1),E.uniformMatrix4fv(this.matrixLocation,!1,w);let C=kw(s/t,l/n,0);C=Fm(C,u/t,c/n,1),E.uniformMatrix4fv(this.textureMatrixLocation,!1,C),E.uniform1i(this.textureLocation,0),E.drawArrays(E.TRIANGLES,0,this.positions.length/2)}}function Dm(r,e,t){const n=r.createShader(e);if(n===null)throw new Error("Shader compilation failed");if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS)){const s=r.getShaderInfoLog(n);throw s===null?new Error("Shader info log creation failed"):new Error(s)}return n}function Xh(r,e,t){const n=r.createProgram(),s=Dm(r,r.VERTEX_SHADER,t),l=Dm(r,r.FRAGMENT_SHADER,e);if(n===null)throw new Error("Program creation failed");if(r.attachShader(n,s),r.attachShader(n,l),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw r.getProgramInfoLog(n)===null?new Error("Program info log creation failed"):new Error;return n}const Nw=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,zw=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,Gw=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,bw=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function Uw(r,e,t,n){let s;return t&&t.length?s=t.shift():xd?s=new OffscreenCanvas(r||300,e||300):s=document.createElement("canvas"),r&&(s.width=r),e&&(s.height=e),s.getContext("webgl",n)}function jw(r){const e=r.canvas;e.width=1,e.height=1,r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)}const Om=[];function Xw(r,e,t,n,s,l,u,c,d,g,p,_,y,x){const E=Math.round(n*e),w=Math.round(n*t);r.canvas.width=E,r.canvas.height=w;let C,I;if(I=r.createTexture(),r.bindTexture(r.TEXTURE_2D,I),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,E,w,0,r.RGBA,p,null),C=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,C),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,I,0),C===null)throw new Error("Could not create framebuffer");if(I===null)throw new Error("Could not create texture");if(d.length===0)return{width:E,height:w,framebuffer:C,texture:I};const T=Qt();d.forEach(function(B,ie,$){$h(T,B.extent)});let D,M,A;const X=1/s;{if(D=r.createTexture(),I===null)throw new Error("Could not create texture");M=Math.round(Me(T)*X),A=Math.round(rt(T)*X);const B=r.getParameter(r.MAX_TEXTURE_SIZE),ie=Math.max(M,A),$=ie>B?B/ie:1,te=Math.round(M*$),J=Math.round(A*$);r.bindTexture(r.TEXTURE_2D,D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),y?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST)),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,te,J,0,r.RGBA,p,null);const ee=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,ee),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,D,0);const ne=new Ow(r);d.forEach(function(Z,U,q){const G=(Z.extent[0]-T[0])*X*$,R=-(Z.extent[3]-T[3])*X*$,N=Me(Z.extent)*X*$,re=rt(Z.extent)*X*$;if(r.bindFramebuffer(r.FRAMEBUFFER,ee),r.viewport(0,0,te,J),Z.clipExtent){const z=(Z.clipExtent[0]-T[0])*X*$,ue=-(Z.clipExtent[3]-T[3])*X*$,he=Me(Z.clipExtent)*X*$,me=rt(Z.clipExtent)*X*$;r.enable(r.SCISSOR_TEST),r.scissor(y?z:Math.round(z),y?ue:Math.round(ue),y?he:Math.round(z+he)-Math.round(z),y?me:Math.round(ue+me)-Math.round(ue))}ne.drawImage(Z.texture,Z.width,Z.height,g,g,Z.width-2*g,Z.height-2*g,y?G:Math.round(G),y?R:Math.round(R),y?N:Math.round(G+N)-Math.round(G),y?re:Math.round(R+re)-Math.round(R),te,J),r.disable(r.SCISSOR_TEST)}),r.deleteFramebuffer(ee)}const K=gi(u),b=gi(T),W=B=>{const ie=(B[0][0]-K[0])/l*n,$=-(B[0][1]-K[1])/l*n,te=(B[1][0]-K[0])/l*n,J=-(B[1][1]-K[1])/l*n,ee=(B[2][0]-K[0])/l*n,ne=-(B[2][1]-K[1])/l*n;return{u1:te,v1:J,u0:ie,v0:$,u2:ee,v2:ne}};r.bindFramebuffer(r.FRAMEBUFFER,C),r.viewport(0,0,E,w);{const B=[],ie=[],$=Xh(r,bw,Gw);r.useProgram($);const te=r.getUniformLocation($,"u_texture");r.bindTexture(r.TEXTURE_2D,D),r.uniform1i(te,0),c.getTriangles().forEach(function(G,R,N){const re=G.source,z=G.target,{u1:ue,v1:he,u0:me,v0:xe,u2:Re,v2:Ne}=W(z),St=(re[0][0]-b[0])/s/M,kn=-(re[0][1]-b[1])/s/A,pn=(re[1][0]-b[0])/s/M,Vn=-(re[1][1]-b[1])/s/A,Fn=(re[2][0]-b[0])/s/M,Jt=-(re[2][1]-b[1])/s/A;B.push(ue,he,me,xe,Re,Ne),ie.push(pn,Vn,St,kn,Fn,Jt)});const J=jh(0,E,w,0,-1,1),ee=r.getUniformLocation($,"u_matrix");r.uniformMatrix4fv(ee,!1,J);const ne=r.getAttribLocation($,"a_position"),Z=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,Z),r.bufferData(r.ARRAY_BUFFER,new Float32Array(B),r.STATIC_DRAW),r.vertexAttribPointer(ne,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ne);const U=r.getAttribLocation($,"a_texcoord"),q=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,q),r.bufferData(r.ARRAY_BUFFER,new Float32Array(ie),r.STATIC_DRAW),r.vertexAttribPointer(U,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(U),r.drawArrays(r.TRIANGLES,0,B.length/2)}if(_){const B=Xh(r,zw,Nw);r.useProgram(B);const ie=jh(0,E,w,0,-1,1),$=r.getUniformLocation(B,"u_matrix");r.uniformMatrix4fv($,!1,ie);const te=Array.isArray(_)?_:[0,0,0,255],J=r.getUniformLocation(B,"u_val");r.uniform4fv(J,te);const ee=r.getAttribLocation(B,"a_position"),ne=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,ne),r.vertexAttribPointer(ee,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(ee);const Z=c.getTriangles().reduce(function(U,q){const G=q.target,{u1:R,v1:N,u0:re,v0:z,u2:ue,v2:he}=W(G);return U.concat([R,N,re,z,re,z,ue,he,ue,he,R,N])},[]);r.bufferData(r.ARRAY_BUFFER,new Float32Array(Z),r.STATIC_DRAW),r.drawArrays(r.LINES,0,Z.length/2)}return{width:E,height:w,framebuffer:C,texture:I}}class Ww extends Uh{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,n=t.getExtent(),s=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?s?Mn(n,s):n:s;const l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),u=this.targetTileGrid_.getExtent();let c=this.sourceTileGrid_.getExtent();const d=u?Mn(l,u):l;if(bo(d)===0){this.state=oe.EMPTY;return}n&&(c?c=Mn(c,n):c=n);const g=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),p=e.targetProj,_=l0(t,p,d,g);if(!isFinite(_)||_<=0){this.state=oe.EMPTY;return}const y=e.errorThreshold!==void 0?e.errorThreshold:s0;if(this.triangulation_=new o0(t,p,d,c,_*y,g,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(_);let x=this.triangulation_.calculateSourceExtent();if(c&&(t.canWrapX()?(x[1]=Ke(x[1],c[1],c[3]),x[3]=Ke(x[3],c[1],c[3])):x=Mn(x,c)),!bo(x))this.state=oe.EMPTY;else{let E=0,w=0;t.canWrapX()&&(E=Me(n),w=Math.floor((x[0]-n[0])/E)),qh(x.slice(),t,!0).forEach(I=>{const T=this.sourceTileGrid_.getTileRangeForExtentAndZ(I,this.sourceZ_),D=e.getTileFunction;for(let M=T.minX;M<=T.maxX;M++)for(let A=T.minY;A<=T.maxY;A++){const X=D(this.sourceZ_,M,A,this.pixelRatio_);if(X){const K=w*E;this.sourceTiles_.push({tile:X,offset:K})}}++w}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(M=>{var R;const A=M.tile;if(!A||A.getState()!==oe.LOADED)return;const X=A.getSize(),K=this.gutter_;let b;const W=Sw(A.getData());W?b=W:(t=!0,b=Tw(Ka(A.getData())));const B=[X[0]+2*K,X[1]+2*K],ie=b instanceof Float32Array,$=B[0]*B[1],te=ie?Float32Array:Uint8ClampedArray,J=new te(b.buffer),ee=te.BYTES_PER_ELEMENT,ne=ee*J.length/$,Z=J.byteLength/B[1],U=Math.floor(Z/ee/B[0]),q=this.sourceTileGrid_.getTileCoordExtent(A.tileCoord);q[0]+=M.offset,q[2]+=M.offset;const G=(R=this.clipExtent_)==null?void 0:R.slice();G&&(G[0]+=M.offset,G[2]+=M.offset),e.push({extent:q,clipExtent:G,data:J,dataType:te,bytesPerPixel:ne,pixelSize:B,bandCount:U})}),this.sourceTiles_.length=0,e.length===0){this.state=oe.ERROR,this.changed();return}const n=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(n),l=typeof s=="number"?s:s[0],u=typeof s=="number"?s:s[1],c=l*this.pixelRatio_,d=u*this.pixelRatio_,g=this.targetTileGrid_.getResolution(n),p=this.sourceTileGrid_.getResolution(this.sourceZ_),_=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),y=e[0].bandCount,x=new e[0].dataType(y*c*d),E=Uw(c,d,Om,{premultipliedAlpha:!1,antialias:!1});let w;const C=E.RGBA;let I;e[0].dataType==Float32Array?(I=E.FLOAT,E.getExtension("WEBGL_color_buffer_float"),E.getExtension("OES_texture_float"),E.getExtension("EXT_float_blend"),w=E.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(I=E.UNSIGNED_BYTE,w=this.interpolate);const T=4,D=Math.ceil(y/T);for(let M=D-1;M>=0;--M){const A=[];for(let te=0,J=e.length;te<J;++te){const ee=e[te],ne=ee.pixelSize,Z=ne[0],U=ne[1],q=new ee.dataType(T*Z*U),G=ee.data;let R=M*T;for(let re=0,z=q.length;re<z;re+=T)q[re]=G[R],q[re+1]=G[R+1],q[re+2]=G[R+2],q[re+3]=G[R+3],R+=y;const N=E.createTexture();E.bindTexture(E.TEXTURE_2D,N),w?(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR)):(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST)),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,C,Z,U,0,C,I,q),A.push({extent:ee.extent,clipExtent:ee.clipExtent,texture:N,width:Z,height:U})}const{framebuffer:X,width:K,height:b}=Xw(E,l,u,this.pixelRatio_,p,g,_,this.triangulation_,A,this.gutter_,I,this.renderEdges_,w),W=K,B=b*T,ie=new e[0].dataType(W*B);E.bindFramebuffer(E.FRAMEBUFFER,X),E.readPixels(0,0,K,b,E.RGBA,I,ie);let $=M*T;for(let te=0,J=ie.length;te<J;te+=T){const ee=(W-1-(te/B|0))*B+te%B;x[$]=ie[ee],x[$+1]=ie[ee+1],x[$+2]=ie[ee+2],x[$+3]=ie[ee+3],$+=y}}if(jw(E),Om.push(E.canvas),t){const M=et(l,u),A=new ImageData(x,l);M.putImageData(A,0,0),this.reprojData_=M.canvas}else this.reprojData_=x;this.reprojSize_=[Math.round(c),Math.round(d)],this.state=oe.LOADED,this.changed()}load(){if(this.state!==oe.IDLE&&this.state!==oe.ERROR)return;this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n!==oe.IDLE&&n!==oe.LOADING)return;e++;const s=Le(t,Ee.CHANGE,()=>{const l=t.getState();(l==oe.LOADED||l==oe.ERROR||l==oe.EMPTY)&&(Ge(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==oe.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ge),this.sourcesListenerKeys_=null}}class Wh extends Ad{constructor(e,t,n,s,l,u,c,d,g,p,_,y){super(l,oe.IDLE,y),this.renderEdges_=_!==void 0?_:!1,this.pixelRatio_=c,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=s,this.wrappedTileCoord_=u||l,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const x=s.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const C=E?Mn(x,E):x;if(bo(C)===0){this.state=oe.EMPTY;return}const I=e.getExtent();I&&(w?w=Mn(w,I):w=I);const T=s.getResolution(this.wrappedTileCoord_[0]),D=l0(e,n,C,T);if(!isFinite(D)||D<=0){this.state=oe.EMPTY;return}const M=p!==void 0?p:s0;if(this.triangulation_=new o0(e,n,C,w,D*M,T),this.triangulation_.getTriangles().length===0){this.state=oe.EMPTY;return}this.sourceZ_=t.getZForResolution(D);let A=this.triangulation_.calculateSourceExtent();if(w&&(e.canWrapX()?(A[1]=Ke(A[1],w[1],w[3]),A[3]=Ke(A[3],w[1],w[3])):A=Mn(A,w)),!bo(A))this.state=oe.EMPTY;else{let X=0,K=0;e.canWrapX()&&(X=Me(I),K=Math.floor((A[0]-I[0])/X)),qh(A.slice(),e,!0).forEach(W=>{const B=t.getTileRangeForExtentAndZ(W,this.sourceZ_);for(let ie=B.minX;ie<=B.maxX;ie++)for(let $=B.minY;$<=B.maxY;$++){const te=g(this.sourceZ_,ie,$,c);if(te){const J=K*X;this.sourceTiles_.push({tile:te,offset:J})}}++K}),this.sourceTiles_.length===0&&(this.state=oe.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var s;const n=t.tile;if(n&&n.getState()==oe.LOADED){const l=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);l[0]+=t.offset,l[2]+=t.offset;const u=(s=this.clipExtent_)==null?void 0:s.slice();u&&(u[0]+=t.offset,u[2]+=t.offset),e.push({extent:l,clipExtent:u,image:n.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=oe.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),s=typeof n=="number"?n:n[0],l=typeof n=="number"?n:n[1],u=this.targetTileGrid_.getResolution(t),c=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Pw(s,l,this.pixelRatio_,c,this.sourceTileGrid_.getExtent(),u,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=oe.LOADED}this.changed()}load(){if(this.state==oe.IDLE){this.state=oe.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const n=t.getState();if(n==oe.IDLE||n==oe.LOADING){e++;const s=Le(t,Ee.CHANGE,l=>{const u=t.getState();(u==oe.LOADED||u==oe.ERROR||u==oe.EMPTY)&&(Ge(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},n,s){t.getState()==oe.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ge),this.sourcesListenerKeys_=null}release(){this.canvas_&&(su(this.canvas_.getContext("2d")),Ls.push(this.canvas_),this.canvas_=null),super.release()}}function Eh(r,e,t,n){return`${r},${vw(e,t,n)}`}function xh(r,e,t){if(!(t in r))return r[t]=new Set([e]),!0;const n=r[t],s=n.has(e);return s||n.add(e),!s}function Bw(r,e,t){const n=r[t];return n?n.delete(e):!1}function Nm(r,e){const t=r.layerStatesArray[r.layerIndex];t.extent&&(e=Mn(e,Ki(t.extent,r.viewState.projection)));const n=t.layer.getRenderSource();if(!n.getWrapX()){const s=n.getTileGridForProjection(r.viewState.projection).getExtent();s&&(e=Mn(e,s))}return e}class Yw extends W_{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Qt(),this.tempTileRange_=new Dd(0,0,0,0),this.tempTileCoord_=Va(0,0,0);const n=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new yw(n),this.maxStaleKeys=n*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,n,s){const l=this.tileCache_,c=this.getLayer().getSource(),d=Eh(c.getKey(),e,t,n);let g;if(l.containsKey(d))g=l.get(d);else{if(g=c.getTile(e,t,n,s.pixelRatio,s.viewState.projection),!g)return null;l.set(d,g)}return g}getTile(e,t,n,s){const l=this.getOrCreateTile(e,t,n,s);return l||null}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),s=ct(t.pixelToCoordinateTransform,e.slice()),l=n.getExtent();if(l&&!ks(l,s))return null;const u=t.viewState,c=n.getRenderSource(),d=c.getTileGridForProjection(u.projection),g=c.getTilePixelRatio(t.pixelRatio);for(let p=d.getZForResolution(u.resolution);p>=d.getMinZoom();--p){const _=d.getTileCoordForCoordAndZ(s,p),y=this.getTile(p,_[1],_[2],t);if(!y||y.getState()!==oe.LOADED)continue;const x=d.getOrigin(p),E=Xt(d.getTileSize(p)),w=d.getResolution(p);let C;if(y instanceof $_||y instanceof Wh)C=y.getImage();else if(y instanceof Uh){if(C=Ka(y.getData()),!C)continue}else continue;const I=Math.floor(g*((s[0]-x[0])/w-_[1]*E[0])),T=Math.floor(g*((x[1]-s[1])/w-_[2]*E[1])),D=Math.round(g*c.getGutterForProjection(u.projection));return this.getImageData(C,I+D,T+D)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const n=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(e,t,n,s,l){const u=e.viewState,c=this.getLayer(),d=c.getRenderSource(),g=d.getTileGridForProjection(u.projection),p=Te(d);p in e.wantedTiles||(e.wantedTiles[p]={});const _=e.wantedTiles[p],y=c.getMapInternal(),x=Math.max(n-l,g.getMinZoom(),g.getZForResolution(Math.min(c.getMaxResolution(),y?y.getView().getResolutionForZoom(Math.max(c.getMinZoom(),0)):g.getResolution(0)),d.zDirection));for(let E=n;E>=x;--E){const w=g.getTileRangeForExtentAndZ(t,E,this.tempTileRange_),C=g.getResolution(E);for(let I=w.minX;I<=w.maxX;++I)for(let T=w.minY;T<=w.maxY;++T){const D=this.getTile(E,I,T,e);if(!D||!xh(s,D,E))continue;const A=D.getKey();if(_[A]=!0,D.getState()===oe.IDLE&&!e.tileQueue.isKeyQueued(A)){const X=Va(E,I,T,this.tempTileCoord_);e.tileQueue.enqueue([D,p,g.getTileCoordCenter(X),C])}}}}findStaleTile_(e,t){const n=this.tileCache_,s=e[0],l=e[1],u=e[2],c=this.getStaleKeys();for(let d=0;d<c.length;++d){const g=Eh(c[d],s,l,u);if(n.containsKey(g)){const p=n.get(g);if(p.getState()===oe.LOADED)return p.endTransition(Te(this)),xh(t,p,s),!0}}return!1}findAltTiles_(e,t,n,s){const l=e.getTileRangeForTileCoordAndZ(t,n,this.tempTileRange_);if(!l)return!1;let u=!0;const c=this.tileCache_,g=this.getLayer().getRenderSource().getKey();for(let p=l.minX;p<=l.maxX;++p)for(let _=l.minY;_<=l.maxY;++_){const y=Eh(g,n,p,_);let x=!1;if(c.containsKey(y)){const E=c.get(y);E.getState()===oe.LOADED&&(xh(s,E,n),x=!0)}x||(u=!1)}return u}renderFrame(e,t){let n=!0;this.renderComplete=!0;const s=e.layerStatesArray[e.layerIndex],l=e.viewState,u=l.projection,c=l.resolution,d=l.center,g=e.pixelRatio,p=this.getLayer(),_=p.getSource(),y=_.getRevision(),x=_.getTileGridForProjection(u),E=x.getZForResolution(c,_.zDirection),w=x.getResolution(E),C=_.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==C&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=C):this.renderedSourceKey_=C;let I=e.extent;const T=_.getTilePixelRatio(g);this.prepareContainer(e,t);const D=this.context.canvas.width,M=this.context.canvas.height,A=s.extent&&Ki(s.extent);A&&(I=Mn(I,Ki(s.extent)));const X=w*D/2/T,K=w*M/2/T,b=[d[0]-X,d[1]-K,d[0]+X,d[1]+K],W={};this.renderedTiles.length=0;const B=p.getPreload();if(e.nextExtent){const G=x.getZForResolution(l.nextResolution,_.zDirection),R=Nm(e,e.nextExtent);this.enqueueTiles(e,R,G,W,B)}const ie=Nm(e,I);if(this.enqueueTiles(e,ie,E,W,0),B>0&&setTimeout(()=>{this.enqueueTiles(e,ie,E-1,W,B-1)},0),!(E in W))return this.container;const $=Te(this),te=e.time;for(const G of W[E]){const R=G.getState();if((G instanceof Wh||G instanceof Ww)&&R===oe.EMPTY)continue;const N=G.tileCoord;if(R===oe.LOADED&&G.getAlpha($,te)===1){G.endTransition($);continue}if(R!==oe.IDLE&&(n=!1),R!==oe.ERROR&&(this.renderComplete=!1),this.findStaleTile_(N,W)){Bw(W,G,E),e.animate=!0;continue}if(this.findAltTiles_(x,N,E+1,W))continue;const ue=x.getMinZoom();for(let he=E-1;he>=ue&&!this.findAltTiles_(x,N,he,W);--he);}const J=w/c*g/T,ee=this.getRenderContext(e);fi(this.tempTransform,D/2,M/2,J,J,0,-D/2,-M/2),s.extent&&this.clipUnrotated(ee,e,A),_.getInterpolate()||(ee.imageSmoothingEnabled=!1),this.preRender(ee,e);const ne=Object.keys(W).map(Number);ne.sort(ui);let Z;const U=[],q=[];for(let G=ne.length-1;G>=0;--G){const R=ne[G],N=_.getTilePixelSize(R,g,u),z=x.getResolution(R)/w,ue=N[0]*z*J,he=N[1]*z*J,me=x.getTileCoordForCoordAndZ(gi(b),R),xe=x.getTileCoordExtent(me),Re=ct(this.tempTransform,[T*(xe[0]-b[0])/w,T*(b[3]-xe[3])/w]),Ne=T*_.getGutterForProjection(u);for(const St of W[R]){if(St.getState()!==oe.LOADED)continue;const kn=St.tileCoord,pn=me[1]-kn[1],Vn=Math.round(Re[0]-(pn-1)*ue),Fn=me[2]-kn[2],Jt=Math.round(Re[1]-(Fn-1)*he),mt=Math.round(Re[0]-pn*ue),Bt=Math.round(Re[1]-Fn*he),Dn=Vn-mt,en=Jt-Bt,tn=ne.length===1;let mn=!1;Z=[mt,Bt,mt+Dn,Bt,mt+Dn,Bt+en,mt,Bt+en];for(let Kn=0,Zn=U.length;Kn<Zn;++Kn)if(!tn&&R<q[Kn]){const He=U[Kn];Ut([mt,Bt,mt+Dn,Bt+en],[He[0],He[3],He[4],He[7]])&&(mn||(ee.save(),mn=!0),ee.beginPath(),ee.moveTo(Z[0],Z[1]),ee.lineTo(Z[2],Z[3]),ee.lineTo(Z[4],Z[5]),ee.lineTo(Z[6],Z[7]),ee.moveTo(He[6],He[7]),ee.lineTo(He[4],He[5]),ee.lineTo(He[2],He[3]),ee.lineTo(He[0],He[1]),ee.clip())}U.push(Z),q.push(R),this.drawTile(St,e,mt,Bt,Dn,en,Ne,tn),mn&&ee.restore(),this.renderedTiles.unshift(St),this.updateUsedTiles(e.usedTiles,_,St)}}if(this.renderedRevision=y,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!Go(this.renderedExtent_,b),this.renderedExtent_=b,this.renderedPixelRatio=g,this.postRender(this.context,e),s.extent&&ee.restore(),ee.imageSmoothingEnabled=!0,this.renderComplete){const G=(R,N)=>{const re=Te(_),z=N.wantedTiles[re],ue=z?Object.keys(z).length:0;this.updateCacheSize(ue),this.tileCache_.expireCache()};e.postRenderFunctions.push(G)}return!this.renderComplete&&!n&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,n,s,l,u,c,d){let g;if(e instanceof Uh){if(g=Ka(e.getData()),!g)throw new Error("Rendering array data is not yet supported")}else g=this.getTileImage(e);if(!g)return;const p=this.getRenderContext(t),_=Te(this),y=t.layerStatesArray[t.layerIndex],x=y.opacity*(d?e.getAlpha(_,t.time):1),E=x!==p.globalAlpha;E&&(p.save(),p.globalAlpha=x),p.drawImage(g,c,c,g.width-2*c,g.height-2*c,n,s,l,u),E&&p.restore(),x!==y.opacity?t.animate=!0:d&&e.endTransition(_)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,n){const s=Te(t);s in e||(e[s]={}),e[s][n.getKey()]=!0}}class zm extends Cw{constructor(e){super(e)}createRenderer(){return new Yw(this,{cacheSize:this.getCacheSize()})}}const wh={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},_s=[0,0,0],Wi=5;class a0{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ke(E1(this.resolutions_,(s,l)=>l-s),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let s=0,l=this.resolutions_.length-1;s<l;++s)if(!t)t=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ke(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=gi(n)),ke(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ke(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Sd,ke(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,l)=>{const u=new Dd(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(n){const c=this.getTileRangeForExtentAndZ(n,l);u.minX=Math.max(c.minX,u.minX),u.maxX=Math.min(c.maxX,u.maxX),u.minY=Math.max(c.minY,u.minY),u.maxY=Math.min(c.maxY,u.maxY)}return u}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const s=this.getTileRangeForExtentAndZ(e,t);for(let l=s.minX,u=s.maxX;l<=u;++l)for(let c=s.minY,d=s.maxY;c<=d;++c)n([t,l,c])}forEachTileCoordParentTileRange(e,t,n,s){let l,u,c,d=null,g=e[0]-1;for(this.zoomFactor_===2?(u=e[1],c=e[2]):d=this.getTileCoordExtent(e,s);g>=this.minZoom;){if(u!==void 0&&c!==void 0?(u=Math.floor(u/2),c=Math.floor(c/2),l=ps(u,u,c,c,n)):l=this.getTileRangeForExtentAndZ(d,g,n),t(g,l))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const l=e[1]*2,u=e[2]*2;return ps(l,l+1,u,u+1,t)}const s=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const s=e[0],l=e[1],u=e[2];if(t===s)return ps(l,u,l,u,n);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,t-s),g=Math.floor(l*d),p=Math.floor(u*d);if(t<s)return ps(g,g,p,p,n);const _=Math.floor(d*(l+1))-1,y=Math.floor(d*(u+1))-1;return ps(g,_,p,y,n)}const c=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(c,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,_s);const s=_s[1],l=_s[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,_s);const u=_s[1],c=_s[2];return ps(s,u,l,c,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=Xt(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*s[0]*n,t[1]-(e[2]+.5)*s[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),s=this.getResolution(e[0]),l=Xt(this.getTileSize(e[0]),this.tmpSize_),u=n[0]+e[1]*l[0]*s,c=n[1]-(e[2]+1)*l[1]*s,d=u+l[0]*s,g=c+l[1]*s;return Qi(u,c,d,g,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,s,l){const u=this.getZForResolution(n),c=n/this.getResolution(u),d=this.getOrigin(u),g=Xt(this.getTileSize(u),this.tmpSize_);let p=c*(e-d[0])/n/g[0],_=c*(d[1]-t)/n/g[1];return s?(p=_a(p,Wi)-1,_=_a(_,Wi)-1):(p=ma(p,Wi),_=ma(_,Wi)),Va(u,p,_,l)}getTileCoordForXYAndZ_(e,t,n,s,l){const u=this.getOrigin(n),c=this.getResolution(n),d=Xt(this.getTileSize(n),this.tmpSize_);let g=(e-u[0])/c/d[0],p=(u[1]-t)/c/d[1];return s?(g=_a(g,Wi)-1,p=_a(p,Wi)-1):(g=ma(g,Wi),p=ma(p,Wi)),Va(n,g,p,l)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Vh(this.resolutions_,e,t||0);return Ke(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return f_(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let s=this.minZoom;s<t;++s)n[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=n}}function u0(r){let e=r.getDefaultTileGrid();return e||(e=Hw(r),r.setDefaultTileGrid(e)),e}function Vw(r,e,t){const n=e[0],s=r.getTileCoordCenter(e),l=Od(t);if(!ks(l,s)){const u=Me(l),c=Math.ceil((l[0]-s[0])/u);return s[0]+=u*c,r.getTileCoordForCoordAndZ(s,n)}return e}function Kw(r,e,t,n){n=n!==void 0?n:"top-left";const s=c0(r,e,t);return new a0({extent:r,origin:M1(r,n),resolutions:s,tileSize:t})}function Zw(r){const e=r||{},t=e.extent||Ze("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:c0(t,e.maxZoom,e.tileSize,e.maxResolution)};return new a0(n)}function c0(r,e,t,n){e=e!==void 0?e:nE,t=Xt(t!==void 0?t:Sd);const s=rt(r),l=Me(r);n=n>0?n:Math.max(l/t[0],s/t[1]);const u=e+1,c=new Array(u);for(let d=0;d<u;++d)c[d]=n/Math.pow(2,d);return c}function Hw(r,e,t,n){const s=Od(r);return Kw(s,e,t,n)}function Od(r){r=Ze(r);let e=r.getExtent();if(!e){const t=180*Qh.degrees/r.getMetersPerUnit();e=Qi(-t,-t,t,t)}return e}class $w extends H_{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Xt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Te(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,s,l){return ve()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:u0(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const s=this.getTileGridForProjection(n),l=this.getTilePixelRatio(t),u=Xt(s.getTileSize(e),this.tmpSize);return l==1?u:Yv(u,l,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const n=t!==void 0?t:this.getProjection(),s=t!==void 0?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=Vw(s,e,n)),ww(e,s)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class qw extends Bn{constructor(e,t){super(e),this.tile=t}}const Qw=/\{z\}/g,Jw=/\{x\}/g,eC=/\{y\}/g,tC=/\{-y\}/g;function nC(r,e,t,n,s){return r.replace(Qw,e.toString()).replace(Jw,t.toString()).replace(eC,n.toString()).replace(tC,function(){if(s===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(s-n).toString()})}function iC(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const n=t[1].charCodeAt(0),s=t[2].charCodeAt(0);let l;for(l=n;l<=s;++l)e.push(r.replace(t[0],String.fromCharCode(l)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const n=parseInt(t[2],10);for(let s=parseInt(t[1],10);s<=n;s++)e.push(r.replace(t[0],s.toString()));return e}return e.push(r),e}function rC(r,e){return function(t,n,s){if(!t)return;let l;const u=t[0];if(e){const c=e.getFullTileRange(u);c&&(l=c.getHeight()-1)}return nC(r,u,t[1],t[2],l)}}function sC(r,e){const t=r.length,n=new Array(t);for(let s=0;s<t;++s)n[s]=rC(r[s],e);return oC(n)}function oC(r){return r.length===1?r[0]:function(e,t,n){if(!e)return;const s=Ew(e),l=Ts(s,r.length);return r[l](e,t,n)}}class Nd extends $w{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Nd.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=Te(t),s=t.getState();let l;s==oe.LOADING?(this.tileLoadingKeys_[n]=!0,l=wh.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],l=s==oe.ERROR?wh.TILELOADERROR:s==oe.LOADED?wh.TILELOADEND:void 0),l!=null&&this.dispatchEvent(new qw(l,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=iC(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(sC(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}}class lC extends Nd{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:aC,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:$_,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!La(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||La(t,e)))return this.tileGrid;const n=Te(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=u0(e)),this.tileGridForProjection[n]}createTile_(e,t,n,s,l,u){const c=[e,t,n],d=this.getTileCoordForTileUrlFunction(c,l),g=d?this.tileUrlFunction(d,s,l):void 0,p=new this.tileClass(c,g!==void 0?oe.IDLE:oe.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=u,p.addEventListener(Ee.CHANGE,this.handleTileChange.bind(this)),p}getTile(e,t,n,s,l){const u=this.getProjection();if(!u||!l||La(u,l))return this.getTileInternal(e,t,n,s,u||l);const c=[e,t,n],d=this.getKey(),g=this.getTileGridForProjection(u),p=this.getTileGridForProjection(l),_=this.getTileCoordForTileUrlFunction(c,l),y=new Wh(u,g,l,p,c,_,this.getTilePixelRatio(s),this.getGutter(),(x,E,w,C)=>this.getTileInternal(x,E,w,C,u),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=d,y}getTileInternal(e,t,n,s,l){const u=this.getKey();return this.createTile_(e,t,n,s,l,u)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const n=Ze(e);if(n){const s=Te(n);s in this.tileGridForProjection||(this.tileGridForProjection[s]=t)}}}function aC(r,e){r.getImage().src=e}class Gm extends lC{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:Zw({extent:Od(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const bm=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Um={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class uC extends gu{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const n=e.labelActive!==void 0?e.labelActive:"";this.labelActiveNode_=typeof n=="string"?document.createTextNode(n):n;const s=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=s,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Ee.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${nl} ${lu}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(jm(t))if(Xm(t))hC(t);else{let n;this.source_?n=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:n=e.getTargetElement(),this.keys_?cC(n):h0(n)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=Xm(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Oa(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Um.ENTERFULLSCREEN)):(Oa(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Um.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(at.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(at.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let n=0,s=e.length;n<s;++n)Ge(e[n]);e.length=0;const t=this.getMap();if(t){const n=t.getOwnerDocument();jm(n)?this.element.classList.remove(Qp):this.element.classList.add(Qp);for(let s=0,l=bm.length;s<l;++s)e.push(Le(n,bm[s],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function jm(r){const e=r.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&r.fullscreenEnabled)}function Xm(r){return!!(r.webkitIsFullScreen||r.fullscreenElement)}function h0(r){r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}function cC(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():h0(r)}function hC(r){r.exitFullscreen?r.exitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}class dC{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=As,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?Ze(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Ze(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return ve()}readFeature(e,t){return ve()}readFeatures(e,t){return ve()}readGeometry(e,t){return ve()}readProjection(e){return ve()}writeFeature(e,t){return ve()}writeFeatures(e,t){return ve()}writeGeometry(e,t){return ve()}}function zd(r,e,t){const n=t?Ze(t.featureProjection):null,s=t?Ze(t.dataProjection):null;let l=r;if(n&&s&&!La(n,s)){e&&(l=r.clone());const u=e?n:s,c=e?s:n;u.getUnits()==="tile-pixels"?l.transform(u,c):l.applyTransform(jo(u,c))}if(e&&t&&t.decimals!==void 0){const u=Math.pow(10,t.decimals),c=function(d){for(let g=0,p=d.length;g<p;++g)d[g]=Math.round(d[g]*u)/u;return d};l===r&&(l=r.clone()),l.applyTransform(c)}return l}const fC={Point:Ds,LineString:Ns,Polygon:er,MultiPoint:fu,MultiLineString:Wa,MultiPolygon:Ba};function gC(r,e,t){return Array.isArray(e[0])?(p_(r,0,e,t)||(r=r.slice(),Ah(r,0,e,t)),r):(md(r,0,e,t)||(r=r.slice(),Fa(r,0,e,t)),r)}function d0(r,e){var l;const t=r.geometry;if(!t)return[];if(Array.isArray(t))return t.map(u=>d0({...r,geometry:u})).flat();const n=t.type==="MultiPolygon"?"Polygon":t.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const s=t.layout.length;return zd(new qt(n,n==="Polygon"?gC(t.flatCoordinates,t.ends,s):t.flatCoordinates,(l=t.ends)==null?void 0:l.flat(),s,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)}function Gd(r,e){if(!r)return null;if(Array.isArray(r)){const n=r.map(s=>Gd(s,e));return new Xa(n)}const t=fC[r.type];return zd(new t(r.flatCoordinates,r.layout,r.ends),!1,e)}class pC extends dC{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Ta(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Ta(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return ve()}readFeaturesFromObject(e,t){return ve()}readGeometry(e,t){return this.readGeometryFromObject(Ta(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return ve()}readProjection(e){return this.readProjectionFromObject(Ta(e))}readProjectionFromObject(e){return ve()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return ve()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return ve()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return ve()}}function Ta(r){if(typeof r=="string"){const e=JSON.parse(r);return e||null}return r!==null?r:null}class Wm extends pC{constructor(e){e=e||{},super(),this.dataProjection=Ze(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Ze(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const s=bd(n.geometry);if(this.featureClass===qt)return d0({geometry:s,id:n.id,properties:n.properties},t);const l=new As;return this.geometryName_?l.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&l.setGeometryName(n.geometry_name),l.setGeometry(Gd(s,t)),"id"in n&&l.setId(n.id),n.properties&&l.setProperties(n.properties,!0),l}readFeaturesFromObject(e,t){const n=e;let s=null;if(n.type==="FeatureCollection"){const l=e;s=[];const u=l.features;for(let c=0,d=u.length;c<d;++c){const g=this.readFeatureFromObject(u[c],t);g&&s.push(g)}}else s=[this.readFeatureFromObject(e,t)];return s.flat()}readGeometryFromObject(e,t){return mC(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if(t.type=="name")n=Ze(t.properties.name);else if(t.type==="EPSG")n=Ze("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},s=e.getId();if(s!==void 0&&(n.id=s),!e.hasProperties())return n;const l=e.getProperties(),u=e.getGeometry();return u&&(n.geometry=Bh(u,t),delete l[e.getGeometryName()]),Pr(l)||(n.properties=l),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let s=0,l=e.length;s<l;++s)n.push(this.writeFeatureObject(e[s],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return Bh(e,this.adaptOptions(t))}}function bd(r,e){if(!r)return null;let t;switch(r.type){case"Point":{t=yC(r);break}case"LineString":{t=vC(r);break}case"Polygon":{t=CC(r);break}case"MultiPoint":{t=xC(r);break}case"MultiLineString":{t=EC(r);break}case"MultiPolygon":{t=wC(r);break}case"GeometryCollection":{t=_C(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return t}function mC(r,e){const t=bd(r);return Gd(t,e)}function _C(r,e){return r.geometries.map(function(n){return bd(n)})}function yC(r){const e=r.coordinates;return{type:"Point",flatCoordinates:e,layout:Or(e.length)}}function vC(r){var n;const e=r.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Or(((n=e[0])==null?void 0:n.length)||2)}}function EC(r){var l,u;const e=r.coordinates,t=((u=(l=e[0])==null?void 0:l[0])==null?void 0:u.length)||2,n=[],s=tl(n,0,e,t);return{type:"MultiLineString",flatCoordinates:n,ends:s,layout:Or(t)}}function xC(r){var t;const e=r.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Or(((t=e[0])==null?void 0:t.length)||2)}}function wC(r){var l,u;const e=r.coordinates,t=[],n=((u=(l=e[0])==null?void 0:l[0])==null?void 0:u[0].length)||2,s=l_(t,0,e,n);return{type:"MultiPolygon",flatCoordinates:t,ends:s,layout:Or(n)}}function CC(r){var l,u;const e=r.coordinates,t=[],n=(u=(l=e[0])==null?void 0:l[0])==null?void 0:u.length,s=tl(t,0,e,n);return{type:"Polygon",flatCoordinates:t,ends:s,layout:Or(n)}}function Bh(r,e){r=zd(r,!0,e);const t=r.getType();let n;switch(t){case"Point":{n=MC(r);break}case"LineString":{n=RC(r);break}case"Polygon":{n=PC(r,e);break}case"MultiPoint":{n=IC(r);break}case"MultiLineString":{n=TC(r);break}case"MultiPolygon":{n=LC(r,e);break}case"GeometryCollection":{n=SC(r,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function SC(r,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(n){return Bh(n,e)})}}function RC(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function TC(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function IC(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function LC(r,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function MC(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function PC(r,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}const AC={SELECT:"select"};class kC extends Bn{constructor(e,t,n,s){super(e),this.selected=t,this.deselected=n,this.mapBrowserEvent=s}}const Ia={};class Ud extends js{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:nw,this.addCondition_=e.addCondition?e.addCondition:Mm,this.removeCondition_=e.removeCondition?e.removeCondition:Mm,this.toggleCondition_=e.toggleCondition?e.toggleCondition:t0,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Mr,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:FC(),this.features_=e.features||new Ln;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(s){return n.includes(s)}}else t=Mr;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[Te(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Te(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(ht.ADD,this.boundAddFeature_),this.features_.addEventListener(ht.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(ht.ADD,this.boundAddFeature_),this.features_.removeEventListener(ht.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const n=this.getMap().getAllLayers().find(function(s){if(s instanceof zh&&s.getSource()&&s.getSource().hasFeature(t))return s});n&&this.addFeatureLayerAssociation_(t,n)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=Te(e);t in Ia||(Ia[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let s=t.length-1;s>=0;--s){const l=t[s];if(l!==this&&l instanceof Ud&&l.getStyle()&&l.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(l.getStyle());return}}const n=Te(e);e.setStyle(Ia[n]),delete Ia[n]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Te(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),n=this.removeCondition_(e),s=this.toggleCondition_(e),l=!t&&!n&&!s,u=e.map,c=this.getFeatures(),d=[],g=[];if(l){bs(this.featureLayerAssociation_),u.forEachFeatureAtPixel(e.pixel,(p,_)=>{if(!(!(p instanceof As)||!this.filter_(p,_)))return this.addFeatureLayerAssociation_(p,_),g.push(p),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let p=c.getLength()-1;p>=0;--p){const _=c.item(p),y=g.indexOf(_);y>-1?g.splice(y,1):(c.remove(_),d.push(_))}g.length!==0&&c.extend(g)}else{u.forEachFeatureAtPixel(e.pixel,(p,_)=>{if(!(!(p instanceof As)||!this.filter_(p,_)))return(t||s)&&!c.getArray().includes(p)?(this.addFeatureLayerAssociation_(p,_),g.push(p)):(n||s)&&c.getArray().includes(p)&&(d.push(p),this.removeFeatureLayerAssociation_(p)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let p=d.length-1;p>=0;--p)c.remove(d[p]);c.extend(g)}return(g.length>0||d.length>0)&&this.dispatchEvent(new kC(AC.SELECT,g,d,e)),!0}}function FC(){const r=eE();return fn(r.Polygon,r.LineString),fn(r.GeometryCollection,r.LineString),function(e){return e.getGeometry()?r[e.getGeometry().getType()]:null}}function DC(){const[r,e]=Sa.useState(null),[t,n]=Sa.useState(!1),[s,l]=Sa.useState("base"),u=new Wt({image:new Ar({radius:7,fill:new pi({color:"rgba(255, 255, 255, 0.8)"}),stroke:new ci({color:"#ff0066",width:2})})}),c=new Ud({style:u}),d=g=>{l(g);const p=r.getLayers().getArray()[0].getLayers().getArray();g==="base"?(p[0].setVisible(!0),p[1].setVisible(!1)):(p[0].setVisible(!1),p[1].setVisible(!0))};return Sa.useEffect(()=>{if(!r){const g=new jn({center:ld([126.996047,37.5595654],"EPSG:4326","EPSG:3857"),projection:"EPSG:3857",zoom:16,enableRotation:!1}),p=new Im({url:"geojson/point.geojson",format:new Wm({dataProjection:"EPSG:4326"})}),_=new Im({url:"geojson/road.geojson",format:new Wm({dataProjection:"EPSG:4326"})}),y=new mw({target:"map",view:g,layers:[new nr({layers:[new zm({visible:!0,source:new Gm({url:"https://xdworld.vworld.kr/2d/Base/service/{z}/{x}/{y}.png",attributions:" VWORLD 2019 | "})}),new zm({visible:!1,source:new Gm({url:"https://xdworld.vworld.kr/2d/Satellite/service/{z}/{x}/{y}.jpeg",attributions:" VWORLD 2019 | "})})]}),new nr({layers:[new zh({visible:!0,source:_,style:new Wt({stroke:new ci({color:"#4cac61",width:2})})}),new zh({visible:!0,source:p,style:new Wt({image:new Ar({radius:7,fill:new pi({color:"#0066ff"})})})})]})],controls:q_().extend([new uC])});y.addInteraction(c),c.on("select",x=>{console.log(x)}),e(y)}},[]),Ht.jsx("div",{id:"map",children:Ht.jsxs("div",{className:"btn-box",children:[Ht.jsxs("div",{className:`btn ${t?"active":""}`,onClick:()=>n(!t),children:[Ht.jsx("img",{src:"/dgu/images/icMap.svg",alt:"map icon"}),Ht.jsx("p",{children:"Map"})]}),t&&Ht.jsxs("div",{className:"map-box",children:[Ht.jsxs("div",{className:s==="base"?"image-box active":"image-box",onClick:()=>d("base"),children:[Ht.jsx("img",{src:"/dgu/images/base.png",alt:"base"}),Ht.jsx("div",{className:"map-name",children:"Base"})]}),Ht.jsxs("div",{className:s==="satellite"?"image-box active":"image-box",onClick:()=>d("satellite"),children:[Ht.jsx("img",{src:"/dgu/images/satellite.png",alt:"satellite"}),Ht.jsx("div",{className:"map-name",children:"Satellite"})]})]})]})})}m1.createRoot(document.getElementById("root")).render(Ht.jsx(DC,{}));
